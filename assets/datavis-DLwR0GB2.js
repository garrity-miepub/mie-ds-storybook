var by=Object.defineProperty;var wy=(e,t,n)=>t in e?by(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Cy=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Pe=(e,t,n)=>wy(e,typeof t!="symbol"?t+"":t,n);import{r as mc,j}from"./Datavis.stories-ng5y4TVe.js";import{g as xo}from"./index-CbB2H7-v.js";import"./props-D-11tLXy.js";import"./lifecycle-Dq4UX-i8.js";import"./if-DG_9oCP6.js";import"./svelte-component-SNS99v1_.js";import"./iframe-C1rSWbXt.js";import"../sb-preview/runtime.js";import"./index-client-QvcM8E6w.js";import"./render-B6mKzPQC.js";import"./events-ef7BX3Ie.js";import"./index-DPS9-N-h.js";var rO=Cy((_O,tl)=>{var Yd={};/*!
 * jQuery blockUI plugin
 * Version 2.70.0-2014.11.23
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */var zd;function Ey(){return zd||(zd=1,function(e){(function(){function t(n){n.fn._fadeIn=n.fn.fadeIn;var i=n.noop||function(){},r=/MSIE/.test(navigator.userAgent),s=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),a=n.isFunction(document.createElement("div").style.setExpression);n.blockUI=function(b){u(window,b)},n.unblockUI=function(b){f(window,b)},n.growlUI=function(b,w,T,x){var D=n('<div class="growlUI"></div>');b&&D.append("<h1>"+b+"</h1>"),w&&D.append("<h2>"+w+"</h2>"),T===void 0&&(T=3e3);var O=function(R){R=R||{},n.blockUI({message:D,fadeIn:typeof R.fadeIn<"u"?R.fadeIn:700,fadeOut:typeof R.fadeOut<"u"?R.fadeOut:1e3,timeout:typeof R.timeout<"u"?R.timeout:T,centerY:!1,showOverlay:!1,onUnblock:x,css:n.blockUI.defaults.growlCSS})};O(),D.css("opacity"),D.mouseover(function(){O({fadeIn:0,timeout:3e4});var R=n(".blockMsg");R.stop(),R.fadeTo(300,1)}).mouseout(function(){n(".blockMsg").fadeOut(1e3)})},n.fn.block=function(b){if(this[0]===window)return n.blockUI(b),this;var w=n.extend({},n.blockUI.defaults,b||{});return this.each(function(){var T=n(this);w.ignoreIfBlocked&&T.data("blockUI.isBlocked")||T.unblock({fadeOut:0})}),this.each(function(){n.css(this,"position")=="static"&&(this.style.position="relative",n(this).data("blockUI.static",!0)),this.style.zoom=1,u(this,b)})},n.fn.unblock=function(b){return this[0]===window?(n.unblockUI(b),this):this.each(function(){f(this,b)})},n.blockUI.version=2.7,n.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var l=null,c=[];function u(b,w){var T,x,D=b==window,O=w&&w.message!==void 0?w.message:void 0;if(w=n.extend({},n.blockUI.defaults,w||{}),!(w.ignoreIfBlocked&&n(b).data("blockUI.isBlocked"))){if(w.overlayCSS=n.extend({},n.blockUI.defaults.overlayCSS,w.overlayCSS||{}),T=n.extend({},n.blockUI.defaults.css,w.css||{}),w.onOverlayClick&&(w.overlayCSS.cursor="pointer"),x=n.extend({},n.blockUI.defaults.themedCSS,w.themedCSS||{}),O=O===void 0?w.message:O,D&&l&&f(window,{fadeOut:0}),O&&typeof O!="string"&&(O.parentNode||O.jquery)){var R=O.jquery?O[0]:O,I={};n(b).data("blockUI.history",I),I.el=R,I.parent=R.parentNode,I.display=R.style.display,I.position=R.style.position,I.parent&&I.parent.removeChild(R)}n(b).data("blockUI.onUnblock",w.onUnblock);var P=w.baseZ,M,B,z,te;r||w.forceIframe?M=n('<iframe class="blockUI" style="z-index:'+P+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+w.iframeSrc+'"></iframe>'):M=n('<div class="blockUI" style="display:none"></div>'),w.theme?B=n('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+P+++';display:none"></div>'):B=n('<div class="blockUI blockOverlay" style="z-index:'+P+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),w.theme&&D?(te='<div class="blockUI '+w.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(P+10)+';display:none;position:fixed">',w.title&&(te+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(w.title||"&nbsp;")+"</div>"),te+='<div class="ui-widget-content ui-dialog-content"></div>',te+="</div>"):w.theme?(te='<div class="blockUI '+w.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(P+10)+';display:none;position:absolute">',w.title&&(te+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(w.title||"&nbsp;")+"</div>"),te+='<div class="ui-widget-content ui-dialog-content"></div>',te+="</div>"):D?te='<div class="blockUI '+w.blockMsgClass+' blockPage" style="z-index:'+(P+10)+';display:none;position:fixed"></div>':te='<div class="blockUI '+w.blockMsgClass+' blockElement" style="z-index:'+(P+10)+';display:none;position:absolute"></div>',z=n(te),O&&(w.theme?(z.css(x),z.addClass("ui-widget-content")):z.css(T)),w.theme||B.css(w.overlayCSS),B.css("position",D?"fixed":"absolute"),(r||w.forceIframe)&&M.css("opacity",0);var pe=[M,B,z],Ce=n(D?"body":b);n.each(pe,function(){this.appendTo(Ce)}),w.theme&&w.draggable&&n.fn.draggable&&z.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var Oe=a&&(!n.support.boxModel||n("object,embed",D?null:b).length>0);if(s||Oe){if(D&&w.allowBodyStretch&&n.support.boxModel&&n("html,body").css("height","100%"),(s||!n.support.boxModel)&&!D)var ve=E(b,"borderTopWidth"),ne=E(b,"borderLeftWidth"),V=ve?"(0 - "+ve+")":0,fe=ne?"(0 - "+ne+")":0;n.each(pe,function(Le,He){var We=He[0].style;if(We.position="absolute",Le<2)D?We.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+w.quirksmodeOffsetHack+') + "px"'):We.setExpression("height",'this.parentNode.offsetHeight + "px"'),D?We.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):We.setExpression("width",'this.parentNode.offsetWidth + "px"'),fe&&We.setExpression("left",fe),V&&We.setExpression("top",V);else if(w.centerY)D&&We.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),We.marginTop=0;else if(!w.centerY&&D){var Ye=w.css&&w.css.top?parseInt(w.css.top,10):0,Re="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+Ye+') + "px"';We.setExpression("top",Re)}})}if(O&&(w.theme?z.find(".ui-widget-content").append(O):z.append(O),(O.jquery||O.nodeType)&&n(O).show()),(r||w.forceIframe)&&w.showOverlay&&M.show(),w.fadeIn){var ye=w.onBlock?w.onBlock:i,ue=w.showOverlay&&!O?ye:i,Ie=O?ye:i;w.showOverlay&&B._fadeIn(w.fadeIn,ue),O&&z._fadeIn(w.fadeIn,Ie)}else w.showOverlay&&B.show(),O&&z.show(),w.onBlock&&w.onBlock.bind(z)();if(g(1,b,w),D?(l=z[0],c=n(w.focusableElements,l),w.focusInput&&setTimeout(v,20)):y(z[0],w.centerX,w.centerY),w.timeout){var ce=setTimeout(function(){D?n.unblockUI(w):n(b).unblock(w)},w.timeout);n(b).data("blockUI.timeout",ce)}}}function f(b,w){var T,x=b==window,D=n(b),O=D.data("blockUI.history"),R=D.data("blockUI.timeout");R&&(clearTimeout(R),D.removeData("blockUI.timeout")),w=n.extend({},n.blockUI.defaults,w||{}),g(0,b,w),w.onUnblock===null&&(w.onUnblock=D.data("blockUI.onUnblock"),D.removeData("blockUI.onUnblock"));var I;x?I=n("body").children().filter(".blockUI").add("body > .blockUI"):I=D.find(">.blockUI"),w.cursorReset&&(I.length>1&&(I[1].style.cursor=w.cursorReset),I.length>2&&(I[2].style.cursor=w.cursorReset)),x&&(l=c=null),w.fadeOut?(T=I.length,I.stop().fadeOut(w.fadeOut,function(){--T===0&&m(I,O,w,b)})):m(I,O,w,b)}function m(b,w,T,x){var D=n(x);if(!D.data("blockUI.isBlocked")){b.each(function(P,M){this.parentNode&&this.parentNode.removeChild(this)}),w&&w.el&&(w.el.style.display=w.display,w.el.style.position=w.position,w.el.style.cursor="default",w.parent&&w.parent.appendChild(w.el),D.removeData("blockUI.history")),D.data("blockUI.static")&&D.css("position","static"),typeof T.onUnblock=="function"&&T.onUnblock(x,T);var O=n(document.body),R=O.width(),I=O[0].style.width;O.width(R-1).width(R),O[0].style.width=I}}function g(b,w,T){var x=w==window,D=n(w);if(!(!b&&(x&&!l||!x&&!D.data("blockUI.isBlocked")))&&(D.data("blockUI.isBlocked",b),!(!x||!T.bindEvents||b&&!T.showOverlay))){var O="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";b?n(document).bind(O,T,h):n(document).unbind(O,h)}}function h(b){if(b.type==="keydown"&&b.keyCode&&b.keyCode==9&&l&&b.data.constrainTabKey){var w=c,T=!b.shiftKey&&b.target===w[w.length-1],x=b.shiftKey&&b.target===w[0];if(T||x)return setTimeout(function(){v(x)},10),!1}var D=b.data,O=n(b.target);return O.hasClass("blockOverlay")&&D.onOverlayClick&&D.onOverlayClick(b),O.parents("div."+D.blockMsgClass).length>0?!0:O.parents().children().filter("div.blockUI").length===0}function v(b){if(c){var w=c[b===!0?c.length-1:0];w&&w.focus()}}function y(b,w,T){var x=b.parentNode,D=b.style,O=(x.offsetWidth-b.offsetWidth)/2-E(x,"borderLeftWidth"),R=(x.offsetHeight-b.offsetHeight)/2-E(x,"borderTopWidth");w&&(D.left=O>0?O+"px":"0"),T&&(D.top=R>0?R+"px":"0")}function E(b,w){return parseInt(n.css(b,w),10)||0}}t(mc())})()}()),Yd}Ey();var nu=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],is={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return typeof console<"u"&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},so={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},wn=function(e,t){return t===void 0&&(t=2),("000"+e).slice(t*-1)},Bn=function(e){return e===!0?1:0};function qd(e,t){var n;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){return e.apply(i,r)},t)}}var iu=function(e){return e instanceof Array?e:[e]};function fn(e,t,n){if(n===!0)return e.classList.add(t);e.classList.remove(t)}function _t(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,n!==void 0&&(i.textContent=n),i}function qo(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Np(e,t){if(t(e))return e;if(e.parentNode)return Np(e.parentNode,t)}function Qo(e,t){var n=_t("div","numInputWrapper"),i=_t("input","numInput "+e),r=_t("span","arrowUp"),s=_t("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),t!==void 0)for(var a in t)i.setAttribute(a,t[a]);return n.appendChild(i),n.appendChild(r),n.appendChild(s),n}function Sn(e){try{if(typeof e.composedPath=="function"){var t=e.composedPath();return t[0]}return e.target}catch{return e.target}}var ru=function(){},nl=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},xy={D:ru,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*Bn(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(parseFloat(t)*1e3)},W:function(e,t,n){var i=parseInt(t),r=new Date(e.getFullYear(),0,2+(i-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+n.firstDayOfWeek),r},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:ru,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:ru,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},Dr={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Xs={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[Xs.w(e,t,n)]},F:function(e,t,n){return nl(Xs.n(e,t,n)-1,!1,t)},G:function(e,t,n){return wn(Xs.h(e,t,n))},H:function(e){return wn(e.getHours())},J:function(e,t){return t.ordinal!==void 0?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[Bn(e.getHours()>11)]},M:function(e,t){return nl(e.getMonth(),!0,t)},S:function(e){return wn(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return wn(e.getFullYear(),4)},d:function(e){return wn(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return wn(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return wn(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},Lp=function(e){var t=e.config,n=t===void 0?is:t,i=e.l10n,r=i===void 0?so:i,s=e.isMobile,a=s===void 0?!1:s;return function(l,c,u){var f=u||r;return n.formatDate!==void 0&&!a?n.formatDate(l,c,f):c.split("").map(function(m,g,h){return Xs[m]&&h[g-1]!=="\\"?Xs[m](l,f,n):m!=="\\"?m:""}).join("")}},Lu=function(e){var t=e.config,n=t===void 0?is:t,i=e.l10n,r=i===void 0?so:i;return function(s,a,l,c){if(!(s!==0&&!s)){var u=c||r,f,m=s;if(s instanceof Date)f=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)f=new Date(s);else if(typeof s=="string"){var g=a||(n||is).dateFormat,h=String(s).trim();if(h==="today")f=new Date,l=!0;else if(n&&n.parseDate)f=n.parseDate(s,g);else if(/Z$/.test(h)||/GMT$/.test(h))f=new Date(s);else{for(var v=void 0,y=[],E=0,b=0,w="";E<g.length;E++){var T=g[E],x=T==="\\",D=g[E-1]==="\\"||x;if(Dr[T]&&!D){w+=Dr[T];var O=new RegExp(w).exec(s);O&&(v=!0)&&y[T!=="Y"?"push":"unshift"]({fn:xy[T],val:O[++b]})}else x||(w+=".")}f=!n||!n.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),y.forEach(function(R){var I=R.fn,P=R.val;return f=I(f,P,u)||f}),f=v?f:void 0}}if(!(f instanceof Date&&!isNaN(f.getTime()))){n.errorHandler(new Error("Invalid date provided: "+m));return}return l===!0&&f.setHours(0,0,0,0),f}}};function On(e,t,n){return n===void 0&&(n=!0),n!==!1?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var Dy=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},su=function(e,t,n){return e*3600+t*60+n},Ty=function(e){var t=Math.floor(e/3600),n=(e-t*3600)/60;return[t,n,e-t*3600-n*60]},Sy={DAY:864e5};function ou(e){var t=e.defaultHour,n=e.defaultMinute,i=e.defaultSeconds;if(e.minDate!==void 0){var r=e.minDate.getHours(),s=e.minDate.getMinutes(),a=e.minDate.getSeconds();t<r&&(t=r),t===r&&n<s&&(n=s),t===r&&n===s&&i<a&&(i=e.minDate.getSeconds())}if(e.maxDate!==void 0){var l=e.maxDate.getHours(),c=e.maxDate.getMinutes();t=Math.min(t,l),t===l&&(n=Math.min(c,n)),t===l&&n===c&&(i=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var i=function(l){l&&Object.keys(l).forEach(function(c){return e[c]=l[c]})},r=0,s=t;r<s.length;r++){var a=s[r];i(a)}return e});var on=function(){return on=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},on.apply(this,arguments)},Qd=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var s=arguments[t],a=0,l=s.length;a<l;a++,r++)i[r]=s[a];return i},ky=300;function Oy(e,t){var n={config:on(on({},is),Qt.defaultConfig),l10n:so};n.parseDate=Lu({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=y,n._setHoursFromDate=g,n._positionCalendar=se,n.changeMonth=ye,n.changeYear=We,n.clear=ue,n.close=Ie,n.onMouseOver=U,n._createElement=_t,n.createDay=O,n.destroy=ce,n.isEnabled=Ye,n.jumpToDate=w,n.updateValue=Te,n.open=K,n.redraw=_e,n.set=o,n.setDate=p,n.toggle=G;function i(){n.utils={getDaysInMonth:function(L,W){return L===void 0&&(L=n.currentMonth),W===void 0&&(W=n.currentYear),L===1&&(W%4===0&&W%100!==0||W%400===0)?29:n.l10n.daysInMonth[L]}}}function r(){n.element=n.input=e,n.isOpen=!1,ie(),ee(),S(),C(),i(),n.isMobile||D(),b(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&g(n.config.noCalendar?n.latestSelectedDateObj:void 0),Te(!1)),l();var L=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&L&&se(),Y("onReady")}function s(){var L;return((L=n.calendarContainer)===null||L===void 0?void 0:L.getRootNode()).activeElement||document.activeElement}function a(L){return L.bind(n)}function l(){var L=n.config;L.weekNumbers===!1&&L.showMonths===1||L.noCalendar!==!0&&window.requestAnimationFrame(function(){if(n.calendarContainer!==void 0&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),n.daysContainer!==void 0){var W=(n.days.offsetWidth+1)*L.showMonths;n.daysContainer.style.width=W+"px",n.calendarContainer.style.width=W+(n.weekWrapper!==void 0?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}})}function c(L){if(n.selectedDates.length===0){var W=n.config.minDate===void 0||On(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),Z=ou(n.config);W.setHours(Z.hours,Z.minutes,Z.seconds,W.getMilliseconds()),n.selectedDates=[W],n.latestSelectedDateObj=W}L!==void 0&&L.type!=="blur"&&ft(L);var oe=n._input.value;m(),Te(),n._input.value!==oe&&n._debouncedChange()}function u(L,W){return L%12+12*Bn(W===n.l10n.amPM[1])}function f(L){switch(L%24){case 0:case 12:return 12;default:return L%12}}function m(){if(!(n.hourElement===void 0||n.minuteElement===void 0)){var L=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,W=(parseInt(n.minuteElement.value,10)||0)%60,Z=n.secondElement!==void 0?(parseInt(n.secondElement.value,10)||0)%60:0;n.amPM!==void 0&&(L=u(L,n.amPM.textContent));var oe=n.config.minTime!==void 0||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&On(n.latestSelectedDateObj,n.config.minDate,!0)===0,be=n.config.maxTime!==void 0||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&On(n.latestSelectedDateObj,n.config.maxDate,!0)===0;if(n.config.maxTime!==void 0&&n.config.minTime!==void 0&&n.config.minTime>n.config.maxTime){var ke=su(n.config.minTime.getHours(),n.config.minTime.getMinutes(),n.config.minTime.getSeconds()),Ve=su(n.config.maxTime.getHours(),n.config.maxTime.getMinutes(),n.config.maxTime.getSeconds()),Me=su(L,W,Z);if(Me>Ve&&Me<ke){var Je=Ty(ke);L=Je[0],W=Je[1],Z=Je[2]}}else{if(be){var xe=n.config.maxTime!==void 0?n.config.maxTime:n.config.maxDate;L=Math.min(L,xe.getHours()),L===xe.getHours()&&(W=Math.min(W,xe.getMinutes())),W===xe.getMinutes()&&(Z=Math.min(Z,xe.getSeconds()))}if(oe){var ze=n.config.minTime!==void 0?n.config.minTime:n.config.minDate;L=Math.max(L,ze.getHours()),L===ze.getHours()&&W<ze.getMinutes()&&(W=ze.getMinutes()),W===ze.getMinutes()&&(Z=Math.max(Z,ze.getSeconds()))}}h(L,W,Z)}}function g(L){var W=L||n.latestSelectedDateObj;W&&W instanceof Date&&h(W.getHours(),W.getMinutes(),W.getSeconds())}function h(L,W,Z){n.latestSelectedDateObj!==void 0&&n.latestSelectedDateObj.setHours(L%24,W,Z||0,0),!(!n.hourElement||!n.minuteElement||n.isMobile)&&(n.hourElement.value=wn(n.config.time_24hr?L:(12+L)%12+12*Bn(L%12===0)),n.minuteElement.value=wn(W),n.amPM!==void 0&&(n.amPM.textContent=n.l10n.amPM[Bn(L>=12)]),n.secondElement!==void 0&&(n.secondElement.value=wn(Z)))}function v(L){var W=Sn(L),Z=parseInt(W.value)+(L.delta||0);(Z/1e3>1||L.key==="Enter"&&!/[^\d]/.test(Z.toString()))&&We(Z)}function y(L,W,Z,oe){if(W instanceof Array)return W.forEach(function(be){return y(L,be,Z,oe)});if(L instanceof Array)return L.forEach(function(be){return y(be,W,Z,oe)});L.addEventListener(W,Z,oe),n._handlers.push({remove:function(){return L.removeEventListener(W,Z,oe)}})}function E(){Y("onChange")}function b(){if(n.config.wrap&&["open","close","toggle","clear"].forEach(function(Z){Array.prototype.forEach.call(n.element.querySelectorAll("[data-"+Z+"]"),function(oe){return y(oe,"click",n[Z])})}),n.isMobile){N();return}var L=qd(J,50);if(n._debouncedChange=qd(E,ky),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&y(n.daysContainer,"mouseover",function(Z){n.config.mode==="range"&&U(Sn(Z))}),y(n._input,"keydown",H),n.calendarContainer!==void 0&&y(n.calendarContainer,"keydown",H),!n.config.inline&&!n.config.static&&y(window,"resize",L),window.ontouchstart!==void 0?y(window.document,"touchstart",He):y(window.document,"mousedown",He),y(window.document,"focus",He,{capture:!0}),n.config.clickOpens===!0&&(y(n._input,"focus",n.open),y(n._input,"click",n.open)),n.daysContainer!==void 0&&(y(n.monthNav,"click",Ue),y(n.monthNav,["keyup","increment"],v),y(n.daysContainer,"click",qe)),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0){var W=function(Z){return Sn(Z).select()};y(n.timeContainer,["increment"],c),y(n.timeContainer,"blur",c,{capture:!0}),y(n.timeContainer,"click",T),y([n.hourElement,n.minuteElement],["focus","click"],W),n.secondElement!==void 0&&y(n.secondElement,"focus",function(){return n.secondElement&&n.secondElement.select()}),n.amPM!==void 0&&y(n.amPM,"click",function(Z){c(Z)})}n.config.allowInput&&y(n._input,"blur",F)}function w(L,W){var Z=L!==void 0?n.parseDate(L):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),oe=n.currentYear,be=n.currentMonth;try{Z!==void 0&&(n.currentYear=Z.getFullYear(),n.currentMonth=Z.getMonth())}catch(ke){ke.message="Invalid date supplied: "+Z,n.config.errorHandler(ke)}W&&n.currentYear!==oe&&(Y("onYearChange"),te()),W&&(n.currentYear!==oe||n.currentMonth!==be)&&Y("onMonthChange"),n.redraw()}function T(L){var W=Sn(L);~W.className.indexOf("arrow")&&x(L,W.classList.contains("arrowUp")?1:-1)}function x(L,W,Z){var oe=L&&Sn(L),be=Z||oe&&oe.parentNode&&oe.parentNode.firstChild,ke=X("increment");ke.delta=W,be&&be.dispatchEvent(ke)}function D(){var L=window.document.createDocumentFragment();if(n.calendarContainer=_t("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(L.appendChild(Oe()),n.innerContainer=_t("div","flatpickr-innerContainer"),n.config.weekNumbers){var W=fe(),Z=W.weekWrapper,oe=W.weekNumbers;n.innerContainer.appendChild(Z),n.weekNumbers=oe,n.weekWrapper=Z}n.rContainer=_t("div","flatpickr-rContainer"),n.rContainer.appendChild(ne()),n.daysContainer||(n.daysContainer=_t("div","flatpickr-days"),n.daysContainer.tabIndex=-1),z(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),L.appendChild(n.innerContainer)}n.config.enableTime&&L.appendChild(ve()),fn(n.calendarContainer,"rangeMode",n.config.mode==="range"),fn(n.calendarContainer,"animate",n.config.animate===!0),fn(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(L);var be=n.config.appendTo!==void 0&&n.config.appendTo.nodeType!==void 0;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!be&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):n.config.appendTo!==void 0&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var ke=_t("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(ke,n.element),ke.appendChild(n.element),n.altInput&&ke.appendChild(n.altInput),ke.appendChild(n.calendarContainer)}!n.config.static&&!n.config.inline&&(n.config.appendTo!==void 0?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}function O(L,W,Z,oe){var be=Ye(W,!0),ke=_t("span",L,W.getDate().toString());return ke.dateObj=W,ke.$i=oe,ke.setAttribute("aria-label",n.formatDate(W,n.config.ariaDateFormat)),L.indexOf("hidden")===-1&&On(W,n.now)===0&&(n.todayDateElem=ke,ke.classList.add("today"),ke.setAttribute("aria-current","date")),be?(ke.tabIndex=-1,$(W)&&(ke.classList.add("selected"),n.selectedDateElem=ke,n.config.mode==="range"&&(fn(ke,"startRange",n.selectedDates[0]&&On(W,n.selectedDates[0],!0)===0),fn(ke,"endRange",n.selectedDates[1]&&On(W,n.selectedDates[1],!0)===0),L==="nextMonthDay"&&ke.classList.add("inRange")))):ke.classList.add("flatpickr-disabled"),n.config.mode==="range"&&he(W)&&!$(W)&&ke.classList.add("inRange"),n.weekNumbers&&n.config.showMonths===1&&L!=="prevMonthDay"&&oe%7===6&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(W)+"</span>"),Y("onDayCreate",ke),ke}function R(L){L.focus(),n.config.mode==="range"&&U(L)}function I(L){for(var W=L>0?0:n.config.showMonths-1,Z=L>0?n.config.showMonths:-1,oe=W;oe!=Z;oe+=L)for(var be=n.daysContainer.children[oe],ke=L>0?0:be.children.length-1,Ve=L>0?be.children.length:-1,Me=ke;Me!=Ve;Me+=L){var Je=be.children[Me];if(Je.className.indexOf("hidden")===-1&&Ye(Je.dateObj))return Je}}function P(L,W){for(var Z=L.className.indexOf("Month")===-1?L.dateObj.getMonth():n.currentMonth,oe=W>0?n.config.showMonths:-1,be=W>0?1:-1,ke=Z-n.currentMonth;ke!=oe;ke+=be)for(var Ve=n.daysContainer.children[ke],Me=Z-n.currentMonth===ke?L.$i+W:W<0?Ve.children.length-1:0,Je=Ve.children.length,xe=Me;xe>=0&&xe<Je&&xe!=(W>0?Je:-1);xe+=be){var ze=Ve.children[xe];if(ze.className.indexOf("hidden")===-1&&Ye(ze.dateObj)&&Math.abs(L.$i-xe)>=Math.abs(W))return R(ze)}n.changeMonth(be),M(I(be),0)}function M(L,W){var Z=s(),oe=Re(Z||document.body),be=L!==void 0?L:oe?Z:n.selectedDateElem!==void 0&&Re(n.selectedDateElem)?n.selectedDateElem:n.todayDateElem!==void 0&&Re(n.todayDateElem)?n.todayDateElem:I(W>0?1:-1);be===void 0?n._input.focus():oe?P(be,W):R(be)}function B(L,W){for(var Z=(new Date(L,W,1).getDay()-n.l10n.firstDayOfWeek+7)%7,oe=n.utils.getDaysInMonth((W-1+12)%12,L),be=n.utils.getDaysInMonth(W,L),ke=window.document.createDocumentFragment(),Ve=n.config.showMonths>1,Me=Ve?"prevMonthDay hidden":"prevMonthDay",Je=Ve?"nextMonthDay hidden":"nextMonthDay",xe=oe+1-Z,ze=0;xe<=oe;xe++,ze++)ke.appendChild(O("flatpickr-day "+Me,new Date(L,W-1,xe),xe,ze));for(xe=1;xe<=be;xe++,ze++)ke.appendChild(O("flatpickr-day",new Date(L,W,xe),xe,ze));for(var ot=be+1;ot<=42-Z&&(n.config.showMonths===1||ze%7!==0);ot++,ze++)ke.appendChild(O("flatpickr-day "+Je,new Date(L,W+1,ot%be),ot,ze));var nn=_t("div","dayContainer");return nn.appendChild(ke),nn}function z(){if(n.daysContainer!==void 0){qo(n.daysContainer),n.weekNumbers&&qo(n.weekNumbers);for(var L=document.createDocumentFragment(),W=0;W<n.config.showMonths;W++){var Z=new Date(n.currentYear,n.currentMonth,1);Z.setMonth(n.currentMonth+W),L.appendChild(B(Z.getFullYear(),Z.getMonth()))}n.daysContainer.appendChild(L),n.days=n.daysContainer.firstChild,n.config.mode==="range"&&n.selectedDates.length===1&&U()}}function te(){if(!(n.config.showMonths>1||n.config.monthSelectorType!=="dropdown")){var L=function(oe){return n.config.minDate!==void 0&&n.currentYear===n.config.minDate.getFullYear()&&oe<n.config.minDate.getMonth()?!1:!(n.config.maxDate!==void 0&&n.currentYear===n.config.maxDate.getFullYear()&&oe>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var W=0;W<12;W++)if(L(W)){var Z=_t("option","flatpickr-monthDropdown-month");Z.value=new Date(n.currentYear,W).getMonth().toString(),Z.textContent=nl(W,n.config.shorthandCurrentMonth,n.l10n),Z.tabIndex=-1,n.currentMonth===W&&(Z.selected=!0),n.monthsDropdownContainer.appendChild(Z)}}}function pe(){var L=_t("div","flatpickr-month"),W=window.document.createDocumentFragment(),Z;n.config.showMonths>1||n.config.monthSelectorType==="static"?Z=_t("span","cur-month"):(n.monthsDropdownContainer=_t("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),y(n.monthsDropdownContainer,"change",function(Ve){var Me=Sn(Ve),Je=parseInt(Me.value,10);n.changeMonth(Je-n.currentMonth),Y("onMonthChange")}),te(),Z=n.monthsDropdownContainer);var oe=Qo("cur-year",{tabindex:"-1"}),be=oe.getElementsByTagName("input")[0];be.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&be.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(be.setAttribute("max",n.config.maxDate.getFullYear().toString()),be.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var ke=_t("div","flatpickr-current-month");return ke.appendChild(Z),ke.appendChild(oe),W.appendChild(ke),L.appendChild(W),{container:L,yearElement:be,monthElement:Z}}function Ce(){qo(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var L=n.config.showMonths;L--;){var W=pe();n.yearElements.push(W.yearElement),n.monthElements.push(W.monthElement),n.monthNav.appendChild(W.container)}n.monthNav.appendChild(n.nextMonthNav)}function Oe(){return n.monthNav=_t("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=_t("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=_t("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,Ce(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(L){n.__hidePrevMonthArrow!==L&&(fn(n.prevMonthNav,"flatpickr-disabled",L),n.__hidePrevMonthArrow=L)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(L){n.__hideNextMonthArrow!==L&&(fn(n.nextMonthNav,"flatpickr-disabled",L),n.__hideNextMonthArrow=L)}}),n.currentYearElement=n.yearElements[0],we(),n.monthNav}function ve(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var L=ou(n.config);n.timeContainer=_t("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var W=_t("span","flatpickr-time-separator",":"),Z=Qo("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=Z.getElementsByTagName("input")[0];var oe=Qo("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=oe.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=wn(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?L.hours:f(L.hours)),n.minuteElement.value=wn(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():L.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(Z),n.timeContainer.appendChild(W),n.timeContainer.appendChild(oe),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var be=Qo("flatpickr-second");n.secondElement=be.getElementsByTagName("input")[0],n.secondElement.value=wn(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():L.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(_t("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(be)}return n.config.time_24hr||(n.amPM=_t("span","flatpickr-am-pm",n.l10n.amPM[Bn((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}function ne(){n.weekdayContainer?qo(n.weekdayContainer):n.weekdayContainer=_t("div","flatpickr-weekdays");for(var L=n.config.showMonths;L--;){var W=_t("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(W)}return V(),n.weekdayContainer}function V(){if(n.weekdayContainer){var L=n.l10n.firstDayOfWeek,W=Qd(n.l10n.weekdays.shorthand);L>0&&L<W.length&&(W=Qd(W.splice(L,W.length),W.splice(0,L)));for(var Z=n.config.showMonths;Z--;)n.weekdayContainer.children[Z].innerHTML=`
      <span class='flatpickr-weekday'>
        `+W.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function fe(){n.calendarContainer.classList.add("hasWeeks");var L=_t("div","flatpickr-weekwrapper");L.appendChild(_t("span","flatpickr-weekday",n.l10n.weekAbbreviation));var W=_t("div","flatpickr-weeks");return L.appendChild(W),{weekWrapper:L,weekNumbers:W}}function ye(L,W){W===void 0&&(W=!0);var Z=W?L:L-n.currentMonth;Z<0&&n._hidePrevMonthArrow===!0||Z>0&&n._hideNextMonthArrow===!0||(n.currentMonth+=Z,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,Y("onYearChange"),te()),z(),Y("onMonthChange"),we())}function ue(L,W){if(L===void 0&&(L=!0),W===void 0&&(W=!0),n.input.value="",n.altInput!==void 0&&(n.altInput.value=""),n.mobileInput!==void 0&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,W===!0&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),n.config.enableTime===!0){var Z=ou(n.config),oe=Z.hours,be=Z.minutes,ke=Z.seconds;h(oe,be,ke)}n.redraw(),L&&Y("onChange")}function Ie(){n.isOpen=!1,n.isMobile||(n.calendarContainer!==void 0&&n.calendarContainer.classList.remove("open"),n._input!==void 0&&n._input.classList.remove("active")),Y("onClose")}function ce(){n.config!==void 0&&Y("onDestroy");for(var L=n._handlers.length;L--;)n._handlers[L].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var W=n.calendarContainer.parentNode;if(W.lastChild&&W.removeChild(W.lastChild),W.parentNode){for(;W.firstChild;)W.parentNode.insertBefore(W.firstChild,W);W.parentNode.removeChild(W)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(Z){try{delete n[Z]}catch{}})}function Le(L){return n.calendarContainer.contains(L)}function He(L){if(n.isOpen&&!n.config.inline){var W=Sn(L),Z=Le(W),oe=W===n.input||W===n.altInput||n.element.contains(W)||L.path&&L.path.indexOf&&(~L.path.indexOf(n.input)||~L.path.indexOf(n.altInput)),be=!oe&&!Z&&!Le(L.relatedTarget),ke=!n.config.ignoredFocusElements.some(function(Ve){return Ve.contains(W)});be&&ke&&(n.config.allowInput&&n.setDate(n._input.value,!1,n.config.altInput?n.config.altFormat:n.config.dateFormat),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0&&n.input.value!==""&&n.input.value!==void 0&&c(),n.close(),n.config&&n.config.mode==="range"&&n.selectedDates.length===1&&n.clear(!1))}}function We(L){if(!(!L||n.config.minDate&&L<n.config.minDate.getFullYear()||n.config.maxDate&&L>n.config.maxDate.getFullYear())){var W=L,Z=n.currentYear!==W;n.currentYear=W||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),Z&&(n.redraw(),Y("onYearChange"),te())}}function Ye(L,W){var Z;W===void 0&&(W=!0);var oe=n.parseDate(L,void 0,W);if(n.config.minDate&&oe&&On(oe,n.config.minDate,W!==void 0?W:!n.minDateHasTime)<0||n.config.maxDate&&oe&&On(oe,n.config.maxDate,W!==void 0?W:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&n.config.disable.length===0)return!0;if(oe===void 0)return!1;for(var be=!!n.config.enable,ke=(Z=n.config.enable)!==null&&Z!==void 0?Z:n.config.disable,Ve=0,Me=void 0;Ve<ke.length;Ve++){if(Me=ke[Ve],typeof Me=="function"&&Me(oe))return be;if(Me instanceof Date&&oe!==void 0&&Me.getTime()===oe.getTime())return be;if(typeof Me=="string"){var Je=n.parseDate(Me,void 0,!0);return Je&&Je.getTime()===oe.getTime()?be:!be}else if(typeof Me=="object"&&oe!==void 0&&Me.from&&Me.to&&oe.getTime()>=Me.from.getTime()&&oe.getTime()<=Me.to.getTime())return be}return!be}function Re(L){return n.daysContainer!==void 0?L.className.indexOf("hidden")===-1&&L.className.indexOf("flatpickr-disabled")===-1&&n.daysContainer.contains(L):!1}function F(L){var W=L.target===n._input,Z=n._input.value.trimEnd()!==Fe();W&&Z&&!(L.relatedTarget&&Le(L.relatedTarget))&&n.setDate(n._input.value,!0,L.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function H(L){var W=Sn(L),Z=n.config.wrap?e.contains(W):W===n._input,oe=n.config.allowInput,be=n.isOpen&&(!oe||!Z),ke=n.config.inline&&Z&&!oe;if(L.keyCode===13&&Z){if(oe)return n.setDate(n._input.value,!0,W===n.altInput?n.config.altFormat:n.config.dateFormat),n.close(),W.blur();n.open()}else if(Le(W)||be||ke){var Ve=!!n.timeContainer&&n.timeContainer.contains(W);switch(L.keyCode){case 13:Ve?(L.preventDefault(),c(),Se()):qe(L);break;case 27:L.preventDefault(),Se();break;case 8:case 46:Z&&!n.config.allowInput&&(L.preventDefault(),n.clear());break;case 37:case 39:if(!Ve&&!Z){L.preventDefault();var Me=s();if(n.daysContainer!==void 0&&(oe===!1||Me&&Re(Me))){var Je=L.keyCode===39?1:-1;L.ctrlKey?(L.stopPropagation(),ye(Je),M(I(1),0)):M(void 0,Je)}}else n.hourElement&&n.hourElement.focus();break;case 38:case 40:L.preventDefault();var xe=L.keyCode===40?1:-1;n.daysContainer&&W.$i!==void 0||W===n.input||W===n.altInput?L.ctrlKey?(L.stopPropagation(),We(n.currentYear-xe),M(I(1),0)):Ve||M(void 0,xe*7):W===n.currentYearElement?We(n.currentYear-xe):n.config.enableTime&&(!Ve&&n.hourElement&&n.hourElement.focus(),c(L),n._debouncedChange());break;case 9:if(Ve){var ze=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter(function(jt){return jt}),ot=ze.indexOf(W);if(ot!==-1){var nn=ze[ot+(L.shiftKey?-1:1)];L.preventDefault(),(nn||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(W)&&L.shiftKey&&(L.preventDefault(),n._input.focus());break}}if(n.amPM!==void 0&&W===n.amPM)switch(L.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],m(),Te();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],m(),Te();break}(Z||Le(W))&&Y("onKeyDown",L)}function U(L,W){if(W===void 0&&(W="flatpickr-day"),!(n.selectedDates.length!==1||L&&(!L.classList.contains(W)||L.classList.contains("flatpickr-disabled")))){for(var Z=L?L.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),oe=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),be=Math.min(Z,n.selectedDates[0].getTime()),ke=Math.max(Z,n.selectedDates[0].getTime()),Ve=!1,Me=0,Je=0,xe=be;xe<ke;xe+=Sy.DAY)Ye(new Date(xe),!0)||(Ve=Ve||xe>be&&xe<ke,xe<oe&&(!Me||xe>Me)?Me=xe:xe>oe&&(!Je||xe<Je)&&(Je=xe));var ze=Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+W));ze.forEach(function(ot){var nn=ot.dateObj,jt=nn.getTime(),oi=Me>0&&jt<Me||Je>0&&jt>Je;if(oi){ot.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(ai){ot.classList.remove(ai)});return}else if(Ve&&!oi)return;["startRange","inRange","endRange","notAllowed"].forEach(function(ai){ot.classList.remove(ai)}),L!==void 0&&(L.classList.add(Z<=n.selectedDates[0].getTime()?"startRange":"endRange"),oe<Z&&jt===oe?ot.classList.add("startRange"):oe>Z&&jt===oe&&ot.classList.add("endRange"),jt>=Me&&(Je===0||jt<=Je)&&Dy(jt,oe,Z)&&ot.classList.add("inRange"))})}}function J(){n.isOpen&&!n.config.static&&!n.config.inline&&se()}function K(L,W){if(W===void 0&&(W=n._positionElement),n.isMobile===!0){if(L){L.preventDefault();var Z=Sn(L);Z&&Z.blur()}n.mobileInput!==void 0&&(n.mobileInput.focus(),n.mobileInput.click()),Y("onOpen");return}else if(n._input.disabled||n.config.inline)return;var oe=n.isOpen;n.isOpen=!0,oe||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),Y("onOpen"),se(W)),n.config.enableTime===!0&&n.config.noCalendar===!0&&n.config.allowInput===!1&&(L===void 0||!n.timeContainer.contains(L.relatedTarget))&&setTimeout(function(){return n.hourElement.select()},50)}function q(L){return function(W){var Z=n.config["_"+L+"Date"]=n.parseDate(W,n.config.dateFormat),oe=n.config["_"+(L==="min"?"max":"min")+"Date"];Z!==void 0&&(n[L==="min"?"minDateHasTime":"maxDateHasTime"]=Z.getHours()>0||Z.getMinutes()>0||Z.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter(function(be){return Ye(be)}),!n.selectedDates.length&&L==="min"&&g(Z),Te()),n.daysContainer&&(_e(),Z!==void 0?n.currentYearElement[L]=Z.getFullYear().toString():n.currentYearElement.removeAttribute(L),n.currentYearElement.disabled=!!oe&&Z!==void 0&&oe.getFullYear()===Z.getFullYear())}}function ie(){var L=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],W=on(on({},JSON.parse(JSON.stringify(e.dataset||{}))),t),Z={};n.config.parseDate=W.parseDate,n.config.formatDate=W.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(ze){n.config._enable=_(ze)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(ze){n.config._disable=_(ze)}});var oe=W.mode==="time";if(!W.dateFormat&&(W.enableTime||oe)){var be=Qt.defaultConfig.dateFormat||is.dateFormat;Z.dateFormat=W.noCalendar||oe?"H:i"+(W.enableSeconds?":S":""):be+" H:i"+(W.enableSeconds?":S":"")}if(W.altInput&&(W.enableTime||oe)&&!W.altFormat){var ke=Qt.defaultConfig.altFormat||is.altFormat;Z.altFormat=W.noCalendar||oe?"h:i"+(W.enableSeconds?":S K":" K"):ke+(" h:i"+(W.enableSeconds?":S":"")+" K")}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:q("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:q("max")});var Ve=function(ze){return function(ot){n.config[ze==="min"?"_minTime":"_maxTime"]=n.parseDate(ot,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:Ve("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:Ve("max")}),W.mode==="time"&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,Z,W);for(var Me=0;Me<L.length;Me++)n.config[L[Me]]=n.config[L[Me]]===!0||n.config[L[Me]]==="true";nu.filter(function(ze){return n.config[ze]!==void 0}).forEach(function(ze){n.config[ze]=iu(n.config[ze]||[]).map(a)}),n.isMobile=!n.config.disableMobile&&!n.config.inline&&n.config.mode==="single"&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Me=0;Me<n.config.plugins.length;Me++){var Je=n.config.plugins[Me](n)||{};for(var xe in Je)nu.indexOf(xe)>-1?n.config[xe]=iu(Je[xe]).map(a).concat(n.config[xe]):typeof W[xe]>"u"&&(n.config[xe]=Je[xe])}W.altInputClass||(n.config.altInputClass=Q().className+" "+n.config.altInputClass),Y("onParseConfig")}function Q(){return n.config.wrap?e.querySelector("[data-input]"):e}function ee(){typeof n.config.locale!="object"&&typeof Qt.l10ns[n.config.locale]>"u"&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=on(on({},Qt.l10ns.default),typeof n.config.locale=="object"?n.config.locale:n.config.locale!=="default"?Qt.l10ns[n.config.locale]:void 0),Dr.D="("+n.l10n.weekdays.shorthand.join("|")+")",Dr.l="("+n.l10n.weekdays.longhand.join("|")+")",Dr.M="("+n.l10n.months.shorthand.join("|")+")",Dr.F="("+n.l10n.months.longhand.join("|")+")",Dr.K="("+n.l10n.amPM[0]+"|"+n.l10n.amPM[1]+"|"+n.l10n.amPM[0].toLowerCase()+"|"+n.l10n.amPM[1].toLowerCase()+")";var L=on(on({},t),JSON.parse(JSON.stringify(e.dataset||{})));L.time_24hr===void 0&&Qt.defaultConfig.time_24hr===void 0&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=Lp(n),n.parseDate=Lu({config:n.config,l10n:n.l10n})}function se(L){if(typeof n.config.position=="function")return void n.config.position(n,L);if(n.calendarContainer!==void 0){Y("onPreCalendarPosition");var W=L||n._positionElement,Z=Array.prototype.reduce.call(n.calendarContainer.children,function($r,Ki){return $r+Ki.offsetHeight},0),oe=n.calendarContainer.offsetWidth,be=n.config.position.split(" "),ke=be[0],Ve=be.length>1?be[1]:null,Me=W.getBoundingClientRect(),Je=window.innerHeight-Me.bottom,xe=ke==="above"||ke!=="below"&&Je<Z&&Me.top>Z,ze=window.pageYOffset+Me.top+(xe?-Z-2:W.offsetHeight+2);if(fn(n.calendarContainer,"arrowTop",!xe),fn(n.calendarContainer,"arrowBottom",xe),!n.config.inline){var ot=window.pageXOffset+Me.left,nn=!1,jt=!1;Ve==="center"?(ot-=(oe-Me.width)/2,nn=!0):Ve==="right"&&(ot-=oe-Me.width,jt=!0),fn(n.calendarContainer,"arrowLeft",!nn&&!jt),fn(n.calendarContainer,"arrowCenter",nn),fn(n.calendarContainer,"arrowRight",jt);var oi=window.document.body.offsetWidth-(window.pageXOffset+Me.right),ai=ot+oe>window.document.body.offsetWidth,Fn=oi+oe>window.document.body.offsetWidth;if(fn(n.calendarContainer,"rightMost",ai),!n.config.static)if(n.calendarContainer.style.top=ze+"px",!ai)n.calendarContainer.style.left=ot+"px",n.calendarContainer.style.right="auto";else if(!Fn)n.calendarContainer.style.left="auto",n.calendarContainer.style.right=oi+"px";else{var _i=re();if(_i===void 0)return;var mr=window.document.body.offsetWidth,Vi=Math.max(0,mr/2-oe/2),Gn=".flatpickr-calendar.centerMost:before",Nt=".flatpickr-calendar.centerMost:after",bi=_i.cssRules.length,As="{left:"+Me.left+"px;right:auto;}";fn(n.calendarContainer,"rightMost",!1),fn(n.calendarContainer,"centerMost",!0),_i.insertRule(Gn+","+Nt+As,bi),n.calendarContainer.style.left=Vi+"px",n.calendarContainer.style.right="auto"}}}}function re(){for(var L=null,W=0;W<document.styleSheets.length;W++){var Z=document.styleSheets[W];if(Z.cssRules){try{Z.cssRules}catch{continue}L=Z;break}}return L??ge()}function ge(){var L=document.createElement("style");return document.head.appendChild(L),L.sheet}function _e(){n.config.noCalendar||n.isMobile||(te(),we(),z())}function Se(){n._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(n.close,0):n.close()}function qe(L){L.preventDefault(),L.stopPropagation();var W=function(ze){return ze.classList&&ze.classList.contains("flatpickr-day")&&!ze.classList.contains("flatpickr-disabled")&&!ze.classList.contains("notAllowed")},Z=Np(Sn(L),W);if(Z!==void 0){var oe=Z,be=n.latestSelectedDateObj=new Date(oe.dateObj.getTime()),ke=(be.getMonth()<n.currentMonth||be.getMonth()>n.currentMonth+n.config.showMonths-1)&&n.config.mode!=="range";if(n.selectedDateElem=oe,n.config.mode==="single")n.selectedDates=[be];else if(n.config.mode==="multiple"){var Ve=$(be);Ve?n.selectedDates.splice(parseInt(Ve),1):n.selectedDates.push(be)}else n.config.mode==="range"&&(n.selectedDates.length===2&&n.clear(!1,!1),n.latestSelectedDateObj=be,n.selectedDates.push(be),On(be,n.selectedDates[0],!0)!==0&&n.selectedDates.sort(function(ze,ot){return ze.getTime()-ot.getTime()}));if(m(),ke){var Me=n.currentYear!==be.getFullYear();n.currentYear=be.getFullYear(),n.currentMonth=be.getMonth(),Me&&(Y("onYearChange"),te()),Y("onMonthChange")}if(we(),z(),Te(),!ke&&n.config.mode!=="range"&&n.config.showMonths===1?R(oe):n.selectedDateElem!==void 0&&n.hourElement===void 0&&n.selectedDateElem&&n.selectedDateElem.focus(),n.hourElement!==void 0&&n.hourElement!==void 0&&n.hourElement.focus(),n.config.closeOnSelect){var Je=n.config.mode==="single"&&!n.config.enableTime,xe=n.config.mode==="range"&&n.selectedDates.length===2&&!n.config.enableTime;(Je||xe)&&Se()}E()}}var Be={locale:[ee,V],showMonths:[Ce,l,ne],minDate:[w],maxDate:[w],positionElement:[A],clickOpens:[function(){n.config.clickOpens===!0?(y(n._input,"focus",n.open),y(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function o(L,W){if(L!==null&&typeof L=="object"){Object.assign(n.config,L);for(var Z in L)Be[Z]!==void 0&&Be[Z].forEach(function(oe){return oe()})}else n.config[L]=W,Be[L]!==void 0?Be[L].forEach(function(oe){return oe()}):nu.indexOf(L)>-1&&(n.config[L]=iu(W));n.redraw(),Te(!0)}function d(L,W){var Z=[];if(L instanceof Array)Z=L.map(function(oe){return n.parseDate(oe,W)});else if(L instanceof Date||typeof L=="number")Z=[n.parseDate(L,W)];else if(typeof L=="string")switch(n.config.mode){case"single":case"time":Z=[n.parseDate(L,W)];break;case"multiple":Z=L.split(n.config.conjunction).map(function(oe){return n.parseDate(oe,W)});break;case"range":Z=L.split(n.l10n.rangeSeparator).map(function(oe){return n.parseDate(oe,W)});break}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(L)));n.selectedDates=n.config.allowInvalidPreload?Z:Z.filter(function(oe){return oe instanceof Date&&Ye(oe,!1)}),n.config.mode==="range"&&n.selectedDates.sort(function(oe,be){return oe.getTime()-be.getTime()})}function p(L,W,Z){if(W===void 0&&(W=!1),Z===void 0&&(Z=n.config.dateFormat),L!==0&&!L||L instanceof Array&&L.length===0)return n.clear(W);d(L,Z),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),w(void 0,W),g(),n.selectedDates.length===0&&n.clear(!1),Te(W),W&&Y("onChange")}function _(L){return L.slice().map(function(W){return typeof W=="string"||typeof W=="number"||W instanceof Date?n.parseDate(W,void 0,!0):W&&typeof W=="object"&&W.from&&W.to?{from:n.parseDate(W.from,void 0),to:n.parseDate(W.to,void 0)}:W}).filter(function(W){return W})}function C(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var L=n.config.defaultDate||((n.input.nodeName==="INPUT"||n.input.nodeName==="TEXTAREA")&&n.input.placeholder&&n.input.value===n.input.placeholder?null:n.input.value);L&&d(L,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),n.config.minTime!==void 0&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),n.config.maxTime!==void 0&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}function S(){if(n.input=Q(),!n.input){n.config.errorHandler(new Error("Invalid input element specified"));return}n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=_t(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),A()}function A(){n._positionElement=n.config.positionElement||n._input}function N(){var L=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=_t("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=L,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr=L==="datetime-local"?"Y-m-d\\TH:i:S":L==="date"?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",n.altInput!==void 0&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch{}y(n.mobileInput,"change",function(W){n.setDate(Sn(W).value,!1,n.mobileFormatStr),Y("onChange"),Y("onClose")})}function G(L){if(n.isOpen===!0)return n.close();n.open(L)}function Y(L,W){if(n.config!==void 0){var Z=n.config[L];if(Z!==void 0&&Z.length>0)for(var oe=0;Z[oe]&&oe<Z.length;oe++)Z[oe](n.selectedDates,n.input.value,n,W);L==="onChange"&&(n.input.dispatchEvent(X("change")),n.input.dispatchEvent(X("input")))}}function X(L){var W=document.createEvent("Event");return W.initEvent(L,!0,!0),W}function $(L){for(var W=0;W<n.selectedDates.length;W++){var Z=n.selectedDates[W];if(Z instanceof Date&&On(Z,L)===0)return""+W}return!1}function he(L){return n.config.mode!=="range"||n.selectedDates.length<2?!1:On(L,n.selectedDates[0])>=0&&On(L,n.selectedDates[1])<=0}function we(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach(function(L,W){var Z=new Date(n.currentYear,n.currentMonth,1);Z.setMonth(n.currentMonth+W),n.config.showMonths>1||n.config.monthSelectorType==="static"?n.monthElements[W].textContent=nl(Z.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=Z.getMonth().toString(),L.value=Z.getFullYear().toString()}),n._hidePrevMonthArrow=n.config.minDate!==void 0&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=n.config.maxDate!==void 0&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function Fe(L){var W=L||(n.config.altInput?n.config.altFormat:n.config.dateFormat);return n.selectedDates.map(function(Z){return n.formatDate(Z,W)}).filter(function(Z,oe,be){return n.config.mode!=="range"||n.config.enableTime||be.indexOf(Z)===oe}).join(n.config.mode!=="range"?n.config.conjunction:n.l10n.rangeSeparator)}function Te(L){L===void 0&&(L=!0),n.mobileInput!==void 0&&n.mobileFormatStr&&(n.mobileInput.value=n.latestSelectedDateObj!==void 0?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=Fe(n.config.dateFormat),n.altInput!==void 0&&(n.altInput.value=Fe(n.config.altFormat)),L!==!1&&Y("onValueUpdate")}function Ue(L){var W=Sn(L),Z=n.prevMonthNav.contains(W),oe=n.nextMonthNav.contains(W);Z||oe?ye(Z?-1:1):n.yearElements.indexOf(W)>=0?W.select():W.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):W.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}function ft(L){L.preventDefault();var W=L.type==="keydown",Z=Sn(L),oe=Z;n.amPM!==void 0&&Z===n.amPM&&(n.amPM.textContent=n.l10n.amPM[Bn(n.amPM.textContent===n.l10n.amPM[0])]);var be=parseFloat(oe.getAttribute("min")),ke=parseFloat(oe.getAttribute("max")),Ve=parseFloat(oe.getAttribute("step")),Me=parseInt(oe.value,10),Je=L.delta||(W?L.which===38?1:-1:0),xe=Me+Ve*Je;if(typeof oe.value<"u"&&oe.value.length===2){var ze=oe===n.hourElement,ot=oe===n.minuteElement;xe<be?(xe=ke+xe+Bn(!ze)+(Bn(ze)&&Bn(!n.amPM)),ot&&x(void 0,-1,n.hourElement)):xe>ke&&(xe=oe===n.hourElement?xe-ke-Bn(!n.amPM):be,ot&&x(void 0,1,n.hourElement)),n.amPM&&ze&&(Ve===1?xe+Me===23:Math.abs(xe-Me)>Ve)&&(n.amPM.textContent=n.l10n.amPM[Bn(n.amPM.textContent===n.l10n.amPM[0])]),oe.value=wn(xe)}}return r(),n}function rs(e,t){for(var n=Array.prototype.slice.call(e).filter(function(a){return a instanceof HTMLElement}),i=[],r=0;r<n.length;r++){var s=n[r];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=Oy(s,t||{}),i.push(s._flatpickr)}catch(a){console.error(a)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return rs(this,e)},HTMLElement.prototype.flatpickr=function(e){return rs([this],e)});var Qt=function(e,t){return typeof e=="string"?rs(window.document.querySelectorAll(e),t):e instanceof Node?rs([e],t):rs(e,t)};Qt.defaultConfig={};Qt.l10ns={en:on({},so),default:on({},so)};Qt.localize=function(e){Qt.l10ns.default=on(on({},Qt.l10ns.default),e)};Qt.setDefaults=function(e){Qt.defaultConfig=on(on({},Qt.defaultConfig),e)};Qt.parseDate=Lu({});Qt.formatDate=Lp({});Qt.compareDates=On;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(e){return rs(this,e)});Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof e=="string"?parseInt(e,10):e))};typeof window<"u"&&(window.flatpickr=Qt);/*! jQuery UI - v1.14.0 - 2024-08-05
* https://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright OpenJS Foundation and other contributors; Licensed MIT */(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){e.ui=e.ui||{},e.ui.version="1.14.0";var t,n,i,r,s,a,l,c,u,f,m=0,g=Array.prototype.hasOwnProperty,h=Array.prototype.slice;e.cleanData=(t=e.cleanData,function(o){for(var d,p,_=0;(p=o[_])!=null;_++)(d=e._data(p,"events"))&&d.remove&&e(p).triggerHandler("remove");t(o)}),e.widget=function(o,d,p){var _,C,S,A={},N=o.split(".")[0],G=N+"-"+(o=o.split(".")[1]);return p||(p=d,d=e.Widget),Array.isArray(p)&&(p=e.extend.apply(null,[{}].concat(p))),e.expr.pseudos[G.toLowerCase()]=function(Y){return!!e.data(Y,G)},e[N]=e[N]||{},_=e[N][o],C=e[N][o]=function(Y,X){if(!this||!this._createWidget)return new C(Y,X);arguments.length&&this._createWidget(Y,X)},e.extend(C,_,{version:p.version,_proto:e.extend({},p),_childConstructors:[]}),(S=new d).options=e.widget.extend({},S.options),e.each(p,function(Y,X){function $(){return d.prototype[Y].apply(this,arguments)}function he(we){return d.prototype[Y].apply(this,we)}A[Y]=typeof X!="function"?X:function(){var we,Fe=this._super,Te=this._superApply;return this._super=$,this._superApply=he,we=X.apply(this,arguments),this._super=Fe,this._superApply=Te,we}}),C.prototype=e.widget.extend(S,{widgetEventPrefix:_&&S.widgetEventPrefix||o},A,{constructor:C,namespace:N,widgetName:o,widgetFullName:G}),_?(e.each(_._childConstructors,function(Y,X){var $=X.prototype;e.widget($.namespace+"."+$.widgetName,C,X._proto)}),delete _._childConstructors):d._childConstructors.push(C),e.widget.bridge(o,C),C},e.widget.extend=function(o){for(var d,p,_=h.call(arguments,1),C=0,S=_.length;C<S;C++)for(d in _[C])p=_[C][d],g.call(_[C],d)&&p!==void 0&&(e.isPlainObject(p)?o[d]=e.isPlainObject(o[d])?e.widget.extend({},o[d],p):e.widget.extend({},p):o[d]=p);return o},e.widget.bridge=function(o,d){var p=d.prototype.widgetFullName||o;e.fn[o]=function(_){var C=typeof _=="string",S=h.call(arguments,1),A=this;return C?this.length||_!=="instance"?this.each(function(){var N,G=e.data(this,p);return _==="instance"?(A=G,!1):G?typeof G[_]!="function"||_.charAt(0)==="_"?e.error("no such method '"+_+"' for "+o+" widget instance"):(N=G[_].apply(G,S))!==G&&N!==void 0?(A=N&&N.jquery?A.pushStack(N.get()):N,!1):void 0:e.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+_+"'")}):A=void 0:(S.length&&(_=e.widget.extend.apply(null,[_].concat(S))),this.each(function(){var N=e.data(this,p);N?(N.option(_||{}),N._init&&N._init()):e.data(this,p,new d(_,this))})),A}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(o,d){d=e(d||this.defaultElement||this)[0],this.element=e(d),this.uuid=m++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},d!==this&&(e.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(p){p.target===d&&this.destroy()}}),this.document=e(d.style?d.ownerDocument:d.document||d),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),o),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var o=this;this._destroy(),e.each(this.classesElementLookup,function(d,p){o._removeClass(p,d)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(o,d){var p,_,C,S=o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof o=="string")if(S={},o=(p=o.split(".")).shift(),p.length){for(_=S[o]=e.widget.extend({},this.options[o]),C=0;C<p.length-1;C++)_[p[C]]=_[p[C]]||{},_=_[p[C]];if(o=p.pop(),arguments.length===1)return _[o]===void 0?null:_[o];_[o]=d}else{if(arguments.length===1)return this.options[o]===void 0?null:this.options[o];S[o]=d}return this._setOptions(S),this},_setOptions:function(o){for(var d in o)this._setOption(d,o[d]);return this},_setOption:function(o,d){return o==="classes"&&this._setOptionClasses(d),this.options[o]=d,o==="disabled"&&this._setOptionDisabled(d),this},_setOptionClasses:function(o){var d,p,_;for(d in o)_=this.classesElementLookup[d],o[d]!==this.options.classes[d]&&_&&_.length&&(p=e(_.get()),this._removeClass(_,d),p.addClass(this._classes({element:p,keys:d,classes:o,add:!0})))},_setOptionDisabled:function(o){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!o),o&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){var d=[],p=this;function _(C,S){for(var A,N=0;N<C.length;N++)A=p.classesElementLookup[C[N]]||e(),A=o.add?(function(){var G=[];o.element.each(function(Y,X){e.map(p.classesElementLookup,function($){return $}).some(function($){return $.is(X)})||G.push(X)}),p._on(e(G),{remove:"_untrackClassesElement"})}(),e(e.uniqueSort(A.get().concat(o.element.get())))):e(A.not(o.element).get()),p.classesElementLookup[C[N]]=A,d.push(C[N]),S&&o.classes[C[N]]&&d.push(o.classes[C[N]])}return(o=e.extend({element:this.element,classes:this.options.classes||{}},o)).keys&&_(o.keys.match(/\S+/g)||[],!0),o.extra&&_(o.extra.match(/\S+/g)||[]),d.join(" ")},_untrackClassesElement:function(o){var d=this;e.each(d.classesElementLookup,function(p,_){e.inArray(o.target,_)!==-1&&(d.classesElementLookup[p]=e(_.not(o.target).get()))}),this._off(e(o.target))},_removeClass:function(o,d,p){return this._toggleClass(o,d,p,!1)},_addClass:function(o,d,p){return this._toggleClass(o,d,p,!0)},_toggleClass:function(o,S,p,_){var C=typeof o=="string"||o===null,S={extra:C?S:p,keys:C?o:S,element:C?this.element:o,add:_=typeof _=="boolean"?_:p};return S.element.toggleClass(this._classes(S),_),this},_on:function(o,d,p){var _,C=this;typeof o!="boolean"&&(p=d,d=o,o=!1),p?(d=_=e(d),this.bindings=this.bindings.add(d)):(p=d,d=this.element,_=this.widget()),e.each(p,function(Y,A){function N(){if(o||C.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return(typeof A=="string"?C[A]:A).apply(C,arguments)}typeof A!="string"&&(N.guid=A.guid=A.guid||N.guid||e.guid++);var Y=Y.match(/^([\w:-]*)\s*(.*)$/),G=Y[1]+C.eventNamespace,Y=Y[2];Y?_.on(G,Y,N):d.on(G,N)})},_off:function(o,d){d=(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,o.off(d),this.bindings=e(this.bindings.not(o).get()),this.focusable=e(this.focusable.not(o).get()),this.hoverable=e(this.hoverable.not(o).get())},_delay:function(o,d){var p=this;return setTimeout(function(){return(typeof o=="string"?p[o]:o).apply(p,arguments)},d||0)},_hoverable:function(o){this.hoverable=this.hoverable.add(o),this._on(o,{mouseenter:function(d){this._addClass(e(d.currentTarget),null,"ui-state-hover")},mouseleave:function(d){this._removeClass(e(d.currentTarget),null,"ui-state-hover")}})},_focusable:function(o){this.focusable=this.focusable.add(o),this._on(o,{focusin:function(d){this._addClass(e(d.currentTarget),null,"ui-state-focus")},focusout:function(d){this._removeClass(e(d.currentTarget),null,"ui-state-focus")}})},_trigger:function(o,d,p){var _,C,S=this.options[o];if(p=p||{},(d=e.Event(d)).type=(o===this.widgetEventPrefix?o:this.widgetEventPrefix+o).toLowerCase(),d.target=this.element[0],C=d.originalEvent)for(_ in C)_ in d||(d[_]=C[_]);return this.element.trigger(d,p),!(typeof S=="function"&&S.apply(this.element[0],[d].concat(p))===!1||d.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(o,d){e.Widget.prototype["_"+o]=function(p,_,C){var S,A=(_=typeof _=="string"?{effect:_}:_)?_!==!0&&typeof _!="number"&&_.effect||d:o;typeof(_=_||{})=="number"?_={duration:_}:_===!0&&(_={}),S=!e.isEmptyObject(_),_.complete=C,_.delay&&p.delay(_.delay),S&&e.effects&&e.effects.effect[A]?p[o](_):A!==o&&p[A]?p[A](_.duration,_.easing,C):p.queue(function(N){e(this)[o](),C&&C.call(p[0]),N()})}}),e.widget;function v(o,d,p){return[parseFloat(o[0])*(u.test(o[0])?d/100:1),parseFloat(o[1])*(u.test(o[1])?p/100:1)]}function y(o,d){return parseInt(e.css(o,d),10)||0}function E(o){return o!=null&&o===o.window}i=Math.max,r=Math.abs,s=/left|center|right/,a=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,f=e.fn.position,e.position={scrollbarWidth:function(){var o,d,p;return n!==void 0?n:(p=(d=e("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")).children()[0],e("body").append(d),o=p.offsetWidth,d.css("overflow","scroll"),o===(p=p.offsetWidth)&&(p=d[0].clientWidth),d.remove(),n=o-p)},getScrollInfo:function(o){var p=o.isWindow||o.isDocument?"":o.element.css("overflow-x"),d=o.isWindow||o.isDocument?"":o.element.css("overflow-y"),p=p==="scroll"||p==="auto"&&o.width<o.element[0].scrollWidth;return{width:d==="scroll"||d==="auto"&&o.height<o.element[0].scrollHeight?e.position.scrollbarWidth():0,height:p?e.position.scrollbarWidth():0}},getWithinInfo:function(o){var d=e(o||window),p=E(d[0]),_=!!d[0]&&d[0].nodeType===9;return{element:d,isWindow:p,isDocument:_,offset:!p&&!_?e(o).offset():{left:0,top:0},scrollLeft:d.scrollLeft(),scrollTop:d.scrollTop(),width:d.outerWidth(),height:d.outerHeight()}}},e.fn.position=function(o){var d,p,_,C,S,A,N,G,Y,X,$,he;return o&&o.of?(A=typeof(o=e.extend({},o)).of=="string"?e(document).find(o.of):e(o.of),N=e.position.getWithinInfo(o.within),G=e.position.getScrollInfo(N),Y=(o.collision||"flip").split(" "),X={},he=(he=($=A)[0]).nodeType===9?{width:$.width(),height:$.height(),offset:{top:0,left:0}}:E(he)?{width:$.width(),height:$.height(),offset:{top:$.scrollTop(),left:$.scrollLeft()}}:he.preventDefault?{width:0,height:0,offset:{top:he.pageY,left:he.pageX}}:{width:$.outerWidth(),height:$.outerHeight(),offset:$.offset()},A[0].preventDefault&&(o.at="left top"),p=he.width,_=he.height,S=e.extend({},C=he.offset),e.each(["my","at"],function(){var we,Fe,Te=(o[this]||"").split(" ");(Te=Te.length===1?s.test(Te[0])?Te.concat(["center"]):a.test(Te[0])?["center"].concat(Te):["center","center"]:Te)[0]=s.test(Te[0])?Te[0]:"center",Te[1]=a.test(Te[1])?Te[1]:"center",we=l.exec(Te[0]),Fe=l.exec(Te[1]),X[this]=[we?we[0]:0,Fe?Fe[0]:0],o[this]=[c.exec(Te[0])[0],c.exec(Te[1])[0]]}),Y.length===1&&(Y[1]=Y[0]),o.at[0]==="right"?S.left+=p:o.at[0]==="center"&&(S.left+=p/2),o.at[1]==="bottom"?S.top+=_:o.at[1]==="center"&&(S.top+=_/2),d=v(X.at,p,_),S.left+=d[0],S.top+=d[1],this.each(function(){var we,Fe,Te=e(this),Ue=Te.outerWidth(),ft=Te.outerHeight(),L=y(this,"marginLeft"),W=y(this,"marginTop"),Z=Ue+L+y(this,"marginRight")+G.width,oe=ft+W+y(this,"marginBottom")+G.height,be=e.extend({},S),ke=v(X.my,Te.outerWidth(),Te.outerHeight());o.my[0]==="right"?be.left-=Ue:o.my[0]==="center"&&(be.left-=Ue/2),o.my[1]==="bottom"?be.top-=ft:o.my[1]==="center"&&(be.top-=ft/2),be.left+=ke[0],be.top+=ke[1],we={marginLeft:L,marginTop:W},e.each(["left","top"],function(Ve,Me){e.ui.position[Y[Ve]]&&e.ui.position[Y[Ve]][Me](be,{targetWidth:p,targetHeight:_,elemWidth:Ue,elemHeight:ft,collisionPosition:we,collisionWidth:Z,collisionHeight:oe,offset:[d[0]+ke[0],d[1]+ke[1]],my:o.my,at:o.at,within:N,elem:Te})}),o.using&&(Fe=function(Ve){var Me=C.left-be.left,Je=Me+p-Ue,xe=C.top-be.top,ze=xe+_-ft,ot={target:{element:A,left:C.left,top:C.top,width:p,height:_},element:{element:Te,left:be.left,top:be.top,width:Ue,height:ft},horizontal:Je<0?"left":0<Me?"right":"center",vertical:ze<0?"top":0<xe?"bottom":"middle"};p<Ue&&r(Me+Je)<p&&(ot.horizontal="center"),_<ft&&r(xe+ze)<_&&(ot.vertical="middle"),i(r(Me),r(Je))>i(r(xe),r(ze))?ot.important="horizontal":ot.important="vertical",o.using.call(this,Ve,ot)}),Te.offset(e.extend(be,{using:Fe}))})):f.apply(this,arguments)},e.ui.position={fit:{left:function(o,d){var p,C=d.within,_=C.isWindow?C.scrollLeft:C.offset.left,C=C.width,S=o.left-d.collisionPosition.marginLeft,A=_-S,N=S+d.collisionWidth-C-_;d.collisionWidth>C?0<A&&N<=0?(p=o.left+A+d.collisionWidth-C-_,o.left+=A-p):o.left=!(0<N&&A<=0)&&N<A?_+C-d.collisionWidth:_:0<A?o.left+=A:0<N?o.left-=N:o.left=i(o.left-S,o.left)},top:function(o,d){var p,_=d.within,_=_.isWindow?_.scrollTop:_.offset.top,C=d.within.height,S=o.top-d.collisionPosition.marginTop,A=_-S,N=S+d.collisionHeight-C-_;d.collisionHeight>C?0<A&&N<=0?(p=o.top+A+d.collisionHeight-C-_,o.top+=A-p):o.top=!(0<N&&A<=0)&&N<A?_+C-d.collisionHeight:_:0<A?o.top+=A:0<N?o.top-=N:o.top=i(o.top-S,o.top)}},flip:{left:function(o,d){var C=d.within,p=C.offset.left+C.scrollLeft,_=C.width,C=C.isWindow?C.scrollLeft:C.offset.left,A=o.left-d.collisionPosition.marginLeft,S=A-C,A=A+d.collisionWidth-_-C,N=d.my[0]==="left"?-d.elemWidth:d.my[0]==="right"?d.elemWidth:0,G=d.at[0]==="left"?d.targetWidth:d.at[0]==="right"?-d.targetWidth:0,Y=-2*d.offset[0];S<0?((_=o.left+N+G+Y+d.collisionWidth-_-p)<0||_<r(S))&&(o.left+=N+G+Y):0<A&&(0<(p=o.left-d.collisionPosition.marginLeft+N+G+Y-C)||r(p)<A)&&(o.left+=N+G+Y)},top:function(o,d){var C=d.within,p=C.offset.top+C.scrollTop,_=C.height,C=C.isWindow?C.scrollTop:C.offset.top,A=o.top-d.collisionPosition.marginTop,S=A-C,A=A+d.collisionHeight-_-C,N=d.my[1]==="top"?-d.elemHeight:d.my[1]==="bottom"?d.elemHeight:0,G=d.at[1]==="top"?d.targetHeight:d.at[1]==="bottom"?-d.targetHeight:0,Y=-2*d.offset[1];S<0?((_=o.top+N+G+Y+d.collisionHeight-_-p)<0||_<r(S))&&(o.top+=N+G+Y):0<A&&(0<(p=o.top-d.collisionPosition.marginTop+N+G+Y-C)||r(p)<A)&&(o.top+=N+G+Y)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},e.ui.position,e.extend(e.expr.pseudos,{data:e.expr.createPseudo(function(o){return function(d){return!!e.data(d,o)}})}),e.fn.extend({disableSelection:(b="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(b+".ui-disableSelection",function(o){o.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var b,w=e,T={},x=T.toString,D=/^([\-+])=\s*(\d+\.?\d*)/,O=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(o){return[o[1],o[2],o[3],o[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(o){return[2.55*o[1],2.55*o[2],2.55*o[3],o[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),o[4]?(parseInt(o[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16),o[4]?(parseInt(o[4]+o[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(o){return[o[1],o[2]/100,o[3]/100,o[4]]}}],R=w.Color=function(o,d,p,_){return new w.Color.fn.parse(o,d,p,_)},I={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},P={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},M=w.each;function B(o){return o==null?o+"":typeof o=="object"?T[x.call(o)]||"object":typeof o}function z(o,d,p){var _=P[d.type]||{};return o==null?p||!d.def?null:d.def:(o=_.floor?~~o:parseFloat(o),_.mod?(o+_.mod)%_.mod:Math.min(_.max,Math.max(0,o)))}function te(o){var d=R(),p=d._rgba=[];return o=o.toLowerCase(),M(O,function(_,A){var S=A.re.exec(o),S=S&&A.parse(S),A=A.space||"rgba";if(S)return S=d[A](S),d[I[A].cache]=S[I[A].cache],p=d._rgba=S._rgba,!1}),p.length?(p.join()==="0,0,0,0"&&w.extend(p,Le.transparent),d):Le[o]}function pe(o,d,p){return 6*(p=(p+1)%1)<1?o+(d-o)*p*6:2*p<1?d:3*p<2?o+(d-o)*(2/3-p)*6:o}M(I,function(o,d){d.cache="_"+o,d.props.alpha={idx:3,type:"percent",def:1}}),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(o,d){T["[object "+d+"]"]=d.toLowerCase()}),(R.fn=w.extend(R.prototype,{parse:function(o,d,p,_){if(o===void 0)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=w(o).css(d),d=void 0);var C=this,S=B(o),A=this._rgba=[];return d!==void 0&&(o=[o,d,p,_],S="array"),S==="string"?this.parse(te(o)||Le._default):S==="array"?(M(I.rgba.props,function(N,G){A[G.idx]=z(o[G.idx],G)}),this):S==="object"?(o instanceof R?M(I,function(N,G){o[G.cache]&&(C[G.cache]=o[G.cache].slice())}):M(I,function(N,G){var Y=G.cache;M(G.props,function(X,$){if(!C[Y]&&G.to){if(X==="alpha"||o[X]==null)return;C[Y]=G.to(C._rgba)}C[Y][$.idx]=z(o[X],$,!0)}),C[Y]&&w.inArray(null,C[Y].slice(0,3))<0&&(C[Y][3]==null&&(C[Y][3]=1),G.from)&&(C._rgba=G.from(C[Y]))}),this):void 0},is:function(o){var d=R(o),p=!0,_=this;return M(I,function(C,S){var A,N=d[S.cache];return N&&(A=_[S.cache]||S.to&&S.to(_._rgba)||[],M(S.props,function(G,Y){if(N[Y.idx]!=null)return p=N[Y.idx]===A[Y.idx]})),p}),p},_space:function(){var o=[],d=this;return M(I,function(p,_){d[_.cache]&&o.push(p)}),o.pop()},transition:function(p,d){var p=(N=R(p))._space(),_=I[p],C=this.alpha()===0?R("transparent"):this,S=C[_.cache]||_.to(C._rgba),A=S.slice(),N=N[_.cache];return M(_.props,function(G,Y){var X=Y.idx,$=S[X],he=N[X],we=P[Y.type]||{};he!==null&&($===null?A[X]=he:(we.mod&&(he-$>we.mod/2?$+=we.mod:$-he>we.mod/2&&($-=we.mod)),A[X]=z((he-$)*d+$,Y)))}),this[p](A)},blend:function(o){var d,p,_;return this._rgba[3]===1?this:(d=this._rgba.slice(),p=d.pop(),_=R(o)._rgba,R(w.map(d,function(C,S){return(1-p)*_[S]+p*C})))},toRgbaString:function(){var o="rgba(",d=w.map(this._rgba,function(p,_){return p??(2<_?1:0)});return d[3]===1&&(d.pop(),o="rgb("),o+d.join(", ")+")"},toHslaString:function(){var o="hsla(",d=w.map(this.hsla(),function(p,_){return p==null&&(p=2<_?1:0),p=_&&_<3?Math.round(100*p)+"%":p});return d[3]===1&&(d.pop(),o="hsl("),o+d.join(", ")+")"},toHexString:function(o){var d=this._rgba.slice(),p=d.pop();return o&&d.push(~~(255*p)),"#"+w.map(d,function(_){return("0"+(_||0).toString(16)).substr(-2)}).join("")},toString:function(){return this.toRgbaString()}})).parse.prototype=R.fn,I.hsla.to=function(o){var d,p,_,C,S,A,N,G;return o[0]==null||o[1]==null||o[2]==null?[null,null,null,o[3]]:(d=o[0]/255,p=o[1]/255,_=o[2]/255,o=o[3],C=(G=Math.max(d,p,_))-(N=Math.min(d,p,_)),A=.5*(S=G+N),N=N===G?0:d===G?60*(p-_)/C+360:p===G?60*(_-d)/C+120:60*(d-p)/C+240,G=C==0?0:A<=.5?C/S:C/(2-S),[Math.round(N)%360,G,A,o??1])},I.hsla.from=function(o){var d,p,_;return o[0]==null||o[1]==null||o[2]==null?[null,null,null,o[3]]:(d=o[0]/360,_=o[1],p=o[2],o=o[3],_=2*p-(p=p<=.5?p*(1+_):p+_-p*_),[Math.round(255*pe(_,p,d+1/3)),Math.round(255*pe(_,p,d)),Math.round(255*pe(_,p,d-1/3)),o])},M(I,function(o,d){var p=d.props,_=d.cache,C=d.to,S=d.from;R.fn[o]=function(A){var N,G,Y;return C&&!this[_]&&(this[_]=C(this._rgba)),A===void 0?this[_].slice():(N=B(A),G=N==="array"||N==="object"?A:arguments,Y=this[_].slice(),M(p,function(X,$){X=G[N==="object"?X:$.idx],X==null&&(X=Y[$.idx]),Y[$.idx]=z(X,$)}),S?((A=R(S(Y)))[_]=Y,A):R(Y))},M(p,function(A,N){R.fn[A]||(R.fn[A]=function(G){var Y=B(G),X=A==="alpha"?this._hsla?"hsla":"rgba":o,$=this[X](),he=$[N.idx];return Y==="undefined"?he:(Y==="function"&&(Y=B(G=G.call(this,he))),G==null&&N.empty?this:(Y==="string"&&(Y=D.exec(G))&&(G=he+parseFloat(Y[2])*(Y[1]==="+"?1:-1)),$[N.idx]=G,this[X]($)))})})}),(R.hook=function(o){o=o.split(" "),M(o,function(d,p){w.cssHooks[p]={set:function(_,C){var S;C==="transparent"||B(C)==="string"&&!(S=te(C))||(C=(C=R(S||C)).toRgbaString()),_.style[p]=C}},w.fx.step[p]=function(_){_.colorInit||(_.start=R(_.elem,p),_.end=R(_.end),_.colorInit=!0),w.cssHooks[p].set(_.elem,_.start.transition(_.end,_.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),w.cssHooks.borderColor={expand:function(o){var d={};return M(["Top","Right","Bottom","Left"],function(p,_){d["border"+_+"Color"]=o}),d}};var Ce,Oe,ve,ne,V,fe,ye,ue,Ie,ce,Le=w.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},He="ui-effects-",We="ui-effects-style",Ye="ui-effects-animated";function Re(o){for(var d,p=o.ownerDocument.defaultView.getComputedStyle(o),_={},C=p.length;C--;)typeof p[d=p[C]]=="string"&&(_[d.replace(/-([\da-z])/gi,function(S,A){return A.toUpperCase()})]=p[d]);return _}function F(o,d,p,_){return o={effect:o=e.isPlainObject(o)?(d=o).effect:o},typeof(d=d??{})=="function"&&(_=d,p=null,d={}),typeof d!="number"&&!e.fx.speeds[d]||(_=p,p=d,d={}),typeof p=="function"&&(_=p,p=null),d&&e.extend(o,d),p=p||d.duration,o.duration=e.fx.off?0:typeof p=="number"?p:p in e.fx.speeds?e.fx.speeds[p]:e.fx.speeds._default,o.complete=_||d.complete,o}function H(o){return!o||typeof o=="number"||e.fx.speeds[o]||typeof o=="string"&&!e.effects.effect[o]||typeof o=="function"||typeof o=="object"&&!o.effect}function U(C,_){var p=_.outerWidth(),_=_.outerHeight(),C=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(C)||["",0,p,_,0];return{top:parseFloat(C[1])||0,right:C[2]==="auto"?p:parseFloat(C[2]),bottom:C[3]==="auto"?_:parseFloat(C[3]),left:parseFloat(C[4])||0}}e.effects={effect:{}},ne=["add","remove","toggle"],V={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(o,d){e.fx.step[d]=function(p){(p.end!=="none"&&!p.setAttr||p.pos===1&&!p.setAttr)&&(w.style(p.elem,d,p.end),p.setAttr=!0)}}),e.effects.animateClass=function(o,d,p,_){var C=e.speed(d,p,_);return this.queue(function(){var S=e(this),A=S.attr("class")||"",N=(N=C.children?S.find("*").addBack():S).map(function(){return{el:e(this),start:Re(this)}}),G=function(){e.each(ne,function(Y,X){o[X]&&S[X+"Class"](o[X])})};G(),N=N.map(function(){return this.end=Re(this.el[0]),this.diff=function(Y,X){var $,he,we={};for($ in X)he=X[$],Y[$]===he||V[$]||!e.fx.step[$]&&isNaN(parseFloat(he))||(we[$]=he);return we}(this.start,this.end),this}),S.attr("class",A),N=N.map(function(){var Y=this,X=e.Deferred(),$=e.extend({},C,{queue:!1,complete:function(){X.resolve(Y)}});return this.el.animate(this.diff,$),X.promise()}),e.when.apply(e,N.get()).done(function(){G(),e.each(arguments,function(){var Y=this.el;e.each(this.diff,function(X){Y.css(X,"")})}),C.complete.call(S[0])})})},e.fn.extend({addClass:(ve=e.fn.addClass,function(o,d,p,_){return d?e.effects.animateClass.call(this,{add:o},d,p,_):ve.apply(this,arguments)}),removeClass:(Oe=e.fn.removeClass,function(o,d,p,_){return 1<arguments.length?e.effects.animateClass.call(this,{remove:o},d,p,_):Oe.apply(this,arguments)}),toggleClass:(Ce=e.fn.toggleClass,function(o,d,p,_,C){return typeof d=="boolean"||d===void 0?p?e.effects.animateClass.call(this,d?{add:o}:{remove:o},p,_,C):Ce.apply(this,arguments):e.effects.animateClass.call(this,{toggle:o},d,p,_)}),switchClass:function(o,d,p,_,C){return e.effects.animateClass.call(this,{add:d,remove:o},p,_,C)}}),e.expr&&e.expr.pseudos&&e.expr.pseudos.animated&&(e.expr.pseudos.animated=(fe=e.expr.pseudos.animated,function(o){return!!e(o).data(Ye)||fe(o)})),e.uiBackCompat===!0&&e.extend(e.effects,{save:function(o,d){for(var p=0,_=d.length;p<_;p++)d[p]!==null&&o.data(He+d[p],o[0].style[d[p]])},restore:function(o,d){for(var p,_=0,C=d.length;_<C;_++)d[_]!==null&&(p=o.data(He+d[_]),o.css(d[_],p))},setMode:function(o,d){return d=d==="toggle"?o.is(":hidden")?"show":"hide":d},createWrapper:function(o){if(o.parent().is(".ui-effects-wrapper"))return o.parent();var d={width:o.outerWidth(!0),height:o.outerHeight(!0),float:o.css("float")},p=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),_={width:o.width(),height:o.height()},C=document.activeElement;try{C.id}catch{C=document.body}return o.wrap(p),o[0]!==C&&!e.contains(o[0],C)||e(C).trigger("focus"),p=o.parent(),o.css("position")==="static"?(p.css({position:"relative"}),o.css({position:"relative"})):(e.extend(d,{position:o.css("position"),zIndex:o.css("z-index")}),e.each(["top","left","bottom","right"],function(S,A){d[A]=o.css(A),isNaN(parseInt(d[A],10))&&(d[A]="auto")}),o.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),o.css(_),p.css(d).show()},removeWrapper:function(o){var d=document.activeElement;return o.parent().is(".ui-effects-wrapper")&&(o.parent().replaceWith(o),o[0]!==d&&!e.contains(o[0],d)||e(d).trigger("focus")),o}}),e.extend(e.effects,{version:"1.14.0",define:function(o,d,p){return p||(p=d,d="effect"),e.effects.effect[o]=p,e.effects.effect[o].mode=d,p},scaledDimensions:function(o,d,p){var _;return d===0?{height:0,width:0,outerHeight:0,outerWidth:0}:(_=p!=="horizontal"?(d||100)/100:1,p=p!=="vertical"?(d||100)/100:1,{height:o.height()*p,width:o.width()*_,outerHeight:o.outerHeight()*p,outerWidth:o.outerWidth()*_})},clipToBox:function(o){return{width:o.clip.right-o.clip.left,height:o.clip.bottom-o.clip.top,left:o.clip.left,top:o.clip.top}},unshift:function(o,d,p){var _=o.queue();1<d&&_.splice.apply(_,[1,0].concat(_.splice(d,p))),o.dequeue()},saveStyle:function(o){o.data(We,o[0].style.cssText)},restoreStyle:function(o){o[0].style.cssText=o.data(We)||"",o.removeData(We)},mode:function(o,d){return o=o.is(":hidden"),d==="toggle"&&(d=o?"show":"hide"),d=(o?d==="hide":d==="show")?"none":d},getBaseline:function(o,d){var p,_;switch(o[0]){case"top":p=0;break;case"middle":p=.5;break;case"bottom":p=1;break;default:p=o[0]/d.height}switch(o[1]){case"left":_=0;break;case"center":_=.5;break;case"right":_=1;break;default:_=o[1]/d.width}return{x:_,y:p}},createPlaceholder:function(o){var d,p=o.css("position"),_=o.position();return o.css({marginTop:o.css("marginTop"),marginBottom:o.css("marginBottom"),marginLeft:o.css("marginLeft"),marginRight:o.css("marginRight")}).outerWidth(o.outerWidth()).outerHeight(o.outerHeight()),/^(static|relative)/.test(p)&&(p="absolute",d=e("<"+o[0].nodeName+">").insertAfter(o).css({display:/^(inline|ruby)/.test(o.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:o.css("marginTop"),marginBottom:o.css("marginBottom"),marginLeft:o.css("marginLeft"),marginRight:o.css("marginRight"),float:o.css("float")}).outerWidth(o.outerWidth()).outerHeight(o.outerHeight()).addClass("ui-effects-placeholder"),o.data(He+"placeholder",d)),o.css({position:p,left:_.left,top:_.top}),d},removePlaceholder:function(o){var d=He+"placeholder",p=o.data(d);p&&(p.remove(),o.removeData(d))},cleanUp:function(o){e.effects.restoreStyle(o),e.effects.removePlaceholder(o)},setTransition:function(o,d,p,_){return _=_||{},e.each(d,function(C,S){var A=o.cssUnit(S);0<A[0]&&(_[S]=A[0]*p+A[1])}),_}}),e.fn.extend({effect:function(){function o(X){var $=e(this),he=e.effects.mode($,N)||_;$.data(Ye,!0),G.push(he),_&&(he==="show"||he===_&&he==="hide")&&$.show(),_&&he==="none"||e.effects.saveStyle($),typeof X=="function"&&X()}var d=F.apply(this,arguments),p=e.effects.effect[d.effect],_=p.mode,C=d.queue,S=C||"fx",A=d.complete,N=d.mode,G=[];return e.fx.off||!p?N?this[N](d.duration,A):this.each(function(){A&&A.call(this)}):C===!1?this.each(o).each(Y):this.queue(S,o).queue(S,Y);function Y(X){var $=e(this);function he(){typeof A=="function"&&A.call($[0]),typeof X=="function"&&X()}d.mode=G.shift(),e.uiBackCompat!==!0||_?d.mode==="none"?($[N](),he()):p.call($[0],d,function(){$.removeData(Ye),e.effects.cleanUp($),d.mode==="hide"&&$.hide(),he()}):($.is(":hidden")?N==="hide":N==="show")?($[N](),he()):p.call($[0],d,he)}},show:(Ie=e.fn.show,function(o){return H(o)?Ie.apply(this,arguments):((o=F.apply(this,arguments)).mode="show",this.effect.call(this,o))}),hide:(ue=e.fn.hide,function(o){return H(o)?ue.apply(this,arguments):((o=F.apply(this,arguments)).mode="hide",this.effect.call(this,o))}),toggle:(ye=e.fn.toggle,function(o){return H(o)||typeof o=="boolean"?ye.apply(this,arguments):((o=F.apply(this,arguments)).mode="toggle",this.effect.call(this,o))}),cssUnit:function(o){var d=this.css(o),p=[];return e.each(["em","px","%","pt"],function(_,C){0<d.indexOf(C)&&(p=[parseFloat(d),C])}),p},cssClip:function(o){return o?this.css("clip","rect("+o.top+"px "+o.right+"px "+o.bottom+"px "+o.left+"px)"):U(this.css("clip"),this)},transfer:function(o,d){var p=e(this),N=e(o.to),_=N.css("position")==="fixed",S=e("body"),C=_?S.scrollTop():0,S=_?S.scrollLeft():0,A=N.offset(),A={top:A.top-C,left:A.left-S,height:N.innerHeight(),width:N.innerWidth()},N=p.offset(),G=e("<div class='ui-effects-transfer'></div>");G.appendTo("body").addClass(o.className).css({top:N.top-C,left:N.left-S,height:p.innerHeight(),width:p.innerWidth(),position:_?"fixed":"absolute"}).animate(A,o.duration,o.easing,function(){G.remove(),typeof d=="function"&&d()})}}),e.fx.step.clip=function(o){o.clipInit||(o.start=e(o.elem).cssClip(),typeof o.end=="string"&&(o.end=U(o.end,o.elem)),o.clipInit=!0),e(o.elem).cssClip({top:o.pos*(o.end.top-o.start.top)+o.start.top,right:o.pos*(o.end.right-o.start.right)+o.start.right,bottom:o.pos*(o.end.bottom-o.start.bottom)+o.start.bottom,left:o.pos*(o.end.left-o.start.left)+o.start.left})},ce={},e.each(["Quad","Cubic","Quart","Quint","Expo"],function(o,d){ce[d]=function(p){return Math.pow(p,o+2)}}),e.extend(ce,{Sine:function(o){return 1-Math.cos(o*Math.PI/2)},Circ:function(o){return 1-Math.sqrt(1-o*o)},Elastic:function(o){return o===0||o===1?o:-Math.pow(2,8*(o-1))*Math.sin((80*(o-1)-7.5)*Math.PI/15)},Back:function(o){return o*o*(3*o-2)},Bounce:function(o){for(var d,p=4;o<((d=Math.pow(2,--p))-1)/11;);return 1/Math.pow(4,3-p)-7.5625*Math.pow((3*d-2)/22-o,2)}}),e.each(ce,function(o,d){e.easing["easeIn"+o]=d,e.easing["easeOut"+o]=function(p){return 1-d(1-p)},e.easing["easeInOut"+o]=function(p){return p<.5?d(2*p)/2:1-d(-2*p+2)/2}});var J,K,q,ie=e.effects,Q=(e.effects.define("blind","hide",function(o,d){var p={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},_=e(this),C=o.direction||"up",S=_.cssClip(),A={clip:e.extend({},S)},N=e.effects.createPlaceholder(_);A.clip[p[C][0]]=A.clip[p[C][1]],o.mode==="show"&&(_.cssClip(A.clip),N&&N.css(e.effects.clipToBox(A)),A.clip=S),N&&N.animate(e.effects.clipToBox(A),o.duration,o.easing),_.animate(A,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),e.effects.define("bounce",function(Ue,d){var p,_,C=e(this),A=Ue.mode,S=A==="hide",A=A==="show",N=Ue.direction||"up",G=Ue.distance,Y=Ue.times||5,X=2*Y+(A||S?1:0),$=Ue.duration/X,he=Ue.easing,we=N==="up"||N==="down"?"top":"left",Fe=N==="up"||N==="left",Te=0,Ue=C.queue().length;for(e.effects.createPlaceholder(C),N=C.css(we),G=G||C[we=="top"?"outerHeight":"outerWidth"]()/3,A&&((_={opacity:1})[we]=N,C.css("opacity",0).css(we,Fe?2*-G:2*G).animate(_,$,he)),S&&(G/=Math.pow(2,Y-1)),(_={})[we]=N;Te<Y;Te++)(p={})[we]=(Fe?"-=":"+=")+G,C.animate(p,$,he).animate(_,$,he),G=S?2*G:G/2;S&&((p={opacity:0})[we]=(Fe?"-=":"+=")+G,C.animate(p,$,he)),C.queue(d),e.effects.unshift(C,Ue,1+X)}),e.effects.define("clip","hide",function(o,d){var p={},_=e(this),A=o.direction||"vertical",S=A==="both",C=S||A==="horizontal",S=S||A==="vertical",A=_.cssClip();p.clip={top:S?(A.bottom-A.top)/2:A.top,right:C?(A.right-A.left)/2:A.right,bottom:S?(A.bottom-A.top)/2:A.bottom,left:C?(A.right-A.left)/2:A.left},e.effects.createPlaceholder(_),o.mode==="show"&&(_.cssClip(p.clip),p.clip=A),_.animate(p,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),e.effects.define("drop","hide",function(o,d){var p,_=e(this),C=o.mode==="show",A=o.direction||"left",S=A==="up"||A==="down"?"top":"left",A=A==="up"||A==="left"?"-=":"+=",N=A=="+="?"-=":"+=",G={opacity:0};e.effects.createPlaceholder(_),p=o.distance||_[S=="top"?"outerHeight":"outerWidth"](!0)/2,G[S]=A+p,C&&(_.css(G),G[S]=N+p,G.opacity=1),_.animate(G,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),e.effects.define("explode","hide",function(o,d){var p,_,C,S,A,N,G=o.pieces?Math.round(Math.sqrt(o.pieces)):3,Y=G,X=e(this),$=o.mode==="show",he=X.show().css("visibility","hidden").offset(),we=Math.ceil(X.outerWidth()/Y),Fe=Math.ceil(X.outerHeight()/G),Te=[];function Ue(){Te.push(this),Te.length===G*Y&&(X.css({visibility:"visible"}),e(Te).remove(),d())}for(p=0;p<G;p++)for(S=he.top+p*Fe,N=p-(G-1)/2,_=0;_<Y;_++)C=he.left+_*we,A=_-(Y-1)/2,X.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-_*we,top:-p*Fe}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:we,height:Fe,left:C+($?A*we:0),top:S+($?N*Fe:0),opacity:$?0:1}).animate({left:C+($?0:A*we),top:S+($?0:N*Fe),opacity:$?1:0},o.duration||500,o.easing,Ue)}),e.effects.define("fade","toggle",function(o,d){var p=o.mode==="show";e(this).css("opacity",p?0:1).animate({opacity:p?1:0},{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),e.effects.define("fold","hide",function(o,d){var p=e(this),C=o.mode,_=C==="show",C=C==="hide",S=o.size||15,A=/([0-9]+)%/.exec(S),N=o.horizFirst?["right","bottom"]:["bottom","right"],G=o.duration/2,Y=e.effects.createPlaceholder(p),X=p.cssClip(),$={clip:e.extend({},X)},he={clip:e.extend({},X)},we=[X[N[0]],X[N[1]]],Fe=p.queue().length;A&&(S=parseInt(A[1],10)/100*we[C?0:1]),$.clip[N[0]]=S,he.clip[N[0]]=S,he.clip[N[1]]=0,_&&(p.cssClip(he.clip),Y&&Y.css(e.effects.clipToBox(he)),he.clip=X),p.queue(function(Te){Y&&Y.animate(e.effects.clipToBox($),G,o.easing).animate(e.effects.clipToBox(he),G,o.easing),Te()}).animate($,G,o.easing).animate(he,G,o.easing).queue(d),e.effects.unshift(p,Fe,4)}),e.effects.define("highlight","show",function(o,d){var p=e(this),_={backgroundColor:p.css("backgroundColor")};o.mode==="hide"&&(_.opacity=0),e.effects.saveStyle(p),p.css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(_,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),e.effects.define("size",function(o,d){var p,_=e(this),C=["fontSize"],S=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],A=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],N=o.mode,G=N!=="effect",Y=o.scale||"both",X=o.origin||["middle","center"],$=_.css("position"),he=_.position(),we=e.effects.scaledDimensions(_),Fe=o.from||we,Te=o.to||e.effects.scaledDimensions(_,0);e.effects.createPlaceholder(_),N==="show"&&(N=Fe,Fe=Te,Te=N),p={from:{y:Fe.height/we.height,x:Fe.width/we.width},to:{y:Te.height/we.height,x:Te.width/we.width}},Y!=="box"&&Y!=="both"||(p.from.y!==p.to.y&&(Fe=e.effects.setTransition(_,S,p.from.y,Fe),Te=e.effects.setTransition(_,S,p.to.y,Te)),p.from.x!==p.to.x&&(Fe=e.effects.setTransition(_,A,p.from.x,Fe),Te=e.effects.setTransition(_,A,p.to.x,Te))),Y!=="content"&&Y!=="both"||p.from.y!==p.to.y&&(Fe=e.effects.setTransition(_,C,p.from.y,Fe),Te=e.effects.setTransition(_,C,p.to.y,Te)),N=e.effects.getBaseline(X,we),Fe.top=(we.outerHeight-Fe.outerHeight)*N.y+he.top,Fe.left=(we.outerWidth-Fe.outerWidth)*N.x+he.left,Te.top=(we.outerHeight-Te.outerHeight)*N.y+he.top,Te.left=(we.outerWidth-Te.outerWidth)*N.x+he.left,delete Fe.outerHeight,delete Fe.outerWidth,_.css(Fe),Y!=="content"&&Y!=="both"||(S=S.concat(["marginTop","marginBottom"]).concat(C),A=A.concat(["marginLeft","marginRight"]),_.find("*[width]").each(function(){var Ue=e(this),L=e.effects.scaledDimensions(Ue),ft={height:L.height*p.from.y,width:L.width*p.from.x,outerHeight:L.outerHeight*p.from.y,outerWidth:L.outerWidth*p.from.x},L={height:L.height*p.to.y,width:L.width*p.to.x,outerHeight:L.height*p.to.y,outerWidth:L.width*p.to.x};p.from.y!==p.to.y&&(ft=e.effects.setTransition(Ue,S,p.from.y,ft),L=e.effects.setTransition(Ue,S,p.to.y,L)),p.from.x!==p.to.x&&(ft=e.effects.setTransition(Ue,A,p.from.x,ft),L=e.effects.setTransition(Ue,A,p.to.x,L)),G&&e.effects.saveStyle(Ue),Ue.css(ft),Ue.animate(L,o.duration,o.easing,function(){G&&e.effects.restoreStyle(Ue)})})),_.animate(Te,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){var Ue=_.offset();Te.opacity===0&&_.css("opacity",Fe.opacity),G||(_.css("position",$==="static"?"relative":$).offset(Ue),e.effects.saveStyle(_)),d()}})}),e.effects.define("scale",function(o,d){var _=e(this),p=o.mode,p=parseInt(o.percent,10)||(parseInt(o.percent,10)===0||p!=="effect"?0:100),_=e.extend(!0,{from:e.effects.scaledDimensions(_),to:e.effects.scaledDimensions(_,p,o.direction||"both"),origin:o.origin||["middle","center"]},o);o.fade&&(_.from.opacity=1,_.to.opacity=0),e.effects.effect.size.call(this,_,d)}),e.effects.define("puff","hide",function(o,d){o=e.extend(!0,{},o,{fade:!0,percent:parseInt(o.percent,10)||150}),e.effects.effect.scale.call(this,o,d)}),e.effects.define("pulsate","show",function(o,d){var p=e(this),G=o.mode,_=G==="show",C=2*(o.times||5)+(_||G==="hide"?1:0),S=o.duration/C,A=0,N=1,G=p.queue().length;for(!_&&p.is(":visible")||(p.css("opacity",0).show(),A=1);N<C;N++)p.animate({opacity:A},S,o.easing),A=1-A;p.animate({opacity:A},S,o.easing),p.queue(d),e.effects.unshift(p,G,1+C)}),e.effects.define("shake",function(o,d){var p=1,_=e(this),Y=o.direction||"left",C=o.distance||20,S=o.times||3,A=2*S+1,N=Math.round(o.duration/A),G=Y==="up"||Y==="down"?"top":"left",Y=Y==="up"||Y==="left",X={},$={},he={},we=_.queue().length;for(e.effects.createPlaceholder(_),X[G]=(Y?"-=":"+=")+C,$[G]=(Y?"+=":"-=")+2*C,he[G]=(Y?"-=":"+=")+2*C,_.animate(X,N,o.easing);p<S;p++)_.animate($,N,o.easing).animate(he,N,o.easing);_.animate($,N,o.easing).animate(X,N/2,o.easing).queue(d),e.effects.unshift(_,we,1+A)}),e.effects.define("slide","show",function(o,d){var p,_,C=e(this),S={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},A=o.mode,N=o.direction||"left",G=N==="up"||N==="down"?"top":"left",Y=N==="up"||N==="left",X=o.distance||C[G=="top"?"outerHeight":"outerWidth"](!0),$={};e.effects.createPlaceholder(C),p=C.cssClip(),_=C.position()[G],$[G]=(Y?-1:1)*X+_,$.clip=C.cssClip(),$.clip[S[N][1]]=$.clip[S[N][0]],A==="show"&&(C.cssClip($.clip),C.css(G,$[G]),$.clip=p,$[G]=_),C.animate($,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),ie=e.uiBackCompat===!0?e.effects.define("transfer",function(o,d){e(this).transfer(o,d)}):ie,e.ui.focusable=function(o,d){var p,_,C,S=o.nodeName.toLowerCase();return S==="area"?(C=(p=o.parentNode).name,!(!o.href||!C||p.nodeName.toLowerCase()!=="map")&&0<(p=e("img[usemap='#"+C+"']")).length&&p.is(":visible")):(/^(input|select|textarea|button|object)$/.test(S)?(_=!o.disabled)&&(C=e(o).closest("fieldset")[0])&&(_=!C.disabled):_=S==="a"&&o.href||d,_&&e(o).is(":visible")&&e(o).css("visibility")==="visible")},e.extend(e.expr.pseudos,{focusable:function(o){return e.ui.focusable(o,e.attr(o,"tabindex")!=null)}}),e.ui.focusable,e.ui.formResetMixin={_formResetHandler:function(){var o=e(this);setTimeout(function(){var d=o.data("ui-form-reset-instances");e.each(d,function(){this.refresh()})})},_bindFormResetHandler:function(){var o;this.form=e(this.element.prop("form")),this.form.length&&((o=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),o.push(this),this.form.data("ui-form-reset-instances",o))},_unbindFormResetHandler:function(){var o;this.form.length&&((o=this.form.data("ui-form-reset-instances")).splice(e.inArray(this,o),1),o.length?this.form.data("ui-form-reset-instances",o):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},e.escapeSelector||(e.escapeSelector=function(o){return CSS.escape(o+"")}),e.fn.even&&e.fn.odd||e.fn.extend({even:function(){return this.filter(function(o){return o%2==0})},odd:function(){return this.filter(function(o){return o%2==1})}}),e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.labels=function(){var o,d,p;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(d=this.eq(0).parents("label"),(o=this.attr("id"))&&(p=(p=this.eq(0).parents().last()).add((p.length?p:this).siblings()),o="label[for='"+CSS.escape(o)+"']",d=d.add(p.find(o).addBack(o))),this.pushStack(d)):this.pushStack([])},e.fn.scrollParent=function(C){var d=this.css("position"),p=d==="absolute",_=C?/(auto|scroll|hidden)/:/(auto|scroll)/,C=this.parents().filter(function(){var S=e(this);return(!p||S.css("position")!=="static")&&_.test(S.css("overflow")+S.css("overflow-y")+S.css("overflow-x"))}).eq(0);return d!=="fixed"&&C.length?C:e(this[0].ownerDocument||document)},e.extend(e.expr.pseudos,{tabbable:function(o){var d=e.attr(o,"tabindex"),p=d!=null;return(!p||0<=d)&&e.ui.focusable(o,p)}}),e.fn.extend({uniqueId:(J=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++J)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.widget("ui.accordion",{version:"1.14.0",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(o){return o.find("> li > :first-child").add(o.find("> :not(li)").filter(function(d){return d%2==0}))},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var o=this.options;this.prevShow=this.prevHide=e(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),o.collapsible||o.active!==!1&&o.active!=null||(o.active=0),this._processPanels(),o.active<0&&(o.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var o,d=this.options.icons;d&&(o=e("<span>"),this._addClass(o,"ui-accordion-header-icon","ui-icon "+d.header),o.prependTo(this.headers),o=this.active.children(".ui-accordion-header-icon"),this._removeClass(o,d.header)._addClass(o,null,d.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var o;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),o=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),this.options.heightStyle!=="content"&&o.css("height","")},_setOption:function(o,d){o==="active"?this._activate(d):(o==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(d)),this._super(o,d),o!=="collapsible"||d||this.options.active!==!1||this._activate(0),o==="icons"&&(this._destroyIcons(),d)&&this._createIcons())},_setOptionDisabled:function(o){this._super(o),this.element.attr("aria-disabled",o),this._toggleClass(null,"ui-state-disabled",!!o)},_keydown:function(o){if(!o.altKey&&!o.ctrlKey){var d=e.ui.keyCode,p=this.headers.length,_=this.headers.index(o.target),C=!1;switch(o.keyCode){case d.RIGHT:case d.DOWN:C=this.headers[(_+1)%p];break;case d.LEFT:case d.UP:C=this.headers[(_-1+p)%p];break;case d.SPACE:case d.ENTER:this._eventHandler(o);break;case d.HOME:C=this.headers[0];break;case d.END:C=this.headers[p-1]}C&&(e(o.target).attr("tabIndex",-1),e(C).attr("tabIndex",0),e(C).trigger("focus"),o.preventDefault())}},_panelKeyDown:function(o){o.keyCode===e.ui.keyCode.UP&&o.ctrlKey&&e(o.currentTarget).prev().trigger("focus")},refresh:function(){var o=this.options;this._processPanels(),o.active===!1&&o.collapsible===!0||!this.headers.length?(o.active=!1,this.active=e()):o.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(o.active=!1,this.active=e()):this._activate(Math.max(0,o.active-1)):o.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var o=this.headers,d=this.panels;typeof this.options.header=="function"?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),d&&(this._off(o.not(this.headers)),this._off(d.not(this.panels)))},_refresh:function(){var o,d=this.options,p=d.heightStyle,_=this.element.parent();this.active=this._findActive(d.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var C=e(this),S=C.uniqueId().attr("id"),A=C.next(),N=A.uniqueId().attr("id");C.attr("aria-controls",N),A.attr("aria-labelledby",S)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(d.event),p==="fill"?(o=_.height(),this.element.siblings(":visible").each(function(){var C=e(this),S=C.css("position");S!=="absolute"&&S!=="fixed"&&(o-=C.outerHeight(!0))}),this.headers.each(function(){o-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,o-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):p==="auto"&&(o=0,this.headers.next().each(function(){var C=e(this).is(":visible");C||e(this).show(),o=Math.max(o,e(this).css("height","").height()),C||e(this).hide()}).height(o))},_activate:function(o){o=this._findActive(o)[0],o!==this.active[0]&&(o=o||this.active[0],this._eventHandler({target:o,currentTarget:o,preventDefault:e.noop}))},_findActive:function(o){return typeof o=="number"?this.headers.eq(o):e()},_setupEvents:function(o){var d={keydown:"_keydown"};o&&e.each(o.split(" "),function(p,_){d[_]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,d),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(o){var d=this.options,p=this.active,_=e(o.currentTarget),C=_[0]===p[0],S=C&&d.collapsible,A=S?e():_.next(),N=p.next(),N={oldHeader:p,oldPanel:N,newHeader:S?e():_,newPanel:A};o.preventDefault(),C&&!d.collapsible||this._trigger("beforeActivate",o,N)===!1||(d.active=!S&&this.headers.index(_),this.active=C?e():_,this._toggle(N),this._removeClass(p,"ui-accordion-header-active","ui-state-active"),d.icons&&(A=p.children(".ui-accordion-header-icon"),this._removeClass(A,null,d.icons.activeHeader)._addClass(A,null,d.icons.header)),C)||(this._removeClass(_,"ui-accordion-header-collapsed")._addClass(_,"ui-accordion-header-active","ui-state-active"),d.icons&&(o=_.children(".ui-accordion-header-icon"),this._removeClass(o,null,d.icons.header)._addClass(o,null,d.icons.activeHeader)),this._addClass(_.next(),"ui-accordion-content-active"))},_toggle:function(o){var d=o.newPanel,p=this.prevShow.length?this.prevShow:o.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=d,this.prevHide=p,this.options.animate?this._animate(d,p,o):(p.hide(),d.show(),this._toggleComplete(o)),p.attr({"aria-hidden":"true"}),p.prev().attr({"aria-selected":"false","aria-expanded":"false"}),d.length&&p.length?p.prev().attr({tabIndex:-1,"aria-expanded":"false"}):d.length&&this.headers.filter(function(){return parseInt(e(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1),d.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(o,d,p){function _(){S._toggleComplete(p)}var C,S=this,A=0,N=o.css("box-sizing"),Y=o.length&&(!d.length||o.index()<d.index()),G=this.options.animate||{},Y=Y&&G.down||G,X=(X=typeof Y=="string"?Y:X)||Y.easing||G.easing,$=($=typeof Y=="number"?Y:$)||Y.duration||G.duration;return d.length?o.length?(C=o.show().outerHeight(),d.animate(this.hideProps,{duration:$,easing:X,step:function(he,we){we.now=Math.round(he)}}),void o.hide().animate(this.showProps,{duration:$,easing:X,complete:_,step:function(he,we){we.now=Math.round(he),we.prop!=="height"?N==="content-box"&&(A+=we.now):S.options.heightStyle!=="content"&&(we.now=Math.round(C-d.outerHeight()-A),A=0)}})):d.animate(this.hideProps,$,X,_):o.animate(this.showProps,$,X,_)},_toggleComplete:function(o){var d=o.oldPanel,p=d.prev();this._removeClass(d,"ui-accordion-content-active"),this._removeClass(p,"ui-accordion-header-active")._addClass(p,"ui-accordion-header-collapsed"),this._trigger("activate",null,o)}}),e.widget("ui.menu",{version:"1.14.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(o){o.preventDefault(),this._activateItem(o)},"click .ui-menu-item":function(o){var d=e(o.target),p=e(this.document[0].activeElement);!this.mouseHandled&&d.not(".ui-state-disabled").length&&(this.select(o),o.isPropagationStopped()||(this.mouseHandled=!0),d.has(".ui-menu").length?this.expand(o):!this.element.is(":focus")&&p.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active)&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(o,d){var p=this.active||this._menuItems().first();d||this.focus(o,p)},blur:function(o){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(o)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(o){this._closeOnDocumentClick(o)&&this.collapseAll(o,!0),this.mouseHandled=!1}})},_activateItem:function(o){var d,p;this.previousFilter||o.clientX===this.lastMousePosition.x&&o.clientY===this.lastMousePosition.y||(this.lastMousePosition={x:o.clientX,y:o.clientY},d=e(o.target).closest(".ui-menu-item"),p=e(o.currentTarget),d[0]!==p[0])||p.is(".ui-state-active")||(this._removeClass(p.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(o,p))},_destroy:function(){var o=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),o.children().each(function(){var d=e(this);d.data("ui-menu-submenu-caret")&&d.remove()})},_keydown:function(o){var d,p,_,C=!0;switch(o.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(o);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(o);break;case e.ui.keyCode.HOME:this._move("first","first",o);break;case e.ui.keyCode.END:this._move("last","last",o);break;case e.ui.keyCode.UP:this.previous(o);break;case e.ui.keyCode.DOWN:this.next(o);break;case e.ui.keyCode.LEFT:this.collapse(o);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(o);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(o);break;case e.ui.keyCode.ESCAPE:this.collapse(o);break;default:d=this.previousFilter||"",_=C=!1,p=96<=o.keyCode&&o.keyCode<=105?(o.keyCode-96).toString():String.fromCharCode(o.keyCode),clearTimeout(this.filterTimer),p===d?_=!0:p=d+p,d=this._filterMenuItems(p),(d=_&&d.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):d).length||(p=String.fromCharCode(o.keyCode),d=this._filterMenuItems(p)),d.length?(this.focus(o,d),this.previousFilter=p,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}C&&o.preventDefault()},_activate:function(o){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(o):this.select(o))},refresh:function(){var o,d,p=this,_=this.options.icons.submenu,C=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),o=C.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var S=e(this),A=S.prev(),N=e("<span>").data("ui-menu-submenu-caret",!0);p._addClass(N,"ui-menu-icon","ui-icon "+_),A.attr("aria-haspopup","true").prepend(N),S.attr("aria-labelledby",A.attr("id"))}),this._addClass(o,"ui-menu","ui-widget ui-widget-content ui-front"),(o=C.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var S=e(this);p._isDivider(S)&&p._addClass(S,"ui-menu-divider","ui-widget-content")}),d=(C=o.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(C,"ui-menu-item")._addClass(d,"ui-menu-item-wrapper"),o.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(o,d){var p;o==="icons"&&(p=this.element.find(".ui-menu-icon"),this._removeClass(p,null,this.options.icons.submenu)._addClass(p,null,d.submenu)),this._super(o,d)},_setOptionDisabled:function(o){this._super(o),this.element.attr("aria-disabled",String(o)),this._toggleClass(null,"ui-state-disabled",!!o)},focus:function(o,d){var p;this.blur(o,o&&o.type==="focus"),this._scrollIntoView(d),this.active=d.first(),p=this.active.children(".ui-menu-item-wrapper"),this._addClass(p,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",p.attr("id")),p=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(p,null,"ui-state-active"),o&&o.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),(p=d.children(".ui-menu")).length&&o&&/^mouse/.test(o.type)&&this._startOpening(p),this.activeMenu=d.parent(),this._trigger("focus",o,{item:d})},_scrollIntoView:function(o){var d,p,_;this._hasScroll()&&(d=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,p=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,d=o.offset().top-this.activeMenu.offset().top-d-p,p=this.activeMenu.scrollTop(),_=this.activeMenu.height(),o=o.outerHeight(),d<0?this.activeMenu.scrollTop(p+d):_<d+o&&this.activeMenu.scrollTop(p+d-_+o))},blur:function(o,d){d||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",o,{item:this.active}),this.active=null)},_startOpening:function(o){clearTimeout(this.timer),o.attr("aria-hidden")==="true"&&(this.timer=this._delay(function(){this._close(),this._open(o)},this.delay))},_open:function(o){var d=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(o.parents(".ui-menu")).hide().attr("aria-hidden","true"),o.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(d)},collapseAll:function(o,d){clearTimeout(this.timer),this.timer=this._delay(function(){var p=d?this.element:e(o&&o.target).closest(this.element.find(".ui-menu"));p.length||(p=this.element),this._close(p),this.blur(o),this._removeClass(p.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=p},d?0:this.delay)},_close:function(o){(o=o||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(o){return!e(o.target).closest(".ui-menu").length},_isDivider:function(o){return!/[^\-\u2014\u2013\s]/.test(o.text())},collapse:function(o){var d=this.active&&this.active.parent().closest(".ui-menu-item",this.element);d&&d.length&&(this._close(),this.focus(o,d))},expand:function(o){var d=this.active&&this._menuItems(this.active.children(".ui-menu")).first();d&&d.length&&(this._open(d.parent()),this._delay(function(){this.focus(o,d)}))},next:function(o){this._move("next","first",o)},previous:function(o){this._move("prev","last",o)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(o){return(o||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(o,d,p){var _;(_=this.active?o==="first"||o==="last"?this.active[o==="first"?"prevAll":"nextAll"](".ui-menu-item").last():this.active[o+"All"](".ui-menu-item").first():_)&&_.length&&this.active||(_=this._menuItems(this.activeMenu)[d]()),this.focus(p,_)},nextPage:function(o){var d,p,_;this.active?this.isLastItem()||(this._hasScroll()?(p=this.active.offset().top,_=this.element.innerHeight(),e.fn.jquery.indexOf("3.2.")===0&&(_+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each(function(){return(d=e(this)).offset().top-p-_<0}),this.focus(o,d)):this.focus(o,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(o)},previousPage:function(o){var d,p,_;this.active?this.isFirstItem()||(this._hasScroll()?(p=this.active.offset().top,_=this.element.innerHeight(),e.fn.jquery.indexOf("3.2.")===0&&(_+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each(function(){return 0<(d=e(this)).offset().top-p+_}),this.focus(o,d)):this.focus(o,this._menuItems(this.activeMenu).first())):this.next(o)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(o){this.active=this.active||e(o.target).closest(".ui-menu-item");var d={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(o,!0),this._trigger("select",o,d)},_filterMenuItems:function(d){var d=d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),p=new RegExp("^"+d,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return p.test(String.prototype.trim.call(e(this).children(".ui-menu-item-wrapper").text()))})}}),e.widget("ui.autocomplete",{version:"1.14.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var o,d,p,C=this.element[0].nodeName.toLowerCase(),_=C==="textarea",C=C==="input";this.isMultiLine=_||!C&&this.element.prop("contentEditable")==="true",this.valueMethod=this.element[_||C?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(S){if(this.element.prop("readOnly"))d=p=o=!0;else{d=p=o=!1;var A=e.ui.keyCode;switch(S.keyCode){case A.PAGE_UP:o=!0,this._move("previousPage",S);break;case A.PAGE_DOWN:o=!0,this._move("nextPage",S);break;case A.UP:o=!0,this._keyEvent("previous",S);break;case A.DOWN:o=!0,this._keyEvent("next",S);break;case A.ENTER:this.menu.active&&(o=!0,S.preventDefault(),this.menu.select(S));break;case A.TAB:this.menu.active&&this.menu.select(S);break;case A.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(S),S.preventDefault());break;default:d=!0,this._searchTimeout(S)}}},keypress:function(S){if(o)o=!1,this.isMultiLine&&!this.menu.element.is(":visible")||S.preventDefault();else if(!d){var A=e.ui.keyCode;switch(S.keyCode){case A.PAGE_UP:this._move("previousPage",S);break;case A.PAGE_DOWN:this._move("nextPage",S);break;case A.UP:this._keyEvent("previous",S);break;case A.DOWN:this._keyEvent("next",S)}}},input:function(S){p?(p=!1,S.preventDefault()):this._searchTimeout(S)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(S){clearTimeout(this.searching),this.close(S),this._change(S)}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(S){S.preventDefault()},menufocus:function(S,A){var N,G;this.isNewMenu&&(this.isNewMenu=!1,S.originalEvent)&&/^mouse/.test(S.originalEvent.type)?(this.menu.blur(),this.document.one("mousemove",function(){e(S.target).trigger(S.originalEvent)})):(G=A.item.data("ui-autocomplete-item"),this._trigger("focus",S,{item:G})!==!1&&S.originalEvent&&/^key/.test(S.originalEvent.type)&&this._value(G.value),(N=A.item.attr("aria-label")||G.value)&&String.prototype.trim.call(N).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(e("<div>").text(N))},100)))},menuselect:function(S,N){var N=N.item.data("ui-autocomplete-item"),G=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.trigger("focus"),this.previous=G),this._trigger("select",S,{item:N})!==!1&&this._value(N.value),this.term=this._value(),this.close(S),this.selectedItem=N}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(o,d){this._super(o,d),o==="source"&&this._initSource(),o==="appendTo"&&this.menu.element.appendTo(this._appendTo()),o==="disabled"&&d&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(o){var d=this.menu.element[0];return o.target===this.element[0]||o.target===d||e.contains(d,o.target)},_closeOnClickOutside:function(o){this._isEventTargetInWidget(o)||this.close()},_appendTo:function(){var o=this.options.appendTo;return o=(o=(o=o&&(o.jquery||o.nodeType?e(o):this.document.find(o).eq(0)))&&o[0]?o:this.element.closest(".ui-front, dialog")).length?o:this.document[0].body},_initSource:function(){var o,d,p=this;Array.isArray(this.options.source)?(o=this.options.source,this.source=function(_,C){C(e.ui.autocomplete.filter(o,_.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(_,C){p.xhr&&p.xhr.abort(),p.xhr=e.ajax({url:d,data:_,dataType:"json",success:function(S){C(S)},error:function(){C([])}})}):this.source=this.options.source},_searchTimeout:function(o){clearTimeout(this.searching),this.searching=this._delay(function(){var d=this.term===this._value(),p=this.menu.element.is(":visible"),_=o.altKey||o.ctrlKey||o.metaKey||o.shiftKey;d&&(p||_)||(this.selectedItem=null,this.search(null,o))},this.options.delay)},search:function(o,d){return o=o??this._value(),this.term=this._value(),o.length<this.options.minLength?this.close(d):this._trigger("search",d)!==!1?this._search(o):void 0},_search:function(o){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:o},this._response())},_response:function(){var o=++this.requestIndex;return(function(d){o===this.requestIndex&&this.__response(d),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}).bind(this)},__response:function(o){o=o&&this._normalize(o),this._trigger("response",null,{content:o}),!this.options.disabled&&o&&o.length&&!this.cancelSearch?(this._suggest(o),this._trigger("open")):this._close()},close:function(o){this.cancelSearch=!0,this._close(o)},_close:function(o){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",o))},_change:function(o){this.previous!==this._value()&&this._trigger("change",o,{item:this.selectedItem})},_normalize:function(o){return o.length&&o[0].label&&o[0].value?o:e.map(o,function(d){return typeof d=="string"?{label:d,value:d}:e.extend({},d,{label:d.label||d.value,value:d.value||d.label})})},_suggest:function(o){var d=this.menu.element.empty();this._renderMenu(d,o),this.isNewMenu=!0,this.menu.refresh(),d.show(),this._resizeMenu(),d.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var o=this.menu.element;o.outerWidth(Math.max(o.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(o,d){var p=this;e.each(d,function(_,C){p._renderItemData(o,C)})},_renderItemData:function(o,d){return this._renderItem(o,d).data("ui-autocomplete-item",d)},_renderItem:function(o,d){return e("<li>").append(e("<div>").text(d.label)).appendTo(o)},_move:function(o,d){this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(o)||this.menu.isLastItem()&&/^next/.test(o)?(this.isMultiLine||this._value(this.term),this.menu.blur()):this.menu[o](d):this.search(null,d)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(o,d){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(o,d),d.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(o){return o.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(o,d){var p=new RegExp(e.ui.autocomplete.escapeRegex(d),"i");return e.grep(o,function(_){return p.test(_.label||_.value||_)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(o){return o+(1<o?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(o){var d;this._superApply(arguments),this.options.disabled||this.cancelSearch||(d=o&&o.length?this.options.messages.results(o.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(e("<div>").text(d))},100))}}),e.ui.autocomplete,/ui-corner-([a-z]){2,6}/g);e.widget("ui.controlgroup",{version:"1.14.0",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var o=this,d=[];e.each(this.options.items,function(p,_){var C,S={};_&&(p==="controlgroupLabel"?((C=o.element.find(_)).each(function(){var A=e(this);A.children(".ui-controlgroup-label-contents").length||A.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),o._addClass(C,null,"ui-widget ui-widget-content ui-state-default"),d=d.concat(C.get())):e.fn[p]&&(S=o["_"+p+"Options"]?o["_"+p+"Options"]("middle"):{classes:{}},o.element.find(_).each(function(){var A=e(this),N=A[p]("instance"),G=e.widget.extend({},S);p==="button"&&A.parent(".ui-spinner").length||((N=N||A[p]()[p]("instance"))&&(G.classes=o._resolveClassesValues(G.classes,N)),A[p](G),G=A[p]("widget"),e.data(G[0],"ui-controlgroup-data",N||A[p]("instance")),d.push(G[0]))})))}),this.childWidgets=e(e.uniqueSort(d)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(o){this.childWidgets.each(function(){var d=e(this).data("ui-controlgroup-data");d&&d[o]&&d[o]()})},_updateCornerClass:function(o,d){d=this._buildSimpleOptions(d,"label").classes.label,this._removeClass(o,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(o,null,d)},_buildSimpleOptions:function(o,d){var p=this.options.direction==="vertical",_={classes:{}};return _.classes[d]={middle:"",first:"ui-corner-"+(p?"top":"left"),last:"ui-corner-"+(p?"bottom":"right"),only:"ui-corner-all"}[o],_},_spinnerOptions:function(o){return o=this._buildSimpleOptions(o,"ui-spinner"),o.classes["ui-spinner-up"]="",o.classes["ui-spinner-down"]="",o},_buttonOptions:function(o){return this._buildSimpleOptions(o,"ui-button")},_checkboxradioOptions:function(o){return this._buildSimpleOptions(o,"ui-checkboxradio-label")},_selectmenuOptions:function(o){var d=this.options.direction==="vertical";return{width:d&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(d?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(d?"top":"left")},last:{"ui-selectmenu-button-open":d?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(d?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[o]}},_resolveClassesValues:function(o,d){var p={};return e.each(o,function(_){var C=d.options.classes[_]||"",C=String.prototype.trim.call(C.replace(Q,""));p[_]=(C+" "+o[_]).replace(/\s+/g," ")}),p},_setOption:function(o,d){o==="direction"&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(o,d),o==="disabled"?this._callChildMethod(d?"disable":"enable"):this.refresh()},refresh:function(){var o,d=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),this.options.direction==="horizontal"&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),o=this.childWidgets,(o=this.options.onlyVisible?o.filter(":visible"):o).length&&(e.each(["first","last"],function(p,_){var C,S=o[_]().data("ui-controlgroup-data");S&&d["_"+S.widgetName+"Options"]?((C=d["_"+S.widgetName+"Options"](o.length===1?"only":_)).classes=d._resolveClassesValues(C.classes,S),S.element[S.widgetName](C)):d._updateCornerClass(o[_](),_)}),this._callChildMethod("refresh"))}}),e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.14.0",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var o,d=this._super()||{};return this._readType(),o=this.element.labels(),this.label=e(o[o.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",(o=this.label.contents().not(this.element[0])).length&&(this.originalLabel+=o.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(d.label=this.originalLabel),(o=this.element[0].disabled)!=null&&(d.disabled=o),d},_create:function(){var o=this.element[0].checked;this._bindFormResetHandler(),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),this.type==="radio"&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),o&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var o=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,o==="input"&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+o+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var o=this.element[0].name,d="input[name='"+CSS.escape(o)+"']";return o?(this.form.length?e(this.form[0].elements).filter(d):e(d).filter(function(){return e(e(this).prop("form")).length===0})).not(this.element):e([])},_toggleClasses:function(){var o=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",o),this.options.icon&&this.type==="checkbox"&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",o)._toggleClass(this.icon,null,"ui-icon-blank",!o),this.type==="radio"&&this._getRadioGroup().each(function(){var d=e(this).checkboxradio("instance");d&&d._removeClass(d.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(o,d){o==="label"&&!d||(this._super(o,d),o==="disabled"?(this._toggleClass(this.label,null,"ui-state-disabled",d),this.element[0].disabled=d):this.refresh())},_updateIcon:function(o){var d="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),this.type==="checkbox"?(d+=o?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,o?"ui-icon-blank":"ui-icon-check")):d+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",d),o||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):this.icon!==void 0&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var o=this.label.contents().not(this.element[0]);this.icon&&(o=o.not(this.icon[0])),(o=this.iconSpace?o.not(this.iconSpace[0]):o).remove(),this.label.append(this.options.label)},refresh:function(){var o=this.element[0].checked,d=this.element[0].disabled;this._updateIcon(o),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",o),this.options.label!==null&&this._updateLabel(),d!==this.options.disabled&&this._setOptions({disabled:d})}}]),e.ui.checkboxradio,e.widget("ui.button",{version:"1.14.0",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var o,d=this._super()||{};return this.isInput=this.element.is("input"),(o=this.element[0].disabled)!=null&&(d.disabled=o),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(d.label=this.originalLabel),d},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(o){o.keyCode===e.ui.keyCode.SPACE&&(o.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(p,d){var p=p!=="iconPosition",_=p?this.options.iconPosition:d,C=_==="top"||_==="bottom";this.icon?p&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),p&&this._addClass(this.icon,null,d),this._attachIcon(_),C?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(_))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(o){this.icon[/^(?:end|bottom)/.test(o)?"before":"after"](this.iconSpace)},_attachIcon:function(o){this.element[/^(?:end|bottom)/.test(o)?"append":"prepend"](this.icon)},_setOptions:function(o){var d=(o.showLabel===void 0?this.options:o).showLabel,p=(o.icon===void 0?this.options:o).icon;d||p||(o.showLabel=!0),this._super(o)},_setOption:function(o,d){o==="icon"&&(d?this._updateIcon(o,d):this.icon&&(this.icon.remove(),this.iconSpace)&&this.iconSpace.remove()),o==="iconPosition"&&this._updateIcon(o,d),o==="showLabel"&&(this._toggleClass("ui-button-icon-only",null,!d),this._updateTooltip()),o==="label"&&(this.isInput?this.element.val(d):(this.element.html(d),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(o,d),o==="disabled"&&(this._toggleClass(null,"ui-state-disabled",d),this.element[0].disabled=d)&&this.element.trigger("blur")},refresh:function(){var o=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");o!==this.options.disabled&&this._setOptions({disabled:o}),this._updateTooltip()}}),e.uiBackCompat===!0&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(o,d){o==="text"?this._super("showLabel",d):(o==="showLabel"&&(this.options.text=d),o==="icon"&&(this.options.icons.primary=d),o==="icons"&&(d.primary?(this._super("icon",d.primary),this._super("iconPosition","beginning")):d.secondary&&(this._super("icon",d.secondary),this._super("iconPosition","end"))),this._superApply(arguments))}}),e.fn.button=(K=e.fn.button,function(o){var d=typeof o=="string",p=Array.prototype.slice.call(arguments,1),_=this;return d?this.length||o!=="instance"?this.each(function(){var C,S=e(this).attr("type"),S=e.data(this,"ui-"+(S!=="checkbox"&&S!=="radio"?"button":"checkboxradio"));return o==="instance"?(_=S,!1):S?typeof S[o]!="function"||o.charAt(0)==="_"?e.error("no such method '"+o+"' for button widget instance"):(C=S[o].apply(S,p))!==S&&C!==void 0?(_=C&&C.jquery?_.pushStack(C.get()):C,!1):void 0:e.error("cannot call methods on button prior to initialization; attempted to call method '"+o+"'")}):_=void 0:(p.length&&(o=e.widget.extend.apply(null,[o].concat(p))),this.each(function(){var C=e(this).attr("type"),C=C!=="checkbox"&&C!=="radio"?"button":"checkboxradio",S=e.data(this,"ui-"+C);S?(S.option(o||{}),S._init&&S._init()):C=="button"?K.call(e(this),o):e(this).checkboxradio(e.extend({icon:!1},o))})),_}),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):arguments[0]==="option"&&arguments[1]==="items"?this.controlgroup.apply(this,[arguments[0],"items.button"]):(typeof arguments[0]=="object"&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button;function ee(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=se(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function se(o){var d="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return o.on("mouseout",d,function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",d,re)}function re(){e.datepicker._isDisabledDatepicker((q.inline?q.dpDiv.parent():q.input)[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))}function ge(o,d){for(var p in e.extend(o,d),d)d[p]==null&&(o[p]=d[p])}e.extend(e.ui,{datepicker:{version:"1.14.0"}}),e.extend(ee.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(o){return ge(this._defaults,o||{}),this},_attachDatepicker:function(o,d){var p,_=o.nodeName.toLowerCase(),C=_==="div"||_==="span";o.id||(this.uuid+=1,o.id="dp"+this.uuid),(p=this._newInst(e(o),C)).settings=e.extend({},d||{}),_==="input"?this._connectDatepicker(o,p):C&&this._inlineDatepicker(o,p)},_newInst:function(o,d){return{id:o[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:o,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:d,dpDiv:d?se(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(o,d){var p=e(o);d.append=e([]),d.trigger=e([]),p.hasClass(this.markerClassName)||(this._attachments(p,d),p.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(d),e.data(o,"datepicker",d),d.settings.disabled&&this._disableDatepicker(o))},_attachments:function(o,d){var p,_=this._get(d,"appendText"),C=this._get(d,"isRTL");d.append&&d.append.remove(),_&&(d.append=e("<span>").addClass(this._appendClass).text(_),o[C?"before":"after"](d.append)),o.off("focus",this._showDatepicker),d.trigger&&d.trigger.remove(),(_=this._get(d,"showOn"))!=="focus"&&_!=="both"||o.on("focus",this._showDatepicker),_!=="button"&&_!=="both"||(_=this._get(d,"buttonText"),p=this._get(d,"buttonImage"),this._get(d,"buttonImageOnly")?d.trigger=e("<img>").addClass(this._triggerClass).attr({src:p,alt:_,title:_}):(d.trigger=e("<button type='button'>").addClass(this._triggerClass),p?d.trigger.html(e("<img>").attr({src:p,alt:_,title:_})):d.trigger.text(_)),o[C?"before":"after"](d.trigger),d.trigger.on("click",function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===o[0]?e.datepicker._hideDatepicker():(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==o[0]&&e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(o[0])),!1}))},_autoSize:function(o){var d,p,_,C,S,A;this._get(o,"autoSize")&&!o.inline&&(S=new Date(2009,11,20),(A=this._get(o,"dateFormat")).match(/[DM]/)&&(S.setMonth((d=function(N){for(C=_=p=0;C<N.length;C++)N[C].length>p&&(p=N[C].length,_=C);return _})(this._get(o,A.match(/MM/)?"monthNames":"monthNamesShort"))),S.setDate(d(this._get(o,A.match(/DD/)?"dayNames":"dayNamesShort"))+20-S.getDay())),o.input.attr("size",this._formatDate(o,S).length))},_inlineDatepicker:function(o,d){var p=e(o);p.hasClass(this.markerClassName)||(p.addClass(this.markerClassName).append(d.dpDiv),e.data(o,"datepicker",d),this._setDate(d,this._getDefaultDate(d),!0),this._updateDatepicker(d),this._updateAlternate(d),d.settings.disabled&&this._disableDatepicker(o),d.dpDiv.css("display","block"))},_dialogDatepicker:function(o,d,p,_,C){var S,A=this._dialogInst;return A||(this.uuid+=1,S="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+S+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(A=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",A)),ge(A.settings,_||{}),d=d&&d.constructor===Date?this._formatDate(A,d):d,this._dialogInput.val(d),this._pos=C?C.length?C:[C.pageX,C.pageY]:null,this._pos||(S=document.documentElement.clientWidth,_=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,C=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[S/2-100+d,_/2-150+C]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),A.settings.onSelect=p,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",A),this},_destroyDatepicker:function(o){var d,p=e(o),_=e.data(o,"datepicker");p.hasClass(this.markerClassName)&&(d=o.nodeName.toLowerCase(),e.removeData(o,"datepicker"),d==="input"?(_.append.remove(),_.trigger.remove(),p.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):d!=="div"&&d!=="span"||p.removeClass(this.markerClassName).empty(),e.datepicker._hideDatepicker(),q===_)&&(q=null,this._curInst=null)},_enableDatepicker:function(o){var d,p=e(o),_=e.data(o,"datepicker");p.hasClass(this.markerClassName)&&((d=o.nodeName.toLowerCase())==="input"?(o.disabled=!1,_.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):d!=="div"&&d!=="span"||((_=p.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),_.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(C){return C===o?null:C}))},_disableDatepicker:function(o){var d,p=e(o),_=e.data(o,"datepicker");p.hasClass(this.markerClassName)&&((d=o.nodeName.toLowerCase())==="input"?(o.disabled=!0,_.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):d!=="div"&&d!=="span"||((_=p.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),_.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(C){return C===o?null:C}),this._disabledInputs[this._disabledInputs.length]=o)},_isDisabledDatepicker:function(o){if(o){for(var d=0;d<this._disabledInputs.length;d++)if(this._disabledInputs[d]===o)return!0}return!1},_getInst:function(o){try{return e.data(o,"datepicker")}catch{throw"Missing instance data for this datepicker"}},_optionDatepicker:function(o,d,p){var _,C,S=this._getInst(o);if(arguments.length===2&&typeof d=="string")return d==="defaults"?e.extend({},e.datepicker._defaults):S?d==="all"?e.extend({},S.settings):this._get(S,d):null;_=d||{},typeof d=="string"&&((_={})[d]=p),S&&(this._curInst===S&&this._hideDatepicker(),d=this._getDateDatepicker(o,!0),p=this._getMinMaxDate(S,"min"),C=this._getMinMaxDate(S,"max"),ge(S.settings,_),p!==null&&_.dateFormat!==void 0&&_.minDate===void 0&&(S.settings.minDate=this._formatDate(S,p)),C!==null&&_.dateFormat!==void 0&&_.maxDate===void 0&&(S.settings.maxDate=this._formatDate(S,C)),"disabled"in _&&(_.disabled?this._disableDatepicker(o):this._enableDatepicker(o)),this._attachments(e(o),S),this._autoSize(S),this._setDate(S,d),this._updateAlternate(S),this._updateDatepicker(S))},_changeDatepicker:function(o,d,p){this._optionDatepicker(o,d,p)},_refreshDatepicker:function(o){o=this._getInst(o),o&&this._updateDatepicker(o)},_setDateDatepicker:function(o,d){o=this._getInst(o),o&&(this._setDate(o,d),this._updateDatepicker(o),this._updateAlternate(o))},_getDateDatepicker:function(o,d){return o=this._getInst(o),o&&!o.inline&&this._setDateFromField(o,d),o?this._getDate(o):null},_doKeyDown:function(o){var d,p,_=e.datepicker._getInst(o.target),C=!0,S=_.dpDiv.is(".ui-datepicker-rtl");if(_._keyEvent=!0,e.datepicker._datepickerShowing)switch(o.keyCode){case 9:e.datepicker._hideDatepicker(),C=!1;break;case 13:return(p=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",_.dpDiv))[0]&&e.datepicker._selectDay(o.target,_.selectedMonth,_.selectedYear,p[0]),(p=e.datepicker._get(_,"onSelect"))?(d=e.datepicker._formatDate(_),p.apply(_.input?_.input[0]:null,[d,_])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(o.target,o.ctrlKey?-e.datepicker._get(_,"stepBigMonths"):-e.datepicker._get(_,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(o.target,o.ctrlKey?+e.datepicker._get(_,"stepBigMonths"):+e.datepicker._get(_,"stepMonths"),"M");break;case 35:(o.ctrlKey||o.metaKey)&&e.datepicker._clearDate(o.target),C=o.ctrlKey||o.metaKey;break;case 36:(o.ctrlKey||o.metaKey)&&e.datepicker._gotoToday(o.target),C=o.ctrlKey||o.metaKey;break;case 37:(o.ctrlKey||o.metaKey)&&e.datepicker._adjustDate(o.target,S?1:-1,"D"),C=o.ctrlKey||o.metaKey,o.originalEvent.altKey&&e.datepicker._adjustDate(o.target,o.ctrlKey?-e.datepicker._get(_,"stepBigMonths"):-e.datepicker._get(_,"stepMonths"),"M");break;case 38:(o.ctrlKey||o.metaKey)&&e.datepicker._adjustDate(o.target,-7,"D"),C=o.ctrlKey||o.metaKey;break;case 39:(o.ctrlKey||o.metaKey)&&e.datepicker._adjustDate(o.target,S?-1:1,"D"),C=o.ctrlKey||o.metaKey,o.originalEvent.altKey&&e.datepicker._adjustDate(o.target,o.ctrlKey?+e.datepicker._get(_,"stepBigMonths"):+e.datepicker._get(_,"stepMonths"),"M");break;case 40:(o.ctrlKey||o.metaKey)&&e.datepicker._adjustDate(o.target,7,"D"),C=o.ctrlKey||o.metaKey;break;default:C=!1}else o.keyCode===36&&o.ctrlKey?e.datepicker._showDatepicker(this):C=!1;C&&(o.preventDefault(),o.stopPropagation())},_doKeyPress:function(o){var d,p=e.datepicker._getInst(o.target);if(e.datepicker._get(p,"constrainInput"))return p=e.datepicker._possibleChars(e.datepicker._get(p,"dateFormat")),d=String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),o.ctrlKey||o.metaKey||d<" "||!p||-1<p.indexOf(d)},_doKeyUp:function(o){if(o=e.datepicker._getInst(o.target),o.input.val()!==o.lastVal)try{e.datepicker.parseDate(e.datepicker._get(o,"dateFormat"),o.input?o.input.val():null,e.datepicker._getFormatConfig(o))&&(e.datepicker._setDateFromField(o),e.datepicker._updateAlternate(o),e.datepicker._updateDatepicker(o))}catch{}return!0},_showDatepicker:function(o){var d,p,_,C;(o=o.target||o).nodeName.toLowerCase()!=="input"&&(o=e("input",o.parentNode)[0]),e.datepicker._isDisabledDatepicker(o)||e.datepicker._lastInput===o||(C=e.datepicker._getInst(o),e.datepicker._curInst&&e.datepicker._curInst!==C&&(e.datepicker._curInst.dpDiv.stop(!0,!0),C)&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0]),(p=(p=e.datepicker._get(C,"beforeShow"))?p.apply(o,[o,C]):{})===!1)||(ge(C.settings,p),C.lastVal=null,e.datepicker._lastInput=o,e.datepicker._setDateFromField(C),e.datepicker._inDialog&&(o.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(o),e.datepicker._pos[1]+=o.offsetHeight),d=!1,e(o).parents().each(function(){return!(d|=e(this).css("position")==="fixed")}),p={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,C.dpDiv.empty(),C.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(C),p=e.datepicker._checkOffset(C,p,d),C.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":d?"fixed":"absolute",display:"none",left:p.left+"px",top:p.top+"px"}),C.inline)||(p=e.datepicker._get(C,"showAnim"),_=e.datepicker._get(C,"duration"),C.dpDiv.css("z-index",function(S){for(var A;S.length&&S[0]!==document;){if(((A=S.css("position"))==="absolute"||A==="relative"||A==="fixed")&&(A=parseInt(S.css("zIndex"),10),!isNaN(A))&&A!==0)return A;S=S.parent()}return 0}(e(o))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[p]?C.dpDiv.show(p,e.datepicker._get(C,"showOptions"),_):C.dpDiv[p||"show"](p?_:null),e.datepicker._shouldFocusInput(C)&&C.input.trigger("focus"),e.datepicker._curInst=C)},_updateDatepicker:function(o){this.maxRows=4,(q=o).dpDiv.empty().append(this._generateHTML(o)),this._attachHandlers(o);var d,p=this._getNumberOfMonths(o),_=p[1],C=o.dpDiv.find("."+this._dayOverClass+" a"),S=e.datepicker._get(o,"onUpdateDatepicker");0<C.length&&re.apply(C.get(0)),o.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<_&&o.dpDiv.addClass("ui-datepicker-multi-"+_).css("width",17*_+"em"),o.dpDiv[(p[0]!==1||p[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),o.dpDiv[(this._get(o,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),o===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(o)&&o.input.trigger("focus"),o.yearshtml&&(d=o.yearshtml,setTimeout(function(){d===o.yearshtml&&o.yearshtml&&o.dpDiv.find("select.ui-datepicker-year").first().replaceWith(o.yearshtml),d=o.yearshtml=null},0)),S&&S.apply(o.input?o.input[0]:null,[o])},_shouldFocusInput:function(o){return o.input&&o.input.is(":visible")&&!o.input.is(":disabled")},_checkOffset:function(o,d,p){var _=o.dpDiv.outerWidth(),C=o.dpDiv.outerHeight(),S=o.input?o.input.outerWidth():0,A=o.input?o.input.outerHeight():0,N=document.documentElement.clientWidth+(p?0:e(document).scrollLeft()),G=document.documentElement.clientHeight+(p?0:e(document).scrollTop());return d.left-=this._get(o,"isRTL")?_-S:0,d.left-=p&&d.left===o.input.offset().left?e(document).scrollLeft():0,d.top-=p&&d.top===o.input.offset().top+A?e(document).scrollTop():0,d.left-=Math.min(d.left,d.left+_>N&&_<N?Math.abs(d.left+_-N):0),d.top-=Math.min(d.top,d.top+C>G&&C<G?Math.abs(C+A):0),d},_findPos:function(o){for(var d=this._getInst(o),p=this._get(d,"isRTL");o&&(o.type==="hidden"||o.nodeType!==1||e.expr.pseudos.hidden(o));)o=o[p?"previousSibling":"nextSibling"];return[(d=e(o).offset()).left,d.top]},_hideDatepicker:function(o){var d,p,_=this._curInst;!_||o&&_!==e.data(o,"datepicker")||this._datepickerShowing&&(o=this._get(_,"showAnim"),p=this._get(_,"duration"),d=function(){e.datepicker._tidyDialog(_)},e.effects&&e.effects.effect[o]?_.dpDiv.hide(o,e.datepicker._get(_,"showOptions"),p,d):_.dpDiv[o==="slideDown"?"slideUp":o==="fadeIn"?"fadeOut":"hide"](o?p:null,d),o||d(),this._datepickerShowing=!1,(p=this._get(_,"onClose"))&&p.apply(_.input?_.input[0]:null,[_.input?_.input.val():"",_]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI)&&(e.unblockUI(),e("body").append(this.dpDiv)),this._inDialog=!1)},_tidyDialog:function(o){o.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(o){var d;e.datepicker._curInst&&(o=e(o.target),d=e.datepicker._getInst(o[0]),!(o[0].id===e.datepicker._mainDivId||o.parents("#"+e.datepicker._mainDivId).length!==0||o.hasClass(e.datepicker.markerClassName)||o.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)||o.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==d)&&e.datepicker._hideDatepicker()},_adjustDate:function(_,d,p){var _=e(_),C=this._getInst(_[0]);this._isDisabledDatepicker(_[0])||(this._adjustInstDate(C,d,p),this._updateDatepicker(C))},_gotoToday:function(p){var d,p=e(p),_=this._getInst(p[0]);this._get(_,"gotoCurrent")&&_.currentDay?(_.selectedDay=_.currentDay,_.drawMonth=_.selectedMonth=_.currentMonth,_.drawYear=_.selectedYear=_.currentYear):(d=new Date,_.selectedDay=d.getDate(),_.drawMonth=_.selectedMonth=d.getMonth(),_.drawYear=_.selectedYear=d.getFullYear()),this._notifyChange(_),this._adjustDate(p)},_selectMonthYear:function(_,d,p){var _=e(_),C=this._getInst(_[0]);C["selected"+(p==="M"?"Month":"Year")]=C["draw"+(p==="M"?"Month":"Year")]=parseInt(d.options[d.selectedIndex].value,10),this._notifyChange(C),this._adjustDate(_)},_selectDay:function(o,d,p,_){var C=e(o);e(_).hasClass(this._unselectableClass)||this._isDisabledDatepicker(C[0])||((C=this._getInst(C[0])).selectedDay=C.currentDay=parseInt(e("a",_).attr("data-date")),C.selectedMonth=C.currentMonth=d,C.selectedYear=C.currentYear=p,this._selectDate(o,this._formatDate(C,C.currentDay,C.currentMonth,C.currentYear)))},_clearDate:function(o){o=e(o),this._selectDate(o,"")},_selectDate:function(_,d){var p,_=e(_),_=this._getInst(_[0]);d=d??this._formatDate(_),_.input&&_.input.val(d),this._updateAlternate(_),(p=this._get(_,"onSelect"))?p.apply(_.input?_.input[0]:null,[d,_]):_.input&&_.input.trigger("change"),_.inline?this._updateDatepicker(_):(this._hideDatepicker(),this._lastInput=_.input[0],typeof _.input[0]!="object"&&_.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(o){var d,p,_=this._get(o,"altField");_&&(p=this._get(o,"altFormat")||this._get(o,"dateFormat"),d=this._getDate(o),p=this.formatDate(p,d,this._getFormatConfig(o)),e(document).find(_).val(p))},noWeekends:function(o){return o=o.getDay(),[0<o&&o<6,""]},iso8601Week:function(p){var d,p=new Date(p.getTime());return p.setDate(p.getDate()+4-(p.getDay()||7)),d=p.getTime(),p.setMonth(0),p.setDate(1),Math.floor(Math.round((d-p)/864e5)/7)+1},parseDate:function(o,d,p){if(o==null||d==null)throw"Invalid arguments";if((d=typeof d=="object"?d.toString():d+"")==="")return null;for(var _,C,S=0,A=(p?p.shortYearCutoff:null)||this._defaults.shortYearCutoff,A=typeof A!="string"?A:new Date().getFullYear()%100+parseInt(A,10),N=(p?p.dayNamesShort:null)||this._defaults.dayNamesShort,G=(p?p.dayNames:null)||this._defaults.dayNames,Y=(p?p.monthNamesShort:null)||this._defaults.monthNamesShort,X=(p?p.monthNames:null)||this._defaults.monthNames,$=-1,he=-1,we=-1,Fe=-1,Te=!1,Ue=function(oe){return oe=Z+1<o.length&&o.charAt(Z+1)===oe,oe&&Z++,oe},ft=function(be){var ke=Ue(be),ke=be==="@"?14:be==="!"?20:be==="y"&&ke?4:be==="o"?3:2,be=new RegExp("^\\d{"+(be==="y"?ke:1)+","+ke+"}"),ke=d.substring(S).match(be);if(ke)return S+=ke[0].length,parseInt(ke[0],10);throw"Missing number at position "+S},L=function(Me,be,ke){var Ve=-1,Me=e.map(Ue(Me)?ke:be,function(Je,xe){return[[xe,Je]]}).sort(function(Je,xe){return-(Je[1].length-xe[1].length)});if(e.each(Me,function(Je,xe){var ze=xe[1];if(d.substr(S,ze.length).toLowerCase()===ze.toLowerCase())return Ve=xe[0],S+=ze.length,!1}),Ve!==-1)return Ve+1;throw"Unknown name at position "+S},W=function(){if(d.charAt(S)!==o.charAt(Z))throw"Unexpected literal at position "+S;S++},Z=0;Z<o.length;Z++)if(Te)o.charAt(Z)!=="'"||Ue("'")?W():Te=!1;else switch(o.charAt(Z)){case"d":we=ft("d");break;case"D":L("D",N,G);break;case"o":Fe=ft("o");break;case"m":he=ft("m");break;case"M":he=L("M",Y,X);break;case"y":$=ft("y");break;case"@":$=(C=new Date(ft("@"))).getFullYear(),he=C.getMonth()+1,we=C.getDate();break;case"!":$=(C=new Date((ft("!")-this._ticksTo1970)/1e4)).getFullYear(),he=C.getMonth()+1,we=C.getDate();break;case"'":Ue("'")?W():Te=!0;break;default:W()}if(S<d.length&&(p=d.substr(S),!/^\s+/.test(p)))throw"Extra/unparsed characters found in date: "+p;if($===-1?$=new Date().getFullYear():$<100&&($+=new Date().getFullYear()-new Date().getFullYear()%100+($<=A?0:-100)),-1<Fe)for(he=1,we=Fe;!(we<=(_=this._getDaysInMonth($,he-1)));)he++,we-=_;if((C=this._daylightSavingAdjust(new Date($,he-1,we))).getFullYear()!==$||C.getMonth()+1!==he||C.getDate()!==we)throw"Invalid date";return C},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(o,d,p){if(!d)return"";function _(we,Fe,Te){var Ue=""+Fe;if(X(we))for(;Ue.length<Te;)Ue="0"+Ue;return Ue}function C(we,Fe,Te,Ue){return(X(we)?Ue:Te)[Fe]}var S,A=(p?p.dayNamesShort:null)||this._defaults.dayNamesShort,N=(p?p.dayNames:null)||this._defaults.dayNames,G=(p?p.monthNamesShort:null)||this._defaults.monthNamesShort,Y=(p?p.monthNames:null)||this._defaults.monthNames,X=function(we){return we=S+1<o.length&&o.charAt(S+1)===we,we&&S++,we},$="",he=!1;if(d)for(S=0;S<o.length;S++)if(he)o.charAt(S)!=="'"||X("'")?$+=o.charAt(S):he=!1;else switch(o.charAt(S)){case"d":$+=_("d",d.getDate(),2);break;case"D":$+=C("D",d.getDay(),A,N);break;case"o":$+=_("o",Math.round((new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime()-new Date(d.getFullYear(),0,0).getTime())/864e5),3);break;case"m":$+=_("m",d.getMonth()+1,2);break;case"M":$+=C("M",d.getMonth(),G,Y);break;case"y":$+=X("y")?d.getFullYear():(d.getFullYear()%100<10?"0":"")+d.getFullYear()%100;break;case"@":$+=d.getTime();break;case"!":$+=1e4*d.getTime()+this._ticksTo1970;break;case"'":X("'")?$+="'":he=!0;break;default:$+=o.charAt(S)}return $},_possibleChars:function(o){for(var d="",p=!1,_=function(S){return S=C+1<o.length&&o.charAt(C+1)===S,S&&C++,S},C=0;C<o.length;C++)if(p)o.charAt(C)!=="'"||_("'")?d+=o.charAt(C):p=!1;else switch(o.charAt(C)){case"d":case"m":case"y":case"@":d+="0123456789";break;case"D":case"M":return null;case"'":_("'")?d+="'":p=!0;break;default:d+=o.charAt(C)}return d},_get:function(o,d){return(o.settings[d]!==void 0?o.settings:this._defaults)[d]},_setDateFromField:function(o,d){if(o.input.val()!==o.lastVal){var p=this._get(o,"dateFormat"),_=o.lastVal=o.input?o.input.val():null,C=this._getDefaultDate(o),S=C,A=this._getFormatConfig(o);try{S=this.parseDate(p,_,A)||C}catch{_=d?"":_}o.selectedDay=S.getDate(),o.drawMonth=o.selectedMonth=S.getMonth(),o.drawYear=o.selectedYear=S.getFullYear(),o.currentDay=_?S.getDate():0,o.currentMonth=_?S.getMonth():0,o.currentYear=_?S.getFullYear():0,this._adjustInstDate(o)}},_getDefaultDate:function(o){return this._restrictMinMax(o,this._determineDate(o,this._get(o,"defaultDate"),new Date))},_determineDate:function(o,d,p){var _,C=d==null||d===""?p:typeof d=="string"?function(S){try{return e.datepicker.parseDate(e.datepicker._get(o,"dateFormat"),S,e.datepicker._getFormatConfig(o))}catch{}for(var A=(S.toLowerCase().match(/^c/)?e.datepicker._getDate(o):null)||new Date,N=A.getFullYear(),G=A.getMonth(),Y=A.getDate(),X=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,$=X.exec(S);$;){switch($[2]||"d"){case"d":case"D":Y+=parseInt($[1],10);break;case"w":case"W":Y+=7*parseInt($[1],10);break;case"m":case"M":G+=parseInt($[1],10),Y=Math.min(Y,e.datepicker._getDaysInMonth(N,G));break;case"y":case"Y":N+=parseInt($[1],10),Y=Math.min(Y,e.datepicker._getDaysInMonth(N,G))}$=X.exec(S)}return new Date(N,G,Y)}(d):typeof d=="number"?isNaN(d)?p:(C=d,(_=new Date).setDate(_.getDate()+C),_):new Date(d.getTime());return(C=C&&C.toString()==="Invalid Date"?p:C)&&(C.setHours(0),C.setMinutes(0),C.setSeconds(0),C.setMilliseconds(0)),this._daylightSavingAdjust(C)},_daylightSavingAdjust:function(o){return o?(o.setHours(12<o.getHours()?o.getHours()+2:0),o):null},_setDate:function(o,A,p){var _=!A,C=o.selectedMonth,S=o.selectedYear,A=this._restrictMinMax(o,this._determineDate(o,A,new Date));o.selectedDay=o.currentDay=A.getDate(),o.drawMonth=o.selectedMonth=o.currentMonth=A.getMonth(),o.drawYear=o.selectedYear=o.currentYear=A.getFullYear(),C===o.selectedMonth&&S===o.selectedYear||p||this._notifyChange(o),this._adjustInstDate(o),o.input&&o.input.val(_?"":this._formatDate(o))},_getDate:function(o){return!o.currentYear||o.input&&o.input.val()===""?null:this._daylightSavingAdjust(new Date(o.currentYear,o.currentMonth,o.currentDay))},_attachHandlers:function(o){var d=this._get(o,"stepMonths"),p="#"+o.id.replace(/\\\\/g,"\\");o.dpDiv.find("[data-handler]").map(function(){var _={prev:function(){e.datepicker._adjustDate(p,-d,"M")},next:function(){e.datepicker._adjustDate(p,+d,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(p)},selectDay:function(){return e.datepicker._selectDay(p,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(p,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(p,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),_[this.getAttribute("data-handler")])})},_generateHTML:function(o){var d,p,_,C,S,A,N,G,Y,X,$,he,we,Fe,Te,Ue,ft,L,W,Z,oe,be,ke,Ve,Me,Je,xe,ze,ot,nn,jt,oi,_i=new Date,ai=this._daylightSavingAdjust(new Date(_i.getFullYear(),_i.getMonth(),_i.getDate())),Fn=this._get(o,"isRTL"),_i=this._get(o,"showButtonPanel"),mr=this._get(o,"hideIfNoPrevNext"),Vi=this._get(o,"navigationAsDateFormat"),Gn=this._getNumberOfMonths(o),Nt=this._get(o,"showCurrentAtPos"),bi=this._get(o,"stepMonths"),As=Gn[0]!==1||Gn[1]!==1,$r=this._daylightSavingAdjust(o.currentDay?new Date(o.currentYear,o.currentMonth,o.currentDay):new Date(9999,9,9)),Ki=this._getMinMaxDate(o,"min"),vr=this._getMinMaxDate(o,"max"),Yt=o.drawMonth-Nt,dn=o.drawYear;if(Yt<0&&(Yt+=12,dn--),vr)for(d=this._daylightSavingAdjust(new Date(vr.getFullYear(),vr.getMonth()-Gn[0]*Gn[1]+1,vr.getDate())),d=Ki&&d<Ki?Ki:d;this._daylightSavingAdjust(new Date(dn,Yt,1))>d;)--Yt<0&&(Yt=11,dn--);for(o.drawMonth=Yt,o.drawYear=dn,Nt=this._get(o,"prevText"),Nt=Vi?this.formatDate(Nt,this._daylightSavingAdjust(new Date(dn,Yt-bi,1)),this._getFormatConfig(o)):Nt,p=this._canAdjustMonth(o,-1,dn,Yt)?e("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:Nt}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Fn?"e":"w")).text(Nt))[0].outerHTML:mr?"":e("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:Nt}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Fn?"e":"w")).text(Nt))[0].outerHTML,Nt=this._get(o,"nextText"),Nt=Vi?this.formatDate(Nt,this._daylightSavingAdjust(new Date(dn,Yt+bi,1)),this._getFormatConfig(o)):Nt,_=this._canAdjustMonth(o,1,dn,Yt)?e("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:Nt}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Fn?"w":"e")).text(Nt))[0].outerHTML:mr?"":e("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:Nt}).append(e("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(Fn?"w":"e")).text(Nt))[0].outerHTML,bi=this._get(o,"currentText"),mr=this._get(o,"gotoCurrent")&&o.currentDay?$r:ai,bi=Vi?this.formatDate(bi,mr,this._getFormatConfig(o)):bi,Nt="",o.inline||(Nt=e("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(o,"closeText"))[0].outerHTML),Vi="",_i&&(Vi=e("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(Fn?Nt:"").append(this._isInRange(o,mr)?e("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(bi):"").append(Fn?"":Nt)[0].outerHTML),C=parseInt(this._get(o,"firstDay"),10),C=isNaN(C)?0:C,S=this._get(o,"showWeek"),A=this._get(o,"dayNames"),N=this._get(o,"dayNamesMin"),G=this._get(o,"monthNames"),Y=this._get(o,"monthNamesShort"),X=this._get(o,"beforeShowDay"),$=this._get(o,"showOtherMonths"),he=this._get(o,"selectOtherMonths"),we=this._getDefaultDate(o),Fe="",Ue=0;Ue<Gn[0];Ue++){for(ft="",this.maxRows=4,L=0;L<Gn[1];L++){if(W=this._daylightSavingAdjust(new Date(dn,Yt,o.selectedDay)),Z=" ui-corner-all",oe="",As){if(oe+="<div class='ui-datepicker-group",1<Gn[1])switch(L){case 0:oe+=" ui-datepicker-group-first",Z=" ui-corner-"+(Fn?"right":"left");break;case Gn[1]-1:oe+=" ui-datepicker-group-last",Z=" ui-corner-"+(Fn?"left":"right");break;default:oe+=" ui-datepicker-group-middle",Z=""}oe+="'>"}for(oe+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+Z+"'>"+(/all|left/.test(Z)&&Ue===0?Fn?_:p:"")+(/all|right/.test(Z)&&Ue===0?Fn?p:_:"")+this._generateMonthYearHeader(o,Yt,dn,Ki,vr,0<Ue||0<L,G,Y)+"</div><table class='ui-datepicker-calendar'><thead><tr>",be=S?"<th class='ui-datepicker-week-col'>"+this._get(o,"weekHeader")+"</th>":"",Te=0;Te<7;Te++)be+="<th scope='col'"+(5<=(Te+C+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+A[ke=(Te+C)%7]+"'>"+N[ke]+"</span></th>";for(oe+=be+"</tr></thead><tbody>",Me=this._getDaysInMonth(dn,Yt),dn===o.selectedYear&&Yt===o.selectedMonth&&(o.selectedDay=Math.min(o.selectedDay,Me)),Ve=(this._getFirstDayOfMonth(dn,Yt)-C+7)%7,Me=Math.ceil((Ve+Me)/7),Je=As&&this.maxRows>Me?this.maxRows:Me,this.maxRows=Je,xe=this._daylightSavingAdjust(new Date(dn,Yt,1-Ve)),ze=0;ze<Je;ze++){for(oe+="<tr>",ot=S?"<td class='ui-datepicker-week-col'>"+this._get(o,"calculateWeek")(xe)+"</td>":"",Te=0;Te<7;Te++)nn=X?X.apply(o.input?o.input[0]:null,[xe]):[!0,""],oi=(jt=xe.getMonth()!==Yt)&&!he||!nn[0]||Ki&&xe<Ki||vr&&vr<xe,ot+="<td class='"+(5<=(Te+C+6)%7?" ui-datepicker-week-end":"")+(jt?" ui-datepicker-other-month":"")+(xe.getTime()===W.getTime()&&Yt===o.selectedMonth&&o._keyEvent||we.getTime()===xe.getTime()&&we.getTime()===W.getTime()?" "+this._dayOverClass:"")+(oi?" "+this._unselectableClass+" ui-state-disabled":"")+(jt&&!$?"":" "+nn[1]+(xe.getTime()===$r.getTime()?" "+this._currentClass:"")+(xe.getTime()===ai.getTime()?" ui-datepicker-today":""))+"'"+(jt&&!$||!nn[2]?"":" title='"+nn[2].replace(/'/g,"&#39;")+"'")+(oi?"":" data-handler='selectDay' data-event='click' data-month='"+xe.getMonth()+"' data-year='"+xe.getFullYear()+"'")+">"+(jt&&!$?"&#xa0;":oi?"<span class='ui-state-default'>"+xe.getDate()+"</span>":"<a class='ui-state-default"+(xe.getTime()===ai.getTime()?" ui-state-highlight":"")+(xe.getTime()===$r.getTime()?" ui-state-active":"")+(jt?" ui-priority-secondary":"")+"' href='#' aria-current='"+(xe.getTime()===$r.getTime()?"true":"false")+"' data-date='"+xe.getDate()+"'>"+xe.getDate()+"</a>")+"</td>",xe.setDate(xe.getDate()+1),xe=this._daylightSavingAdjust(xe);oe+=ot+"</tr>"}11<++Yt&&(Yt=0,dn++),ft+=oe+="</tbody></table>"+(As?"</div>"+(0<Gn[0]&&L===Gn[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}Fe+=ft}return Fe+=Vi,o._keyEvent=!1,Fe},_generateMonthYearHeader:function(o,d,p,_,C,S,A,N){var G,Y,X,$,he,we,Fe=this._get(o,"changeMonth"),Te=this._get(o,"changeYear"),Ue=this._get(o,"showMonthAfterYear"),ft=this._get(o,"selectMonthLabel"),L=this._get(o,"selectYearLabel"),W="<div class='ui-datepicker-title'>",Z="";if(S||!Fe)Z+="<span class='ui-datepicker-month'>"+A[d]+"</span>";else{for(G=_&&_.getFullYear()===p,Y=C&&C.getFullYear()===p,Z+="<select class='ui-datepicker-month' aria-label='"+ft+"' data-handler='selectMonth' data-event='change'>",X=0;X<12;X++)(!G||X>=_.getMonth())&&(!Y||X<=C.getMonth())&&(Z+="<option value='"+X+"'"+(X===d?" selected='selected'":"")+">"+N[X]+"</option>");Z+="</select>"}if(Ue||(W+=Z+(!S&&Fe&&Te?"":"&#xa0;")),!o.yearshtml)if(o.yearshtml="",S||!Te)W+="<span class='ui-datepicker-year'>"+p+"</span>";else{for(A=this._get(o,"yearRange").split(":"),$=new Date().getFullYear(),he=(ft=function(oe){return oe=oe.match(/c[+\-].*/)?p+parseInt(oe.substring(1),10):oe.match(/[+\-].*/)?$+parseInt(oe,10):parseInt(oe,10),isNaN(oe)?$:oe})(A[0]),we=Math.max(he,ft(A[1]||"")),he=_?Math.max(he,_.getFullYear()):he,we=C?Math.min(we,C.getFullYear()):we,o.yearshtml+="<select class='ui-datepicker-year' aria-label='"+L+"' data-handler='selectYear' data-event='change'>";he<=we;he++)o.yearshtml+="<option value='"+he+"'"+(he===p?" selected='selected'":"")+">"+he+"</option>";o.yearshtml+="</select>",W+=o.yearshtml,o.yearshtml=null}return W+=this._get(o,"yearSuffix"),Ue&&(W+=(!S&&Fe&&Te?"":"&#xa0;")+Z),W+="</div>"},_adjustInstDate:function(o,C,p){var S=o.selectedYear+(p==="Y"?C:0),_=o.selectedMonth+(p==="M"?C:0),C=Math.min(o.selectedDay,this._getDaysInMonth(S,_))+(p==="D"?C:0),S=this._restrictMinMax(o,this._daylightSavingAdjust(new Date(S,_,C)));o.selectedDay=S.getDate(),o.drawMonth=o.selectedMonth=S.getMonth(),o.drawYear=o.selectedYear=S.getFullYear(),p!=="M"&&p!=="Y"||this._notifyChange(o)},_restrictMinMax:function(p,d){var _=this._getMinMaxDate(p,"min"),p=this._getMinMaxDate(p,"max"),_=_&&d<_?_:d;return p&&p<_?p:_},_notifyChange:function(o){var d=this._get(o,"onChangeMonthYear");d&&d.apply(o.input?o.input[0]:null,[o.selectedYear,o.selectedMonth+1,o])},_getNumberOfMonths:function(o){return o=this._get(o,"numberOfMonths"),o==null?[1,1]:typeof o=="number"?[1,o]:o},_getMinMaxDate:function(o,d){return this._determineDate(o,this._get(o,d+"Date"),null)},_getDaysInMonth:function(o,d){return 32-this._daylightSavingAdjust(new Date(o,d,32)).getDate()},_getFirstDayOfMonth:function(o,d){return new Date(o,d,1).getDay()},_canAdjustMonth:function(o,d,S,_){var C=this._getNumberOfMonths(o),S=this._daylightSavingAdjust(new Date(S,_+(d<0?d:C[0]*C[1]),1));return d<0&&S.setDate(this._getDaysInMonth(S.getFullYear(),S.getMonth())),this._isInRange(o,S)},_isInRange:function(N,d){var p,_=this._getMinMaxDate(N,"min"),C=this._getMinMaxDate(N,"max"),S=null,A=null,N=this._get(N,"yearRange");return N&&(N=N.split(":"),p=new Date().getFullYear(),S=parseInt(N[0],10),A=parseInt(N[1],10),N[0].match(/[+\-].*/)&&(S+=p),N[1].match(/[+\-].*/))&&(A+=p),(!_||d.getTime()>=_.getTime())&&(!C||d.getTime()<=C.getTime())&&(!S||d.getFullYear()>=S)&&(!A||d.getFullYear()<=A)},_getFormatConfig:function(o){var d=this._get(o,"shortYearCutoff");return{shortYearCutoff:typeof d!="string"?d:new Date().getFullYear()%100+parseInt(d,10),dayNamesShort:this._get(o,"dayNamesShort"),dayNames:this._get(o,"dayNames"),monthNamesShort:this._get(o,"monthNamesShort"),monthNames:this._get(o,"monthNames")}},_formatDate:function(o,d,p,_){return d||(o.currentDay=o.selectedDay,o.currentMonth=o.selectedMonth,o.currentYear=o.selectedYear),_=d?typeof d=="object"?d:this._daylightSavingAdjust(new Date(_,p,d)):this._daylightSavingAdjust(new Date(o.currentYear,o.currentMonth,o.currentDay)),this.formatDate(this._get(o,"dateFormat"),_,this._getFormatConfig(o))}}),e.fn.datepicker=function(o){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var d=Array.prototype.slice.call(arguments,1);return typeof o=="string"&&(o==="isDisabled"||o==="getDate"||o==="widget")||o==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+o+"Datepicker"].apply(e.datepicker,[this[0]].concat(d)):this.each(function(){typeof o=="string"?e.datepicker["_"+o+"Datepicker"].apply(e.datepicker,[this].concat(d)):e.datepicker._attachDatepicker(this,o)})},e.datepicker=new ee,e.datepicker.initialized=!1,e.datepicker.uuid=new Date().getTime(),e.datepicker.version="1.14.0",e.datepicker;var _e=!1;e(document).on("mouseup",function(){_e=!1}),e.widget("ui.mouse",{version:"1.14.0",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var o=this;this.element.on("mousedown."+this.widgetName,function(d){return o._mouseDown(d)}).on("click."+this.widgetName,function(d){if(e.data(d.target,o.widgetName+".preventClickEvent")===!0)return e.removeData(d.target,o.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(o){var d,p,_;if(!_e)return this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(o),p=(this._mouseDownEvent=o).which===1,_=typeof(d=this).options.cancel=="string"&&e(o.target).closest(this.options.cancel).length,p&&!_&&this._mouseCapture(o)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(o)&&this._mouseDelayMet(o)&&(this._mouseStarted=this._mouseStart(o)!==!1,!this._mouseStarted)?o.preventDefault():(e.data(o.target,this.widgetName+".preventClickEvent")===!0&&e.removeData(o.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(C){return d._mouseMove(C)},this._mouseUpDelegate=function(C){return d._mouseUp(C)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),o.preventDefault(),_e=!0)),!0},_mouseMove:function(o){if(this._mouseMoved&&!o.which){if(o.originalEvent.altKey||o.originalEvent.ctrlKey||o.originalEvent.metaKey||o.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(o)}return(o.which||o.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(o),o.preventDefault()):(this._mouseDistanceMet(o)&&this._mouseDelayMet(o)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,o)!==!1,this._mouseStarted?this._mouseDrag(o):this._mouseUp(o)),!this._mouseStarted)},_mouseUp:function(o){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,o.target===this._mouseDownEvent.target&&e.data(o.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(o)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,_e=!1,o.preventDefault()},_mouseDistanceMet:function(o){return Math.max(Math.abs(this._mouseDownEvent.pageX-o.pageX),Math.abs(this._mouseDownEvent.pageY-o.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(o,d,p){var _,C=e.ui[o].prototype;for(_ in p)C.plugins[_]=C.plugins[_]||[],C.plugins[_].push([d,p[_]])},call:function(o,d,p,_){var C,S=o.plugins[d];if(S&&(_||o.element[0].parentNode&&o.element[0].parentNode.nodeType!==11))for(C=0;C<S.length;C++)o.options[S[C][0]]&&S[C][1].apply(o.element,p)}},e.widget("ui.draggable",e.ui.mouse,{version:"1.14.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(o,d){this._super(o,d),o==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(o){var d=this.options;return!(this.helper||d.disabled||0<e(o.target).closest(".ui-resizable-handle").length||(this.handle=this._getHandle(o),!this.handle)||(this._blurActiveElement(o),this._blockFrames(d.iframeFix===!0?"iframe":d.iframeFix),0))},_blockFrames:function(o){this.iframeBlocks=this.document.find(o).map(function(){var d=e(this);return e("<div>").css("position","absolute").appendTo(d.parent()).outerWidth(d.outerWidth()).outerHeight(d.outerHeight()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(o){var d=this.document[0].activeElement;e(o.target).closest(d).length||e(d).trigger("blur")},_mouseStart:function(o){var d=this.options;return this.helper=this._createHelper(o),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return e(this).css("position")==="fixed"}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(o),this.originalPosition=this.position=this._generatePosition(o,!1),this.originalPageX=o.pageX,this.originalPageY=o.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),this._setContainment(),this._trigger("start",o)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!d.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,o),this._mouseDrag(o,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,o),!0)},_refreshOffsets:function(o){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:o.pageX-this.offset.left,top:o.pageY-this.offset.top}},_mouseDrag:function(o,d){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(o,!0),this.positionAbs=this._convertPositionTo("absolute"),!d){if(d=this._uiHash(),this._trigger("drag",o,d)===!1)return this._mouseUp(new e.Event("mouseup",o)),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,o),!1},_mouseStop:function(o){var d=this,p=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(p=e.ui.ddmanager.drop(this,o)),this.dropped&&(p=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!p||this.options.revert==="valid"&&p||this.options.revert===!0||typeof this.options.revert=="function"&&this.options.revert.call(this.element,p)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",o)!==!1&&d._clear()}):this._trigger("stop",o)!==!1&&this._clear(),!1},_mouseUp:function(o){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,o),this.handleElement.is(o.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,o)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(o){return!this.options.handle||!!e(o.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(_){var d=this.options,p=typeof d.helper=="function",_=p?e(d.helper.apply(this.element[0],[_])):d.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return _.parents("body").length||_.appendTo(d.appendTo==="parent"?this.element[0].parentNode:d.appendTo),p&&_[0]===this.element[0]&&this._setPositionRelative(),_[0]===this.element[0]||/(fixed|absolute)/.test(_.css("position"))||_.css("position","absolute"),_},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(o){typeof o=="string"&&(o=o.split(" ")),"left"in(o=Array.isArray(o)?{left:+o[0],top:+o[1]||0}:o)&&(this.offset.click.left=o.left+this.margins.left),"right"in o&&(this.offset.click.left=this.helperProportions.width-o.right+this.margins.left),"top"in o&&(this.offset.click.top=o.top+this.margins.top),"bottom"in o&&(this.offset.click.top=this.helperProportions.height-o.bottom+this.margins.top)},_isRootNode:function(o){return/(html|body)/i.test(o.tagName)||o===this.document[0]},_getParentOffset:function(){var o=this.offsetParent.offset(),d=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==d&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(o.left+=this.scrollParent.scrollLeft(),o.top+=this.scrollParent.scrollTop()),{top:(o=this._isRootNode(this.offsetParent[0])?{top:0,left:0}:o).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:o.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var o,d;return this.cssPosition!=="relative"?{top:0,left:0}:(o=this.element.position(),d=this._isRootNode(this.scrollParent[0]),{top:o.top-(parseInt(this.helper.css("top"),10)||0)+(d?0:this.scrollParent.scrollTop()),left:o.left-(parseInt(this.helper.css("left"),10)||0)+(d?0:this.scrollParent.scrollLeft())})},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o,d=this.options,p=this.document[0];this.relativeContainer=null,d.containment?d.containment==="window"?this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||p.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:d.containment==="document"?this.containment=[0,0,e(p).width()-this.helperProportions.width-this.margins.left,(e(p).height()||p.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:d.containment.constructor===Array?this.containment=d.containment:(d.containment==="parent"&&(d.containment=this.helper[0].parentNode),(d=(p=e(d.containment))[0])&&(o=/(scroll|auto)/.test(p.css("overflow")),this.containment=[(parseInt(p.css("borderLeftWidth"),10)||0)+(parseInt(p.css("paddingLeft"),10)||0),(parseInt(p.css("borderTopWidth"),10)||0)+(parseInt(p.css("paddingTop"),10)||0),(o?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(p.css("borderRightWidth"),10)||0)-(parseInt(p.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(o?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(p.css("borderBottomWidth"),10)||0)-(parseInt(p.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=p)):this.containment=null},_convertPositionTo:function(p,d){d=d||this.position;var p=p==="absolute"?1:-1,_=this._isRootNode(this.scrollParent[0]);return{top:d.top+this.offset.relative.top*p+this.offset.parent.top*p-(this.cssPosition==="fixed"?-this.offset.scroll.top:_?0:this.offset.scroll.top)*p,left:d.left+this.offset.relative.left*p+this.offset.parent.left*p-(this.cssPosition==="fixed"?-this.offset.scroll.left:_?0:this.offset.scroll.left)*p}},_generatePosition:function(o,d){var p,_=this.options,C=this._isRootNode(this.scrollParent[0]),S=o.pageX,A=o.pageY;return C&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),{top:(A=d&&(this.containment&&(p=this.relativeContainer?(d=this.relativeContainer.offset(),[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):this.containment,o.pageX-this.offset.click.left<p[0]&&(S=p[0]+this.offset.click.left),o.pageY-this.offset.click.top<p[1]&&(A=p[1]+this.offset.click.top),o.pageX-this.offset.click.left>p[2]&&(S=p[2]+this.offset.click.left),o.pageY-this.offset.click.top>p[3])&&(A=p[3]+this.offset.click.top),_.grid&&(d=_.grid[1]?this.originalPageY+Math.round((A-this.originalPageY)/_.grid[1])*_.grid[1]:this.originalPageY,A=!p||d-this.offset.click.top>=p[1]||d-this.offset.click.top>p[3]?d:d-this.offset.click.top>=p[1]?d-_.grid[1]:d+_.grid[1],o=_.grid[0]?this.originalPageX+Math.round((S-this.originalPageX)/_.grid[0])*_.grid[0]:this.originalPageX,S=!p||o-this.offset.click.left>=p[0]||o-this.offset.click.left>p[2]?o:o-this.offset.click.left>=p[0]?o-_.grid[0]:o+_.grid[0]),_.axis==="y"&&(S=this.originalPageX),_.axis==="x")?this.originalPageY:A)-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:C?0:this.offset.scroll.top),left:S-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:C?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(o,d,p){return p=p||this._uiHash(),e.ui.plugin.call(this,o,[d,p,this],!0),/^(drag|start|stop)/.test(o)&&(this.positionAbs=this._convertPositionTo("absolute"),p.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,o,d,p)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(o,d,p){var _=e.extend({},d,{item:p.element});p.sortables=[],e(p.options.connectToSortable).each(function(){var C=e(this).sortable("instance");C&&!C.options.disabled&&(p.sortables.push(C),C.refreshPositions(),C._trigger("activate",o,_))})},stop:function(o,d,p){var _=e.extend({},d,{item:p.element});p.cancelHelperRemoval=!1,e.each(p.sortables,function(){var C=this;C.isOver?(C.isOver=0,p.cancelHelperRemoval=!0,C.cancelHelperRemoval=!1,C._storedCSS={position:C.placeholder.css("position"),top:C.placeholder.css("top"),left:C.placeholder.css("left")},C._mouseStop(o),C.options.helper=C.options._helper):(C.cancelHelperRemoval=!0,C._trigger("deactivate",o,_))})},drag:function(o,d,p){e.each(p.sortables,function(){var _=!1,C=this;C.positionAbs=p.positionAbs,C.helperProportions=p.helperProportions,C.offset.click=p.offset.click,C._intersectsWith(C.containerCache)&&(_=!0,e.each(p.sortables,function(){return this.positionAbs=p.positionAbs,this.helperProportions=p.helperProportions,this.offset.click=p.offset.click,_=this!==C&&this._intersectsWith(this.containerCache)&&e.contains(C.element[0],this.element[0])?!1:_})),_?(C.isOver||(C.isOver=1,p._parent=d.helper.parent(),C.currentItem=d.helper.appendTo(C.element).data("ui-sortable-item",!0),C.options._helper=C.options.helper,C.options.helper=function(){return d.helper[0]},o.target=C.currentItem[0],C._mouseCapture(o,!0),C._mouseStart(o,!0,!0),C.offset.click.top=p.offset.click.top,C.offset.click.left=p.offset.click.left,C.offset.parent.left-=p.offset.parent.left-C.offset.parent.left,C.offset.parent.top-=p.offset.parent.top-C.offset.parent.top,p._trigger("toSortable",o),p.dropped=C.element,e.each(p.sortables,function(){this.refreshPositions()}),p.currentItem=p.element,C.fromOutside=p),C.currentItem&&(C._mouseDrag(o),d.position=C.position)):C.isOver&&(C.isOver=0,C.cancelHelperRemoval=!0,C.options._revert=C.options.revert,C.options.revert=!1,C._trigger("out",o,C._uiHash(C)),C._mouseStop(o,!0),C.options.revert=C.options._revert,C.options.helper=C.options._helper,C.placeholder&&C.placeholder.remove(),d.helper.appendTo(p._parent),p._refreshOffsets(o),d.position=p._generatePosition(o,!0),p._trigger("fromSortable",o),p.dropped=!1,e.each(p.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(o,d,C){var _=e("body"),C=C.options;_.css("cursor")&&(C._cursor=_.css("cursor")),_.css("cursor",C.cursor)},stop:function(o,d,p){p=p.options,p._cursor&&e("body").css("cursor",p._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(o,d,p){d=e(d.helper),p=p.options,d.css("opacity")&&(p._opacity=d.css("opacity")),d.css("opacity",p.opacity)},stop:function(o,d,p){p=p.options,p._opacity&&e(d.helper).css("opacity",p._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(o,d,p){p.scrollParentNotHidden||(p.scrollParentNotHidden=p.helper.scrollParent(!1)),p.scrollParentNotHidden[0]!==p.document[0]&&p.scrollParentNotHidden[0].tagName!=="HTML"&&(p.overflowOffset=p.scrollParentNotHidden.offset())},drag:function(o,d,p){var _=p.options,C=!1,S=p.scrollParentNotHidden[0],A=p.document[0];S!==A&&S.tagName!=="HTML"?(_.axis&&_.axis==="x"||(p.overflowOffset.top+S.offsetHeight-o.pageY<_.scrollSensitivity?S.scrollTop=C=S.scrollTop+_.scrollSpeed:o.pageY-p.overflowOffset.top<_.scrollSensitivity&&(S.scrollTop=C=S.scrollTop-_.scrollSpeed)),_.axis&&_.axis==="y"||(p.overflowOffset.left+S.offsetWidth-o.pageX<_.scrollSensitivity?S.scrollLeft=C=S.scrollLeft+_.scrollSpeed:o.pageX-p.overflowOffset.left<_.scrollSensitivity&&(S.scrollLeft=C=S.scrollLeft-_.scrollSpeed))):(_.axis&&_.axis==="x"||(o.pageY-e(A).scrollTop()<_.scrollSensitivity?C=e(A).scrollTop(e(A).scrollTop()-_.scrollSpeed):e(window).height()-(o.pageY-e(A).scrollTop())<_.scrollSensitivity&&(C=e(A).scrollTop(e(A).scrollTop()+_.scrollSpeed))),_.axis&&_.axis==="y"||(o.pageX-e(A).scrollLeft()<_.scrollSensitivity?C=e(A).scrollLeft(e(A).scrollLeft()-_.scrollSpeed):e(window).width()-(o.pageX-e(A).scrollLeft())<_.scrollSensitivity&&(C=e(A).scrollLeft(e(A).scrollLeft()+_.scrollSpeed)))),C!==!1&&e.ui.ddmanager&&!_.dropBehaviour&&e.ui.ddmanager.prepareOffsets(p,o)}}),e.ui.plugin.add("draggable","snap",{start:function(o,d,p){var _=p.options;p.snapElements=[],e(_.snap.constructor!==String?_.snap.items||":data(ui-draggable)":_.snap).each(function(){var C=e(this),S=C.offset();this!==p.element[0]&&p.snapElements.push({item:this,width:C.outerWidth(),height:C.outerHeight(),top:S.top,left:S.left})})},drag:function(o,d,p){for(var _,C,S,A,N,G,Y,X,$,he=p.options,we=he.snapTolerance,Fe=d.offset.left,Te=Fe+p.helperProportions.width,Ue=d.offset.top,ft=Ue+p.helperProportions.height,L=p.snapElements.length-1;0<=L;L--)G=(N=p.snapElements[L].left-p.margins.left)+p.snapElements[L].width,X=(Y=p.snapElements[L].top-p.margins.top)+p.snapElements[L].height,Te<N-we||G+we<Fe||ft<Y-we||X+we<Ue||!e.contains(p.snapElements[L].item.ownerDocument,p.snapElements[L].item)?(p.snapElements[L].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,o,e.extend(p._uiHash(),{snapItem:p.snapElements[L].item})),p.snapElements[L].snapping=!1):(he.snapMode!=="inner"&&(_=Math.abs(Y-ft)<=we,C=Math.abs(X-Ue)<=we,S=Math.abs(N-Te)<=we,A=Math.abs(G-Fe)<=we,_&&(d.position.top=p._convertPositionTo("relative",{top:Y-p.helperProportions.height,left:0}).top),C&&(d.position.top=p._convertPositionTo("relative",{top:X,left:0}).top),S&&(d.position.left=p._convertPositionTo("relative",{top:0,left:N-p.helperProportions.width}).left),A)&&(d.position.left=p._convertPositionTo("relative",{top:0,left:G}).left),$=_||C||S||A,he.snapMode!=="outer"&&(_=Math.abs(Y-Ue)<=we,C=Math.abs(X-ft)<=we,S=Math.abs(N-Fe)<=we,A=Math.abs(G-Te)<=we,_&&(d.position.top=p._convertPositionTo("relative",{top:Y,left:0}).top),C&&(d.position.top=p._convertPositionTo("relative",{top:X-p.helperProportions.height,left:0}).top),S&&(d.position.left=p._convertPositionTo("relative",{top:0,left:N}).left),A)&&(d.position.left=p._convertPositionTo("relative",{top:0,left:G-p.helperProportions.width}).left),!p.snapElements[L].snapping&&(_||C||S||A||$)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,o,e.extend(p._uiHash(),{snapItem:p.snapElements[L].item})),p.snapElements[L].snapping=_||C||S||A||$)}}),e.ui.plugin.add("draggable","stack",{start:function(o,d,C){var _,C=C.options,C=e.makeArray(e(C.stack)).sort(function(S,A){return(parseInt(e(S).css("zIndex"),10)||0)-(parseInt(e(A).css("zIndex"),10)||0)});C.length&&(_=parseInt(e(C[0]).css("zIndex"),10)||0,e(C).each(function(S){e(this).css("zIndex",_+S)}),this.css("zIndex",_+C.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(o,d,p){d=e(d.helper),p=p.options,d.css("zIndex")&&(p._zIndex=d.css("zIndex")),d.css("zIndex",p.zIndex)},stop:function(o,d,p){p=p.options,p._zIndex&&e(d.helper).css("zIndex",p._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.14.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(o){return parseFloat(o)||0},_isNumber:function(o){return!isNaN(parseFloat(o))},_hasScroll:function(o,p){if(e(o).css("overflow")==="hidden")return!1;var p=p&&p==="left"?"scrollLeft":"scrollTop",_=!1;if(0<o[p])return!0;try{o[p]=1,_=0<o[p],o[p]=0}catch{}return _},_create:function(){var o,d=this.options,p=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!d.aspectRatio,aspectRatio:d.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:d.helper||d.ghost||d.animate?d.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,o={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(o),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this._proportionallyResize()),this._setupHandles(),d.autoHide&&e(this.element).on("mouseenter",function(){d.disabled||(p._removeClass("ui-resizable-autohide"),p._handles.show())}).on("mouseleave",function(){d.disabled||p.resizing||(p._addClass("ui-resizable-autohide"),p._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();function o(p){e(p).removeData("resizable").removeData("ui-resizable").off(".resizable")}var d;return this.elementIsWrapper&&(o(this.element),d=this.element,this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),d.remove()),this.originalElement.css("resize",this.originalResizeStyle),o(this.originalElement),this},_setOption:function(o,d){switch(this._super(o,d),o){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!d}},_setupHandles:function(){var o,d,p,_,C,S=this.options,A=this;if(this.handles=S.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this._addedHandles=e(),this.handles.constructor===String)for(this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),p=this.handles.split(","),this.handles={},d=0;d<p.length;d++)_="ui-resizable-"+(o=String.prototype.trim.call(p[d])),C=e("<div>"),this._addClass(C,"ui-resizable-handle "+_),C.css({zIndex:S.zIndex}),this.handles[o]=".ui-resizable-"+o,this.element.children(this.handles[o]).length||(this.element.append(C),this._addedHandles=this._addedHandles.add(C));this._renderAxis=function(N){var G,Y,X;for(G in N=N||this.element,this.handles)this.handles[G].constructor===String?this.handles[G]=this.element.children(this.handles[G]).first().show():(this.handles[G].jquery||this.handles[G].nodeType)&&(this.handles[G]=e(this.handles[G]),this._on(this.handles[G],{mousedown:A._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(X=e(this.handles[G],this.element),X=/sw|ne|nw|se|n|s/.test(G)?X.outerHeight():X.outerWidth(),Y=["padding",/ne|nw|n/.test(G)?"Top":/se|sw|s/.test(G)?"Bottom":/^e$/.test(G)?"Right":"Left"].join(""),N.css(Y,X),this._proportionallyResize()),this._handles=this._handles.add(this.handles[G])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){A.resizing||(this.className&&(C=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),A.axis=C&&C[1]?C[1]:"se")}),S.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(o){var d,p,_=!1;for(d in this.handles)(p=e(this.handles[d])[0])!==o.target&&!e.contains(p,o.target)||(_=!0);return!this.options.disabled&&_},_mouseStart:function(o){var d,p,_=this.options,C=this.element;return this.resizing=!0,this._renderProxy(),d=this._num(this.helper.css("left")),p=this._num(this.helper.css("top")),_.containment&&(d+=e(_.containment).scrollLeft()||0,p+=e(_.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:p},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:C.width(),height:C.height()},this.originalSize=this._helper?{width:C.outerWidth(),height:C.outerHeight()}:{width:C.width(),height:C.height()},this.sizeDiff={width:C.outerWidth()-C.width(),height:C.outerHeight()-C.height()},this.originalPosition={left:d,top:p},this.originalMousePosition={left:o.pageX,top:o.pageY},this.aspectRatio=typeof _.aspectRatio=="number"?_.aspectRatio:this.originalSize.width/this.originalSize.height||1,C=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",C==="auto"?this.axis+"-resize":C),this._addClass("ui-resizable-resizing"),this._propagate("start",o),!0},_mouseDrag:function(o){var p=this.originalMousePosition,_=this.axis,d=o.pageX-p.left||0,p=o.pageY-p.top||0,_=this._change[_];return this._updatePrevProperties(),_&&(_=_.apply(this,[o,d,p]),this._updateVirtualBoundaries(o.shiftKey),(this._aspectRatio||o.shiftKey)&&(_=this._updateRatio(_,o)),_=this._respectSize(_,o),this._updateCache(_),this._propagate("resize",o),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",o,this.ui()),this._applyChanges())),!1},_mouseStop:function(o){this.resizing=!1;var d,p,_,C=this.options,S=this;return this._helper&&(p=(d=(p=this._proportionallyResizeElements).length&&/textarea/i.test(p[0].nodeName))&&this._hasScroll(p[0],"left")?0:S.sizeDiff.height,d=d?0:S.sizeDiff.width,d={width:S.helper.width()-d,height:S.helper.height()-p},p=parseFloat(S.element.css("left"))+(S.position.left-S.originalPosition.left)||null,_=parseFloat(S.element.css("top"))+(S.position.top-S.originalPosition.top)||null,C.animate||this.element.css(e.extend(d,{top:_,left:p})),S.helper.height(S.size.height),S.helper.width(S.size.width),this._helper)&&!C.animate&&this._proportionallyResize(),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",o),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var o={};return this.position.top!==this.prevPosition.top&&(o.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(o.left=this.position.left+"px"),this.helper.css(o),this.size.width!==this.prevSize.width&&(o.width=this.size.width+"px",this.helper.width(o.width)),this.size.height!==this.prevSize.height&&(o.height=this.size.height+"px",this.helper.height(o.height)),o},_updateVirtualBoundaries:function(o){var d,p,_,C=this.options,C={minWidth:this._isNumber(C.minWidth)?C.minWidth:0,maxWidth:this._isNumber(C.maxWidth)?C.maxWidth:1/0,minHeight:this._isNumber(C.minHeight)?C.minHeight:0,maxHeight:this._isNumber(C.maxHeight)?C.maxHeight:1/0};(this._aspectRatio||o)&&(o=C.minHeight*this.aspectRatio,p=C.minWidth/this.aspectRatio,d=C.maxHeight*this.aspectRatio,_=C.maxWidth/this.aspectRatio,C.minWidth<o&&(C.minWidth=o),C.minHeight<p&&(C.minHeight=p),d<C.maxWidth&&(C.maxWidth=d),_<C.maxHeight)&&(C.maxHeight=_),this._vBoundaries=C},_updateCache:function(o){this.offset=this.helper.offset(),this._isNumber(o.left)&&(this.position.left=o.left),this._isNumber(o.top)&&(this.position.top=o.top),this._isNumber(o.height)&&(this.size.height=o.height),this._isNumber(o.width)&&(this.size.width=o.width)},_updateRatio:function(o){var d=this.position,p=this.size,_=this.axis;return this._isNumber(o.height)?o.width=o.height*this.aspectRatio:this._isNumber(o.width)&&(o.height=o.width/this.aspectRatio),_==="sw"&&(o.left=d.left+(p.width-o.width),o.top=null),_==="nw"&&(o.top=d.top+(p.height-o.height),o.left=d.left+(p.width-o.width)),o},_respectSize:function(o){var d=this._vBoundaries,Y=this.axis,p=this._isNumber(o.width)&&d.maxWidth&&d.maxWidth<o.width,_=this._isNumber(o.height)&&d.maxHeight&&d.maxHeight<o.height,C=this._isNumber(o.width)&&d.minWidth&&d.minWidth>o.width,S=this._isNumber(o.height)&&d.minHeight&&d.minHeight>o.height,A=this.originalPosition.left+this.originalSize.width,N=this.originalPosition.top+this.originalSize.height,G=/sw|nw|w/.test(Y),Y=/nw|ne|n/.test(Y);return C&&(o.width=d.minWidth),S&&(o.height=d.minHeight),p&&(o.width=d.maxWidth),_&&(o.height=d.maxHeight),C&&G&&(o.left=A-d.minWidth),p&&G&&(o.left=A-d.maxWidth),S&&Y&&(o.top=N-d.minHeight),_&&Y&&(o.top=N-d.maxHeight),o.width||o.height||o.left||!o.top?o.width||o.height||o.top||!o.left||(o.left=null):o.top=null,o},_getPaddingPlusBorderDimensions:function(o){for(var d=0,p=[],_=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],C=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")];d<4;d++)p[d]=parseFloat(_[d])||0,p[d]+=parseFloat(C[d])||0;return{height:p[0]+p[2],width:p[1]+p[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var o,d=0,p=this.helper||this.element;d<this._proportionallyResizeElements.length;d++)o=this._proportionallyResizeElements[d],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(o)),o.css({height:p.height()-this.outerDimensions.height||0,width:p.width()-this.outerDimensions.width||0})},_renderProxy:function(){var o=this.element,d=this.options;this.elementOffset=o.offset(),this._helper?(this.helper=this.helper||e("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++d.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(o,d){return{width:this.originalSize.width+d}},w:function(o,d){var p=this.originalSize;return{left:this.originalPosition.left+d,width:p.width-d}},n:function(o,d,p){var _=this.originalSize;return{top:this.originalPosition.top+p,height:_.height-p}},s:function(o,d,p){return{height:this.originalSize.height+p}},se:function(o,d,p){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[o,d,p]))},sw:function(o,d,p){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[o,d,p]))},ne:function(o,d,p){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[o,d,p]))},nw:function(o,d,p){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[o,d,p]))}},_propagate:function(o,d){e.ui.plugin.call(this,o,[d,this.ui()]),o!=="resize"&&this._trigger(o,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(o){var d=e(this).resizable("instance"),p=d.options,_=d._proportionallyResizeElements,C=_.length&&/textarea/i.test(_[0].nodeName),S=C&&d._hasScroll(_[0],"left")?0:d.sizeDiff.height,C=C?0:d.sizeDiff.width,C={width:d.size.width-C,height:d.size.height-S},S=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null,A=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null;d.element.animate(e.extend(C,A&&S?{top:A,left:S}:{}),{duration:p.animateDuration,easing:p.animateEasing,step:function(){var N={width:parseFloat(d.element.css("width")),height:parseFloat(d.element.css("height")),top:parseFloat(d.element.css("top")),left:parseFloat(d.element.css("left"))};_&&_.length&&e(_[0]).css({width:N.width,height:N.height}),d._updateCache(N),d._propagate("resize",o)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var o,d,p,_,C=e(this).resizable("instance"),S=C.options,A=C.element,S=S.containment,A=S instanceof e?S.get(0):/parent/.test(S)?A.parent().get(0):S;A&&(C.containerElement=e(A),/document/.test(S)||S===document?(C.containerOffset={left:0,top:0},C.containerPosition={left:0,top:0},C.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(o=e(A),d=[],e(["Top","Right","Left","Bottom"]).each(function(N,G){d[N]=C._num(o.css("padding"+G))}),C.containerOffset=o.offset(),C.containerPosition=o.position(),C.containerSize={height:o.innerHeight()-d[3],width:o.innerWidth()-d[1]},S=C.containerOffset,_=C.containerSize.height,p=C.containerSize.width,p=C._hasScroll(A,"left")?A.scrollWidth:p,_=C._hasScroll(A)?A.scrollHeight:_,C.parentData={element:A,left:S.left,top:S.top,width:p,height:_}))},resize:function(S){var d=e(this).resizable("instance"),p=d.options,_=d.containerOffset,C=d.position,S=d._aspectRatio||S.shiftKey,A={top:0,left:0},N=d.containerElement,G=!0;N[0]!==document&&/static/.test(N.css("position"))&&(A=_),C.left<(d._helper?_.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-_.left:d.position.left-A.left),S&&(d.size.height=d.size.width/d.aspectRatio,G=!1),d.position.left=p.helper?_.left:0),C.top<(d._helper?_.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-_.top:d.position.top),S&&(d.size.width=d.size.height*d.aspectRatio,G=!1),d.position.top=d._helper?_.top:0),N=d.containerElement.get(0)===d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position")),N&&p?(d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top):(d.offset.left=d.element.offset().left,d.offset.top=d.element.offset().top),C=Math.abs(d.sizeDiff.width+(d._helper?d.offset.left-A.left:d.offset.left-_.left)),N=Math.abs(d.sizeDiff.height+(d._helper?d.offset.top-A.top:d.offset.top-_.top)),C+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-C,S)&&(d.size.height=d.size.width/d.aspectRatio,G=!1),N+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-N,S)&&(d.size.width=d.size.height*d.aspectRatio,G=!1),G||(d.position.left=d.prevPosition.left,d.position.top=d.prevPosition.top,d.size.width=d.prevSize.width,d.size.height=d.prevSize.height)},stop:function(){var o=e(this).resizable("instance"),d=o.options,p=o.containerOffset,_=o.containerPosition,C=o.containerElement,N=e(o.helper),S=N.offset(),A=N.outerWidth()-o.sizeDiff.width,N=N.outerHeight()-o.sizeDiff.height;o._helper&&!d.animate&&/relative/.test(C.css("position"))&&e(this).css({left:S.left-_.left-p.left,width:A,height:N}),o._helper&&!d.animate&&/static/.test(C.css("position"))&&e(this).css({left:S.left-_.left-p.left,width:A,height:N})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var o=e(this).resizable("instance").options;e(o.alsoResize).each(function(){var d=e(this);d.data("ui-resizable-alsoresize",{width:parseFloat(d.css("width")),height:parseFloat(d.css("height")),left:parseFloat(d.css("left")),top:parseFloat(d.css("top"))})})},resize:function(o,d){var p=e(this).resizable("instance"),_=p.options,C=p.originalSize,S=p.originalPosition,A={height:p.size.height-C.height||0,width:p.size.width-C.width||0,top:p.position.top-S.top||0,left:p.position.left-S.left||0};e(_.alsoResize).each(function(){var N=e(this),G=e(this).data("ui-resizable-alsoresize"),Y={},X=N.parents(d.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(X,function($,he){var we=(G[he]||0)+(A[he]||0);we&&0<=we&&(Y[he]=we||null)}),N.css(Y)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var o=e(this).resizable("instance"),d=o.size;o.ghost=o.originalElement.clone(),o.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}),o._addClass(o.ghost,"ui-resizable-ghost"),e.uiBackCompat===!0&&typeof o.options.ghost=="string"&&o.ghost.addClass(this.options.ghost),o.ghost.appendTo(o.helper)},resize:function(){var o=e(this).resizable("instance");o.ghost&&o.ghost.css({position:"relative",height:o.size.height,width:o.size.width})},stop:function(){var o=e(this).resizable("instance");o.ghost&&o.helper&&o.helper.get(0).removeChild(o.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var o,d=e(this).resizable("instance"),p=d.options,X=d.size,_=d.originalSize,C=d.originalPosition,S=d.axis,A=typeof p.grid=="number"?[p.grid,p.grid]:p.grid,N=A[0]||1,G=A[1]||1,Y=Math.round((X.width-_.width)/N)*N,X=Math.round((X.height-_.height)/G)*G,$=_.width+Y,he=_.height+X,we=p.maxWidth&&p.maxWidth<$,Fe=p.maxHeight&&p.maxHeight<he,Te=p.minWidth&&p.minWidth>$,Ue=p.minHeight&&p.minHeight>he;p.grid=A,Te&&($+=N),Ue&&(he+=G),we&&($-=N),Fe&&(he-=G),/^(se|s|e)$/.test(S)?(d.size.width=$,d.size.height=he):/^(ne)$/.test(S)?(d.size.width=$,d.size.height=he,d.position.top=C.top-X):/^(sw)$/.test(S)?(d.size.width=$,d.size.height=he,d.position.left=C.left-Y):((he-G<=0||$-N<=0)&&(o=d._getPaddingPlusBorderDimensions(this)),0<he-G?(d.size.height=he,d.position.top=C.top-X):(he=G-o.height,d.size.height=he,d.position.top=C.top+_.height-he),0<$-N?(d.size.width=$,d.position.left=C.left-Y):($=N-o.width,d.size.width=$,d.position.left=C.left+_.width-$))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.14.0",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(o){var d=e(this).css(o).offset().top;d<0&&e(this).css("top",o.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title==null&&this.originalTitle!=null&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var o=this.options.appendTo;return o&&(o.jquery||o.nodeType)?e(o):this.document.find(o||"body").eq(0)},_destroy:function(){var o,d=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(o=d.parent.children().eq(d.index)).length&&o[0]!==this.element[0]?o.before(this.element):d.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(o){var d=this;this._isOpen&&this._trigger("beforeClose",o)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e(this.document[0].activeElement).trigger("blur"),this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",o)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(o,d){var p=!1,_=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),_=Math.max.apply(null,_);return _>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",_+1),p=!0),p&&!d&&this._trigger("focus",o),p},open:function(){var o=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){o._focusTabbable(),o._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var o=this._focusedElement;(o=(o=(o=(o=(o=o||this.element.find("[autofocus]")).length?o:this.element.find(":tabbable")).length?o:this.uiDialogButtonPane.find(":tabbable")).length?o:this.uiDialogTitlebarClose.filter(":tabbable")).length?o:this.uiDialog).eq(0).trigger("focus")},_restoreTabbableFocus:function(){var o=this.document[0].activeElement;this.uiDialog[0]===o||e.contains(this.uiDialog[0],o)||this._focusTabbable()},_keepFocus:function(o){o.preventDefault(),this._restoreTabbableFocus()},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog","aria-modal":this.options.modal?"true":null}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(o){var d,p,_;this.options.closeOnEscape&&!o.isDefaultPrevented()&&o.keyCode&&o.keyCode===e.ui.keyCode.ESCAPE?(o.preventDefault(),this.close(o)):o.keyCode!==e.ui.keyCode.TAB||o.isDefaultPrevented()||(d=this.uiDialog.find(":tabbable"),p=d.first(),_=d.last(),o.target!==_[0]&&o.target!==this.uiDialog[0]||o.shiftKey?o.target!==p[0]&&o.target!==this.uiDialog[0]||!o.shiftKey||(this._delay(function(){_.trigger("focus")}),o.preventDefault()):(this._delay(function(){p.trigger("focus")}),o.preventDefault()))},mousedown:function(o){this._moveToTop(o)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var o;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(d){e(d.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(d){d.preventDefault(),this.close(d)}}),o=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(o,"ui-dialog-title"),this._title(o),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":o.attr("id")})},_title:function(o){this.options.title?o.text(this.options.title):o.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var o=this,d=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(d)||Array.isArray(d)&&!d.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(d,function(p,_){var C;_=e.extend({type:"button"},_=typeof _=="function"?{click:_,text:p}:_),C=_.click,p={icon:_.icon,iconPosition:_.iconPosition,showLabel:_.showLabel,icons:_.icons,text:_.text},delete _.click,delete _.icon,delete _.iconPosition,delete _.showLabel,delete _.icons,typeof _.text=="boolean"&&delete _.text,e("<button></button>",_).button(p).appendTo(o.uiButtonSet).on("click",function(){C.apply(o.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var o=this,d=this.options;function p(_){return{position:_.position,offset:_.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(_,C){o._addClass(e(this),"ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",_,p(C))},drag:function(_,C){o._trigger("drag",_,p(C))},stop:function(_,C){var S=C.offset.left-o.document.scrollLeft(),A=C.offset.top-o.document.scrollTop();d.position={my:"left top",at:"left"+(0<=S?"+":"")+S+" top"+(0<=A?"+":"")+A,of:o.window},o._removeClass(e(this),"ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",_,p(C))}})},_makeResizable:function(){var o=this,d=this.options,_=d.resizable,p=this.uiDialog.css("position"),_=typeof _=="string"?_:"n,e,s,w,se,sw,ne,nw";function C(S){return{originalPosition:S.originalPosition,originalSize:S.originalSize,position:S.position,size:S.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:_,start:function(S,A){o._addClass(e(this),"ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",S,C(A))},resize:function(S,A){o._trigger("resize",S,C(A))},stop:function(S,A){var G=o.uiDialog.offset(),N=G.left-o.document.scrollLeft(),G=G.top-o.document.scrollTop();d.height=o.uiDialog.height(),d.width=o.uiDialog.width(),d.position={my:"left top",at:"left"+(0<=N?"+":"")+N+" top"+(0<=G?"+":"")+G,of:o.window},o._removeClass(e(this),"ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",S,C(A))}}).css("position",p)},_trackFocus:function(){this._on(this.widget(),{focusin:function(o){this._makeFocusTarget(),this._focusedElement=e(o.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var o=this._trackingInstances(),d=e.inArray(this,o);d!==-1&&o.splice(d,1)},_trackingInstances:function(){var o=this.document.data("ui-dialog-instances");return o||this.document.data("ui-dialog-instances",o=[]),o},_minHeight:function(){var o=this.options;return o.height==="auto"?o.minHeight:Math.min(o.minHeight,o.height)},_position:function(){var o=this.uiDialog.is(":visible");o||this.uiDialog.show(),this.uiDialog.position(this.options.position),o||this.uiDialog.hide()},_setOptions:function(o){var d=this,p=!1,_={};e.each(o,function(C,S){d._setOption(C,S),C in d.sizeRelatedOptions&&(p=!0),C in d.resizableRelatedOptions&&(_[C]=S)}),p&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",_)},_setOption:function(o,d){var p,_=this.uiDialog;o!=="disabled"&&(this._super(o,d),o==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),o==="buttons"&&this._createButtons(),o==="closeText"&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),o==="draggable"&&((p=_.is(":data(ui-draggable)"))&&!d&&_.draggable("destroy"),!p)&&d&&this._makeDraggable(),o==="position"&&this._position(),o==="resizable"&&((p=_.is(":data(ui-resizable)"))&&!d&&_.resizable("destroy"),p&&typeof d=="string"&&_.resizable("option","handles",d),p||d===!1||this._makeResizable()),o==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")),o==="modal")&&_.attr("aria-modal",d?"true":null)},_size:function(){var o,d,p,_=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),_.minWidth>_.width&&(_.width=_.minWidth),o=this.uiDialog.css({height:"auto",width:_.width}).outerHeight(),d=Math.max(0,_.minHeight-o),p=typeof _.maxHeight=="number"?Math.max(0,_.maxHeight-o):"none",_.height==="auto"?this.element.css({minHeight:d,maxHeight:p,height:"auto"}):this.element.height(Math.max(0,_.height-o)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var o=e(this);return e("<div>").css({position:"absolute",width:o.outerWidth(),height:o.outerHeight()}).appendTo(o.parent()).offset(o.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(o){return!!e(o.target).closest(".ui-dialog").length||!!e(o.target).closest(".ui-datepicker").length},_createOverlay:function(){var o;this.options.modal&&(o=!0,this._delay(function(){o=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",(function(d){var p;o||(p=this._trackingInstances()[0])._allowInteraction(d)||(d.preventDefault(),p._focusTabbable())}).bind(this)),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var o;this.options.modal&&this.overlay&&((o=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",o):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),e.uiBackCompat===!0&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(o,d){o==="dialogClass"&&this.uiDialog.removeClass(this.options.dialogClass).addClass(d),this._superApply(arguments)}}),e.ui.dialog;function Se(o,d,p){return d<=o&&o<d+p}e.widget("ui.droppable",{version:"1.14.0",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var o,d=this.options,p=d.accept;this.isover=!1,this.isout=!0,this.accept=typeof p=="function"?p:function(_){return _.is(p)},this.proportions=function(){if(!arguments.length)return o=o||{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};o=arguments[0]},this._addToManager(d.scope),d.addClasses&&this._addClass("ui-droppable")},_addToManager:function(o){e.ui.ddmanager.droppables[o]=e.ui.ddmanager.droppables[o]||[],e.ui.ddmanager.droppables[o].push(this)},_splice:function(o){for(var d=0;d<o.length;d++)o[d]===this&&o.splice(d,1)},_destroy:function(){var o=e.ui.ddmanager.droppables[this.options.scope];this._splice(o)},_setOption:function(o,d){var p;o==="accept"?this.accept=typeof d=="function"?d:function(_){return _.is(d)}:o==="scope"&&(p=e.ui.ddmanager.droppables[this.options.scope],this._splice(p),this._addToManager(d)),this._super(o,d)},_activate:function(o){var d=e.ui.ddmanager.current;this._addActiveClass(),d&&this._trigger("activate",o,this.ui(d))},_deactivate:function(o){var d=e.ui.ddmanager.current;this._removeActiveClass(),d&&this._trigger("deactivate",o,this.ui(d))},_over:function(o){var d=e.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!==this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this._addHoverClass(),this._trigger("over",o,this.ui(d)))},_out:function(o){var d=e.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!==this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this._removeHoverClass(),this._trigger("out",o,this.ui(d)))},_drop:function(o,d){var p=d||e.ui.ddmanager.current,_=!1;return!(!p||(p.currentItem||p.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var C=e(this).droppable("instance");if(C.options.greedy&&!C.options.disabled&&C.options.scope===p.options.scope&&C.accept.call(C.element[0],p.currentItem||p.element)&&e.ui.intersect(p,e.extend(C,{offset:C.element.offset()}),C.options.tolerance,o))return!(_=!0)}),_)||!this.accept.call(this.element[0],p.currentItem||p.element))&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",o,this.ui(p)),this.element)},ui:function(o){return{draggable:o.currentItem||o.element,helper:o.helper,position:o.position,offset:o.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),e.ui.intersect=function(o,d,p,_){if(!d.offset)return!1;var C=(o.positionAbs||o.position.absolute).left+o.margins.left,S=(o.positionAbs||o.position.absolute).top+o.margins.top,A=C+o.helperProportions.width,N=S+o.helperProportions.height,G=d.offset.left,Y=d.offset.top,X=G+d.proportions().width,$=Y+d.proportions().height;switch(p){case"fit":return G<=C&&A<=X&&Y<=S&&N<=$;case"intersect":return G<C+o.helperProportions.width/2&&A-o.helperProportions.width/2<X&&Y<S+o.helperProportions.height/2&&N-o.helperProportions.height/2<$;case"pointer":return Se(_.pageY,Y,d.proportions().height)&&Se(_.pageX,G,d.proportions().width);case"touch":return(Y<=S&&S<=$||Y<=N&&N<=$||S<Y&&$<N)&&(G<=C&&C<=X||G<=A&&A<=X||C<G&&X<A);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(o,d){var p,_,C=e.ui.ddmanager.droppables[o.options.scope]||[],S=d?d.type:null,A=(o.currentItem||o.element).find(":data(ui-droppable)").addBack();e:for(p=0;p<C.length;p++)if(!(C[p].options.disabled||o&&!C[p].accept.call(C[p].element[0],o.currentItem||o.element))){for(_=0;_<A.length;_++)if(A[_]===C[p].element[0]){C[p].proportions().height=0;continue e}C[p].visible=C[p].element.css("display")!=="none",C[p].visible&&(S==="mousedown"&&C[p]._activate.call(C[p],d),C[p].offset=C[p].element.offset(),C[p].proportions({width:C[p].element[0].offsetWidth,height:C[p].element[0].offsetHeight}))}},drop:function(o,d){var p=!1;return e.each((e.ui.ddmanager.droppables[o.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(o,this,this.options.tolerance,d)&&(p=this._drop.call(this,d)||p),!this.options.disabled)&&this.visible&&this.accept.call(this.element[0],o.currentItem||o.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,d))}),p},dragStart:function(o,d){o.element.parentsUntil("body").on("scroll.droppable",function(){o.options.refreshPositions||e.ui.ddmanager.prepareOffsets(o,d)})},drag:function(o,d){o.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(o,d),e.each(e.ui.ddmanager.droppables[o.options.scope]||[],function(){var p,_,C,S;this.options.disabled||this.greedyChild||!this.visible||(S=!(S=e.ui.intersect(o,this,this.options.tolerance,d))&&this.isover?"isout":S&&!this.isover?"isover":null)&&(this.options.greedy&&(_=this.options.scope,(C=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===_})).length)&&((p=e(C[0]).droppable("instance")).greedyChild=S==="isover"),p&&S==="isover"&&(p.isover=!1,p.isout=!0,p._out.call(p,d)),this[S]=!0,this[S==="isout"?"isover":"isout"]=!1,this[S==="isover"?"_over":"_out"].call(this,d),p)&&S==="isout"&&(p.isout=!1,p.isover=!0,p._over.call(p,d))})},dragStop:function(o,d){o.element.parentsUntil("body").off("scroll.droppable"),o.options.refreshPositions||e.ui.ddmanager.prepareOffsets(o,d)}},e.uiBackCompat===!0&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable,e.widget("ui.progressbar",{version:"1.14.0",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=e("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(o){if(o===void 0)return this.options.value;this.options.value=this._constrainedValue(o),this._refreshValue()},_constrainedValue:function(o){return o===void 0&&(o=this.options.value),this.indeterminate=o===!1,typeof o!="number"&&(o=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,o))},_setOptions:function(o){var d=o.value;delete o.value,this._super(o),this.options.value=this._constrainedValue(d),this._refreshValue()},_setOption:function(o,d){o==="max"&&(d=Math.max(this.min,d)),this._super(o,d)},_setOptionDisabled:function(o){this._super(o),this.element.attr("aria-disabled",o),this._toggleClass(null,"ui-state-disabled",!!o)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var o=this.options.value,d=this._percentage();this.valueDiv.toggle(this.indeterminate||o>this.min).width(d.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,o===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":o}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==o&&(this.oldValue=o,this._trigger("change")),o===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.14.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var o=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){o.elementPos=e(o.element[0]).offset(),o.selectees=e(o.options.filter,o.element[0]),o._addClass(o.selectees,"ui-selectee"),o.selectees.each(function(){var d=e(this),p=d.offset(),p={left:p.left-o.elementPos.left,top:p.top-o.elementPos.top};e.data(this,"selectable-item",{element:this,$element:d,left:p.left,top:p.top,right:p.left+d.outerWidth(),bottom:p.top+d.outerHeight(),startselected:!1,selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(o){var d=this,p=this.options;this.opos=[o.pageX,o.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(p.filter,this.element[0]),this._trigger("start",o),e(p.appendTo).append(this.helper),this.helper.css({left:o.pageX,top:o.pageY,width:0,height:0}),p.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var _=e.data(this,"selectable-item");_.startselected=!0,o.metaKey||o.ctrlKey||(d._removeClass(_.$element,"ui-selected"),_.selected=!1,d._addClass(_.$element,"ui-unselecting"),_.unselecting=!0,d._trigger("unselecting",o,{unselecting:_.element}))}),e(o.target).parents().addBack().each(function(){var _,C=e.data(this,"selectable-item");if(C)return _=!o.metaKey&&!o.ctrlKey||!C.$element.hasClass("ui-selected"),d._removeClass(C.$element,_?"ui-unselecting":"ui-selected")._addClass(C.$element,_?"ui-selecting":"ui-unselecting"),C.unselecting=!_,C.selecting=_,(C.selected=_)?d._trigger("selecting",o,{selecting:C.element}):d._trigger("unselecting",o,{unselecting:C.element}),!1}))},_mouseDrag:function(o){var d,p,_,C,S,A,N;if(this.dragged=!0,!this.options.disabled)return _=(p=this).options,C=this.opos[0],S=this.opos[1],A=o.pageX,N=o.pageY,A<C&&(d=A,A=C,C=d),N<S&&(d=N,N=S,S=d),this.helper.css({left:C,top:S,width:A-C,height:N-S}),this.selectees.each(function(){var G=e.data(this,"selectable-item"),Y=!1,X={};G&&G.element!==p.element[0]&&(X.left=G.left+p.elementPos.left,X.right=G.right+p.elementPos.left,X.top=G.top+p.elementPos.top,X.bottom=G.bottom+p.elementPos.top,_.tolerance==="touch"?Y=!(A<X.left||X.right<C||N<X.top||X.bottom<S):_.tolerance==="fit"&&(Y=C<X.left&&X.right<A&&S<X.top&&X.bottom<N),Y?(G.selected&&(p._removeClass(G.$element,"ui-selected"),G.selected=!1),G.unselecting&&(p._removeClass(G.$element,"ui-unselecting"),G.unselecting=!1),G.selecting||(p._addClass(G.$element,"ui-selecting"),G.selecting=!0,p._trigger("selecting",o,{selecting:G.element}))):(G.selecting&&((o.metaKey||o.ctrlKey)&&G.startselected?(p._removeClass(G.$element,"ui-selecting"),G.selecting=!1,p._addClass(G.$element,"ui-selected"),G.selected=!0):(p._removeClass(G.$element,"ui-selecting"),G.selecting=!1,G.startselected&&(p._addClass(G.$element,"ui-unselecting"),G.unselecting=!0),p._trigger("unselecting",o,{unselecting:G.element}))),!G.selected||o.metaKey||o.ctrlKey||G.startselected||(p._removeClass(G.$element,"ui-selected"),G.selected=!1,p._addClass(G.$element,"ui-unselecting"),G.unselecting=!0,p._trigger("unselecting",o,{unselecting:G.element}))))}),!1},_mouseStop:function(o){var d=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var p=e.data(this,"selectable-item");d._removeClass(p.$element,"ui-unselecting"),p.unselecting=!1,p.startselected=!1,d._trigger("unselected",o,{unselected:p.element})}),e(".ui-selecting",this.element[0]).each(function(){var p=e.data(this,"selectable-item");d._removeClass(p.$element,"ui-selecting")._addClass(p.$element,"ui-selected"),p.selecting=!1,p.selected=!0,p.startselected=!0,d._trigger("selected",o,{selected:p.element})}),this._trigger("stop",o),this.helper.remove(),!1}}),e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.14.0",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var o=this.element.uniqueId().attr("id");this.ids={element:o,button:o+"-button",menu:o+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var o,d=this,p=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(_){this.button.trigger("focus"),_.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),o=e("<span>").appendTo(this.button),this._addClass(o,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(p).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){d._rendered||d._refreshMenu()})},_drawMenu:function(){var o=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(d,p){d.preventDefault(),o._select(p.item.data("ui-selectmenu-item"),d)},focus:function(d,p){p=p.item.data("ui-selectmenu-item"),o.focusIndex!=null&&p.index!==o.focusIndex&&(o._trigger("focus",d,{item:p}),o.isOpen||o._select(p,d)),o.focusIndex=p.index,o.button.attr("aria-activedescendant",o.menuItems.eq(p.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),this.options.width===null&&this._resizeButton()},_refreshMenu:function(){var o=this.element.find("option");this.menu.empty(),this._parseOptions(o),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,o.length&&(o=this._getSelectedItem(),this.menuInstance.focus(null,o),this._setAria(o.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(o){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",o)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(o){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",o))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(o){var d=e("<span>");return this._setText(d,o.label),this._addClass(d,"ui-selectmenu-text"),d},_renderMenu:function(o,d){var p=this,_="";e.each(d,function(C,S){var A;S.optgroup!==_&&(A=e("<li>",{text:S.optgroup}),p._addClass(A,"ui-selectmenu-optgroup","ui-menu-divider"+(S.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),A.appendTo(o),_=S.optgroup),p._renderItemData(o,S)})},_renderItemData:function(o,d){return this._renderItem(o,d).data("ui-selectmenu-item",d)},_renderItem:function(o,d){var p=e("<li>"),_=e("<div>",{title:d.element.attr("title")});return d.disabled&&this._addClass(p,null,"ui-state-disabled"),d.hidden?p.prop("hidden",!0):this._setText(_,d.label),p.append(_).appendTo(o)},_setText:function(o,d){d?o.text(d):o.html("&#160;")},_move:function(o,d){var p,_=".ui-menu-item";this.isOpen?p=this.menuItems.eq(this.focusIndex).parent("li"):(p=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),_+=":not(.ui-state-disabled)"),(p=o==="first"||o==="last"?p[o==="first"?"prevAll":"nextAll"](_).eq(-1):p[o+"All"](_).eq(0)).length&&this.menuInstance.focus(d,p)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(o){this[this.isOpen?"close":"open"](o)},_setSelection:function(){var o;this.range&&((o=window.getSelection()).removeAllRanges(),o.addRange(this.range))},_documentClick:{mousedown:function(o){!this.isOpen||e(o.target).closest(".ui-selectmenu-menu, #"+CSS.escape(this.ids.button)).length||this.close(o)}},_buttonEvents:{mousedown:function(){var o=window.getSelection();o.rangeCount&&(this.range=o.getRangeAt(0))},click:function(o){this._setSelection(),this._toggle(o)},keydown:function(o){var d=!0;switch(o.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(o),d=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(o);break;case e.ui.keyCode.UP:o.altKey?this._toggle(o):this._move("prev",o);break;case e.ui.keyCode.DOWN:o.altKey?this._toggle(o):this._move("next",o);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(o):this._toggle(o);break;case e.ui.keyCode.LEFT:this._move("prev",o);break;case e.ui.keyCode.RIGHT:this._move("next",o);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",o);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",o);break;default:this.menu.trigger(o),d=!1}d&&o.preventDefault()}},_selectFocusedItem:function(o){var d=this.menuItems.eq(this.focusIndex).parent("li");d.hasClass("ui-state-disabled")||this._select(d.data("ui-selectmenu-item"),o)},_select:function(o,d){var p=this.element[0].selectedIndex;this.element[0].selectedIndex=o.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(o)),this._setAria(o),this._trigger("select",d,{item:o}),o.index!==p&&this._trigger("change",d,{item:o}),this.close(d)},_setAria:function(o){o=this.menuItems.eq(o.index).attr("id"),this.button.attr({"aria-labelledby":o,"aria-activedescendant":o}),this.menu.attr("aria-activedescendant",o)},_setOption:function(o,d){var p;o==="icons"&&(p=this.button.find("span.ui-icon"),this._removeClass(p,null,this.options.icons.button)._addClass(p,null,d.button)),this._super(o,d),o==="appendTo"&&this.menuWrap.appendTo(this._appendTo()),o==="width"&&this._resizeButton()},_setOptionDisabled:function(o){this._super(o),this.menuInstance.option("disabled",o),this.button.attr("aria-disabled",o),this._toggleClass(this.button,null,"ui-state-disabled",o),this.element.prop("disabled",o),o?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var o=this.options.appendTo;return o=(o=(o=o&&(o.jquery||o.nodeType?e(o):this.document.find(o).eq(0)))&&o[0]?o:this.element.closest(".ui-front, dialog")).length?o:this.document[0].body},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var o=this.options.width;o===!1?this.button.css("width",""):(o===null&&(o=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(o))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()))},_getCreateOptions:function(){var o=this._super();return o.disabled=this.element.prop("disabled"),o},_parseOptions:function(o){var d=this,p=[];o.each(function(_,C){p.push(d._parseOption(e(C),_))}),this.items=p},_parseOption:function(o,d){var p=o.parent("optgroup");return{element:o,index:d,value:o.val(),label:o.text(),hidden:p.prop("hidden")||o.prop("hidden"),optgroup:p.attr("label")||"",disabled:p.prop("disabled")||o.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),e.widget("ui.slider",e.ui.mouse,{version:"1.14.0",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var o,d=this.options,p=this.element.find(".ui-slider-handle"),_=[],C=d.values&&d.values.length||1;for(p.length>C&&(p.slice(C).remove(),p=p.slice(0,C)),o=p.length;o<C;o++)_.push("<span tabindex='0'></span>");this.handles=p.add(e(_.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(S){e(this).data("ui-slider-handle-index",S).attr("tabIndex",0)})},_createRange:function(){var o=this.options;o.range?(o.range===!0&&(o.values?o.values.length&&o.values.length!==2?o.values=[o.values[0],o.values[0]]:Array.isArray(o.values)&&(o.values=o.values.slice(0)):o.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),o.range!=="min"&&o.range!=="max"||this._addClass(this.range,"ui-slider-range-"+o.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(o){var d,p,_,C,S,A,N=this,G=this.options;return!G.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),S={x:o.pageX,y:o.pageY},d=this._normValueFromMouse(S),p=this._valueMax()-this._valueMin()+1,this.handles.each(function(Y){var X=Math.abs(d-N.values(Y));(X<p||p===X&&(Y===N._lastChangedValue||N.values(Y)===G.min))&&(p=X,_=e(this),C=Y)}),this._start(o,C)!==!1)&&(this._mouseSliding=!0,this._handleIndex=C,this._addClass(_,null,"ui-state-active"),_.trigger("focus"),S=_.offset(),A=!e(o.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=A?{left:0,top:0}:{left:o.pageX-S.left-_.width()/2,top:o.pageY-S.top-_.height()/2-(parseInt(_.css("borderTopWidth"),10)||0)-(parseInt(_.css("borderBottomWidth"),10)||0)+(parseInt(_.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(o,C,d),this._animateOff=!0)},_mouseStart:function(){return!0},_mouseDrag:function(o){var d={x:o.pageX,y:o.pageY},d=this._normValueFromMouse(d);return this._slide(o,this._handleIndex,d),!1},_mouseStop:function(o){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(o,this._handleIndex),this._change(o,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(p){var d,p=this.orientation==="horizontal"?(d=this.elementSize.width,p.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(d=this.elementSize.height,p.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),p=p/d;return(p=1<p?1:p)<0&&(p=0),this.orientation==="vertical"&&(p=1-p),d=this._valueMax()-this._valueMin(),p=this._valueMin()+p*d,this._trimAlignValue(p)},_uiHash:function(o,d,p){var _={handle:this.handles[o],handleIndex:o,value:d!==void 0?d:this.value()};return this._hasMultipleValues()&&(_.value=d!==void 0?d:this.values(o),_.values=p||this.values()),_},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(o,d){return this._trigger("start",o,this._uiHash(d))},_slide:function(o,d,p){var _,C=this.value(),S=this.values();this._hasMultipleValues()&&(_=this.values(d?0:1),C=this.values(d),this.options.values.length===2&&this.options.range===!0&&(p=d===0?Math.min(_,p):Math.max(_,p)),S[d]=p),p!==C&&this._trigger("slide",o,this._uiHash(d,p,S))!==!1&&(this._hasMultipleValues()?this.values(d,p):this.value(p))},_stop:function(o,d){this._trigger("stop",o,this._uiHash(d))},_change:function(o,d){this._keySliding||this._mouseSliding||(this._lastChangedValue=d,this._trigger("change",o,this._uiHash(d)))},value:function(o){if(!arguments.length)return this._value();this.options.value=this._trimAlignValue(o),this._refreshValue(),this._change(null,0)},values:function(o,d){var p,_,C;if(1<arguments.length)this.options.values[o]=this._trimAlignValue(d),this._refreshValue(),this._change(null,o);else{if(!arguments.length)return this._values();if(!Array.isArray(o))return this._hasMultipleValues()?this._values(o):this.value();for(p=this.options.values,_=o,C=0;C<p.length;C+=1)p[C]=this._trimAlignValue(_[C]),this._change(null,C);this._refreshValue()}},_setOption:function(o,d){var p,_=0;switch(o==="range"&&this.options.range===!0&&(d==="min"?(this.options.value=this._values(0),this.options.values=null):d==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(_=this.options.values.length),this._super(o,d),o){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(d),this.handles.css(d==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),p=_-1;0<=p;p--)this._change(null,p);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(o){this._super(o),this._toggleClass(null,"ui-state-disabled",!!o)},_value:function(){var o=this.options.value;return this._trimAlignValue(o)},_values:function(o){var d,p;if(arguments.length)return o=this.options.values[o],this._trimAlignValue(o);if(this._hasMultipleValues()){for(d=this.options.values.slice(),p=0;p<d.length;p+=1)d[p]=this._trimAlignValue(d[p]);return d}return[]},_trimAlignValue:function(o){var d,p;return o<=this._valueMin()?this._valueMin():o>=this._valueMax()?this._valueMax():(d=0<this.options.step?this.options.step:1,p=o-(o=(o-this._valueMin())%d),2*Math.abs(o)>=d&&(p+=0<o?d:-d),parseFloat(p.toFixed(5)))},_calculateNewMax:function(){var o=this.options.max,d=this._valueMin(),p=this.options.step;(o=Math.round((o-d)/p)*p+d)>this.options.max&&(o-=p),this.max=parseFloat(o.toFixed(this._precision()))},_precision:function(){var o=this._precisionOf(this.options.step);return o=this.options.min!==null?Math.max(o,this._precisionOf(this.options.min)):o},_precisionOf:function(d){var d=d.toString(),p=d.indexOf(".");return p===-1?0:d.length-p-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(o){o==="vertical"&&this.range.css({width:"",left:""}),o==="horizontal"&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var o,d,p,_,C,S=this.options.range,A=this.options,N=this,G=!this._animateOff&&A.animate,Y={};this._hasMultipleValues()?this.handles.each(function(X){d=(N.values(X)-N._valueMin())/(N._valueMax()-N._valueMin())*100,Y[N.orientation==="horizontal"?"left":"bottom"]=d+"%",e(this).stop(1,1)[G?"animate":"css"](Y,A.animate),N.options.range===!0&&(N.orientation==="horizontal"?(X===0&&N.range.stop(1,1)[G?"animate":"css"]({left:d+"%"},A.animate),X===1&&N.range[G?"animate":"css"]({width:d-o+"%"},{queue:!1,duration:A.animate})):(X===0&&N.range.stop(1,1)[G?"animate":"css"]({bottom:d+"%"},A.animate),X===1&&N.range[G?"animate":"css"]({height:d-o+"%"},{queue:!1,duration:A.animate}))),o=d}):(p=this.value(),_=this._valueMin(),C=this._valueMax(),d=C!==_?(p-_)/(C-_)*100:0,Y[this.orientation==="horizontal"?"left":"bottom"]=d+"%",this.handle.stop(1,1)[G?"animate":"css"](Y,A.animate),S==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[G?"animate":"css"]({width:d+"%"},A.animate),S==="max"&&this.orientation==="horizontal"&&this.range.stop(1,1)[G?"animate":"css"]({width:100-d+"%"},A.animate),S==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[G?"animate":"css"]({height:d+"%"},A.animate),S==="max"&&this.orientation==="vertical"&&this.range.stop(1,1)[G?"animate":"css"]({height:100-d+"%"},A.animate))},_handleEvents:{keydown:function(o){var d,p,_,C=e(o.target).data("ui-slider-handle-index");switch(o.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o.preventDefault(),this._keySliding||(this._keySliding=!0,this._addClass(e(o.target),null,"ui-state-active"),this._start(o,C)!==!1))break;return}switch(_=this.options.step,d=p=this._hasMultipleValues()?this.values(C):this.value(),o.keyCode){case e.ui.keyCode.HOME:p=this._valueMin();break;case e.ui.keyCode.END:p=this._valueMax();break;case e.ui.keyCode.PAGE_UP:p=this._trimAlignValue(d+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:p=this._trimAlignValue(d-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(d===this._valueMax())return;p=this._trimAlignValue(d+_);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(d===this._valueMin())return;p=this._trimAlignValue(d-_)}this._slide(o,C,p)},keyup:function(o){var d=e(o.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(o,d),this._change(o,d),this._removeClass(e(o.target),null,"ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.14.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(o,d,p){return d<=o&&o<d+p},_isFloating:function(o){return/left|right/.test(o.css("float"))||/inline|table-cell/.test(o.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(o,d){this._super(o,d),o==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){var o=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){o._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var o=this.items.length-1;0<=o;o--)this.items[o].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(o,d){var p=null,_=!1,C=this;return!(this.reverting||this.options.disabled||this.options.type==="static"||(this._refreshItems(o),e(o.target).parents().each(function(){if(e.data(this,C.widgetName+"-item")===C)return p=e(this),!1}),!(p=e.data(o.target,C.widgetName+"-item")===C?e(o.target):p))||this.options.handle&&!d&&(e(this.options.handle,p).find("*").addBack().each(function(){this===o.target&&(_=!0)}),!_)||(this.currentItem=p,this._removeCurrentsFromItems(),0))},_mouseStart:function(o,d,p){var _,C,S=this.options;if((this.currentContainer=this).refreshPositions(),this.appendTo=e(S.appendTo!=="parent"?S.appendTo:this.currentItem.parent()),this.helper=this._createHelper(o),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:o.pageX-this.offset.left,top:o.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),S.cursorAt&&this._adjustOffsetFromHelper(S.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),e.extend(this.offset,{parent:this._getParentOffset()}),S.containment&&this._setContainment(),S.cursor&&S.cursor!=="auto"&&(C=this.document.find("body"),this._storedStylesheet=e("<style>*{ cursor: "+S.cursor+" !important; }</style>").appendTo(C)),S.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",S.zIndex)),S.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",S.opacity)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",o,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!p)for(_=this.containers.length-1;0<=_;_--)this.containers[_]._trigger("activate",o,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!S.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,o),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(o),this.originalPageX=o.pageX,this.originalPageY=o.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(o),!0},_scroll:function(o){var d=this.options,p=!1;return this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-o.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop+d.scrollSpeed:o.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-o.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft+d.scrollSpeed:o.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(o.pageY-this.document.scrollTop()<d.scrollSensitivity?p=this.document.scrollTop(this.document.scrollTop()-d.scrollSpeed):this.window.height()-(o.pageY-this.document.scrollTop())<d.scrollSensitivity&&(p=this.document.scrollTop(this.document.scrollTop()+d.scrollSpeed)),o.pageX-this.document.scrollLeft()<d.scrollSensitivity?p=this.document.scrollLeft(this.document.scrollLeft()-d.scrollSpeed):this.window.width()-(o.pageX-this.document.scrollLeft())<d.scrollSensitivity&&(p=this.document.scrollLeft(this.document.scrollLeft()+d.scrollSpeed))),p},_mouseDrag:function(o){var d,p,_,C,S=this.options;for(this.position=this._generatePosition(o),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&this.options.axis==="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis==="x"||(this.helper[0].style.top=this.position.top+"px"),S.scroll&&this._scroll(o)!==!1&&(this._refreshItemPositions(!0),e.ui.ddmanager)&&!S.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,o),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},d=this.items.length-1;0<=d;d--)if(_=(p=this.items[d]).item[0],(C=this._intersectsWithPointer(p))&&p.instance===this.currentContainer&&!(_===this.currentItem[0]||this.placeholder[C===1?"next":"prev"]()[0]===_||e.contains(this.placeholder[0],_)||this.options.type==="semi-dynamic"&&e.contains(this.element[0],_))){if(this.direction=C===1?"down":"up",this.options.tolerance!=="pointer"&&!this._intersectsWithSides(p))break;this._rearrange(o,p),this._trigger("change",o,this._uiHash());break}return this._contactContainers(o),e.ui.ddmanager&&e.ui.ddmanager.drag(this,o),this._trigger("sort",o,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(o,d){var p,_,C,S;if(o)return e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,o),this.options.revert?(_=(p=this).placeholder.offset(),S={},(C=this.options.axis)&&C!=="x"||(S.left=_.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),C&&C!=="y"||(S.top=_.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(S,parseInt(this.options.revert,10)||500,function(){p._clear(o)})):this._clear(o,d),!1},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),this.options.helper==="original"?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var o=this.containers.length-1;0<=o;o--)this.containers[o]._trigger("deactivate",null,this._uiHash(this)),this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",null,this._uiHash(this)),this.containers[o].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var d=this._getItemsAsjQuery(o&&o.connected),p=[];return o=o||{},e(d).each(function(){var _=(e(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);_&&p.push((o.key||_[1]+"[]")+"="+(o.key&&o.expression?_[1]:_[2]))}),!p.length&&o.key&&p.push(o.key+"="),p.join("&")},toArray:function(o){var d=this._getItemsAsjQuery(o&&o.connected),p=[];return o=o||{},d.each(function(){p.push(e(o.item||this).attr(o.attribute||"id")||"")}),p},_intersectsWith:function(o){var d=this.positionAbs.left,p=d+this.helperProportions.width,_=this.positionAbs.top,C=_+this.helperProportions.height,S=o.left,A=S+o.width,N=o.top,G=N+o.height,Y=this.offset.click.top,X=this.offset.click.left,Y=this.options.axis==="x"||N<_+Y&&_+Y<G,X=this.options.axis==="y"||S<d+X&&d+X<A;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>o[this.floating?"width":"height"]?Y&&X:S<d+this.helperProportions.width/2&&p-this.helperProportions.width/2<A&&N<_+this.helperProportions.height/2&&C-this.helperProportions.height/2<G},_intersectsWithPointer:function(p){var d=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,p.top,p.height),p=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,p.left,p.width);return!(!d||!p)&&(d=this.dragDirection.vertical,p=this.dragDirection.horizontal,this.floating?p==="right"||d==="down"?2:1:d&&(d==="down"?2:1))},_intersectsWithSides:function(p){var d=this._isOverAxis(this.positionAbs.top+this.offset.click.top,p.top+p.height/2,p.height),p=this._isOverAxis(this.positionAbs.left+this.offset.click.left,p.left+p.width/2,p.width),_=this.dragDirection.vertical,C=this.dragDirection.horizontal;return this.floating&&C?C==="right"&&p||C==="left"&&!p:_&&(_==="down"&&d||_==="up"&&!d)},_getDragVerticalDirection:function(){var o=this.positionAbs.top-this.lastPositionAbs.top;return o!=0&&(0<o?"down":"up")},_getDragHorizontalDirection:function(){var o=this.positionAbs.left-this.lastPositionAbs.left;return o!=0&&(0<o?"right":"left")},refresh:function(o){return this._refreshItems(o),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var o=this.options;return o.connectWith.constructor===String?[o.connectWith]:o.connectWith},_getItemsAsjQuery:function(o){var d,p,_,C,S=[],A=[],N=this._connectWith();if(N&&o)for(d=N.length-1;0<=d;d--)for(p=(_=e(N[d],this.document[0])).length-1;0<=p;p--)(C=e.data(_[p],this.widgetFullName))&&C!==this&&!C.options.disabled&&A.push([typeof C.options.items=="function"?C.options.items.call(C.element):e(C.options.items,C.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),C]);function G(){S.push(this)}for(A.push([typeof this.options.items=="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=A.length-1;0<=d;d--)A[d][0].each(G);return e(S)},_removeCurrentsFromItems:function(){var o=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(d){for(var p=0;p<o.length;p++)if(o[p]===d.item[0])return!1;return!0})},_refreshItems:function(o){this.items=[],this.containers=[this];var d,p,_,C,S,A,N,G,Y=this.items,X=[[typeof this.options.items=="function"?this.options.items.call(this.element[0],o,{item:this.currentItem}):e(this.options.items,this.element),this]],$=this._connectWith();if($&&this.ready)for(d=$.length-1;0<=d;d--)for(p=(_=e($[d],this.document[0])).length-1;0<=p;p--)(C=e.data(_[p],this.widgetFullName))&&C!==this&&!C.options.disabled&&(X.push([typeof C.options.items=="function"?C.options.items.call(C.element[0],o,{item:this.currentItem}):e(C.options.items,C.element),C]),this.containers.push(C));for(d=X.length-1;0<=d;d--)for(S=X[d][1],G=(A=X[d][p=0]).length;p<G;p++)(N=e(A[p])).data(this.widgetName+"-item",S),Y.push({item:N,instance:S,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(o){for(var d,p,_=this.items.length-1;0<=_;_--)d=this.items[_],this.currentContainer&&d.instance!==this.currentContainer&&d.item[0]!==this.currentItem[0]||(p=this.options.toleranceElement?e(this.options.toleranceElement,d.item):d.item,o||(d.width=p.outerWidth(),d.height=p.outerHeight()),p=p.offset(),d.left=p.left,d.top=p.top)},refreshPositions:function(o){var d,p;if(this.floating=!!this.items.length&&(this.options.axis==="x"||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(o),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=this.containers.length-1;0<=d;d--)p=this.containers[d].element.offset(),this.containers[d].containerCache.left=p.left,this.containers[d].containerCache.top=p.top,this.containers[d].containerCache.width=this.containers[d].element.outerWidth(),this.containers[d].containerCache.height=this.containers[d].element.outerHeight();return this},_createPlaceholder:function(o){var d,p,_=(o=o||this).options;_.placeholder&&_.placeholder.constructor!==String||(d=_.placeholder,p=o.currentItem[0].nodeName.toLowerCase(),_.placeholder={element:function(){var C=e("<"+p+">",o.document[0]);return o._addClass(C,"ui-sortable-placeholder",d||o.currentItem[0].className)._removeClass(C,"ui-sortable-helper"),p==="tbody"?o._createTrPlaceholder(o.currentItem.find("tr").eq(0),e("<tr>",o.document[0]).appendTo(C)):p==="tr"?o._createTrPlaceholder(o.currentItem,C):p==="img"&&C.attr("src",o.currentItem.attr("src")),d||C.css("visibility","hidden"),C},update:function(C,S){d&&!_.forcePlaceholderSize||(S.height()&&(!_.forcePlaceholderSize||p!=="tbody"&&p!=="tr")||S.height(o.currentItem.innerHeight()-parseInt(o.currentItem.css("paddingTop")||0,10)-parseInt(o.currentItem.css("paddingBottom")||0,10)),S.width())||S.width(o.currentItem.innerWidth()-parseInt(o.currentItem.css("paddingLeft")||0,10)-parseInt(o.currentItem.css("paddingRight")||0,10))}}),o.placeholder=e(_.placeholder.element.call(o.element,o.currentItem)),o.currentItem.after(o.placeholder),_.placeholder.update(o,o.placeholder)},_createTrPlaceholder:function(o,d){var p=this;o.children().each(function(){e("<td>&#160;</td>",p.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(d)})},_contactContainers:function(o){for(var d,p,_,C,S,A,N,G,Y,X=null,$=null,he=this.containers.length-1;0<=he;he--)e.contains(this.currentItem[0],this.containers[he].element[0])||(this._intersectsWith(this.containers[he].containerCache)?X&&e.contains(this.containers[he].element[0],X.element[0])||(X=this.containers[he],$=he):this.containers[he].containerCache.over&&(this.containers[he]._trigger("out",o,this._uiHash(this)),this.containers[he].containerCache.over=0));if(X)if(this.containers.length===1)this.containers[$].containerCache.over||(this.containers[$]._trigger("over",o,this._uiHash(this)),this.containers[$].containerCache.over=1);else{for(p=1e4,_=null,C=(G=X.floating||this._isFloating(this.currentItem))?"left":"top",S=G?"width":"height",Y=G?"pageX":"pageY",d=this.items.length-1;0<=d;d--)e.contains(this.containers[$].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(A=this.items[d].item.offset()[C],N=!1,o[Y]-A>this.items[d][S]/2&&(N=!0),Math.abs(o[Y]-A)<p)&&(p=Math.abs(o[Y]-A),_=this.items[d],this.direction=N?"up":"down");(_||this.options.dropOnEmpty)&&(this.currentContainer===this.containers[$]?this.currentContainer.containerCache.over||(this.containers[$]._trigger("over",o,this._uiHash()),this.currentContainer.containerCache.over=1):(_?this._rearrange(o,_,null,!0):this._rearrange(o,null,this.containers[$].element,!0),this._trigger("change",o,this._uiHash()),this.containers[$]._trigger("change",o,this._uiHash(this)),this.currentContainer=this.containers[$],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this.containers[$]._trigger("over",o,this._uiHash(this)),this.containers[$].containerCache.over=1))}},_createHelper:function(p){var d=this.options,p=typeof d.helper=="function"?e(d.helper.apply(this.element[0],[p,this.currentItem])):d.helper==="clone"?this.currentItem.clone():this.currentItem;return p.parents("body").length||this.appendTo[0].appendChild(p[0]),p[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),p[0].style.width&&!d.forceHelperSize||p.width(this.currentItem.width()),p[0].style.height&&!d.forceHelperSize||p.height(this.currentItem.height()),p},_adjustOffsetFromHelper:function(o){typeof o=="string"&&(o=o.split(" ")),"left"in(o=Array.isArray(o)?{left:+o[0],top:+o[1]||0}:o)&&(this.offset.click.left=o.left+this.margins.left),"right"in o&&(this.offset.click.left=this.helperProportions.width-o.right+this.margins.left),"top"in o&&(this.offset.click.top=o.top+this.margins.top),"bottom"in o&&(this.offset.click.top=this.helperProportions.height-o.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var o=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(o.left+=this.scrollParent.scrollLeft(),o.top+=this.scrollParent.scrollTop()),{top:(o=this.offsetParent[0]===this.document[0].body?{top:0,left:0}:o).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:o.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var o;return this.cssPosition==="relative"?{top:(o=this.currentItem.position()).top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:o.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}:{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o,d,p=this.options;p.containment==="parent"&&(p.containment=this.helper[0].parentNode),p.containment!=="document"&&p.containment!=="window"||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,p.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(p.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(p.containment)||(o=e(p.containment)[0],p=e(p.containment).offset(),d=e(o).css("overflow")!=="hidden",this.containment=[p.left+(parseInt(e(o).css("borderLeftWidth"),10)||0)+(parseInt(e(o).css("paddingLeft"),10)||0)-this.margins.left,p.top+(parseInt(e(o).css("borderTopWidth"),10)||0)+(parseInt(e(o).css("paddingTop"),10)||0)-this.margins.top,p.left+(d?Math.max(o.scrollWidth,o.offsetWidth):o.offsetWidth)-(parseInt(e(o).css("borderLeftWidth"),10)||0)-(parseInt(e(o).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,p.top+(d?Math.max(o.scrollHeight,o.offsetHeight):o.offsetHeight)-(parseInt(e(o).css("borderTopWidth"),10)||0)-(parseInt(e(o).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(p,d){d=d||this.position;var p=p==="absolute"?1:-1,_=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,C=/(html|body)/i.test(_[0].tagName);return{top:d.top+this.offset.relative.top*p+this.offset.parent.top*p-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():C?0:_.scrollTop())*p,left:d.left+this.offset.relative.left*p+this.offset.parent.left*p-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():C?0:_.scrollLeft())*p}},_generatePosition:function(o){var d=this.options,p=o.pageX,_=o.pageY,C=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,S=/(html|body)/i.test(C[0].tagName);return this.cssPosition!=="relative"||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(o.pageX-this.offset.click.left<this.containment[0]&&(p=this.containment[0]+this.offset.click.left),o.pageY-this.offset.click.top<this.containment[1]&&(_=this.containment[1]+this.offset.click.top),o.pageX-this.offset.click.left>this.containment[2]&&(p=this.containment[2]+this.offset.click.left),o.pageY-this.offset.click.top>this.containment[3])&&(_=this.containment[3]+this.offset.click.top),d.grid)&&(o=this.originalPageY+Math.round((_-this.originalPageY)/d.grid[1])*d.grid[1],_=!this.containment||o-this.offset.click.top>=this.containment[1]&&o-this.offset.click.top<=this.containment[3]?o:o-this.offset.click.top>=this.containment[1]?o-d.grid[1]:o+d.grid[1],o=this.originalPageX+Math.round((p-this.originalPageX)/d.grid[0])*d.grid[0],p=!this.containment||o-this.offset.click.left>=this.containment[0]&&o-this.offset.click.left<=this.containment[2]?o:o-this.offset.click.left>=this.containment[0]?o-d.grid[0]:o+d.grid[0]),{top:_-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():S?0:C.scrollTop()),left:p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():S?0:C.scrollLeft())}},_rearrange:function(o,d,p,_){p?p[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?d.item[0]:d.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var C=this.counter;this._delay(function(){C===this.counter&&this.refreshPositions(!_)})},_clear:function(o,d){this.reverting=!1;var p,_=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(p in this._storedCSS)this._storedCSS[p]!=="auto"&&this._storedCSS[p]!=="static"||(this._storedCSS[p]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function C(S,A,N){return function(G){N._trigger(S,G,A._uiHash(A))}}for(this.fromOutside&&!d&&_.push(function(S){this._trigger("receive",S,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||d||_.push(function(S){this._trigger("update",S,this._uiHash())}),this===this.currentContainer||d||(_.push(function(S){this._trigger("remove",S,this._uiHash())}),_.push((function(S){return function(A){S._trigger("receive",A,this._uiHash(this))}}).call(this,this.currentContainer)),_.push((function(S){return function(A){S._trigger("update",A,this._uiHash(this))}}).call(this,this.currentContainer))),p=this.containers.length-1;0<=p;p--)d||_.push(C("deactivate",this,this.containers[p])),this.containers[p].containerCache.over&&(_.push(C("out",this,this.containers[p])),this.containers[p].containerCache.over=0);if(this._storedStylesheet&&(this._storedStylesheet.remove(),this._storedStylesheet=null),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,d||this._trigger("beforeStop",o,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!d){for(p=0;p<_.length;p++)_[p].call(this,o);this._trigger("stop",o,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(o){var d=o||this;return{helper:d.helper,placeholder:d.placeholder||e([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:o?o.element:null}}});function qe(o){return function(){var d=this.element.val();o.apply(this,arguments),this._refresh(),d!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.14.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this.value()!==""&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var o=this._super(),d=this.element;return e.each(["min","max","step"],function(p,_){var C=d.attr(_);C!=null&&C.length&&(o[_]=C)}),o},_events:{keydown:function(o){this._start(o)&&this._keydown(o)&&o.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(o){this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",o)},mousewheel:function(o,d){var p=this.document[0].activeElement;if(this.element[0]===p&&d){if(!this.spinning&&!this._start(o))return!1;this._spin((0<d?1:-1)*this.options.step,o),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(o)},100),o.preventDefault()}},"mousedown .ui-spinner-button":function(o){var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),o.preventDefault(),(function(){this.element[0]!==this.document[0].activeElement&&(this.element.trigger("focus"),this.previous=d)}).call(this),this._start(o)!==!1&&this._repeat(null,e(o.currentTarget).hasClass("ui-spinner-up")?1:-1,o)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(o){if(e(o.currentTarget).hasClass("ui-state-active"))return this._start(o)!==!1&&void this._repeat(null,e(o.currentTarget).hasClass("ui-spinner-up")?1:-1,o)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(o){var d=this.options,p=e.ui.keyCode;switch(o.keyCode){case p.UP:return this._repeat(null,1,o),!0;case p.DOWN:return this._repeat(null,-1,o),!0;case p.PAGE_UP:return this._repeat(null,d.page,o),!0;case p.PAGE_DOWN:return this._repeat(null,-d.page,o),!0}return!1},_start:function(o){return!(!this.spinning&&this._trigger("start",o)===!1)&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(o,d,p){o=o||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,d,p)},o),this._spin(d*this.options.step,p)},_spin:function(o,d){var p=this.value()||0;this.counter||(this.counter=1),p=this._adjustValue(p+o*this._increment(this.counter)),this.spinning&&this._trigger("spin",d,{value:p})===!1||(this._value(p),this.counter++)},_increment:function(o){var d=this.options.incremental;return d?typeof d=="function"?d(o):Math.floor(o*o*o/5e4-o*o/500+17*o/200+1):1},_precision:function(){var o=this._precisionOf(this.options.step);return o=this.options.min!==null?Math.max(o,this._precisionOf(this.options.min)):o},_precisionOf:function(d){var d=d.toString(),p=d.indexOf(".");return p===-1?0:d.length-p-1},_adjustValue:function(o){var d=this.options,p=d.min!==null?d.min:0,_=o-p;return o=p+Math.round(_/d.step)*d.step,o=parseFloat(o.toFixed(this._precision())),d.max!==null&&o>d.max?d.max:d.min!==null&&o<d.min?d.min:o},_stop:function(o){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",o))},_setOption:function(o,d){var p;o==="culture"||o==="numberFormat"?(p=this._parse(this.element.val()),this.options[o]=d,this.element.val(this._format(p))):(o!=="max"&&o!=="min"&&o!=="step"||typeof d=="string"&&(d=this._parse(d)),o==="icons"&&(p=this.buttons.first().find(".ui-icon"),this._removeClass(p,null,this.options.icons.up),this._addClass(p,null,d.up),p=this.buttons.last().find(".ui-icon"),this._removeClass(p,null,this.options.icons.down),this._addClass(p,null,d.down)),this._super(o,d))},_setOptionDisabled:function(o){this._super(o),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!o),this.element.prop("disabled",!!o),this.buttons.button(o?"disable":"enable")},_setOptions:qe(function(o){this._super(o)}),_parse:function(o){return(o=typeof o=="string"&&o!==""?window.Globalize&&this.options.numberFormat?Globalize.parseFloat(o,10,this.options.culture):+o:o)===""||isNaN(o)?null:o},_format:function(o){return o===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(o,this.options.numberFormat,this.options.culture):o},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var o=this.value();return o!==null&&o===this._adjustValue(o)},_value:function(o,d){var p;o!==""&&(p=this._parse(o))!==null&&(d||(p=this._adjustValue(p)),o=this._format(p)),this.element.val(o),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:qe(function(o){this._stepUp(o)}),_stepUp:function(o){this._start()&&(this._spin((o||1)*this.options.step),this._stop())},stepDown:qe(function(o){this._stepDown(o)}),_stepDown:function(o){this._start()&&(this._spin((o||1)*-this.options.step),this._stop())},pageUp:qe(function(o){this._stepUp((o||1)*this.options.page)}),pageDown:qe(function(o){this._stepDown((o||1)*this.options.page)}),value:function(o){if(!arguments.length)return this._parse(this.element.val());qe(this._value).call(this,o)},widget:function(){return this.uiSpinner}}),e.uiBackCompat===!0&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var Be;e.ui.spinner,e.widget("ui.tabs",{version:"1.14.0",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(Be=/#.*$/,function(o){var d=o.href.replace(Be,""),p=location.href.replace(Be,"");try{d=decodeURIComponent(d)}catch{}try{p=decodeURIComponent(p)}catch{}return 1<o.hash.length&&d===p}),_create:function(){var o=this,d=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,d.collapsible),this._processTabs(),d.active=this._initialActive(),Array.isArray(d.disabled)&&(d.disabled=e.uniqueSort(d.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(p){return o.tabs.index(p)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(d.active):this.active=e(),this._refresh(),this.active.length&&this.load(d.active)},_initialActive:function(){var o=this.options.active,d=this.options.collapsible,p=location.hash.substring(1);return o===null&&(p&&this.tabs.each(function(_,C){if(e(C).attr("aria-controls")===p)return o=_,!1}),(o=o===null?this.tabs.index(this.tabs.filter(".ui-tabs-active")):o)!==null&&o!==-1||(o=!!this.tabs.length&&0)),o!==!1&&(o=this.tabs.index(this.tabs.eq(o)))===-1&&(o=!d&&0),o=!d&&o===!1&&this.anchors.length?0:o},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(o){var d=e(this.document[0].activeElement).closest("li"),p=this.tabs.index(d),_=!0;if(!this._handlePageNav(o)){switch(o.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:p++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:_=!1,p--;break;case e.ui.keyCode.END:p=this.anchors.length-1;break;case e.ui.keyCode.HOME:p=0;break;case e.ui.keyCode.SPACE:return o.preventDefault(),clearTimeout(this.activating),void this._activate(p);case e.ui.keyCode.ENTER:return o.preventDefault(),clearTimeout(this.activating),void this._activate(p!==this.options.active&&p);default:return}o.preventDefault(),clearTimeout(this.activating),p=this._focusNextTab(p,_),o.ctrlKey||o.metaKey||(d.attr("aria-selected","false"),this.tabs.eq(p).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",p)},this.delay))}},_panelKeydown:function(o){this._handlePageNav(o)||o.ctrlKey&&o.keyCode===e.ui.keyCode.UP&&(o.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(o){return o.altKey&&o.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):o.altKey&&o.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(o,d){for(var p=this.tabs.length-1;e.inArray(o=(o=p<o?0:o)<0?p:o,this.options.disabled)!==-1;)o=d?o+1:o-1;return o},_focusNextTab:function(o,d){return o=this._findNextTab(o,d),this.tabs.eq(o).trigger("focus"),o},_setOption:function(o,d){o==="active"?this._activate(d):(this._super(o,d),o==="collapsible"&&(this._toggleClass("ui-tabs-collapsible",null,d),d||this.options.active!==!1||this._activate(0)),o==="event"&&this._setupEvents(d),o==="heightStyle"&&this._setupHeightStyle(d))},_sanitizeSelector:function(o){return o?o.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var o=this.options,d=this.tablist.children(":has(a[href])");o.disabled=e.map(d.filter(".ui-state-disabled"),function(p){return d.index(p)}),this._processTabs(),o.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===o.disabled.length?(o.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,o.active-1),!1)):o.active=this.tabs.index(this.active):(o.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var o=this,d=this.tabs,p=this.anchors,_=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(C){e(this).is(".ui-state-disabled")&&C.preventDefault()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each(function(C,S){var A,N,G,Y=e(S).uniqueId().attr("id"),X=e(S).closest("li"),$=X.attr("aria-controls");o._isLocal(S)?(G=(A=S.hash).substring(1),N=o.element.find(o._sanitizeSelector(A))):(G=X.attr("aria-controls")||e({}).uniqueId()[0].id,(N=o.element.find(A="#"+G)).length||(N=o._createPanel(G)).insertAfter(o.panels[C-1]||o.tablist),N.attr("aria-live","polite")),N.length&&(o.panels=o.panels.add(N)),$&&X.data("ui-tabs-aria-controls",$),X.attr({"aria-controls":G,"aria-labelledby":Y}),N.attr("aria-labelledby",Y)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),d&&(this._off(d.not(this.tabs)),this._off(p.not(this.anchors)),this._off(_.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(o){return e("<div>").attr("id",o).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(o){var d,p;for(Array.isArray(o)&&(o.length?o.length===this.anchors.length&&(o=!0):o=!1),p=0;d=this.tabs[p];p++)d=e(d),o===!0||e.inArray(p,o)!==-1?(d.attr("aria-disabled","true"),this._addClass(d,null,"ui-state-disabled")):(d.removeAttr("aria-disabled"),this._removeClass(d,null,"ui-state-disabled"));this.options.disabled=o,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,o===!0)},_setupEvents:function(o){var d={};o&&e.each(o.split(" "),function(p,_){d[_]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(p){p.preventDefault()}}),this._on(this.anchors,d),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(o){var d,p=this.element.parent();o==="fill"?(d=p.height(),d-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var _=e(this),C=_.css("position");C!=="absolute"&&C!=="fixed"&&(d-=_.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){d-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,d-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):o==="auto"&&(d=0,this.panels.each(function(){d=Math.max(d,e(this).height("").height())}).height(d))},_eventHandler:function(o){var d=this.options,N=this.active,p=e(o.currentTarget).closest("li"),_=p[0]===N[0],C=_&&d.collapsible,S=C?e():this._getPanelForTab(p),A=N.length?this._getPanelForTab(N):e(),N={oldTab:N,oldPanel:A,newTab:C?e():p,newPanel:S};o.preventDefault(),p.hasClass("ui-state-disabled")||p.hasClass("ui-tabs-loading")||this.running||_&&!d.collapsible||this._trigger("beforeActivate",o,N)===!1||(d.active=!C&&this.tabs.index(p),this.active=_?e():p,this.xhr&&this.xhr.abort(),A.length||S.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),S.length&&this.load(this.tabs.index(p),o),this._toggle(o,N))},_toggle:function(o,d){var p=this,_=d.newPanel,C=d.oldPanel;function S(){p.running=!1,p._trigger("activate",o,d)}function A(){p._addClass(d.newTab.closest("li"),"ui-tabs-active","ui-state-active"),_.length&&p.options.show?p._show(_,p.options.show,S):(_.show(),S())}this.running=!0,C.length&&this.options.hide?this._hide(C,this.options.hide,function(){p._removeClass(d.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),A()}):(this._removeClass(d.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),C.hide(),A()),C.attr("aria-hidden","true"),d.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),_.length&&C.length?d.oldTab.attr("tabIndex",-1):_.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),_.attr("aria-hidden","false"),d.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(d){var d=this._findActive(d);d[0]!==this.active[0]&&(d=(d=d.length?d:this.active).find(".ui-tabs-anchor")[0],this._eventHandler({target:d,currentTarget:d,preventDefault:e.noop}))},_findActive:function(o){return o===!1?e():this.tabs.eq(o)},_getIndex:function(o){return o=typeof o=="string"?this.anchors.index(this.anchors.filter("[href$='"+CSS.escape(o)+"']")):o},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var o=e(this),d=o.data("ui-tabs-aria-controls");d?o.attr("aria-controls",d).removeData("ui-tabs-aria-controls"):o.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(o){var d=this.options.disabled;d!==!1&&(d=o!==void 0&&(o=this._getIndex(o),Array.isArray(d)?e.map(d,function(p){return p!==o?p:null}):e.map(this.tabs,function(p,_){return _!==o?_:null})),this._setOptionDisabled(d))},disable:function(o){var d=this.options.disabled;if(d!==!0){if(o===void 0)d=!0;else{if(o=this._getIndex(o),e.inArray(o,d)!==-1)return;d=Array.isArray(d)?e.merge([o],d).sort():[o]}this._setOptionDisabled(d)}},load:function(S,d){S=this._getIndex(S);function p(G,Y){Y==="abort"&&_.panels.stop(!1,!0),_._removeClass(C,"ui-tabs-loading"),A.removeAttr("aria-busy"),G===_.xhr&&delete _.xhr}var _=this,C=this.tabs.eq(S),S=C.find(".ui-tabs-anchor"),A=this._getPanelForTab(C),N={tab:C,panel:A};this._isLocal(S[0])||(this.xhr=e.ajax(this._ajaxSettings(S,d,N)),this.xhr.statusText!=="canceled"&&(this._addClass(C,"ui-tabs-loading"),A.attr("aria-busy","true"),this.xhr.done(function(G,Y,X){A.html(G),_._trigger("load",d,N),p(X,Y)}).fail(function(G,Y){p(G,Y)})))},_ajaxSettings:function(o,d,p){var _=this;return{url:o.attr("href"),beforeSend:function(C,S){return _._trigger("beforeLoad",d,e.extend({jqXHR:C,ajaxSettings:S},p))}}},_getPanelForTab:function(o){return o=e(o).attr("aria-controls"),this.element.find(this._sanitizeSelector("#"+o))}}),e.uiBackCompat===!0&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),e.ui.tabs,e.widget("ui.tooltip",{version:"1.14.0",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var o=e(this).attr("title");return e("<a>").text(o).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(o,d){var p=(o.attr("aria-describedby")||"").split(/\s+/);p.push(d),o.data("ui-tooltip-id",d).attr("aria-describedby",String.prototype.trim.call(p.join(" ")))},_removeDescribedBy:function(o){var p=o.data("ui-tooltip-id"),d=(o.attr("aria-describedby")||"").split(/\s+/),p=e.inArray(p,d);p!==-1&&d.splice(p,1),o.removeData("ui-tooltip-id"),(d=String.prototype.trim.call(d.join(" ")))?o.attr("aria-describedby",d):o.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(o,d){var p=this;this._super(o,d),o==="content"&&e.each(this.tooltips,function(_,C){p._updateContent(C.element)})},_setOptionDisabled:function(o){this[o?"_disable":"_enable"]()},_disable:function(){var o=this;e.each(this.tooltips,function(d,p){var _=e.Event("blur");_.target=_.currentTarget=p.element[0],o.close(_,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var d=e(this);if(d.is("[title]"))return d.data("ui-tooltip-title",d.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var o=e(this);o.data("ui-tooltip-title")&&o.attr("title",o.data("ui-tooltip-title"))}),this.disabledTitles=e([])},open:function(o){var d=this,p=e(o?o.target:this.element).closest(this.options.items);p.length&&!p.data("ui-tooltip-id")&&(p.attr("title")&&p.data("ui-tooltip-title",p.attr("title")),p.data("ui-tooltip-open",!0),o&&o.type==="mouseover"&&p.parents().each(function(){var _,C=e(this);C.data("ui-tooltip-open")&&((_=e.Event("blur")).target=_.currentTarget=this,d.close(_,!0)),C.attr("title")&&(C.uniqueId(),d.parents[this.id]={element:this,title:C.attr("title")},C.attr("title",""))}),this._registerCloseHandlers(o,p),this._updateContent(p,o))},_updateContent:function(o,d){var p=this.options.content,_=this,C=d?d.type:null;if(typeof p=="string"||p.nodeType||p.jquery)return this._open(d,o,p);(p=p.call(o[0],function(S){o.data("ui-tooltip-open")&&(d&&(d.type=C),_._open(d,o,S))}))&&this._open(d,o,p)},_open:function(o,d,p){var _,C,S,A=e.extend({},this.options.position);function N(G){A.of=G,_.is(":hidden")||_.position(A)}p&&((S=this._find(d))?S.tooltip.find(".ui-tooltip-content").html(p):(d.is("[title]")&&(o&&o.type==="mouseover"?d.attr("title",""):d.removeAttr("title")),S=this._tooltip(d),_=S.tooltip,this._addDescribedBy(d,_.attr("id")),_.find(".ui-tooltip-content").html(p),this.liveRegion.children().hide(),(S=e("<div>").html(_.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),S.removeAttr("id").find("[id]").removeAttr("id"),S.appendTo(this.liveRegion),this.options.track&&o&&/^mouse/.test(o.type)?(this._on(this.document,{mousemove:N}),N(o)):_.position(e.extend({of:d},this.options.position)),_.hide(),this._show(_,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(C=this.delayedShow=setInterval(function(){_.is(":visible")&&(N(A.of),clearInterval(C))},13)),this._trigger("open",o,{tooltip:_})))},_registerCloseHandlers:function(o,d){var p={keyup:function(_){_.keyCode===e.ui.keyCode.ESCAPE&&((_=e.Event(_)).currentTarget=d[0],this.close(_,!0))}};d[0]!==this.element[0]&&(p.remove=function(){var _=this._find(d);_&&this._removeTooltip(_.tooltip)}),o&&o.type!=="mouseover"||(p.mouseleave="close"),o&&o.type!=="focusin"||(p.focusout="close"),this._on(!0,d,p)},close:function(o){var d,p=this,_=e(o?o.currentTarget:this.element),C=this._find(_);C?(d=C.tooltip,C.closing||(clearInterval(this.delayedShow),_.data("ui-tooltip-title")&&!_.attr("title")&&_.attr("title",_.data("ui-tooltip-title")),this._removeDescribedBy(_),C.hiding=!0,d.stop(!0),this._hide(d,this.options.hide,function(){p._removeTooltip(e(this))}),_.removeData("ui-tooltip-open"),this._off(_,"mouseleave focusout keyup"),_[0]!==this.element[0]&&this._off(_,"remove"),this._off(this.document,"mousemove"),o&&o.type==="mouseleave"&&e.each(this.parents,function(S,A){e(A.element).attr("title",A.title),delete p.parents[S]}),C.closing=!0,this._trigger("close",o,{tooltip:d}),C.hiding)||(C.closing=!1)):_.removeData("ui-tooltip-open")},_tooltip:function(o){var d=e("<div>").attr("role","tooltip"),p=e("<div>").appendTo(d),_=d.uniqueId().attr("id");return this._addClass(p,"ui-tooltip-content"),this._addClass(d,"ui-tooltip","ui-widget ui-widget-content"),d.appendTo(this._appendTo(o)),this.tooltips[_]={element:o,tooltip:d}},_find:function(o){return o=o.data("ui-tooltip-id"),o?this.tooltips[o]:null},_removeTooltip:function(o){clearInterval(this.delayedShow),o.remove(),delete this.tooltips[o.attr("id")]},_appendTo:function(o){return o=o.closest(".ui-front, dialog"),o=o.length?o:this.document[0].body},_destroy:function(){var o=this;e.each(this.tooltips,function(d,C){var _=e.Event("blur"),C=C.element;_.target=_.currentTarget=C[0],o.close(_,!0),e("#"+d).remove(),C.data("ui-tooltip-title")&&(C.attr("title")||C.attr("title",C.data("ui-tooltip-title")),C.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),e.uiBackCompat===!0&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var o=this._superApply(arguments);return this.options.tooltipClass&&o.tooltip.addClass(this.options.tooltipClass),o}}),e.ui.tooltip});var $d={},Vd;function Iy(){return Vd||(Vd=1,function(e){(function(t){t(mc())})(function(t){t.support.htmlMenuitem="HTMLMenuItemElement"in window,t.support.htmlCommand="HTMLCommandElement"in window,t.support.eventSelectstart="onselectstart"in document.documentElement,(!t.ui||!t.widget)&&(t.cleanData=function(b){return function(w){var T,x,D;for(D=0;w[D]!=null;D++){x=w[D];try{T=t._data(x,"events"),T&&T.remove&&t(x).triggerHandler("remove")}catch{}}b(w)}}(t.cleanData));var n=null,i=!1,r=t(window),s=0,a={},l={},c={},u={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,hideOnSecondTrigger:!1,selectableSubMenu:!1,classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},determinePosition:function(b){if(t.ui&&t.ui.position)b.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var w=this.offset();w.top+=this.outerHeight(),w.left+=this.outerWidth()/2-b.outerWidth()/2,b.css(w)}},position:function(b,w,T){var x;if(!w&&!T){b.determinePosition.call(this,b.$menu);return}else if(w==="maintain"&&T==="maintain")x=b.$menu.position();else{var D=b.$menu.offsetParent().offset();x={top:T-D.top,left:w-D.left}}var O=r.scrollTop()+r.height(),R=r.scrollLeft()+r.width(),I=b.$menu.outerHeight(),P=b.$menu.outerWidth();x.top+I>O&&(x.top-=I),x.top<0&&(x.top=0),x.left+P>R&&(x.left-=P),x.left<0&&(x.left=0),b.$menu.css(x)},positionSubmenu:function(b){if(!(typeof b>"u"))if(t.ui&&t.ui.position)b.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var w={top:-9,left:this.outerWidth()-5};b.css(w)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{preShow:t.noop,show:t.noop,hide:t.noop,activated:t.noop},callback:null,items:{}},f={timer:null,pageX:null,pageY:null},m=function(b){for(var w=0,T=b;w=Math.max(w,parseInt(T.css("z-index"),10)||0),T=T.parent(),!(!T||!T.length||"html body".indexOf(T.prop("nodeName").toLowerCase())>-1););return w},g={abortevent:function(b){b.preventDefault(),b.stopImmediatePropagation()},contextmenu:function(b){var w=t(this);if(b.data.events.preShow(w,b)!==!1&&(b.data.trigger==="right"&&(b.preventDefault(),b.stopImmediatePropagation()),!(b.data.trigger!=="right"&&b.data.trigger!=="demand"&&b.originalEvent)&&!(typeof b.mouseButton<"u"&&b.data&&!(b.data.trigger==="left"&&b.mouseButton===0)&&!(b.data.trigger==="right"&&b.mouseButton===2))&&!w.hasClass("context-menu-active")&&!w.hasClass("context-menu-disabled"))){if(n=w,b.data.build){var T=b.data.build(n,b);if(T===!1)return;if(b.data=t.extend(!0,{},u,b.data,T||{}),!b.data.items||t.isEmptyObject(b.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");b.data.$trigger=n,h.create(b.data)}h.show.call(w,b.data,b.pageX,b.pageY)}},click:function(b){b.preventDefault(),b.stopImmediatePropagation(),t(this).trigger(t.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY}))},mousedown:function(b){var w=t(this);n&&n.length&&!n.is(w)&&n.data("contextMenu").$menu.trigger("contextmenu:hide"),b.button===2&&(n=w.data("contextMenuActive",!0))},mouseup:function(b){var w=t(this);w.data("contextMenuActive")&&n&&n.length&&n.is(w)&&!w.hasClass("context-menu-disabled")&&(b.preventDefault(),b.stopImmediatePropagation(),n=w,w.trigger(t.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY}))),w.removeData("contextMenuActive")},mouseenter:function(b){var w=t(this),T=t(b.relatedTarget),x=t(document);T.is(".context-menu-list")||T.closest(".context-menu-list").length||n&&n.length||(f.pageX=b.pageX,f.pageY=b.pageY,f.data=b.data,x.on("mousemove.contextMenuShow",g.mousemove),f.timer=setTimeout(function(){f.timer=null,x.off("mousemove.contextMenuShow"),n=w,w.trigger(t.Event("contextmenu",{data:f.data,pageX:f.pageX,pageY:f.pageY}))},b.data.delay))},mousemove:function(b){f.pageX=b.pageX,f.pageY=b.pageY},mouseleave:function(b){var w=t(b.relatedTarget);if(!(w.is(".context-menu-list")||w.closest(".context-menu-list").length)){try{clearTimeout(f.timer)}catch{}f.timer=null}},layerClick:function(b){var w=t(this),T=w.data("contextMenuRoot"),x=b.button,D=b.pageX,O=b.pageY,R=D===void 0,I,P;b.preventDefault(),setTimeout(function(){if(R){T!==null&&typeof T<"u"&&T.$menu!==null&&typeof T.$menu<"u"&&T.$menu.trigger("contextmenu:hide");return}var M,B=T.trigger==="left"&&x===0||T.trigger==="right"&&x===2;if(document.elementFromPoint&&T.$layer){if(T.$layer.hide(),I=document.elementFromPoint(D-r.scrollLeft(),O-r.scrollTop()),I!==null&&I.isContentEditable){var z=document.createRange(),te=window.getSelection();z.selectNode(I),z.collapse(!0),te.removeAllRanges(),te.addRange(z)}t(I).trigger(b),T.$layer.show()}if(T.hideOnSecondTrigger&&B&&T.$menu!==null&&typeof T.$menu<"u"){T.$menu.trigger("contextmenu:hide");return}if(T.reposition&&B){if(document.elementFromPoint){if(T.$trigger.is(I)){T.position.call(T.$trigger,T,D,O);return}}else if(P=T.$trigger.offset(),M=t(window),P.top+=M.scrollTop(),P.top<=b.pageY&&(P.left+=M.scrollLeft(),P.left<=b.pageX&&(P.bottom=P.top+T.$trigger.outerHeight(),P.bottom>=b.pageY&&(P.right=P.left+T.$trigger.outerWidth(),P.right>=b.pageX)))){T.position.call(T.$trigger,T,D,O);return}}I&&B&&T.$trigger.one("contextmenu:hidden",function(){t(I).contextMenu({x:D,y:O,button:x})}),T!==null&&typeof T<"u"&&T.$menu!==null&&typeof T.$menu<"u"&&T.$menu.trigger("contextmenu:hide")},50)},keyStop:function(b,w){w.isInput||b.preventDefault(),b.stopPropagation()},key:function(b){var w={};n&&(w=n.data("contextMenu")||{}),typeof w.zIndex>"u"&&(w.zIndex=0);var T=0,x=function(I){I.style.zIndex!==""?T=I.style.zIndex:I.offsetParent!==null&&typeof I.offsetParent<"u"?x(I.offsetParent):I.parentElement!==null&&typeof I.parentElement<"u"&&x(I.parentElement)};if(x(b.target),!(w.$menu&&parseInt(T,10)>parseInt(w.$menu.css("zIndex"),10))){switch(b.keyCode){case 9:case 38:if(g.keyStop(b,w),w.isInput){if(b.keyCode===9&&b.shiftKey){b.preventDefault(),w.$selected&&w.$selected.find("input, textarea, select").blur(),w.$menu!==null&&typeof w.$menu<"u"&&w.$menu.trigger("prevcommand");return}else if(b.keyCode===38&&w.$selected.find("input, textarea, select").prop("type")==="checkbox"){b.preventDefault();return}}else if(b.keyCode!==9||b.shiftKey){w.$menu!==null&&typeof w.$menu<"u"&&w.$menu.trigger("prevcommand");return}break;case 40:if(g.keyStop(b,w),w.isInput){if(b.keyCode===9){b.preventDefault(),w.$selected&&w.$selected.find("input, textarea, select").blur(),w.$menu!==null&&typeof w.$menu<"u"&&w.$menu.trigger("nextcommand");return}else if(b.keyCode===40&&w.$selected.find("input, textarea, select").prop("type")==="checkbox"){b.preventDefault();return}}else{w.$menu!==null&&typeof w.$menu<"u"&&w.$menu.trigger("nextcommand");return}break;case 37:if(g.keyStop(b,w),w.isInput||!w.$selected||!w.$selected.length)break;if(!w.$selected.parent().hasClass("context-menu-root")){var D=w.$selected.parent().parent();w.$selected.trigger("contextmenu:blur"),w.$selected=D;return}break;case 39:if(g.keyStop(b,w),w.isInput||!w.$selected||!w.$selected.length)break;var O=w.$selected.data("contextMenu")||{};if(O.$menu&&w.$selected.hasClass("context-menu-submenu")){w.$selected=null,O.$selected=null,O.$menu.trigger("nextcommand");return}break;case 35:case 36:if(w.$selected&&w.$selected.find("input, textarea, select").length)return;(w.$selected&&w.$selected.parent()||w.$menu).children(":not(."+w.classNames.disabled+", ."+w.classNames.notSelectable+")")[b.keyCode===36?"first":"last"]().trigger("contextmenu:focus"),b.preventDefault();return;case 13:if(g.keyStop(b,w),w.isInput){if(w.$selected&&!w.$selected.is("textarea, select")){b.preventDefault();return}break}typeof w.$selected<"u"&&w.$selected!==null&&w.$selected.trigger("mouseup");return;case 32:case 33:case 34:g.keyStop(b,w);return;case 27:g.keyStop(b,w),w.$menu!==null&&typeof w.$menu<"u"&&w.$menu.trigger("contextmenu:hide");return;default:var R=String.fromCharCode(b.keyCode).toUpperCase();if(w.accesskeys&&w.accesskeys[R]){w.accesskeys[R].$node.trigger(w.accesskeys[R].$menu?"contextmenu:focus":"mouseup");return}break}b.stopPropagation(),typeof w.$selected<"u"&&w.$selected!==null&&w.$selected.trigger(b)}},prevItem:function(b){b.stopPropagation();var w=t(this).data("contextMenu")||{},T=t(this).data("contextMenuRoot")||{};if(w.$selected){var x=w.$selected;w=w.$selected.parent().data("contextMenu")||{},w.$selected=x}for(var D=w.$menu.children(),O=!w.$selected||!w.$selected.prev().length?D.last():w.$selected.prev(),R=O;O.hasClass(T.classNames.disabled)||O.hasClass(T.classNames.notSelectable)||O.is(":hidden");)if(O.prev().length?O=O.prev():O=D.last(),O.is(R))return;w.$selected&&g.itemMouseleave.call(w.$selected.get(0),b),g.itemMouseenter.call(O.get(0),b);var I=O.find("input, textarea, select");I.length&&I.focus()},nextItem:function(b){b.stopPropagation();var w=t(this).data("contextMenu")||{},T=t(this).data("contextMenuRoot")||{};if(w.$selected){var x=w.$selected;w=w.$selected.parent().data("contextMenu")||{},w.$selected=x}for(var D=w.$menu.children(),O=!w.$selected||!w.$selected.next().length?D.first():w.$selected.next(),R=O;O.hasClass(T.classNames.disabled)||O.hasClass(T.classNames.notSelectable)||O.is(":hidden");)if(O.next().length?O=O.next():O=D.first(),O.is(R))return;w.$selected&&g.itemMouseleave.call(w.$selected.get(0),b),g.itemMouseenter.call(O.get(0),b);var I=O.find("input, textarea, select");I.length&&I.focus()},focusInput:function(){var b=t(this).closest(".context-menu-item"),w=b.data(),T=w.contextMenu,x=w.contextMenuRoot;x.$selected=T.$selected=b,x.isInput=T.isInput=!0},blurInput:function(){var b=t(this).closest(".context-menu-item"),w=b.data(),T=w.contextMenu,x=w.contextMenuRoot;x.isInput=T.isInput=!1},menuMouseenter:function(){var b=t(this).data().contextMenuRoot;b.hovering=!0},menuMouseleave:function(b){var w=t(this).data().contextMenuRoot;w.$layer&&w.$layer.is(b.relatedTarget)&&(w.hovering=!1)},itemMouseenter:function(b){var w=t(this),T=w.data(),x=T.contextMenu,D=T.contextMenuRoot;if(D.hovering=!0,b&&D.$layer&&D.$layer.is(b.relatedTarget)&&(b.preventDefault(),b.stopImmediatePropagation()),(x.$menu?x:D).$menu.children("."+D.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur"),w.hasClass(D.classNames.disabled)||w.hasClass(D.classNames.notSelectable)){x.$selected=null;return}w.trigger("contextmenu:focus")},itemMouseleave:function(b){var w=t(this),T=w.data(),x=T.contextMenu,D=T.contextMenuRoot;if(D!==x&&D.$layer&&D.$layer.is(b.relatedTarget)){typeof D.$selected<"u"&&D.$selected!==null&&D.$selected.trigger("contextmenu:blur"),b.preventDefault(),b.stopImmediatePropagation(),D.$selected=x.$selected=x.$node;return}x&&x.$menu&&x.$menu.hasClass("context-menu-visible")||w.trigger("contextmenu:blur")},itemClick:function(b){var w=t(this),T=w.data(),x=T.contextMenu,D=T.contextMenuRoot,O=T.contextMenuKey,R;if(!(!x.items[O]||w.is("."+D.classNames.disabled+", .context-menu-separator, ."+D.classNames.notSelectable)||w.is(".context-menu-submenu")&&D.selectableSubMenu===!1)){if(b.preventDefault(),b.stopImmediatePropagation(),t.isFunction(x.callbacks[O])&&Object.prototype.hasOwnProperty.call(x.callbacks,O))R=x.callbacks[O];else if(t.isFunction(D.callback))R=D.callback;else return;R.call(D.$trigger,O,D,b)!==!1?D.$menu.trigger("contextmenu:hide"):D.$menu.parent().length&&h.update.call(D.$trigger,D)}},inputClick:function(b){b.stopImmediatePropagation()},hideMenu:function(b,w){var T=t(this).data("contextMenuRoot");h.hide.call(T.$trigger,T,w&&w.force)},focusItem:function(b){b.stopPropagation();var w=t(this),T=w.data(),x=T.contextMenu,D=T.contextMenuRoot;w.hasClass(D.classNames.disabled)||w.hasClass(D.classNames.notSelectable)||(w.addClass([D.classNames.hover,D.classNames.visible].join(" ")).parent().find(".context-menu-item").not(w).removeClass(D.classNames.visible).filter("."+D.classNames.hover).trigger("contextmenu:blur"),x.$selected=D.$selected=w,x&&x.$node&&x.$node.hasClass("context-menu-submenu")&&x.$node.addClass(D.classNames.hover),x.$node&&D.positionSubmenu.call(x.$node,x.$menu))},blurItem:function(b){b.stopPropagation();var w=t(this),T=w.data(),x=T.contextMenu,D=T.contextMenuRoot;x.autoHide&&w.removeClass(D.classNames.visible),w.removeClass(D.classNames.hover),x.$selected=null}},h={show:function(b,w,T){var x=t(this),D={};if(t("#context-menu-layer").trigger("mousedown"),b.$trigger=x,b.events.show.call(x,b)===!1){n=null;return}var O=h.update.call(x,b);if(O===!1){n=null;return}if(b.position.call(x,b,w,T),b.zIndex){var R=b.zIndex;typeof b.zIndex=="function"&&(R=b.zIndex.call(x,b)),D.zIndex=m(x)+R}h.layer.call(b.$menu,b,D.zIndex),b.$menu.find("ul").css("zIndex",D.zIndex+1),b.$menu.css(D)[b.animation.show](b.animation.duration,function(){x.trigger("contextmenu:visible"),h.activated(b),b.events.activated(b)}),x.data("contextMenu",b).addClass("context-menu-active"),t(document).off("keydown.contextMenu").on("keydown.contextMenu",g.key),b.autoHide&&t(document).on("mousemove.contextMenuAutoHide",function(I){var P=x.offset();P.right=P.left+x.outerWidth(),P.bottom=P.top+x.outerHeight(),b.$layer&&!b.hovering&&(!(I.pageX>=P.left&&I.pageX<=P.right)||!(I.pageY>=P.top&&I.pageY<=P.bottom))&&setTimeout(function(){!b.hovering&&b.$menu!==null&&typeof b.$menu<"u"&&b.$menu.trigger("contextmenu:hide")},50)})},hide:function(b,w){var T=t(this);if(b||(b=T.data("contextMenu")||{}),!(!w&&b.events&&b.events.hide.call(T,b)===!1)){if(T.removeData("contextMenu").removeClass("context-menu-active"),b.$layer){setTimeout(function(x){return function(){x.remove()}}(b.$layer),10);try{delete b.$layer}catch{b.$layer=null}}n=null,b.$menu.find("."+b.classNames.hover).trigger("contextmenu:blur"),b.$selected=null,b.$menu.find("."+b.classNames.visible).removeClass(b.classNames.visible),t(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),b.$menu&&b.$menu[b.animation.hide](b.animation.duration,function(){b.build&&(b.$menu.remove(),t.each(b,function(x){switch(x){case"ns":case"selector":case"build":case"trigger":return!0;default:b[x]=void 0;try{delete b[x]}catch{}return!0}})),setTimeout(function(){T.trigger("contextmenu:hidden")},10)})}},create:function(b,w){typeof w>"u"&&(w=b),b.$menu=t('<ul class="context-menu-list"></ul>').addClass(b.className||"").data({contextMenu:b,contextMenuRoot:w}),b.dataAttr&&t.each(b.dataAttr,function(x,D){b.$menu.attr("data-"+b.key,D)}),t.each(["callbacks","commands","inputs"],function(x,D){b[D]={},w[D]||(w[D]={})}),w.accesskeys||(w.accesskeys={});function T(x){var D=t("<span></span>");if(x._accesskey)x._beforeAccesskey&&D.append(document.createTextNode(x._beforeAccesskey)),t("<span></span>").addClass("context-menu-accesskey").text(x._accesskey).appendTo(D),x._afterAccesskey&&D.append(document.createTextNode(x._afterAccesskey));else if(x.isHtmlName){if(typeof x.accesskey<"u")throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");D.html(x.name)}else D.text(x.name);return D}t.each(b.items,function(x,D){var O=t('<li class="context-menu-item"></li>').addClass(D.className||""),R=null,I=null;if(O.on("click",t.noop),(typeof D=="string"||D.type==="cm_separator")&&(D={type:"cm_seperator"}),D.$node=O.data({contextMenu:b,contextMenuRoot:w,contextMenuKey:x}),typeof D.accesskey<"u"){for(var P=v(D.accesskey),M=0,B;B=P[M];M++)if(!w.accesskeys[B]){w.accesskeys[B]=D;var z=D.name.match(new RegExp("^(.*?)("+B+")(.*)$","i"));z&&(D._beforeAccesskey=z[1],D._accesskey=z[2],D._afterAccesskey=z[3]);break}}if(D.type&&c[D.type])c[D.type].call(O,D,b,w),t.each([b,w],function(te,pe){pe.commands[x]=D,t.isFunction(D.callback)&&(typeof pe.callbacks[x]>"u"||typeof b.type>"u")&&(pe.callbacks[x]=D.callback)});else{switch(D.type==="cm_seperator"?O.addClass("context-menu-separator "+w.classNames.notSelectable):D.type==="html"?O.addClass("context-menu-html "+w.classNames.notSelectable):D.type!=="sub"&&D.type?(R=t("<label></label>").appendTo(O),T(D).appendTo(R),O.addClass("context-menu-input"),b.hasTypes=!0,t.each([b,w],function(te,pe){pe.commands[x]=D,pe.inputs[x]=D})):D.items&&(D.type="sub"),D.type){case"cm_seperator":break;case"text":I=t('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+x).val(D.value||"").appendTo(R);break;case"textarea":I=t('<textarea name=""></textarea>').attr("name","context-menu-input-"+x).val(D.value||"").appendTo(R),D.height&&I.height(D.height);break;case"checkbox":I=t('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+x).val(D.value||"").prop("checked",!!D.selected).prependTo(R);break;case"radio":I=t('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+D.radio).val(D.value||"").prop("checked",!!D.selected).prependTo(R);break;case"select":I=t('<select name=""></select>').attr("name","context-menu-input-"+x).appendTo(R),D.options&&(t.each(D.options,function(te,pe){t("<option></option>").val(te).text(pe).appendTo(I)}),I.val(D.selected));break;case"sub":T(D).appendTo(O),D.appendTo=D.$node,O.data("contextMenu",D).addClass("context-menu-submenu"),D.callback=null,typeof D.items.then=="function"?h.processPromises(D,w,D.items):h.create(D,w);break;case"html":t(D.html).appendTo(O);break;default:t.each([b,w],function(te,pe){pe.commands[x]=D,t.isFunction(D.callback)&&(typeof pe.callbacks[x]>"u"||typeof b.type>"u")&&(pe.callbacks[x]=D.callback)}),T(D).appendTo(O);break}D.type&&D.type!=="sub"&&D.type!=="html"&&D.type!=="cm_seperator"&&(I.on("focus",g.focusInput).on("blur",g.blurInput),D.events&&I.on(D.events,b)),D.icon&&(t.isFunction(D.icon)?D._icon=D.icon.call(this,this,O,x,D):typeof D.icon=="string"&&(D.icon.substring(0,4)==="fab "||D.icon.substring(0,4)==="fas "||D.icon.substring(0,4)==="fad "||D.icon.substring(0,4)==="far "||D.icon.substring(0,4)==="fal ")?(O.addClass(w.classNames.icon+" "+w.classNames.icon+"--fa5"),D._icon=t('<i class="'+D.icon+'"></i>')):typeof D.icon=="string"&&D.icon.substring(0,3)==="fa-"?D._icon=w.classNames.icon+" "+w.classNames.icon+"--fa fa "+D.icon:D._icon=w.classNames.icon+" "+w.classNames.icon+"-"+D.icon,typeof D._icon=="string"?O.addClass(D._icon):O.prepend(D._icon))}D.$input=I,D.$label=R,O.appendTo(b.$menu),!b.hasTypes&&t.support.eventSelectstart&&O.on("selectstart.disableTextSelect",g.abortevent)}),b.$node||b.$menu.css("display","none").addClass("context-menu-root"),b.$menu.appendTo(b.appendTo||document.body)},resize:function(b,w){var T;b.css({position:"absolute",display:"block"}),b.data("width",(T=b.get(0)).getBoundingClientRect?Math.ceil(T.getBoundingClientRect().width):b.outerWidth()+1),b.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),b.find("> li > ul").each(function(){h.resize(t(this),!0)}),w||b.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return t(this).data("width")})},update:function(b,w){var T=this;typeof w>"u"&&(w=b,h.resize(b.$menu));var x=!1;return b.$menu.children().each(function(){var D=t(this),O=D.data("contextMenuKey"),R=b.items[O],I=t.isFunction(R.disabled)&&R.disabled.call(T,O,w)||R.disabled===!0,P;if(t.isFunction(R.visible)?P=R.visible.call(T,O,w):typeof R.visible<"u"?P=R.visible===!0:P=!0,P&&(x=!0),D[P?"show":"hide"](),D[I?"addClass":"removeClass"](w.classNames.disabled),t.isFunction(R.icon)){D.removeClass(R._icon);var M=R.icon.call(this,T,D,O,R);typeof M=="string"?D.addClass(M):D.prepend(M)}if(R.type)switch(D.find("input, select, textarea").prop("disabled",I),R.type){case"text":case"textarea":R.$input.val(R.value||"");break;case"checkbox":case"radio":R.$input.val(R.value||"").prop("checked",!!R.selected);break;case"select":R.$input.val((R.selected===0?"0":R.selected)||"");break}if(R.$menu){var B=h.update.call(T,R,w);B&&(x=!0)}}),x},layer:function(b,w){var T=b.$layer=t('<div id="context-menu-layer"></div>').css({height:r.height(),width:r.width(),display:"block",position:"fixed","z-index":w-1,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",b).appendTo(document.body).on("contextmenu",g.abortevent).on("mousedown",g.layerClick);return typeof document.body.style.maxWidth>"u"&&T.css({position:"absolute",height:t(document).height()}),T},processPromises:function(b,w,T){b.$node.addClass(w.classNames.iconLoadingClass);function x(R,I,P){typeof P>"u"&&D(void 0),O(R,I,P)}function D(R,I,P){typeof P>"u"?(P={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):typeof P=="string"&&(P={error:{name:P}}),O(R,I,P)}function O(R,I,P){typeof I.$menu>"u"||!I.$menu.is(":visible")||(R.$node.removeClass(I.classNames.iconLoadingClass),R.items=P,h.create(R,I,!0),h.update(R,I),I.positionSubmenu.call(R.$node,R.$menu))}T.then(x.bind(this,b,w),D.bind(this,b,w))},activated:function(b){var w=b.$menu,T=w.offset(),x=t(window).height(),D=t(window).scrollTop(),O=w.height();O>x?w.css({height:x+"px","overflow-x":"hidden","overflow-y":"auto",top:D+"px"}):(T.top<D||T.top+O>D+x)&&w.css({top:D+"px"})}};function v(b){for(var w=b.split(/\s+/),T=[],x=0,D;D=w[x];x++)D=D.charAt(0).toUpperCase(),T.push(D);return T}t.fn.contextMenu=function(b){var w=this,T=b;if(this.length>0)if(typeof b>"u")this.first().trigger("contextmenu");else if(typeof b.x<"u"&&typeof b.y<"u")this.first().trigger(t.Event("contextmenu",{pageX:b.x,pageY:b.y,mouseButton:b.button}));else if(b==="hide"){var x=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;x&&x.trigger("contextmenu:hide")}else b==="destroy"?t.contextMenu("destroy",{context:this}):t.isPlainObject(b)?(b.context=this,t.contextMenu("create",b)):b?this.removeClass("context-menu-disabled"):b||this.addClass("context-menu-disabled");else t.each(l,function(){this.selector===w.selector&&(T.data=this,t.extend(T.data,{trigger:"demand"}))}),g.contextmenu.call(T.target,T);return this},t.contextMenu=function(b,w){typeof b!="string"&&(w=b,b="create"),typeof w=="string"?w={selector:w}:typeof w>"u"&&(w={});var T=t.extend(!0,{},u,w||{}),x=t(document),D=x,O=!1;switch(!T.context||!T.context.length?T.context=document:(D=t(T.context).first(),T.context=D.get(0),O=!t(T.context).is(document)),b){case"update":if(O)h.update(D);else for(var R in l)l.hasOwnProperty(R)&&h.update(l[R]);break;case"create":if(!T.selector)throw new Error("No selector specified");if(T.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+T.selector+'" as it contains a reserved className');if(!T.build&&(!T.items||t.isEmptyObject(T.items)))throw new Error("No Items specified");if(s++,T.ns=".contextMenu"+s,O||(a[T.selector]=T.ns),l[T.ns]=T,T.trigger||(T.trigger="right"),!i){var I=T.itemClickEvent==="click"?"click.contextMenu":"mouseup.contextMenu",P={"contextmenu:focus.contextMenu":g.focusItem,"contextmenu:blur.contextMenu":g.blurItem,"contextmenu.contextMenu":g.abortevent,"mouseenter.contextMenu":g.itemMouseenter,"mouseleave.contextMenu":g.itemMouseleave};P[I]=g.itemClick,x.on({"contextmenu:hide.contextMenu":g.hideMenu,"prevcommand.contextMenu":g.prevItem,"nextcommand.contextMenu":g.nextItem,"contextmenu.contextMenu":g.abortevent,"mouseenter.contextMenu":g.menuMouseenter,"mouseleave.contextMenu":g.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",g.inputClick).on(P,".context-menu-item"),i=!0}switch(D.on("contextmenu"+T.ns,T.selector,T,g.contextmenu),O&&D.on("remove"+T.ns,function(){t(this).contextMenu("destroy")}),T.trigger){case"hover":D.on("mouseenter"+T.ns,T.selector,T,g.mouseenter).on("mouseleave"+T.ns,T.selector,T,g.mouseleave);break;case"left":D.on("click"+T.ns,T.selector,T,g.click);break;case"touchstart":D.on("touchstart"+T.ns,T.selector,T,g.click);break}T.build||h.create(T);break;case"destroy":var M;if(O){var B=T.context;t.each(l,function(z,te){if(!te||!t(B).is(te.selector))return!0;M=t(".context-menu-list").filter(":visible"),M.length&&M.data().contextMenuRoot.$trigger.is(t(te.context).find(te.selector))&&M.trigger("contextmenu:hide",{force:!0});try{l[te.ns].$menu&&l[te.ns].$menu.remove(),delete l[te.ns]}catch{l[te.ns]=null}return t(te.context).off(te.ns),!0})}else if(!T.selector)x.off(".contextMenu .contextMenuAutoHide"),t.each(l,function(z,te){t(te.context).off(te.ns)}),a={},l={},s=0,i=!1,t("#context-menu-layer, .context-menu-list").remove();else if(a[T.selector]){M=t(".context-menu-list").filter(":visible"),M.length&&M.data().contextMenuRoot.$trigger.is(T.selector)&&M.trigger("contextmenu:hide",{force:!0});try{l[a[T.selector]].$menu&&l[a[T.selector]].$menu.remove(),delete l[a[T.selector]]}catch{l[a[T.selector]]=null}x.off(a[T.selector])}break;case"html5":(!t.support.htmlCommand&&!t.support.htmlMenuitem||typeof w=="boolean"&&w)&&t('menu[type="context"]').each(function(){this.id&&t.contextMenu({selector:"[contextmenu="+this.id+"]",items:t.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+b+'"')}return this},t.contextMenu.setInputValues=function(b,w){typeof w>"u"&&(w={}),t.each(b.inputs,function(T,x){switch(x.type){case"text":case"textarea":x.value=w[T]||"";break;case"checkbox":x.selected=!!w[T];break;case"radio":x.selected=(w[x.radio]||"")===x.value;break;case"select":x.selected=w[T]||"";break}})},t.contextMenu.getInputValues=function(b,w){return typeof w>"u"&&(w={}),t.each(b.inputs,function(T,x){switch(x.type){case"text":case"textarea":case"select":w[T]=x.$input.val();break;case"checkbox":w[T]=x.$input.prop("checked");break;case"radio":x.$input.prop("checked")&&(w[x.radio]=x.value);break}}),w};function y(b){return b.id&&t('label[for="'+b.id+'"]').val()||b.name}function E(b,w,T){return T||(T=0),w.each(function(){var x=t(this),D=this,O=this.nodeName.toLowerCase(),R,I;switch(O==="label"&&x.find("input, textarea, select").length&&(R=x.text(),x=x.children().first(),D=x.get(0),O=D.nodeName.toLowerCase()),O){case"menu":I={name:x.attr("label"),items:{}},T=E(I.items,x.children(),T);break;case"a":case"button":I={name:x.text(),disabled:!!x.attr("disabled"),callback:function(){return function(){x.get(0).click()}}()};break;case"menuitem":case"command":switch(x.attr("type")){case void 0:case"command":case"menuitem":I={name:x.attr("label"),disabled:!!x.attr("disabled"),icon:x.attr("icon"),callback:function(){return function(){x.get(0).click()}}()};break;case"checkbox":I={type:"checkbox",disabled:!!x.attr("disabled"),name:x.attr("label"),selected:!!x.attr("checked")};break;case"radio":I={type:"radio",disabled:!!x.attr("disabled"),name:x.attr("label"),radio:x.attr("radiogroup"),value:x.attr("id"),selected:!!x.attr("checked")};break;default:I=void 0}break;case"hr":I="-------";break;case"input":switch(x.attr("type")){case"text":I={type:"text",name:R||y(D),disabled:!!x.attr("disabled"),value:x.val()};break;case"checkbox":I={type:"checkbox",name:R||y(D),disabled:!!x.attr("disabled"),selected:!!x.attr("checked")};break;case"radio":I={type:"radio",name:R||y(D),disabled:!!x.attr("disabled"),radio:!!x.attr("name"),value:x.val(),selected:!!x.attr("checked")};break;default:I=void 0;break}break;case"select":I={type:"select",name:R||y(D),disabled:!!x.attr("disabled"),selected:x.val(),options:{}},x.children().each(function(){I.options[this.value]=t(this).text()});break;case"textarea":I={type:"textarea",name:R||y(D),disabled:!!x.attr("disabled"),value:x.val()};break;case"label":break;default:I={type:"html",html:x.clone(!0)};break}I&&(T++,b["key"+T]=I)}),T}t.contextMenu.fromMenu=function(b){var w=t(b),T={};return E(T,w.children()),T},t.contextMenu.defaults=u,t.contextMenu.types=c,t.contextMenu.handle=g,t.contextMenu.op=h,t.contextMenu.menus=l})}()),$d}Iy();var au={exports:{}},Kd;function Ry(){return Kd||(Kd=1,function(e,t){/*!
 * jquery.sumoselect
 * http://hemantnegi.github.io/jquery.sumoselect
 * 2016-12-12
 *
 * Copyright 2015 Hemant Negi
 * Email : hemant.frnz@gmail.com
 * Compressor http://refresh-sf.com/
 */(function(n){e.exports=n(mc())})(n=>{"namespace sumo";n.fn.SumoSelect=function(i){const r=(l,c)=>{let u=null;typeof Event=="function"?u=new Event(c,{bubbles:!0}):(u=document.createEvent("Event"),u.initEvent(c,!0,!0)),l.dispatchEvent(u)};window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);const s={placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,isClickAwayOk:!1,triggerChangeCombined:!0,selectAll:!1,selectAllPartialCheck:!0,search:!1,searchText:"Search...",searchFn(l,c){return l.toLowerCase().indexOf(c.toLowerCase())<0},noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All","Clear all"],up:!1,showTitle:!0,clearAll:!1,closeAfterClearAll:!1,max:null,renderLi:(l,c)=>l},a=this.each(function(){const l=this;if(this.sumo||!n(this).is("select"))return;const c=n.extend({},s,i,n(this).data());this.sumo={E:n(l),is_multi:n(l).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",ul:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],lastUnselected:null,selectedCount:0,createElems(){const u=this,f=u.E.find("option:checked");if(u.E.wrap('<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">'),f.each((m,g)=>{g.selected=!0}),u.select=u.E.parent(),u.caption=n("<span>"),u.CaptionCont=n(`<p class="CaptionCont SelectBox ${u.E.attr("class")}" ><label><i></i></label></p>`).attr("style",u.E.attr("style")).prepend(u.caption),u.select.append(u.CaptionCont),u.is_multi||(c.okCancelInMulti=!1),u.E.attr("disabled")&&u.select.addClass("disabled").removeAttr("tabindex"),c.outputAsCSV&&u.is_multi&&u.E.attr("name")&&(u.select.append(n('<input class="HEMANT123" type="hidden" />').attr("name",u.E.attr("name")).val(u.getSelStr())),u.E.removeAttr("name")),u.isMobile()&&!c.forceCustomRendering){u.setNativeMobile();return}u.E.attr("name")&&u.select.addClass(`sumo_${u.E.attr("name").replace(/\[\]/,"")}`),u.E.addClass("SumoUnder").attr("tabindex","-1"),u.optDiv=n(`<div class="optWrapper ${c.up?"up":""}">`),u.floatingList(),u.ul=n('<ul class="options">'),u.optDiv.append(u.ul),c.clearAll&&u.is_multi&&u.ClearAll(),c.selectAll&&u.is_multi&&!c.max&&u.SelAll(),c.search&&u.Search(),u.ul.append(u.prepItems(u.E.children())),u.is_multi&&u.multiSelelect(),u.select.append(u.optDiv),u._handleMax(),u.basicEvents(),u.selAllState()},prepItems(u,f){const m=[],g=this;return n(u).each((h,v)=>{const y=n(v);m.push(y.is("optgroup")?n(`<li class="group ${v.disabled?"disabled":""}"><label></label><ul></ul></li>`).find("label").text(y.attr("label")).end().find("ul").append(g.prepItems(y.children(),v.disabled)).end():g.createLi(y,f))}),m},createLi(u,f){const m=this;u.attr("value")||u.attr("value",u.val());const g=n(`<li class="opt"><label>${u.html()}</label></li>`);return g.data("opt",u),u.data("li",g),m.is_multi&&g.prepend("<span><i></i></span>"),(u[0].disabled||f)&&g.addClass("disabled"),m.onOptClick(g),u[0].selected&&(g.addClass("selected"),m.selectedCount++),u.attr("class")&&g.addClass(u.attr("class")),u.attr("title")&&g.attr("title",u.attr("title")),c.renderLi(g,u)},getSelStr(){const u=[];return this.E.find("option:checked").each(function(){u.push(n(this).val())}),u.join(c.csvSepChar)},multiSelelect(){const u=this;u.optDiv.addClass("multiple"),u.okbtn=n('<p tabindex="0" class="btnOk"></p>').on("click",()=>{u._okbtn(),u.hideOpts()}),[u.okbtn[0].innerText]=c.locale,u.cancelBtn=n('<p tabindex="0" class="btnCancel"></p>').on("click",()=>{u._cnbtn(),u.hideOpts()}),[,u.cancelBtn[0].innerText]=c.locale;const f=u.okbtn.add(u.cancelBtn);u.optDiv.append(n('<div class="MultiControls">').append(f)),f.on("keydown.sumo",function(m){const g=n(this);switch(m.which){case 32:case 13:g.trigger("click");break;case 9:if(g.hasClass("btnOk"))return;break;case 27:u._cnbtn(),u.hideOpts();return}m.stopPropagation(),m.preventDefault()})},_okbtn(){const u=this;let f=0;c.triggerChangeCombined&&(u.E.find("option:checked").length!==u.Pstate.length?f=1:u.E.find("option").each((m,g)=>{g.selected&&u.Pstate.indexOf(m)<0&&(f=1)}),f&&(u.callChange(),u.setText()))},_cnbtn(){const u=this;u.E.find("option:checked").each(function(){this.selected=!1}),u.optDiv.find("li.selected").removeClass("selected");for(let f=0;f<u.Pstate.length;f++)u.E.find("option")[u.Pstate[f]].selected=!0,u.ul.find("li.opt").eq(u.Pstate[f]).addClass("selected");u.setText(),u.selAllState()},_handleMax(){c.max&&(this.selectedCount>=+c.max?this.optDiv.find("li.opt").not(".hidden").each((u,f)=>{n(f).hasClass("selected")||n(f).addClass("temporary-disabled disabled")}):this.optDiv.find("li.opt").not(".hidden").each((u,f)=>{n(f).hasClass("temporary-disabled")&&n(f).removeClass("temporary-disabled disabled")}))},ClearAll(){const u=this;u.is_multi&&(u.selAll=n('<p class="reset-all"><span><i></i></span><label></label></p>'),[,,,u.selAll.find("label")[0].innerText]=c.locale,u.optDiv.addClass("resetAll"),u.selAll.on("click",()=>{u.selAll.removeClass("selected"),u.toggSelAll(!1,1),c.closeAfterClearAll&&u.hideOpts()}),u.optDiv.prepend(u.selAll))},SelAll(){const u=this;u.is_multi&&(u.selAll=n('<p class="select-all"><span><i></i></span><label></label></p>'),[,,u.selAll.find("label")[0].innerText]=c.locale,u.optDiv.addClass("selall"),u.selAll.on("click",()=>{u.selAll.toggleClass("selected"),u.toggSelAll(u.selAll.hasClass("selected"),1),u.selAllState()}),u.optDiv.prepend(u.selAll))},Search(){const u=this,f=u.CaptionCont.addClass("search"),m=n('<p class="no-match">'),g=i.searchFn&&typeof i.searchFn=="function"?i.searchFn:c.searchFn;u.ftxt=n('<input type="search" class="search-txt" value="" autocomplete="off">').on("click",h=>{h.stopPropagation()}),u.ftxt[0].placeholder=c.searchText,f.append(u.ftxt),u.optDiv.children("ul").after(m),u.ftxt.on("input.sumo",()=>{const h=u.optDiv.find("ul.options li.opt").each((v,y)=>{const E=n(y),{0:b}=E.data("opt");b.hidden=g(E.text(),u.ftxt.val(),E),E.toggleClass("hidden",b.hidden)}).not(".hidden");u.optDiv[0].querySelectorAll("li.group").forEach(v=>{v.querySelector("li:not(.hidden)")?v.classList.remove("hidden"):v.classList.add("hidden")}),m.html(c.noMatch.replace(/\{0\}/g,"<em></em>")).toggle(!h.length),m.find("em").text(u.ftxt.val()),u.selAllState()})},selAllState(){const u=this;if(c.selectAll&&u.is_multi){let f=0,m=0;u.optDiv.find("li.opt:not(.disabled):not(.hidden)").each((g,h)=>{n(h).hasClass("selected")&&f++,m++}),f===m?u.selAll.removeClass("partial").addClass("selected"):f===0?u.selAll.removeClass("selected partial"):(c.selectAllPartialCheck&&u.selAll.addClass("partial"),u.selAll.removeClass("selected"))}},showOpts(){const u=this;if(u.E.attr("disabled"))return;u.E.trigger("sumo:opening",u),u.is_opened=!0,u.select.addClass("open").attr("aria-expanded","true");const f=u.optDiv.find("li.opt.selected").first();if(f.length?u.optDiv.find(".options").scrollTop(f.position().top):u.optDiv.find(".options").scrollTop(0),u.E.trigger("sumo:opened",u),u.ftxt?u.ftxt.focus():u.select.focus(),n(document).on("click.sumo",m=>{if(!u.select.is(m.target)&&u.select.has(m.target).length===0){if(!u.is_opened)return;u.hideOpts(),c.okCancelInMulti&&(c.isClickAwayOk?u._okbtn():u._cnbtn())}}),u.is_floating){let m=u.optDiv.children("ul").outerHeight()+2;u.is_multi&&(m=m+ +u.optDiv.css("padding-bottom")),u.optDiv.css("height",m),n("body").addClass("sumoStopScroll")}u.setPstate()},setPstate(){const u=this;u.is_multi&&(u.is_floating||c.okCancelInMulti)&&(u.Pstate=[],u.E.find("option").each((f,m)=>{m.selected&&u.Pstate.push(f)}))},callChange(){this.E.get().forEach(u=>{r(u,"change"),r(u,"click")})},hideOpts(){const u=this;u.is_opened&&(u.E.trigger("sumo:closing",u),u.is_opened=!1,u.select.removeClass("open").attr("aria-expanded","false").find("ul li.sel").removeClass("sel"),u.E.trigger("sumo:closed",u),n(document).off("click.sumo"),n("body").removeClass("sumoStopScroll"),c.search&&(u.ftxt.val(""),u.ftxt.trigger("input.sumo")))},setOnOpen(){const u=this;let f=u.optDiv.find("li.opt:not(.hidden)").eq(c.search?0:u.E[0].selectedIndex);f.hasClass("disabled")&&(f=f.next(":not(disabled)"),!f.length)||(u.optDiv.find("li.sel").removeClass("sel"),f.addClass("sel"),u.showOpts())},nav(u){const f=this;let m=null,g=f.ul.find("li.opt.sel:not(.hidden)");const h=f.ul.find("li.opt:not(.disabled):not(.hidden)"),v=h.index(g);if(f.is_opened&&g.length){if(u&&v>0)m=h.eq(v-1);else if(!u&&v<h.length-1&&v>-1)m=h.eq(v+1);else return;g.removeClass("sel"),g=m.addClass("sel");const{ul:y}=f,E=y.scrollTop(),b=g.position().top+E;b>=E+y.height()-g.outerHeight()&&y.scrollTop(b-y.height()+g.outerHeight()),b<E&&y.scrollTop(b)}else f.setOnOpen()},basicEvents(){const u=this;u.CaptionCont.on("click",f=>{u.E.trigger("click"),u.is_opened?u.hideOpts():u.showOpts(),f.stopPropagation()}),u.select.on("keydown.sumo",f=>{switch(f.which){case 38:u.nav(!0);break;case 40:u.nav(!1);break;case 65:if(u.is_multi&&!c.max&&f.ctrlKey){u.toggSelAll(!f.shiftKey,1);break}else return;case 32:if(c.search&&u.ftxt.is(f.target))return;break;case 13:u.is_opened&&u.optDiv.find("ul li.sel").trigger("click"),c.search?u.select.focus():u.setOnOpen();break;case 9:c.okCancelInMulti||u.hideOpts();return;case 27:c.okCancelInMulti&&u._cnbtn(),u.hideOpts(),c.search&&u.select.focus();return;default:return}f.preventDefault()}),n(window).on("resize.sumo",()=>{u.floatingList()})},onOptClick(u){const f=this;u.on("click",function(){const m=n(this);m.hasClass("disabled")||(f.is_multi?(m.toggleClass("selected"),m.data("opt")[0].selected=m.hasClass("selected"),m.data("opt")[0].selected===!1?(f.lastUnselected=m.data("opt")[0].textContent,f.selectedCount--):f.selectedCount++,c.max&&f._handleMax(),f.selAllState()):(m.parent().find("li.selected").removeClass("selected"),m.toggleClass("selected"),m.data("opt")[0].selected=!0,f.selectedCount=1),f.is_multi&&c.triggerChangeCombined&&(f.is_floating||c.okCancelInMulti)||(f.setText(),f.callChange()),f.is_multi||f.hideOpts())})},setText(){const u=this;let f=0;if(u.placeholder="",u.is_multi){const h=u.E.find(":checked").not(":disabled");f=h.length,c.csvDispCount&&h.length>c.csvDispCount?h.length===u.E.find("option").length&&c.captionFormatAllSelected?u.placeholder=c.captionFormatAllSelected.replace(/\{0\}/g,h.length):u.placeholder=c.captionFormat.replace(/\{0\}/g,h.length):u.placeholder=h.toArray().map(v=>v.innerText).join(", ")}else{const h=u.E.find(":checked").not(":disabled");u.placeholder=h.text(),f=h.length}let m=!1;u.placeholder||(m=!0,u.placeholder=u.E.attr("placeholder"),u.placeholder||(u.placeholder=u.E.find("option:disabled:checked").text())),u.select.attr("selected-count",f),u.select.attr("is-selected",f?"true":"false"),u.placeholder=u.placeholder?`${c.prefix} ${u.placeholder}`:c.placeholder,u.caption.text(u.placeholder),c.showTitle&&u.CaptionCont.attr("title",u.placeholder);const g=u.select.find("input.HEMANT123");return g.length&&g.val(u.getSelStr()),m?u.caption.addClass("placeholder"):u.caption.removeClass("placeholder"),u.placeholder},isMobile(){const u=navigator.userAgent||navigator.vendor||window.opera;for(let f=0;f<c.nativeOnDevice.length;f++)if(u.toString().toLowerCase().indexOf(c.nativeOnDevice[f].toLowerCase())>0)return c.nativeOnDevice[f];return!1},setNativeMobile(){const u=this;u.E.addClass("SelectClass"),u.mob=!0,u.E.change(()=>{u.setText()})},floatingList(){const u=this;u.is_floating=n(window).width()<=c.floatWidth,u.optDiv.toggleClass("isFloating",u.is_floating),u.is_floating||u.optDiv.css("height",""),u.optDiv.toggleClass("okCancelInMulti",c.okCancelInMulti&&!u.is_floating)},vRange(u){const f=this;if(f.E.find("option").length<=u||u<0)throw new Error("index out of bounds");return f},toggSel(u,f){const m=this;let g=null;typeof f=="number"?(m.vRange(f),g=m.E.find("option")[f]):g=m.E.find(`option[value="${f.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"]`)[0]||0,!(!g||g.disabled)&&g.selected!==u&&(c.max&&!g.selected&&m.selectedCount<c.max||g.selected||!c.max&&!g.selected)&&(g.selected=u,m.mob||n(g).data("li").toggleClass("selected",u),m.callChange(),m.setPstate(),m.setText(),(!m.isMobile()||c.forceCustomRendering)&&m.selAllState())},toggDis(u,f){const m=this.vRange(f);m.E.find("option")[f].disabled=u,u&&(m.E.find("option")[f].selected=!1),m.mob||m.optDiv.find("ul.options li.opt").eq(f).toggleClass("disabled",u).removeClass("selected"),m.setText()},toggSumo(u){const f=this;return f.enabled=u,f.select.toggleClass("disabled",u),u?(f.E.attr("disabled","disabled"),f.select.removeAttr("tabindex")):(f.E.removeAttr("disabled"),f.select.attr("tabindex","0")),f},toggSelAll(u,f){const m=this,g=n.extend(!0,{},n._data(m.E.get(0),"events"));m.E.off(),m.is_multi?u?m.E.find("option").toArray().filter(h=>!h.selected&&!h.disabled&&h.style.display!=="none").forEach(h=>{n(h).data("li").hasClass("hidden")||(h.selected=!0,n(h).data("li").toggleClass("selected",!0))}):m.E.find("option").toArray().filter(h=>h.selected&&!h.disabled&&h.style.display!=="none").forEach(h=>{n(h).data("li").hasClass("hidden")||(h.selected=!1,n(h).data("li").toggleClass("selected",!1))}):u?console.warn("You called `SelectAll` on a non-multiple select"):m.E[0].selectedIndex=-1,n.each(g,(h,v)=>{n.each(v,(y,E)=>{m.E.on(E.type,E.handler)})}),(m.is_multi&&!c.okCancelInMulti||!m.is_multi)&&(m.callChange(),m.setText()),f||(!m.mob&&m.selAll&&m.selAll.removeClass("partial").toggleClass("selected",!!u),m.setText(),m.setPstate())},reload(){const u=this.unload();return n(u).SumoSelect(c)},unload(){const u=this;return u.select.before(u.E),u.E.show(),u.E[0].classList.remove("SumoUnder","SelectClass"),c.outputAsCSV&&u.is_multi&&u.select.find("input.HEMANT123").length&&u.E.attr("name",u.select.find("input.HEMANT123").attr("name")),u.select.remove(),delete l.sumo,u.E.trigger("sumo:unloaded",u),l},add(u,f,m,g){if(typeof u>"u")throw new Error("No value to add");const h=this,v=h.E.find("option"),y=u;let E=f,b=m;typeof f=="number"?(b=f,E=u):typeof f>"u"&&(E=u);const w=n("<option></option>").val(y).html(E);if(g&&typeof g=="object"&&n.each(g,(T,x)=>{w.attr(T,x)}),v.length<b)throw new Error("index out of bounds");return typeof b>"u"||v.length===b?(h.E.append(w),h.mob||h.ul.append(h.createLi(w))):(v.eq(b).before(w),h.mob||h.ul.find("li.opt").eq(b).before(h.createLi(w))),l},remove(u){const f=this.vRange(u);f.E.find("option").eq(u).remove(),f.mob||f.optDiv.find("ul.options li.opt").eq(u).remove(),f.setText()},removeAll(){const u=this,f=u.E.find("option");for(let m=f.length-1;m>=0;m--)f[m].selected!==!0&&u.remove(m)},find(u){const m=this.E.find("option");for(const g in m)if(m[g].value===u)return+g;return-1},selectItem(u){this.toggSel(!0,u)},unSelectItem(u){this.toggSel(!1,u)},selectAll(){this.toggSelAll(!0)},unSelectAll(){this.toggSelAll(!1)},disableItem(u){this.toggDis(!0,u)},enableItem(u){this.toggDis(!1,u)},enabled:!0,enable(){return this.toggSumo(!1)},disable(){return this.toggSumo(!0)},init(){const u=this;return u.createElems(),u.setText(),u.E.trigger("sumo:initialized",u),u}},l.sumo.init()});return a.length===1?a[0]:a}})}(au)),au.exports}Ry();var Fa={exports:{}},Ay=Fa.exports,Jd;function Py(){return Jd||(Jd=1,function(e){(function(t){var n,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,s=Math.floor,a="[BigNumber Error] ",l=a+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,f=9007199254740991,m=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,h=1e9;function v(O){var R,I,P,M=ce.prototype={constructor:ce,toString:null,valueOf:null},B=new ce(1),z=20,te=4,pe=-7,Ce=21,Oe=-1e7,ve=1e7,ne=!1,V=1,fe=0,ye={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},ue="0123456789abcdefghijklmnopqrstuvwxyz",Ie=!0;function ce(F,H){var U,J,K,q,ie,Q,ee,se,re=this;if(!(re instanceof ce))return new ce(F,H);if(H==null){if(F&&F._isBigNumber===!0){re.s=F.s,!F.c||F.e>ve?re.c=re.e=null:F.e<Oe?re.c=[re.e=0]:(re.e=F.e,re.c=F.c.slice());return}if((Q=typeof F=="number")&&F*0==0){if(re.s=1/F<0?(F=-F,-1):1,F===~~F){for(q=0,ie=F;ie>=10;ie/=10,q++);q>ve?re.c=re.e=null:(re.e=q,re.c=[F]);return}se=String(F)}else{if(!i.test(se=String(F)))return P(re,se,Q);re.s=se.charCodeAt(0)==45?(se=se.slice(1),-1):1}(q=se.indexOf("."))>-1&&(se=se.replace(".","")),(ie=se.search(/e/i))>0?(q<0&&(q=ie),q+=+se.slice(ie+1),se=se.substring(0,ie)):q<0&&(q=se.length)}else{if(w(H,2,ue.length,"Base"),H==10&&Ie)return re=new ce(F),Ye(re,z+re.e+1,te);if(se=String(F),Q=typeof F=="number"){if(F*0!=0)return P(re,se,Q,H);if(re.s=1/F<0?(se=se.slice(1),-1):1,ce.DEBUG&&se.replace(/^0\.0*|\./,"").length>15)throw Error(l+F)}else re.s=se.charCodeAt(0)===45?(se=se.slice(1),-1):1;for(U=ue.slice(0,H),q=ie=0,ee=se.length;ie<ee;ie++)if(U.indexOf(J=se.charAt(ie))<0){if(J=="."){if(ie>q){q=ee;continue}}else if(!K&&(se==se.toUpperCase()&&(se=se.toLowerCase())||se==se.toLowerCase()&&(se=se.toUpperCase()))){K=!0,ie=-1,q=0;continue}return P(re,String(F),Q,H)}Q=!1,se=I(se,H,10,re.s),(q=se.indexOf("."))>-1?se=se.replace(".",""):q=se.length}for(ie=0;se.charCodeAt(ie)===48;ie++);for(ee=se.length;se.charCodeAt(--ee)===48;);if(se=se.slice(ie,++ee)){if(ee-=ie,Q&&ce.DEBUG&&ee>15&&(F>f||F!==s(F)))throw Error(l+re.s*F);if((q=q-ie-1)>ve)re.c=re.e=null;else if(q<Oe)re.c=[re.e=0];else{if(re.e=q,re.c=[],ie=(q+1)%u,q<0&&(ie+=u),ie<ee){for(ie&&re.c.push(+se.slice(0,ie)),ee-=u;ie<ee;)re.c.push(+se.slice(ie,ie+=u));ie=u-(se=se.slice(ie)).length}else ie-=ee;for(;ie--;se+="0");re.c.push(+se)}}else re.c=[re.e=0]}ce.clone=v,ce.ROUND_UP=0,ce.ROUND_DOWN=1,ce.ROUND_CEIL=2,ce.ROUND_FLOOR=3,ce.ROUND_HALF_UP=4,ce.ROUND_HALF_DOWN=5,ce.ROUND_HALF_EVEN=6,ce.ROUND_HALF_CEIL=7,ce.ROUND_HALF_FLOOR=8,ce.EUCLID=9,ce.config=ce.set=function(F){var H,U;if(F!=null)if(typeof F=="object"){if(F.hasOwnProperty(H="DECIMAL_PLACES")&&(U=F[H],w(U,0,h,H),z=U),F.hasOwnProperty(H="ROUNDING_MODE")&&(U=F[H],w(U,0,8,H),te=U),F.hasOwnProperty(H="EXPONENTIAL_AT")&&(U=F[H],U&&U.pop?(w(U[0],-h,0,H),w(U[1],0,h,H),pe=U[0],Ce=U[1]):(w(U,-h,h,H),pe=-(Ce=U<0?-U:U))),F.hasOwnProperty(H="RANGE"))if(U=F[H],U&&U.pop)w(U[0],-h,-1,H),w(U[1],1,h,H),Oe=U[0],ve=U[1];else if(w(U,-h,h,H),U)Oe=-(ve=U<0?-U:U);else throw Error(a+H+" cannot be zero: "+U);if(F.hasOwnProperty(H="CRYPTO"))if(U=F[H],U===!!U)if(U)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ne=U;else throw ne=!U,Error(a+"crypto unavailable");else ne=U;else throw Error(a+H+" not true or false: "+U);if(F.hasOwnProperty(H="MODULO_MODE")&&(U=F[H],w(U,0,9,H),V=U),F.hasOwnProperty(H="POW_PRECISION")&&(U=F[H],w(U,0,h,H),fe=U),F.hasOwnProperty(H="FORMAT"))if(U=F[H],typeof U=="object")ye=U;else throw Error(a+H+" not an object: "+U);if(F.hasOwnProperty(H="ALPHABET"))if(U=F[H],typeof U=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(U))Ie=U.slice(0,10)=="0123456789",ue=U;else throw Error(a+H+" invalid: "+U)}else throw Error(a+"Object expected: "+F);return{DECIMAL_PLACES:z,ROUNDING_MODE:te,EXPONENTIAL_AT:[pe,Ce],RANGE:[Oe,ve],CRYPTO:ne,MODULO_MODE:V,POW_PRECISION:fe,FORMAT:ye,ALPHABET:ue}},ce.isBigNumber=function(F){if(!F||F._isBigNumber!==!0)return!1;if(!ce.DEBUG)return!0;var H,U,J=F.c,K=F.e,q=F.s;e:if({}.toString.call(J)=="[object Array]"){if((q===1||q===-1)&&K>=-h&&K<=h&&K===s(K)){if(J[0]===0){if(K===0&&J.length===1)return!0;break e}if(H=(K+1)%u,H<1&&(H+=u),String(J[0]).length==H){for(H=0;H<J.length;H++)if(U=J[H],U<0||U>=c||U!==s(U))break e;if(U!==0)return!0}}}else if(J===null&&K===null&&(q===null||q===1||q===-1))return!0;throw Error(a+"Invalid BigNumber: "+F)},ce.maximum=ce.max=function(){return He(arguments,-1)},ce.minimum=ce.min=function(){return He(arguments,1)},ce.random=function(){var F=9007199254740992,H=Math.random()*F&2097151?function(){return s(Math.random()*F)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(U){var J,K,q,ie,Q,ee=0,se=[],re=new ce(B);if(U==null?U=z:w(U,0,h),ie=r(U/u),ne)if(crypto.getRandomValues){for(J=crypto.getRandomValues(new Uint32Array(ie*=2));ee<ie;)Q=J[ee]*131072+(J[ee+1]>>>11),Q>=9e15?(K=crypto.getRandomValues(new Uint32Array(2)),J[ee]=K[0],J[ee+1]=K[1]):(se.push(Q%1e14),ee+=2);ee=ie/2}else if(crypto.randomBytes){for(J=crypto.randomBytes(ie*=7);ee<ie;)Q=(J[ee]&31)*281474976710656+J[ee+1]*1099511627776+J[ee+2]*4294967296+J[ee+3]*16777216+(J[ee+4]<<16)+(J[ee+5]<<8)+J[ee+6],Q>=9e15?crypto.randomBytes(7).copy(J,ee):(se.push(Q%1e14),ee+=7);ee=ie/7}else throw ne=!1,Error(a+"crypto unavailable");if(!ne)for(;ee<ie;)Q=H(),Q<9e15&&(se[ee++]=Q%1e14);for(ie=se[--ee],U%=u,ie&&U&&(Q=m[u-U],se[ee]=s(ie/Q)*Q);se[ee]===0;se.pop(),ee--);if(ee<0)se=[q=0];else{for(q=-1;se[0]===0;se.splice(0,1),q-=u);for(ee=1,Q=se[0];Q>=10;Q/=10,ee++);ee<u&&(q-=u-ee)}return re.e=q,re.c=se,re}}(),ce.sum=function(){for(var F=1,H=arguments,U=new ce(H[0]);F<H.length;)U=U.plus(H[F++]);return U},I=function(){var F="0123456789";function H(U,J,K,q){for(var ie,Q=[0],ee,se=0,re=U.length;se<re;){for(ee=Q.length;ee--;Q[ee]*=J);for(Q[0]+=q.indexOf(U.charAt(se++)),ie=0;ie<Q.length;ie++)Q[ie]>K-1&&(Q[ie+1]==null&&(Q[ie+1]=0),Q[ie+1]+=Q[ie]/K|0,Q[ie]%=K)}return Q.reverse()}return function(U,J,K,q,ie){var Q,ee,se,re,ge,_e,Se,qe,Be=U.indexOf("."),o=z,d=te;for(Be>=0&&(re=fe,fe=0,U=U.replace(".",""),qe=new ce(J),_e=qe.pow(U.length-Be),fe=re,qe.c=H(D(E(_e.c),_e.e,"0"),10,K,F),qe.e=qe.c.length),Se=H(U,J,K,ie?(Q=ue,F):(Q=F,ue)),se=re=Se.length;Se[--re]==0;Se.pop());if(!Se[0])return Q.charAt(0);if(Be<0?--se:(_e.c=Se,_e.e=se,_e.s=q,_e=R(_e,qe,o,d,K),Se=_e.c,ge=_e.r,se=_e.e),ee=se+o+1,Be=Se[ee],re=K/2,ge=ge||ee<0||Se[ee+1]!=null,ge=d<4?(Be!=null||ge)&&(d==0||d==(_e.s<0?3:2)):Be>re||Be==re&&(d==4||ge||d==6&&Se[ee-1]&1||d==(_e.s<0?8:7)),ee<1||!Se[0])U=ge?D(Q.charAt(1),-o,Q.charAt(0)):Q.charAt(0);else{if(Se.length=ee,ge)for(--K;++Se[--ee]>K;)Se[ee]=0,ee||(++se,Se=[1].concat(Se));for(re=Se.length;!Se[--re];);for(Be=0,U="";Be<=re;U+=Q.charAt(Se[Be++]));U=D(U,se,Q.charAt(0))}return U}}(),R=function(){function F(J,K,q){var ie,Q,ee,se,re=0,ge=J.length,_e=K%g,Se=K/g|0;for(J=J.slice();ge--;)ee=J[ge]%g,se=J[ge]/g|0,ie=Se*ee+se*_e,Q=_e*ee+ie%g*g+re,re=(Q/q|0)+(ie/g|0)+Se*se,J[ge]=Q%q;return re&&(J=[re].concat(J)),J}function H(J,K,q,ie){var Q,ee;if(q!=ie)ee=q>ie?1:-1;else for(Q=ee=0;Q<q;Q++)if(J[Q]!=K[Q]){ee=J[Q]>K[Q]?1:-1;break}return ee}function U(J,K,q,ie){for(var Q=0;q--;)J[q]-=Q,Q=J[q]<K[q]?1:0,J[q]=Q*ie+J[q]-K[q];for(;!J[0]&&J.length>1;J.splice(0,1));}return function(J,K,q,ie,Q){var ee,se,re,ge,_e,Se,qe,Be,o,d,p,_,C,S,A,N,G,Y=J.s==K.s?1:-1,X=J.c,$=K.c;if(!X||!X[0]||!$||!$[0])return new ce(!J.s||!K.s||(X?$&&X[0]==$[0]:!$)?NaN:X&&X[0]==0||!$?Y*0:Y/0);for(Be=new ce(Y),o=Be.c=[],se=J.e-K.e,Y=q+se+1,Q||(Q=c,se=y(J.e/u)-y(K.e/u),Y=Y/u|0),re=0;$[re]==(X[re]||0);re++);if($[re]>(X[re]||0)&&se--,Y<0)o.push(1),ge=!0;else{for(S=X.length,N=$.length,re=0,Y+=2,_e=s(Q/($[0]+1)),_e>1&&($=F($,_e,Q),X=F(X,_e,Q),N=$.length,S=X.length),C=N,d=X.slice(0,N),p=d.length;p<N;d[p++]=0);G=$.slice(),G=[0].concat(G),A=$[0],$[1]>=Q/2&&A++;do{if(_e=0,ee=H($,d,N,p),ee<0){if(_=d[0],N!=p&&(_=_*Q+(d[1]||0)),_e=s(_/A),_e>1)for(_e>=Q&&(_e=Q-1),Se=F($,_e,Q),qe=Se.length,p=d.length;H(Se,d,qe,p)==1;)_e--,U(Se,N<qe?G:$,qe,Q),qe=Se.length,ee=1;else _e==0&&(ee=_e=1),Se=$.slice(),qe=Se.length;if(qe<p&&(Se=[0].concat(Se)),U(d,Se,p,Q),p=d.length,ee==-1)for(;H($,d,N,p)<1;)_e++,U(d,N<p?G:$,p,Q),p=d.length}else ee===0&&(_e++,d=[0]);o[re++]=_e,d[0]?d[p++]=X[C]||0:(d=[X[C]],p=1)}while((C++<S||d[0]!=null)&&Y--);ge=d[0]!=null,o[0]||o.splice(0,1)}if(Q==c){for(re=1,Y=o[0];Y>=10;Y/=10,re++);Ye(Be,q+(Be.e=re+se*u-1)+1,ie,ge)}else Be.e=se,Be.r=+ge;return Be}}();function Le(F,H,U,J){var K,q,ie,Q,ee;if(U==null?U=te:w(U,0,8),!F.c)return F.toString();if(K=F.c[0],ie=F.e,H==null)ee=E(F.c),ee=J==1||J==2&&(ie<=pe||ie>=Ce)?x(ee,ie):D(ee,ie,"0");else if(F=Ye(new ce(F),H,U),q=F.e,ee=E(F.c),Q=ee.length,J==1||J==2&&(H<=q||q<=pe)){for(;Q<H;ee+="0",Q++);ee=x(ee,q)}else if(H-=ie,ee=D(ee,q,"0"),q+1>Q){if(--H>0)for(ee+=".";H--;ee+="0");}else if(H+=q-Q,H>0)for(q+1==Q&&(ee+=".");H--;ee+="0");return F.s<0&&K?"-"+ee:ee}function He(F,H){for(var U,J,K=1,q=new ce(F[0]);K<F.length;K++)J=new ce(F[K]),(!J.s||(U=b(q,J))===H||U===0&&q.s===H)&&(q=J);return q}function We(F,H,U){for(var J=1,K=H.length;!H[--K];H.pop());for(K=H[0];K>=10;K/=10,J++);return(U=J+U*u-1)>ve?F.c=F.e=null:U<Oe?F.c=[F.e=0]:(F.e=U,F.c=H),F}P=function(){var F=/^(-?)0([xbo])(?=\w[\w.]*$)/i,H=/^([^.]+)\.$/,U=/^\.([^.]+)$/,J=/^-?(Infinity|NaN)$/,K=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(q,ie,Q,ee){var se,re=Q?ie:ie.replace(K,"");if(J.test(re))q.s=isNaN(re)?null:re<0?-1:1;else{if(!Q&&(re=re.replace(F,function(ge,_e,Se){return se=(Se=Se.toLowerCase())=="x"?16:Se=="b"?2:8,!ee||ee==se?_e:ge}),ee&&(se=ee,re=re.replace(H,"$1").replace(U,"0.$1")),ie!=re))return new ce(re,se);if(ce.DEBUG)throw Error(a+"Not a"+(ee?" base "+ee:"")+" number: "+ie);q.s=null}q.c=q.e=null}}();function Ye(F,H,U,J){var K,q,ie,Q,ee,se,re,ge=F.c,_e=m;if(ge){e:{for(K=1,Q=ge[0];Q>=10;Q/=10,K++);if(q=H-K,q<0)q+=u,ie=H,ee=ge[se=0],re=s(ee/_e[K-ie-1]%10);else if(se=r((q+1)/u),se>=ge.length)if(J){for(;ge.length<=se;ge.push(0));ee=re=0,K=1,q%=u,ie=q-u+1}else break e;else{for(ee=Q=ge[se],K=1;Q>=10;Q/=10,K++);q%=u,ie=q-u+K,re=ie<0?0:s(ee/_e[K-ie-1]%10)}if(J=J||H<0||ge[se+1]!=null||(ie<0?ee:ee%_e[K-ie-1]),J=U<4?(re||J)&&(U==0||U==(F.s<0?3:2)):re>5||re==5&&(U==4||J||U==6&&(q>0?ie>0?ee/_e[K-ie]:0:ge[se-1])%10&1||U==(F.s<0?8:7)),H<1||!ge[0])return ge.length=0,J?(H-=F.e+1,ge[0]=_e[(u-H%u)%u],F.e=-H||0):ge[0]=F.e=0,F;if(q==0?(ge.length=se,Q=1,se--):(ge.length=se+1,Q=_e[u-q],ge[se]=ie>0?s(ee/_e[K-ie]%_e[ie])*Q:0),J)for(;;)if(se==0){for(q=1,ie=ge[0];ie>=10;ie/=10,q++);for(ie=ge[0]+=Q,Q=1;ie>=10;ie/=10,Q++);q!=Q&&(F.e++,ge[0]==c&&(ge[0]=1));break}else{if(ge[se]+=Q,ge[se]!=c)break;ge[se--]=0,Q=1}for(q=ge.length;ge[--q]===0;ge.pop());}F.e>ve?F.c=F.e=null:F.e<Oe&&(F.c=[F.e=0])}return F}function Re(F){var H,U=F.e;return U===null?F.toString():(H=E(F.c),H=U<=pe||U>=Ce?x(H,U):D(H,U,"0"),F.s<0?"-"+H:H)}return M.absoluteValue=M.abs=function(){var F=new ce(this);return F.s<0&&(F.s=1),F},M.comparedTo=function(F,H){return b(this,new ce(F,H))},M.decimalPlaces=M.dp=function(F,H){var U,J,K,q=this;if(F!=null)return w(F,0,h),H==null?H=te:w(H,0,8),Ye(new ce(q),F+q.e+1,H);if(!(U=q.c))return null;if(J=((K=U.length-1)-y(this.e/u))*u,K=U[K])for(;K%10==0;K/=10,J--);return J<0&&(J=0),J},M.dividedBy=M.div=function(F,H){return R(this,new ce(F,H),z,te)},M.dividedToIntegerBy=M.idiv=function(F,H){return R(this,new ce(F,H),0,1)},M.exponentiatedBy=M.pow=function(F,H){var U,J,K,q,ie,Q,ee,se,re,ge=this;if(F=new ce(F),F.c&&!F.isInteger())throw Error(a+"Exponent not an integer: "+Re(F));if(H!=null&&(H=new ce(H)),Q=F.e>14,!ge.c||!ge.c[0]||ge.c[0]==1&&!ge.e&&ge.c.length==1||!F.c||!F.c[0])return re=new ce(Math.pow(+Re(ge),Q?F.s*(2-T(F)):+Re(F))),H?re.mod(H):re;if(ee=F.s<0,H){if(H.c?!H.c[0]:!H.s)return new ce(NaN);J=!ee&&ge.isInteger()&&H.isInteger(),J&&(ge=ge.mod(H))}else{if(F.e>9&&(ge.e>0||ge.e<-1||(ge.e==0?ge.c[0]>1||Q&&ge.c[1]>=24e7:ge.c[0]<8e13||Q&&ge.c[0]<=9999975e7)))return q=ge.s<0&&T(F)?-0:0,ge.e>-1&&(q=1/q),new ce(ee?1/q:q);fe&&(q=r(fe/u+2))}for(Q?(U=new ce(.5),ee&&(F.s=1),se=T(F)):(K=Math.abs(+Re(F)),se=K%2),re=new ce(B);;){if(se){if(re=re.times(ge),!re.c)break;q?re.c.length>q&&(re.c.length=q):J&&(re=re.mod(H))}if(K){if(K=s(K/2),K===0)break;se=K%2}else if(F=F.times(U),Ye(F,F.e+1,1),F.e>14)se=T(F);else{if(K=+Re(F),K===0)break;se=K%2}ge=ge.times(ge),q?ge.c&&ge.c.length>q&&(ge.c.length=q):J&&(ge=ge.mod(H))}return J?re:(ee&&(re=B.div(re)),H?re.mod(H):q?Ye(re,fe,te,ie):re)},M.integerValue=function(F){var H=new ce(this);return F==null?F=te:w(F,0,8),Ye(H,H.e+1,F)},M.isEqualTo=M.eq=function(F,H){return b(this,new ce(F,H))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(F,H){return b(this,new ce(F,H))>0},M.isGreaterThanOrEqualTo=M.gte=function(F,H){return(H=b(this,new ce(F,H)))===1||H===0},M.isInteger=function(){return!!this.c&&y(this.e/u)>this.c.length-2},M.isLessThan=M.lt=function(F,H){return b(this,new ce(F,H))<0},M.isLessThanOrEqualTo=M.lte=function(F,H){return(H=b(this,new ce(F,H)))===-1||H===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(F,H){var U,J,K,q,ie=this,Q=ie.s;if(F=new ce(F,H),H=F.s,!Q||!H)return new ce(NaN);if(Q!=H)return F.s=-H,ie.plus(F);var ee=ie.e/u,se=F.e/u,re=ie.c,ge=F.c;if(!ee||!se){if(!re||!ge)return re?(F.s=-H,F):new ce(ge?ie:NaN);if(!re[0]||!ge[0])return ge[0]?(F.s=-H,F):new ce(re[0]?ie:te==3?-0:0)}if(ee=y(ee),se=y(se),re=re.slice(),Q=ee-se){for((q=Q<0)?(Q=-Q,K=re):(se=ee,K=ge),K.reverse(),H=Q;H--;K.push(0));K.reverse()}else for(J=(q=(Q=re.length)<(H=ge.length))?Q:H,Q=H=0;H<J;H++)if(re[H]!=ge[H]){q=re[H]<ge[H];break}if(q&&(K=re,re=ge,ge=K,F.s=-F.s),H=(J=ge.length)-(U=re.length),H>0)for(;H--;re[U++]=0);for(H=c-1;J>Q;){if(re[--J]<ge[J]){for(U=J;U&&!re[--U];re[U]=H);--re[U],re[J]+=c}re[J]-=ge[J]}for(;re[0]==0;re.splice(0,1),--se);return re[0]?We(F,re,se):(F.s=te==3?-1:1,F.c=[F.e=0],F)},M.modulo=M.mod=function(F,H){var U,J,K=this;return F=new ce(F,H),!K.c||!F.s||F.c&&!F.c[0]?new ce(NaN):!F.c||K.c&&!K.c[0]?new ce(K):(V==9?(J=F.s,F.s=1,U=R(K,F,0,3),F.s=J,U.s*=J):U=R(K,F,0,V),F=K.minus(U.times(F)),!F.c[0]&&V==1&&(F.s=K.s),F)},M.multipliedBy=M.times=function(F,H){var U,J,K,q,ie,Q,ee,se,re,ge,_e,Se,qe,Be,o,d=this,p=d.c,_=(F=new ce(F,H)).c;if(!p||!_||!p[0]||!_[0])return!d.s||!F.s||p&&!p[0]&&!_||_&&!_[0]&&!p?F.c=F.e=F.s=null:(F.s*=d.s,!p||!_?F.c=F.e=null:(F.c=[0],F.e=0)),F;for(J=y(d.e/u)+y(F.e/u),F.s*=d.s,ee=p.length,ge=_.length,ee<ge&&(qe=p,p=_,_=qe,K=ee,ee=ge,ge=K),K=ee+ge,qe=[];K--;qe.push(0));for(Be=c,o=g,K=ge;--K>=0;){for(U=0,_e=_[K]%o,Se=_[K]/o|0,ie=ee,q=K+ie;q>K;)se=p[--ie]%o,re=p[ie]/o|0,Q=Se*se+re*_e,se=_e*se+Q%o*o+qe[q]+U,U=(se/Be|0)+(Q/o|0)+Se*re,qe[q--]=se%Be;qe[q]=U}return U?++J:qe.splice(0,1),We(F,qe,J)},M.negated=function(){var F=new ce(this);return F.s=-F.s||null,F},M.plus=function(F,H){var U,J=this,K=J.s;if(F=new ce(F,H),H=F.s,!K||!H)return new ce(NaN);if(K!=H)return F.s=-H,J.minus(F);var q=J.e/u,ie=F.e/u,Q=J.c,ee=F.c;if(!q||!ie){if(!Q||!ee)return new ce(K/0);if(!Q[0]||!ee[0])return ee[0]?F:new ce(Q[0]?J:K*0)}if(q=y(q),ie=y(ie),Q=Q.slice(),K=q-ie){for(K>0?(ie=q,U=ee):(K=-K,U=Q),U.reverse();K--;U.push(0));U.reverse()}for(K=Q.length,H=ee.length,K-H<0&&(U=ee,ee=Q,Q=U,H=K),K=0;H;)K=(Q[--H]=Q[H]+ee[H]+K)/c|0,Q[H]=c===Q[H]?0:Q[H]%c;return K&&(Q=[K].concat(Q),++ie),We(F,Q,ie)},M.precision=M.sd=function(F,H){var U,J,K,q=this;if(F!=null&&F!==!!F)return w(F,1,h),H==null?H=te:w(H,0,8),Ye(new ce(q),F,H);if(!(U=q.c))return null;if(K=U.length-1,J=K*u+1,K=U[K]){for(;K%10==0;K/=10,J--);for(K=U[0];K>=10;K/=10,J++);}return F&&q.e+1>J&&(J=q.e+1),J},M.shiftedBy=function(F){return w(F,-f,f),this.times("1e"+F)},M.squareRoot=M.sqrt=function(){var F,H,U,J,K,q=this,ie=q.c,Q=q.s,ee=q.e,se=z+4,re=new ce("0.5");if(Q!==1||!ie||!ie[0])return new ce(!Q||Q<0&&(!ie||ie[0])?NaN:ie?q:1/0);if(Q=Math.sqrt(+Re(q)),Q==0||Q==1/0?(H=E(ie),(H.length+ee)%2==0&&(H+="0"),Q=Math.sqrt(+H),ee=y((ee+1)/2)-(ee<0||ee%2),Q==1/0?H="5e"+ee:(H=Q.toExponential(),H=H.slice(0,H.indexOf("e")+1)+ee),U=new ce(H)):U=new ce(Q+""),U.c[0]){for(ee=U.e,Q=ee+se,Q<3&&(Q=0);;)if(K=U,U=re.times(K.plus(R(q,K,se,1))),E(K.c).slice(0,Q)===(H=E(U.c)).slice(0,Q))if(U.e<ee&&--Q,H=H.slice(Q-3,Q+1),H=="9999"||!J&&H=="4999"){if(!J&&(Ye(K,K.e+z+2,0),K.times(K).eq(q))){U=K;break}se+=4,Q+=4,J=1}else{(!+H||!+H.slice(1)&&H.charAt(0)=="5")&&(Ye(U,U.e+z+2,1),F=!U.times(U).eq(q));break}}return Ye(U,U.e+z+1,te,F)},M.toExponential=function(F,H){return F!=null&&(w(F,0,h),F++),Le(this,F,H,1)},M.toFixed=function(F,H){return F!=null&&(w(F,0,h),F=F+this.e+1),Le(this,F,H)},M.toFormat=function(F,H,U){var J,K=this;if(U==null)F!=null&&H&&typeof H=="object"?(U=H,H=null):F&&typeof F=="object"?(U=F,F=H=null):U=ye;else if(typeof U!="object")throw Error(a+"Argument not an object: "+U);if(J=K.toFixed(F,H),K.c){var q,ie=J.split("."),Q=+U.groupSize,ee=+U.secondaryGroupSize,se=U.groupSeparator||"",re=ie[0],ge=ie[1],_e=K.s<0,Se=_e?re.slice(1):re,qe=Se.length;if(ee&&(q=Q,Q=ee,ee=q,qe-=q),Q>0&&qe>0){for(q=qe%Q||Q,re=Se.substr(0,q);q<qe;q+=Q)re+=se+Se.substr(q,Q);ee>0&&(re+=se+Se.slice(q)),_e&&(re="-"+re)}J=ge?re+(U.decimalSeparator||"")+((ee=+U.fractionGroupSize)?ge.replace(new RegExp("\\d{"+ee+"}\\B","g"),"$&"+(U.fractionGroupSeparator||"")):ge):re}return(U.prefix||"")+J+(U.suffix||"")},M.toFraction=function(F){var H,U,J,K,q,ie,Q,ee,se,re,ge,_e,Se=this,qe=Se.c;if(F!=null&&(Q=new ce(F),!Q.isInteger()&&(Q.c||Q.s!==1)||Q.lt(B)))throw Error(a+"Argument "+(Q.isInteger()?"out of range: ":"not an integer: ")+Re(Q));if(!qe)return new ce(Se);for(H=new ce(B),se=U=new ce(B),J=ee=new ce(B),_e=E(qe),q=H.e=_e.length-Se.e-1,H.c[0]=m[(ie=q%u)<0?u+ie:ie],F=!F||Q.comparedTo(H)>0?q>0?H:se:Q,ie=ve,ve=1/0,Q=new ce(_e),ee.c[0]=0;re=R(Q,H,0,1),K=U.plus(re.times(J)),K.comparedTo(F)!=1;)U=J,J=K,se=ee.plus(re.times(K=se)),ee=K,H=Q.minus(re.times(K=H)),Q=K;return K=R(F.minus(U),J,0,1),ee=ee.plus(K.times(se)),U=U.plus(K.times(J)),ee.s=se.s=Se.s,q=q*2,ge=R(se,J,q,te).minus(Se).abs().comparedTo(R(ee,U,q,te).minus(Se).abs())<1?[se,J]:[ee,U],ve=ie,ge},M.toNumber=function(){return+Re(this)},M.toPrecision=function(F,H){return F!=null&&w(F,1,h),Le(this,F,H,2)},M.toString=function(F){var H,U=this,J=U.s,K=U.e;return K===null?J?(H="Infinity",J<0&&(H="-"+H)):H="NaN":(F==null?H=K<=pe||K>=Ce?x(E(U.c),K):D(E(U.c),K,"0"):F===10&&Ie?(U=Ye(new ce(U),z+K+1,te),H=D(E(U.c),U.e,"0")):(w(F,2,ue.length,"Base"),H=I(D(E(U.c),K,"0"),10,F,J,!0)),J<0&&U.c[0]&&(H="-"+H)),H},M.valueOf=M.toJSON=function(){return Re(this)},M._isBigNumber=!0,O!=null&&ce.set(O),ce}function y(O){var R=O|0;return O>0||O===R?R:R-1}function E(O){for(var R,I,P=1,M=O.length,B=O[0]+"";P<M;){for(R=O[P++]+"",I=u-R.length;I--;R="0"+R);B+=R}for(M=B.length;B.charCodeAt(--M)===48;);return B.slice(0,M+1||1)}function b(O,R){var I,P,M=O.c,B=R.c,z=O.s,te=R.s,pe=O.e,Ce=R.e;if(!z||!te)return null;if(I=M&&!M[0],P=B&&!B[0],I||P)return I?P?0:-te:z;if(z!=te)return z;if(I=z<0,P=pe==Ce,!M||!B)return P?0:!M^I?1:-1;if(!P)return pe>Ce^I?1:-1;for(te=(pe=M.length)<(Ce=B.length)?pe:Ce,z=0;z<te;z++)if(M[z]!=B[z])return M[z]>B[z]^I?1:-1;return pe==Ce?0:pe>Ce^I?1:-1}function w(O,R,I,P){if(O<R||O>I||O!==s(O))throw Error(a+(P||"Argument")+(typeof O=="number"?O<R||O>I?" out of range: ":" not an integer: ":" not a primitive number: ")+String(O))}function T(O){var R=O.c.length-1;return y(O.e/u)==R&&O.c[R]%2!=0}function x(O,R){return(O.length>1?O.charAt(0)+"."+O.slice(1):O)+(R<0?"e":"e+")+R}function D(O,R,I){var P,M;if(R<0){for(M=I+".";++R;M+=I);O=M+O}else if(P=O.length,++R>P){for(M=I,R-=P;--R;M+=I);O+=M}else R<P&&(O=O.slice(0,R)+"."+O.slice(R));return O}n=v(),n.default=n.BigNumber=n,e.exports?e.exports=n:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=n)})(Ay)}(Fa)),Fa.exports}var My=Py();const Et=xo(My);var Ga={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */var Ny=Ga.exports,Xd;function Ly(){return Xd||(Xd=1,function(e){(function(t,n){e.exports?e.exports=n():t.numeral=n()})(Ny,function(){var t,n,i="2.0.6",r={},s={},a={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},l={currentLocale:a.currentLocale,zeroFormat:a.zeroFormat,nullFormat:a.nullFormat,defaultFormat:a.defaultFormat,scalePercentBy100:a.scalePercentBy100};function c(u,f){this._input=u,this._value=f}return t=function(u){var f,m,g,h;if(t.isNumeral(u))f=u.value();else if(u===0||typeof u>"u")f=0;else if(u===null||n.isNaN(u))f=null;else if(typeof u=="string")if(l.zeroFormat&&u===l.zeroFormat)f=0;else if(l.nullFormat&&u===l.nullFormat||!u.replace(/[^0-9]+/g,"").length)f=null;else{for(m in r)if(h=typeof r[m].regexps.unformat=="function"?r[m].regexps.unformat():r[m].regexps.unformat,h&&u.match(h)){g=r[m].unformat;break}g=g||t._.stringToNumber,f=g(u)}else f=Number(u)||null;return new c(u,f)},t.version=i,t.isNumeral=function(u){return u instanceof c},t._=n={numberToFormat:function(u,f,m){var g=s[t.options.currentLocale],h=!1,v=!1,y=0,E="",b=1e12,w=1e9,T=1e6,x=1e3,D="",O=!1,R,I,P,M,B,z,te;if(u=u||0,I=Math.abs(u),t._.includes(f,"(")?(h=!0,f=f.replace(/[\(|\)]/g,"")):(t._.includes(f,"+")||t._.includes(f,"-"))&&(B=t._.includes(f,"+")?f.indexOf("+"):u<0?f.indexOf("-"):-1,f=f.replace(/[\+|\-]/g,"")),t._.includes(f,"a")&&(R=f.match(/a(k|m|b|t)?/),R=R?R[1]:!1,t._.includes(f," a")&&(E=" "),f=f.replace(new RegExp(E+"a[kmbt]?"),""),I>=b&&!R||R==="t"?(E+=g.abbreviations.trillion,u=u/b):I<b&&I>=w&&!R||R==="b"?(E+=g.abbreviations.billion,u=u/w):I<w&&I>=T&&!R||R==="m"?(E+=g.abbreviations.million,u=u/T):(I<T&&I>=x&&!R||R==="k")&&(E+=g.abbreviations.thousand,u=u/x)),t._.includes(f,"[.]")&&(v=!0,f=f.replace("[.]",".")),P=u.toString().split(".")[0],M=f.split(".")[1],z=f.indexOf(","),y=(f.split(".")[0].split(",")[0].match(/0/g)||[]).length,M?(t._.includes(M,"[")?(M=M.replace("]",""),M=M.split("["),D=t._.toFixed(u,M[0].length+M[1].length,m,M[1].length)):D=t._.toFixed(u,M.length,m),P=D.split(".")[0],t._.includes(D,".")?D=g.delimiters.decimal+D.split(".")[1]:D="",v&&Number(D.slice(1))===0&&(D="")):P=t._.toFixed(u,0,m),E&&!R&&Number(P)>=1e3&&E!==g.abbreviations.trillion)switch(P=String(Number(P)/1e3),E){case g.abbreviations.thousand:E=g.abbreviations.million;break;case g.abbreviations.million:E=g.abbreviations.billion;break;case g.abbreviations.billion:E=g.abbreviations.trillion;break}if(t._.includes(P,"-")&&(P=P.slice(1),O=!0),P.length<y)for(var pe=y-P.length;pe>0;pe--)P="0"+P;return z>-1&&(P=P.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g.delimiters.thousands)),f.indexOf(".")===0&&(P=""),te=P+D+(E||""),h?te=(h&&O?"(":"")+te+(h&&O?")":""):B>=0?te=B===0?(O?"-":"+")+te:te+(O?"-":"+"):O&&(te="-"+te),te},stringToNumber:function(u){var f=s[l.currentLocale],m=u,g={thousand:3,million:6,billion:9,trillion:12},h,v,y;if(l.zeroFormat&&u===l.zeroFormat)v=0;else if(l.nullFormat&&u===l.nullFormat||!u.replace(/[^0-9]+/g,"").length)v=null;else{v=1,f.delimiters.decimal!=="."&&(u=u.replace(/\./g,"").replace(f.delimiters.decimal,"."));for(h in g)if(y=new RegExp("[^a-zA-Z]"+f.abbreviations[h]+"(?:\\)|(\\"+f.currency.symbol+")?(?:\\))?)?$"),m.match(y)){v*=Math.pow(10,g[h]);break}v*=(u.split("-").length+Math.min(u.split("(").length-1,u.split(")").length-1))%2?1:-1,u=u.replace(/[^0-9\.]+/g,""),v*=Number(u)}return v},isNaN:function(u){return typeof u=="number"&&isNaN(u)},includes:function(u,f){return u.indexOf(f)!==-1},insert:function(u,f,m){return u.slice(0,m)+f+u.slice(m)},reduce:function(u,f){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof f!="function")throw new TypeError(f+" is not a function");var m=Object(u),g=m.length>>>0,h=0,v;if(arguments.length===3)v=arguments[2];else{for(;h<g&&!(h in m);)h++;if(h>=g)throw new TypeError("Reduce of empty array with no initial value");v=m[h++]}for(;h<g;h++)h in m&&(v=f(v,m[h],h,m));return v},multiplier:function(u){var f=u.toString().split(".");return f.length<2?1:Math.pow(10,f[1].length)},correctionFactor:function(){var u=Array.prototype.slice.call(arguments);return u.reduce(function(f,m){var g=n.multiplier(m);return f>g?f:g},1)},toFixed:function(u,f,m,g){var h=u.toString().split("."),v=f-(g||0),y,E,b,w;return h.length===2?y=Math.min(Math.max(h[1].length,v),f):y=v,b=Math.pow(10,y),w=(m(u+"e+"+y)/b).toFixed(y),g>f-y&&(E=new RegExp("\\.?0{1,"+(g-(f-y))+"}$"),w=w.replace(E,"")),w}},t.options=l,t.formats=r,t.locales=s,t.locale=function(u){return u&&(l.currentLocale=u.toLowerCase()),l.currentLocale},t.localeData=function(u){if(!u)return s[l.currentLocale];if(u=u.toLowerCase(),!s[u])throw new Error("Unknown locale : "+u);return s[u]},t.reset=function(){for(var u in a)l[u]=a[u]},t.zeroFormat=function(u){l.zeroFormat=typeof u=="string"?u:null},t.nullFormat=function(u){l.nullFormat=typeof u=="string"?u:null},t.defaultFormat=function(u){l.defaultFormat=typeof u=="string"?u:"0.0"},t.register=function(u,f,m){if(f=f.toLowerCase(),this[u+"s"][f])throw new TypeError(f+" "+u+" already registered.");return this[u+"s"][f]=m,m},t.validate=function(u,f){var m,g,h,v,y,E,b,w;if(typeof u!="string"&&(u+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",u)),u=u.trim(),u.match(/^\d+$/))return!0;if(u==="")return!1;try{b=t.localeData(f)}catch{b=t.localeData(t.locale())}return h=b.currency.symbol,y=b.abbreviations,m=b.delimiters.decimal,b.delimiters.thousands==="."?g="\\.":g=b.delimiters.thousands,w=u.match(/^[^\d]+/),w!==null&&(u=u.substr(1),w[0]!==h)||(w=u.match(/[^\d]+$/),w!==null&&(u=u.slice(0,-1),w[0]!==y.thousand&&w[0]!==y.million&&w[0]!==y.billion&&w[0]!==y.trillion))?!1:(E=new RegExp(g+"{2}"),u.match(/[^\d.,]/g)?!1:(v=u.split(m),v.length>2?!1:v.length<2?!!v[0].match(/^\d+.*\d$/)&&!v[0].match(E):v[0].length===1?!!v[0].match(/^\d+$/)&&!v[0].match(E)&&!!v[1].match(/^\d+$/):!!v[0].match(/^\d+.*\d$/)&&!v[0].match(E)&&!!v[1].match(/^\d+$/)))},t.fn=c.prototype={clone:function(){return t(this)},format:function(u,f){var m=this._value,g=u||l.defaultFormat,h,v,y;if(f=f||Math.round,m===0&&l.zeroFormat!==null)v=l.zeroFormat;else if(m===null&&l.nullFormat!==null)v=l.nullFormat;else{for(h in r)if(g.match(r[h].regexps.format)){y=r[h].format;break}y=y||t._.numberToFormat,v=y(m,g,f)}return v},value:function(){return this._value},input:function(){return this._input},set:function(u){return this._value=Number(u),this},add:function(u){var f=n.correctionFactor.call(null,this._value,u);function m(g,h,v,y){return g+Math.round(f*h)}return this._value=n.reduce([this._value,u],m,0)/f,this},subtract:function(u){var f=n.correctionFactor.call(null,this._value,u);function m(g,h,v,y){return g-Math.round(f*h)}return this._value=n.reduce([u],m,Math.round(this._value*f))/f,this},multiply:function(u){function f(m,g,h,v){var y=n.correctionFactor(m,g);return Math.round(m*y)*Math.round(g*y)/Math.round(y*y)}return this._value=n.reduce([this._value,u],f,1),this},divide:function(u){function f(m,g,h,v){var y=n.correctionFactor(m,g);return Math.round(m*y)/Math.round(g*y)}return this._value=n.reduce([this._value,u],f),this},difference:function(u){return Math.abs(t(this._value).subtract(u).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(u){var f=u%10;return~~(u%100/10)===1?"th":f===1?"st":f===2?"nd":f===3?"rd":"th"},currency:{symbol:"$"}}),function(){t.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(u,f,m){var g=t._.includes(f," BPS")?" ":"",h;return u=u*1e4,f=f.replace(/\s?BPS/,""),h=t._.numberToFormat(u,f,m),t._.includes(h,")")?(h=h.split(""),h.splice(-1,0,g+"BPS"),h=h.join("")):h=h+g+"BPS",h},unformat:function(u){return+(t._.stringToNumber(u)*1e-4).toFixed(15)}})}(),function(){var u={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},f={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},m=u.suffixes.concat(f.suffixes.filter(function(h){return u.suffixes.indexOf(h)<0})),g=m.join("|");g="("+g.replace("B","B(?!PS)")+")",t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(g)},format:function(h,v,y){var E,b=t._.includes(v,"ib")?f:u,w=t._.includes(v," b")||t._.includes(v," ib")?" ":"",T,x,D;for(v=v.replace(/\s?i?b/,""),T=0;T<=b.suffixes.length;T++)if(x=Math.pow(b.base,T),D=Math.pow(b.base,T+1),h===null||h===0||h>=x&&h<D){w+=b.suffixes[T],x>0&&(h=h/x);break}return E=t._.numberToFormat(h,v,y),E+w},unformat:function(h){var v=t._.stringToNumber(h),y,E;if(v){for(y=u.suffixes.length-1;y>=0;y--){if(t._.includes(h,u.suffixes[y])){E=Math.pow(u.base,y);break}if(t._.includes(h,f.suffixes[y])){E=Math.pow(f.base,y);break}}v*=E||1}return v}})}(),function(){t.register("format","currency",{regexps:{format:/(\$)/},format:function(u,f,m){var g=t.locales[t.options.currentLocale],h={before:f.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:f.match(/([\+|\-|\)|\s|\$]*)$/)[0]},v,y,E;for(f=f.replace(/\s?\$\s?/,""),v=t._.numberToFormat(u,f,m),u>=0?(h.before=h.before.replace(/[\-\(]/,""),h.after=h.after.replace(/[\-\)]/,"")):u<0&&!t._.includes(h.before,"-")&&!t._.includes(h.before,"(")&&(h.before="-"+h.before),E=0;E<h.before.length;E++)switch(y=h.before[E],y){case"$":v=t._.insert(v,g.currency.symbol,E);break;case" ":v=t._.insert(v," ",E+g.currency.symbol.length-1);break}for(E=h.after.length-1;E>=0;E--)switch(y=h.after[E],y){case"$":v=E===h.after.length-1?v+g.currency.symbol:t._.insert(v,g.currency.symbol,-(h.after.length-(1+E)));break;case" ":v=E===h.after.length-1?v+" ":t._.insert(v," ",-(h.after.length-(1+E)+g.currency.symbol.length-1));break}return v}})}(),function(){t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(u,f,m){var g,h=typeof u=="number"&&!t._.isNaN(u)?u.toExponential():"0e+0",v=h.split("e");return f=f.replace(/e[\+|\-]{1}0/,""),g=t._.numberToFormat(Number(v[0]),f,m),g+"e"+v[1]},unformat:function(u){var f=t._.includes(u,"e+")?u.split("e+"):u.split("e-"),m=Number(f[0]),g=Number(f[1]);g=t._.includes(u,"e-")?g*=-1:g;function h(v,y,E,b){var w=t._.correctionFactor(v,y),T=v*w*(y*w)/(w*w);return T}return t._.reduce([m,Math.pow(10,g)],h,1)}})}(),function(){t.register("format","ordinal",{regexps:{format:/(o)/},format:function(u,f,m){var g=t.locales[t.options.currentLocale],h,v=t._.includes(f," o")?" ":"";return f=f.replace(/\s?o/,""),v+=g.ordinal(u),h=t._.numberToFormat(u,f,m),h+v}})}(),function(){t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(u,f,m){var g=t._.includes(f," %")?" ":"",h;return t.options.scalePercentBy100&&(u=u*100),f=f.replace(/\s?\%/,""),h=t._.numberToFormat(u,f,m),t._.includes(h,")")?(h=h.split(""),h.splice(-1,0,g+"%"),h=h.join("")):h=h+g+"%",h},unformat:function(u){var f=t._.stringToNumber(u);return t.options.scalePercentBy100?f*.01:f}})}(),function(){t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(u,f,m){var g=Math.floor(u/60/60),h=Math.floor((u-g*60*60)/60),v=Math.round(u-g*60*60-h*60);return g+":"+(h<10?"0"+h:h)+":"+(v<10?"0"+v:v)},unformat:function(u){var f=u.split(":"),m=0;return f.length===3?(m=m+Number(f[0])*60*60,m=m+Number(f[1])*60,m=m+Number(f[2])):f.length===2&&(m=m+Number(f[0])*60,m=m+Number(f[1])),Number(m)}})}(),t})}(Ga)),Ga.exports}var Fy=Ly();const bt=xo(Fy);//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Fp;function le(){return Fp.apply(null,arguments)}function Gy(e){Fp=e}function ei(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Ir(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function vt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function vc(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(vt(e,t))return!1;return!0}function bn(e){return e===void 0}function Gi(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Do(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Gp(e,t){var n=[],i,r=e.length;for(i=0;i<r;++i)n.push(t(e[i],i));return n}function Ji(e,t){for(var n in t)vt(t,n)&&(e[n]=t[n]);return vt(t,"toString")&&(e.toString=t.toString),vt(t,"valueOf")&&(e.valueOf=t.valueOf),e}function gi(e,t,n,i){return ag(e,t,n,i,!0).utc()}function Hy(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function nt(e){return e._pf==null&&(e._pf=Hy()),e._pf}var Fu;Array.prototype.some?Fu=Array.prototype.some:Fu=function(e){var t=Object(this),n=t.length>>>0,i;for(i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};function yc(e){var t=null,n=!1,i=e._d&&!isNaN(e._d.getTime());if(i&&(t=nt(e),n=Fu.call(t.parsedDateParts,function(r){return r!=null}),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(i=i&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=i;else return i;return e._isValid}function xl(e){var t=gi(NaN);return e!=null?Ji(nt(t),e):nt(t).userInvalidated=!0,t}var Zd=le.momentProperties=[],lu=!1;function _c(e,t){var n,i,r,s=Zd.length;if(bn(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),bn(t._i)||(e._i=t._i),bn(t._f)||(e._f=t._f),bn(t._l)||(e._l=t._l),bn(t._strict)||(e._strict=t._strict),bn(t._tzm)||(e._tzm=t._tzm),bn(t._isUTC)||(e._isUTC=t._isUTC),bn(t._offset)||(e._offset=t._offset),bn(t._pf)||(e._pf=nt(t)),bn(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)i=Zd[n],r=t[i],bn(r)||(e[i]=r);return e}function To(e){_c(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),lu===!1&&(lu=!0,le.updateOffset(this),lu=!1)}function ti(e){return e instanceof To||e!=null&&e._isAMomentObject!=null}function Hp(e){le.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Un(e,t){var n=!0;return Ji(function(){if(le.deprecationHandler!=null&&le.deprecationHandler(null,e),n){var i=[],r,s,a,l=arguments.length;for(s=0;s<l;s++){if(r="",typeof arguments[s]=="object"){r+=`
[`+s+"] ";for(a in arguments[0])vt(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[s];i.push(r)}Hp(e+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var ef={};function Bp(e,t){le.deprecationHandler!=null&&le.deprecationHandler(e,t),ef[e]||(Hp(t),ef[e]=!0)}le.suppressDeprecationWarnings=!1;le.deprecationHandler=null;function mi(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function By(e){var t,n;for(n in e)vt(e,n)&&(t=e[n],mi(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Gu(e,t){var n=Ji({},e),i;for(i in t)vt(t,i)&&(Ir(e[i])&&Ir(t[i])?(n[i]={},Ji(n[i],e[i]),Ji(n[i],t[i])):t[i]!=null?n[i]=t[i]:delete n[i]);for(i in e)vt(e,i)&&!vt(t,i)&&Ir(e[i])&&(n[i]=Ji({},n[i]));return n}function bc(e){e!=null&&this.set(e)}var Hu;Object.keys?Hu=Object.keys:Hu=function(e){var t,n=[];for(t in e)vt(e,t)&&n.push(t);return n};var Wy={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Uy(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return mi(i)?i.call(t,n):i}function pi(e,t,n){var i=""+Math.abs(e),r=t-i.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var wc=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$o=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,uu={},ss={};function $e(e,t,n,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),e&&(ss[e]=r),t&&(ss[t[0]]=function(){return pi(r.apply(this,arguments),t[1],t[2])}),n&&(ss[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function jy(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Yy(e){var t=e.match(wc),n,i;for(n=0,i=t.length;n<i;n++)ss[t[n]]?t[n]=ss[t[n]]:t[n]=jy(t[n]);return function(r){var s="",a;for(a=0;a<i;a++)s+=mi(t[a])?t[a].call(r,e):t[a];return s}}function Ha(e,t){return e.isValid()?(t=Wp(t,e.localeData()),uu[t]=uu[t]||Yy(t),uu[t](e)):e.localeData().invalidDate()}function Wp(e,t){var n=5;function i(r){return t.longDateFormat(r)||r}for($o.lastIndex=0;n>=0&&$o.test(e);)e=e.replace($o,i),$o.lastIndex=0,n-=1;return e}var zy={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function qy(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(wc).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[e])}var Qy="Invalid date";function $y(){return this._invalidDate}var Vy="%d",Ky=/\d{1,2}/;function Jy(e){return this._ordinal.replace("%d",e)}var Xy={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Zy(e,t,n,i){var r=this._relativeTime[n];return mi(r)?r(e,t,n,i):r.replace(/%d/i,e)}function e_(e,t){var n=this._relativeTime[e>0?"future":"past"];return mi(n)?n(t):n.replace(/%s/i,t)}var tf={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function jn(e){return typeof e=="string"?tf[e]||tf[e.toLowerCase()]:void 0}function Cc(e){var t={},n,i;for(i in e)vt(e,i)&&(n=jn(i),n&&(t[n]=e[i]));return t}var t_={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function n_(e){var t=[],n;for(n in e)vt(e,n)&&t.push({unit:n,priority:t_[n]});return t.sort(function(i,r){return i.priority-r.priority}),t}var Up=/\d/,Mn=/\d\d/,jp=/\d{3}/,Ec=/\d{4}/,Dl=/[+-]?\d{6}/,It=/\d\d?/,Yp=/\d\d\d\d?/,zp=/\d\d\d\d\d\d?/,Tl=/\d{1,3}/,xc=/\d{1,4}/,Sl=/[+-]?\d{1,6}/,vs=/\d+/,kl=/[+-]?\d+/,i_=/Z|[+-]\d\d:?\d\d/gi,Ol=/Z|[+-]\d\d(?::?\d\d)?/gi,r_=/[+-]?\d+(\.\d{1,3})?/,So=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ys=/^[1-9]\d?/,Dc=/^([1-9]\d|\d)/,il;il={};function Ge(e,t,n){il[e]=mi(t)?t:function(i,r){return i&&n?n:t}}function s_(e,t){return vt(il,e)?il[e](t._strict,t._locale):new RegExp(o_(e))}function o_(e){return Mi(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,i,r,s){return n||i||r||s}))}function Mi(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Wn(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ut(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=Wn(t)),n}var Bu={};function Dt(e,t){var n,i=t,r;for(typeof e=="string"&&(e=[e]),Gi(t)&&(i=function(s,a){a[t]=ut(s)}),r=e.length,n=0;n<r;n++)Bu[e[n]]=i}function ko(e,t){Dt(e,function(n,i,r,s){r._w=r._w||{},t(n,r._w,r,s)})}function a_(e,t,n){t!=null&&vt(Bu,e)&&Bu[e](t,n._a,n,e)}function Il(e){return e%4===0&&e%100!==0||e%400===0}var ln=0,Oi=1,ci=2,Vt=3,Jn=4,Ii=5,Tr=6,l_=7,u_=8;$e("Y",0,0,function(){var e=this.year();return e<=9999?pi(e,4):"+"+e});$e(0,["YY",2],0,function(){return this.year()%100});$e(0,["YYYY",4],0,"year");$e(0,["YYYYY",5],0,"year");$e(0,["YYYYYY",6,!0],0,"year");Ge("Y",kl);Ge("YY",It,Mn);Ge("YYYY",xc,Ec);Ge("YYYYY",Sl,Dl);Ge("YYYYYY",Sl,Dl);Dt(["YYYYY","YYYYYY"],ln);Dt("YYYY",function(e,t){t[ln]=e.length===2?le.parseTwoDigitYear(e):ut(e)});Dt("YY",function(e,t){t[ln]=le.parseTwoDigitYear(e)});Dt("Y",function(e,t){t[ln]=parseInt(e,10)});function Zs(e){return Il(e)?366:365}le.parseTwoDigitYear=function(e){return ut(e)+(ut(e)>68?1900:2e3)};var qp=_s("FullYear",!0);function c_(){return Il(this.year())}function _s(e,t){return function(n){return n!=null?(Qp(this,e,n),le.updateOffset(this,t),this):oo(this,e)}}function oo(e,t){if(!e.isValid())return NaN;var n=e._d,i=e._isUTC;switch(t){case"Milliseconds":return i?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return i?n.getUTCSeconds():n.getSeconds();case"Minutes":return i?n.getUTCMinutes():n.getMinutes();case"Hours":return i?n.getUTCHours():n.getHours();case"Date":return i?n.getUTCDate():n.getDate();case"Day":return i?n.getUTCDay():n.getDay();case"Month":return i?n.getUTCMonth():n.getMonth();case"FullYear":return i?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Qp(e,t,n){var i,r,s,a,l;if(!(!e.isValid()||isNaN(n))){switch(i=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?i.setUTCMilliseconds(n):i.setMilliseconds(n));case"Seconds":return void(r?i.setUTCSeconds(n):i.setSeconds(n));case"Minutes":return void(r?i.setUTCMinutes(n):i.setMinutes(n));case"Hours":return void(r?i.setUTCHours(n):i.setHours(n));case"Date":return void(r?i.setUTCDate(n):i.setDate(n));case"FullYear":break;default:return}s=n,a=e.month(),l=e.date(),l=l===29&&a===1&&!Il(s)?28:l,r?i.setUTCFullYear(s,a,l):i.setFullYear(s,a,l)}}function d_(e){return e=jn(e),mi(this[e])?this[e]():this}function f_(e,t){if(typeof e=="object"){e=Cc(e);var n=n_(e),i,r=n.length;for(i=0;i<r;i++)this[n[i].unit](e[n[i].unit])}else if(e=jn(e),mi(this[e]))return this[e](t);return this}function h_(e,t){return(e%t+t)%t}var Ht;Array.prototype.indexOf?Ht=Array.prototype.indexOf:Ht=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Tc(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=h_(t,12);return e+=(t-n)/12,n===1?Il(e)?29:28:31-n%7%2}$e("M",["MM",2],"Mo",function(){return this.month()+1});$e("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});$e("MMMM",0,0,function(e){return this.localeData().months(this,e)});Ge("M",It,ys);Ge("MM",It,Mn);Ge("MMM",function(e,t){return t.monthsShortRegex(e)});Ge("MMMM",function(e,t){return t.monthsRegex(e)});Dt(["M","MM"],function(e,t){t[Oi]=ut(e)-1});Dt(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);r!=null?t[Oi]=r:nt(n).invalidMonth=e});var p_="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),$p="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Vp=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,g_=So,m_=So;function v_(e,t){return e?ei(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Vp).test(t)?"format":"standalone"][e.month()]:ei(this._months)?this._months:this._months.standalone}function y_(e,t){return e?ei(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Vp.test(t)?"format":"standalone"][e.month()]:ei(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function __(e,t,n){var i,r,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=gi([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return n?t==="MMM"?(r=Ht.call(this._shortMonthsParse,a),r!==-1?r:null):(r=Ht.call(this._longMonthsParse,a),r!==-1?r:null):t==="MMM"?(r=Ht.call(this._shortMonthsParse,a),r!==-1?r:(r=Ht.call(this._longMonthsParse,a),r!==-1?r:null)):(r=Ht.call(this._longMonthsParse,a),r!==-1?r:(r=Ht.call(this._shortMonthsParse,a),r!==-1?r:null))}function b_(e,t,n){var i,r,s;if(this._monthsParseExact)return __.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=gi([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(n&&t==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function Kp(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=ut(t);else if(t=e.localeData().monthsParse(t),!Gi(t))return e}var n=t,i=e.date();return i=i<29?i:Math.min(i,Tc(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,i):e._d.setMonth(n,i),e}function Jp(e){return e!=null?(Kp(this,e),le.updateOffset(this,!0),this):oo(this,"Month")}function w_(){return Tc(this.year(),this.month())}function C_(e){return this._monthsParseExact?(vt(this,"_monthsRegex")||Xp.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(vt(this,"_monthsShortRegex")||(this._monthsShortRegex=g_),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function E_(e){return this._monthsParseExact?(vt(this,"_monthsRegex")||Xp.call(this),e?this._monthsStrictRegex:this._monthsRegex):(vt(this,"_monthsRegex")||(this._monthsRegex=m_),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Xp(){function e(c,u){return u.length-c.length}var t=[],n=[],i=[],r,s,a,l;for(r=0;r<12;r++)s=gi([2e3,r]),a=Mi(this.monthsShort(s,"")),l=Mi(this.months(s,"")),t.push(a),n.push(l),i.push(l),i.push(a);t.sort(e),n.sort(e),i.sort(e),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function x_(e,t,n,i,r,s,a){var l;return e<100&&e>=0?(l=new Date(e+400,t,n,i,r,s,a),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,n,i,r,s,a),l}function ao(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function rl(e,t,n){var i=7+t-n,r=(7+ao(e,0,i).getUTCDay()-t)%7;return-r+i-1}function Zp(e,t,n,i,r){var s=(7+n-i)%7,a=rl(e,i,r),l=1+7*(t-1)+s+a,c,u;return l<=0?(c=e-1,u=Zs(c)+l):l>Zs(e)?(c=e+1,u=l-Zs(e)):(c=e,u=l),{year:c,dayOfYear:u}}function lo(e,t,n){var i=rl(e.year(),t,n),r=Math.floor((e.dayOfYear()-i-1)/7)+1,s,a;return r<1?(a=e.year()-1,s=r+Ni(a,t,n)):r>Ni(e.year(),t,n)?(s=r-Ni(e.year(),t,n),a=e.year()+1):(a=e.year(),s=r),{week:s,year:a}}function Ni(e,t,n){var i=rl(e,t,n),r=rl(e+1,t,n);return(Zs(e)-i+r)/7}$e("w",["ww",2],"wo","week");$e("W",["WW",2],"Wo","isoWeek");Ge("w",It,ys);Ge("ww",It,Mn);Ge("W",It,ys);Ge("WW",It,Mn);ko(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=ut(e)});function D_(e){return lo(e,this._week.dow,this._week.doy).week}var T_={dow:0,doy:6};function S_(){return this._week.dow}function k_(){return this._week.doy}function O_(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function I_(e){var t=lo(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}$e("d",0,"do","day");$e("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});$e("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});$e("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});$e("e",0,0,"weekday");$e("E",0,0,"isoWeekday");Ge("d",It);Ge("e",It);Ge("E",It);Ge("dd",function(e,t){return t.weekdaysMinRegex(e)});Ge("ddd",function(e,t){return t.weekdaysShortRegex(e)});Ge("dddd",function(e,t){return t.weekdaysRegex(e)});ko(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);r!=null?t.d=r:nt(n).invalidWeekday=e});ko(["d","e","E"],function(e,t,n,i){t[i]=ut(e)});function R_(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function A_(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Sc(e,t){return e.slice(t,7).concat(e.slice(0,t))}var P_="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),eg="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),M_="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),N_=So,L_=So,F_=So;function G_(e,t){var n=ei(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Sc(n,this._week.dow):e?n[e.day()]:n}function H_(e){return e===!0?Sc(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function B_(e){return e===!0?Sc(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function W_(e,t,n){var i,r,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=gi([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return n?t==="dddd"?(r=Ht.call(this._weekdaysParse,a),r!==-1?r:null):t==="ddd"?(r=Ht.call(this._shortWeekdaysParse,a),r!==-1?r:null):(r=Ht.call(this._minWeekdaysParse,a),r!==-1?r:null):t==="dddd"?(r=Ht.call(this._weekdaysParse,a),r!==-1||(r=Ht.call(this._shortWeekdaysParse,a),r!==-1)?r:(r=Ht.call(this._minWeekdaysParse,a),r!==-1?r:null)):t==="ddd"?(r=Ht.call(this._shortWeekdaysParse,a),r!==-1||(r=Ht.call(this._weekdaysParse,a),r!==-1)?r:(r=Ht.call(this._minWeekdaysParse,a),r!==-1?r:null)):(r=Ht.call(this._minWeekdaysParse,a),r!==-1||(r=Ht.call(this._weekdaysParse,a),r!==-1)?r:(r=Ht.call(this._shortWeekdaysParse,a),r!==-1?r:null))}function U_(e,t,n){var i,r,s;if(this._weekdaysParseExact)return W_.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=gi([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[i].test(e))return i;if(n&&t==="ddd"&&this._shortWeekdaysParse[i].test(e))return i;if(n&&t==="dd"&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function j_(e){if(!this.isValid())return e!=null?this:NaN;var t=oo(this,"Day");return e!=null?(e=R_(e,this.localeData()),this.add(e-t,"d")):t}function Y_(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function z_(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=A_(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function q_(e){return this._weekdaysParseExact?(vt(this,"_weekdaysRegex")||kc.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(vt(this,"_weekdaysRegex")||(this._weekdaysRegex=N_),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Q_(e){return this._weekdaysParseExact?(vt(this,"_weekdaysRegex")||kc.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(vt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=L_),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function $_(e){return this._weekdaysParseExact?(vt(this,"_weekdaysRegex")||kc.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(vt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=F_),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function kc(){function e(f,m){return m.length-f.length}var t=[],n=[],i=[],r=[],s,a,l,c,u;for(s=0;s<7;s++)a=gi([2e3,1]).day(s),l=Mi(this.weekdaysMin(a,"")),c=Mi(this.weekdaysShort(a,"")),u=Mi(this.weekdays(a,"")),t.push(l),n.push(c),i.push(u),r.push(l),r.push(c),r.push(u);t.sort(e),n.sort(e),i.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Oc(){return this.hours()%12||12}function V_(){return this.hours()||24}$e("H",["HH",2],0,"hour");$e("h",["hh",2],0,Oc);$e("k",["kk",2],0,V_);$e("hmm",0,0,function(){return""+Oc.apply(this)+pi(this.minutes(),2)});$e("hmmss",0,0,function(){return""+Oc.apply(this)+pi(this.minutes(),2)+pi(this.seconds(),2)});$e("Hmm",0,0,function(){return""+this.hours()+pi(this.minutes(),2)});$e("Hmmss",0,0,function(){return""+this.hours()+pi(this.minutes(),2)+pi(this.seconds(),2)});function tg(e,t){$e(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}tg("a",!0);tg("A",!1);function ng(e,t){return t._meridiemParse}Ge("a",ng);Ge("A",ng);Ge("H",It,Dc);Ge("h",It,ys);Ge("k",It,ys);Ge("HH",It,Mn);Ge("hh",It,Mn);Ge("kk",It,Mn);Ge("hmm",Yp);Ge("hmmss",zp);Ge("Hmm",Yp);Ge("Hmmss",zp);Dt(["H","HH"],Vt);Dt(["k","kk"],function(e,t,n){var i=ut(e);t[Vt]=i===24?0:i});Dt(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});Dt(["h","hh"],function(e,t,n){t[Vt]=ut(e),nt(n).bigHour=!0});Dt("hmm",function(e,t,n){var i=e.length-2;t[Vt]=ut(e.substr(0,i)),t[Jn]=ut(e.substr(i)),nt(n).bigHour=!0});Dt("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[Vt]=ut(e.substr(0,i)),t[Jn]=ut(e.substr(i,2)),t[Ii]=ut(e.substr(r)),nt(n).bigHour=!0});Dt("Hmm",function(e,t,n){var i=e.length-2;t[Vt]=ut(e.substr(0,i)),t[Jn]=ut(e.substr(i))});Dt("Hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[Vt]=ut(e.substr(0,i)),t[Jn]=ut(e.substr(i,2)),t[Ii]=ut(e.substr(r))});function K_(e){return(e+"").toLowerCase().charAt(0)==="p"}var J_=/[ap]\.?m?\.?/i,X_=_s("Hours",!0);function Z_(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var ig={calendar:Wy,longDateFormat:zy,invalidDate:Qy,ordinal:Vy,dayOfMonthOrdinalParse:Ky,relativeTime:Xy,months:p_,monthsShort:$p,week:T_,weekdays:P_,weekdaysMin:M_,weekdaysShort:eg,meridiemParse:J_},Rt={},Ps={},uo;function eb(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function nf(e){return e&&e.toLowerCase().replace("_","-")}function tb(e){for(var t=0,n,i,r,s;t<e.length;){for(s=nf(e[t]).split("-"),n=s.length,i=nf(e[t+1]),i=i?i.split("-"):null;n>0;){if(r=Rl(s.slice(0,n).join("-")),r)return r;if(i&&i.length>=n&&eb(s,i)>=n-1)break;n--}t++}return uo}function nb(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Rl(e){var t=null,n;if(Rt[e]===void 0&&typeof tl<"u"&&tl&&tl.exports&&nb(e))try{t=uo._abbr,n=require,n("./locale/"+e),ir(t)}catch{Rt[e]=null}return Rt[e]}function ir(e,t){var n;return e&&(bn(t)?n=Bi(e):n=Ic(e,t),n?uo=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),uo._abbr}function Ic(e,t){if(t!==null){var n,i=ig;if(t.abbr=e,Rt[e]!=null)Bp("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Rt[e]._config;else if(t.parentLocale!=null)if(Rt[t.parentLocale]!=null)i=Rt[t.parentLocale]._config;else if(n=Rl(t.parentLocale),n!=null)i=n._config;else return Ps[t.parentLocale]||(Ps[t.parentLocale]=[]),Ps[t.parentLocale].push({name:e,config:t}),null;return Rt[e]=new bc(Gu(i,t)),Ps[e]&&Ps[e].forEach(function(r){Ic(r.name,r.config)}),ir(e),Rt[e]}else return delete Rt[e],null}function ib(e,t){if(t!=null){var n,i,r=ig;Rt[e]!=null&&Rt[e].parentLocale!=null?Rt[e].set(Gu(Rt[e]._config,t)):(i=Rl(e),i!=null&&(r=i._config),t=Gu(r,t),i==null&&(t.abbr=e),n=new bc(t),n.parentLocale=Rt[e],Rt[e]=n),ir(e)}else Rt[e]!=null&&(Rt[e].parentLocale!=null?(Rt[e]=Rt[e].parentLocale,e===ir()&&ir(e)):Rt[e]!=null&&delete Rt[e]);return Rt[e]}function Bi(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return uo;if(!ei(e)){if(t=Rl(e),t)return t;e=[e]}return tb(e)}function rb(){return Hu(Rt)}function Rc(e){var t,n=e._a;return n&&nt(e).overflow===-2&&(t=n[Oi]<0||n[Oi]>11?Oi:n[ci]<1||n[ci]>Tc(n[ln],n[Oi])?ci:n[Vt]<0||n[Vt]>24||n[Vt]===24&&(n[Jn]!==0||n[Ii]!==0||n[Tr]!==0)?Vt:n[Jn]<0||n[Jn]>59?Jn:n[Ii]<0||n[Ii]>59?Ii:n[Tr]<0||n[Tr]>999?Tr:-1,nt(e)._overflowDayOfYear&&(t<ln||t>ci)&&(t=ci),nt(e)._overflowWeeks&&t===-1&&(t=l_),nt(e)._overflowWeekday&&t===-1&&(t=u_),nt(e).overflow=t),e}var sb=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ob=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ab=/Z|[+-]\d\d(?::?\d\d)?/,Vo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],cu=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],lb=/^\/?Date\((-?\d+)/i,ub=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,cb={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function rg(e){var t,n,i=e._i,r=sb.exec(i)||ob.exec(i),s,a,l,c,u=Vo.length,f=cu.length;if(r){for(nt(e).iso=!0,t=0,n=u;t<n;t++)if(Vo[t][1].exec(r[1])){a=Vo[t][0],s=Vo[t][2]!==!1;break}if(a==null){e._isValid=!1;return}if(r[3]){for(t=0,n=f;t<n;t++)if(cu[t][1].exec(r[3])){l=(r[2]||" ")+cu[t][0];break}if(l==null){e._isValid=!1;return}}if(!s&&l!=null){e._isValid=!1;return}if(r[4])if(ab.exec(r[4]))c="Z";else{e._isValid=!1;return}e._f=a+(l||"")+(c||""),Pc(e)}else e._isValid=!1}function db(e,t,n,i,r,s){var a=[fb(e),$p.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return s&&a.push(parseInt(s,10)),a}function fb(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function hb(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function pb(e,t,n){if(e){var i=eg.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(i!==r)return nt(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function gb(e,t,n){if(e)return cb[e];if(t)return 0;var i=parseInt(n,10),r=i%100,s=(i-r)/100;return s*60+r}function sg(e){var t=ub.exec(hb(e._i)),n;if(t){if(n=db(t[4],t[3],t[2],t[5],t[6],t[7]),!pb(t[1],n,e))return;e._a=n,e._tzm=gb(t[8],t[9],t[10]),e._d=ao.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),nt(e).rfc2822=!0}else e._isValid=!1}function mb(e){var t=lb.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(rg(e),e._isValid===!1)delete e._isValid;else return;if(sg(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:le.createFromInputFallback(e)}le.createFromInputFallback=Un("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function ts(e,t,n){return e??t??n}function vb(e){var t=new Date(le.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Ac(e){var t,n,i=[],r,s,a;if(!e._d){for(r=vb(e),e._w&&e._a[ci]==null&&e._a[Oi]==null&&yb(e),e._dayOfYear!=null&&(a=ts(e._a[ln],r[ln]),(e._dayOfYear>Zs(a)||e._dayOfYear===0)&&(nt(e)._overflowDayOfYear=!0),n=ao(a,0,e._dayOfYear),e._a[Oi]=n.getUTCMonth(),e._a[ci]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=i[t]=r[t];for(;t<7;t++)e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Vt]===24&&e._a[Jn]===0&&e._a[Ii]===0&&e._a[Tr]===0&&(e._nextDay=!0,e._a[Vt]=0),e._d=(e._useUTC?ao:x_).apply(null,i),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Vt]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==s&&(nt(e).weekdayMismatch=!0)}}function yb(e){var t,n,i,r,s,a,l,c,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,a=4,n=ts(t.GG,e._a[ln],lo(Ot(),1,4).year),i=ts(t.W,1),r=ts(t.E,1),(r<1||r>7)&&(c=!0)):(s=e._locale._week.dow,a=e._locale._week.doy,u=lo(Ot(),s,a),n=ts(t.gg,e._a[ln],u.year),i=ts(t.w,u.week),t.d!=null?(r=t.d,(r<0||r>6)&&(c=!0)):t.e!=null?(r=t.e+s,(t.e<0||t.e>6)&&(c=!0)):r=s),i<1||i>Ni(n,s,a)?nt(e)._overflowWeeks=!0:c!=null?nt(e)._overflowWeekday=!0:(l=Zp(n,i,r,s,a),e._a[ln]=l.year,e._dayOfYear=l.dayOfYear)}le.ISO_8601=function(){};le.RFC_2822=function(){};function Pc(e){if(e._f===le.ISO_8601){rg(e);return}if(e._f===le.RFC_2822){sg(e);return}e._a=[],nt(e).empty=!0;var t=""+e._i,n,i,r,s,a,l=t.length,c=0,u,f;for(r=Wp(e._f,e._locale).match(wc)||[],f=r.length,n=0;n<f;n++)s=r[n],i=(t.match(s_(s,e))||[])[0],i&&(a=t.substr(0,t.indexOf(i)),a.length>0&&nt(e).unusedInput.push(a),t=t.slice(t.indexOf(i)+i.length),c+=i.length),ss[s]?(i?nt(e).empty=!1:nt(e).unusedTokens.push(s),a_(s,i,e)):e._strict&&!i&&nt(e).unusedTokens.push(s);nt(e).charsLeftOver=l-c,t.length>0&&nt(e).unusedInput.push(t),e._a[Vt]<=12&&nt(e).bigHour===!0&&e._a[Vt]>0&&(nt(e).bigHour=void 0),nt(e).parsedDateParts=e._a.slice(0),nt(e).meridiem=e._meridiem,e._a[Vt]=_b(e._locale,e._a[Vt],e._meridiem),u=nt(e).era,u!==null&&(e._a[ln]=e._locale.erasConvertYear(u,e._a[ln])),Ac(e),Rc(e)}function _b(e,t,n){var i;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(i=e.isPM(n),i&&t<12&&(t+=12),!i&&t===12&&(t=0)),t)}function bb(e){var t,n,i,r,s,a,l=!1,c=e._f.length;if(c===0){nt(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<c;r++)s=0,a=!1,t=_c({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],Pc(t),yc(t)&&(a=!0),s+=nt(t).charsLeftOver,s+=nt(t).unusedTokens.length*10,nt(t).score=s,l?s<i&&(i=s,n=t):(i==null||s<i||a)&&(i=s,n=t,a&&(l=!0));Ji(e,n||t)}function wb(e){if(!e._d){var t=Cc(e._i),n=t.day===void 0?t.date:t.day;e._a=Gp([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(i){return i&&parseInt(i,10)}),Ac(e)}}function Cb(e){var t=new To(Rc(og(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function og(e){var t=e._i,n=e._f;return e._locale=e._locale||Bi(e._l),t===null||n===void 0&&t===""?xl({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),ti(t)?new To(Rc(t)):(Do(t)?e._d=t:ei(n)?bb(e):n?Pc(e):Eb(e),yc(e)||(e._d=null),e))}function Eb(e){var t=e._i;bn(t)?e._d=new Date(le.now()):Do(t)?e._d=new Date(t.valueOf()):typeof t=="string"?mb(e):ei(t)?(e._a=Gp(t.slice(0),function(n){return parseInt(n,10)}),Ac(e)):Ir(t)?wb(e):Gi(t)?e._d=new Date(t):le.createFromInputFallback(e)}function ag(e,t,n,i,r){var s={};return(t===!0||t===!1)&&(i=t,t=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(Ir(e)&&vc(e)||ei(e)&&e.length===0)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=e,s._f=t,s._strict=i,Cb(s)}function Ot(e,t,n,i){return ag(e,t,n,i,!1)}var xb=Un("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:xl()}),Db=Un("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:xl()});function lg(e,t){var n,i;if(t.length===1&&ei(t[0])&&(t=t[0]),!t.length)return Ot();for(n=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][e](n))&&(n=t[i]);return n}function Tb(){var e=[].slice.call(arguments,0);return lg("isBefore",e)}function Sb(){var e=[].slice.call(arguments,0);return lg("isAfter",e)}var kb=function(){return Date.now?Date.now():+new Date},Ms=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ob(e){var t,n=!1,i,r=Ms.length;for(t in e)if(vt(e,t)&&!(Ht.call(Ms,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(i=0;i<r;++i)if(e[Ms[i]]){if(n)return!1;parseFloat(e[Ms[i]])!==ut(e[Ms[i]])&&(n=!0)}return!0}function Ib(){return this._isValid}function Rb(){return ii(NaN)}function Al(e){var t=Cc(e),n=t.year||0,i=t.quarter||0,r=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,l=t.hour||0,c=t.minute||0,u=t.second||0,f=t.millisecond||0;this._isValid=Ob(t),this._milliseconds=+f+u*1e3+c*6e4+l*1e3*60*60,this._days=+a+s*7,this._months=+r+i*3+n*12,this._data={},this._locale=Bi(),this._bubble()}function Ba(e){return e instanceof Al}function Wu(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Ab(e,t,n){var i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0,a;for(a=0;a<i;a++)ut(e[a])!==ut(t[a])&&s++;return s+r}function ug(e,t){$e(e,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+pi(~~(n/60),2)+t+pi(~~n%60,2)})}ug("Z",":");ug("ZZ","");Ge("Z",Ol);Ge("ZZ",Ol);Dt(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Mc(Ol,e)});var Pb=/([\+\-]|\d\d)/gi;function Mc(e,t){var n=(t||"").match(e),i,r,s;return n===null?null:(i=n[n.length-1]||[],r=(i+"").match(Pb)||["-",0,0],s=+(r[1]*60)+ut(r[2]),s===0?0:r[0]==="+"?s:-s)}function Nc(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(ti(e)||Do(e)?e.valueOf():Ot(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),le.updateOffset(n,!1),n):Ot(e).local()}function Uu(e){return-Math.round(e._d.getTimezoneOffset())}le.updateOffset=function(){};function Mb(e,t,n){var i=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Mc(Ol,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(r=Uu(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==e&&(!t||this._changeInProgress?fg(this,ii(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,le.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:Uu(this)}function Nb(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Lb(e){return this.utcOffset(0,e)}function Fb(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Uu(this),"m")),this}function Gb(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Mc(i_,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Hb(e){return this.isValid()?(e=e?Ot(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Bb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Wb(){if(!bn(this._isDSTShifted))return this._isDSTShifted;var e={},t;return _c(e,this),e=og(e),e._a?(t=e._isUTC?gi(e._a):Ot(e._a),this._isDSTShifted=this.isValid()&&Ab(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ub(){return this.isValid()?!this._isUTC:!1}function jb(){return this.isValid()?this._isUTC:!1}function cg(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Yb=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,zb=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ii(e,t){var n=e,i=null,r,s,a;return Ba(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:Gi(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(i=Yb.exec(e))?(r=i[1]==="-"?-1:1,n={y:0,d:ut(i[ci])*r,h:ut(i[Vt])*r,m:ut(i[Jn])*r,s:ut(i[Ii])*r,ms:ut(Wu(i[Tr]*1e3))*r}):(i=zb.exec(e))?(r=i[1]==="-"?-1:1,n={y:yr(i[2],r),M:yr(i[3],r),w:yr(i[4],r),d:yr(i[5],r),h:yr(i[6],r),m:yr(i[7],r),s:yr(i[8],r)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(a=qb(Ot(n.from),Ot(n.to)),n={},n.ms=a.milliseconds,n.M=a.months),s=new Al(n),Ba(e)&&vt(e,"_locale")&&(s._locale=e._locale),Ba(e)&&vt(e,"_isValid")&&(s._isValid=e._isValid),s}ii.fn=Al.prototype;ii.invalid=Rb;function yr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function rf(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function qb(e,t){var n;return e.isValid()&&t.isValid()?(t=Nc(t,e),e.isBefore(t)?n=rf(e,t):(n=rf(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function dg(e,t){return function(n,i){var r,s;return i!==null&&!isNaN(+i)&&(Bp(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=i,i=s),r=ii(n,i),fg(this,r,e),this}}function fg(e,t,n,i){var r=t._milliseconds,s=Wu(t._days),a=Wu(t._months);e.isValid()&&(i=i??!0,a&&Kp(e,oo(e,"Month")+a*n),s&&Qp(e,"Date",oo(e,"Date")+s*n),r&&e._d.setTime(e._d.valueOf()+r*n),i&&le.updateOffset(e,s||a))}var Qb=dg(1,"add"),$b=dg(-1,"subtract");function hg(e){return typeof e=="string"||e instanceof String}function Vb(e){return ti(e)||Do(e)||hg(e)||Gi(e)||Jb(e)||Kb(e)||e===null||e===void 0}function Kb(e){var t=Ir(e)&&!vc(e),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,s,a=i.length;for(r=0;r<a;r+=1)s=i[r],n=n||vt(e,s);return t&&n}function Jb(e){var t=ei(e),n=!1;return t&&(n=e.filter(function(i){return!Gi(i)&&hg(e)}).length===0),t&&n}function Xb(e){var t=Ir(e)&&!vc(e),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,s;for(r=0;r<i.length;r+=1)s=i[r],n=n||vt(e,s);return t&&n}function Zb(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function e0(e,t){arguments.length===1&&(arguments[0]?Vb(arguments[0])?(e=arguments[0],t=void 0):Xb(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Ot(),i=Nc(n,this).startOf("day"),r=le.calendarFormat(this,i)||"sameElse",s=t&&(mi(t[r])?t[r].call(this,n):t[r]);return this.format(s||this.localeData().calendar(r,this,Ot(n)))}function t0(){return new To(this)}function n0(e,t){var n=ti(e)?e:Ot(e);return this.isValid()&&n.isValid()?(t=jn(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function i0(e,t){var n=ti(e)?e:Ot(e);return this.isValid()&&n.isValid()?(t=jn(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function r0(e,t,n,i){var r=ti(e)?e:Ot(e),s=ti(t)?t:Ot(t);return this.isValid()&&r.isValid()&&s.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,n):!this.isBefore(r,n))&&(i[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function s0(e,t){var n=ti(e)?e:Ot(e),i;return this.isValid()&&n.isValid()?(t=jn(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf())):!1}function o0(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function a0(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function l0(e,t,n){var i,r,s;if(!this.isValid())return NaN;if(i=Nc(e,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,t=jn(t),t){case"year":s=Wa(this,i)/12;break;case"month":s=Wa(this,i);break;case"quarter":s=Wa(this,i)/3;break;case"second":s=(this-i)/1e3;break;case"minute":s=(this-i)/6e4;break;case"hour":s=(this-i)/36e5;break;case"day":s=(this-i-r)/864e5;break;case"week":s=(this-i-r)/6048e5;break;default:s=this-i}return n?s:Wn(s)}function Wa(e,t){if(e.date()<t.date())return-Wa(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),i=e.clone().add(n,"months"),r,s;return t-i<0?(r=e.clone().add(n-1,"months"),s=(t-i)/(i-r)):(r=e.clone().add(n+1,"months"),s=(t-i)/(r-i)),-(n+s)||0}le.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";le.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function u0(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function c0(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Ha(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):mi(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ha(n,"Z")):Ha(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function d0(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,i,r,s;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=t+'[")]',this.format(n+i+r+s)}function f0(e){e||(e=this.isUtc()?le.defaultFormatUtc:le.defaultFormat);var t=Ha(this,e);return this.localeData().postformat(t)}function h0(e,t){return this.isValid()&&(ti(e)&&e.isValid()||Ot(e).isValid())?ii({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function p0(e){return this.from(Ot(),e)}function g0(e,t){return this.isValid()&&(ti(e)&&e.isValid()||Ot(e).isValid())?ii({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function m0(e){return this.to(Ot(),e)}function pg(e){var t;return e===void 0?this._locale._abbr:(t=Bi(e),t!=null&&(this._locale=t),this)}var gg=Un("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function mg(){return this._locale}var sl=1e3,os=60*sl,ol=60*os,vg=(365*400+97)*24*ol;function as(e,t){return(e%t+t)%t}function yg(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-vg:new Date(e,t,n).valueOf()}function _g(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-vg:Date.UTC(e,t,n)}function v0(e){var t,n;if(e=jn(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?_g:yg,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=as(t+(this._isUTC?0:this.utcOffset()*os),ol);break;case"minute":t=this._d.valueOf(),t-=as(t,os);break;case"second":t=this._d.valueOf(),t-=as(t,sl);break}return this._d.setTime(t),le.updateOffset(this,!0),this}function y0(e){var t,n;if(e=jn(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?_g:yg,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ol-as(t+(this._isUTC?0:this.utcOffset()*os),ol)-1;break;case"minute":t=this._d.valueOf(),t+=os-as(t,os)-1;break;case"second":t=this._d.valueOf(),t+=sl-as(t,sl)-1;break}return this._d.setTime(t),le.updateOffset(this,!0),this}function _0(){return this._d.valueOf()-(this._offset||0)*6e4}function b0(){return Math.floor(this.valueOf()/1e3)}function w0(){return new Date(this.valueOf())}function C0(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function E0(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function x0(){return this.isValid()?this.toISOString():null}function D0(){return yc(this)}function T0(){return Ji({},nt(this))}function S0(){return nt(this).overflow}function k0(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}$e("N",0,0,"eraAbbr");$e("NN",0,0,"eraAbbr");$e("NNN",0,0,"eraAbbr");$e("NNNN",0,0,"eraName");$e("NNNNN",0,0,"eraNarrow");$e("y",["y",1],"yo","eraYear");$e("y",["yy",2],0,"eraYear");$e("y",["yyy",3],0,"eraYear");$e("y",["yyyy",4],0,"eraYear");Ge("N",Lc);Ge("NN",Lc);Ge("NNN",Lc);Ge("NNNN",H0);Ge("NNNNN",B0);Dt(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?nt(n).era=r:nt(n).invalidEra=e});Ge("y",vs);Ge("yy",vs);Ge("yyy",vs);Ge("yyyy",vs);Ge("yo",W0);Dt(["y","yy","yyy","yyyy"],ln);Dt(["yo"],function(e,t,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[ln]=n._locale.eraYearOrdinalParse(e,r):t[ln]=parseInt(e,10)});function O0(e,t){var n,i,r,s=this._eras||Bi("en")._eras;for(n=0,i=s.length;n<i;++n){switch(typeof s[n].since){case"string":r=le(s[n].since).startOf("day"),s[n].since=r.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":r=le(s[n].until).startOf("day").valueOf(),s[n].until=r.valueOf();break}}return s}function I0(e,t,n){var i,r,s=this.eras(),a,l,c;for(e=e.toUpperCase(),i=0,r=s.length;i<r;++i)if(a=s[i].name.toUpperCase(),l=s[i].abbr.toUpperCase(),c=s[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(l===e)return s[i];break;case"NNNN":if(a===e)return s[i];break;case"NNNNN":if(c===e)return s[i];break}else if([a,l,c].indexOf(e)>=0)return s[i]}function R0(e,t){var n=e.since<=e.until?1:-1;return t===void 0?le(e.since).year():le(e.since).year()+(t-e.offset)*n}function A0(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].name;return""}function P0(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].narrow;return""}function M0(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].abbr;return""}function N0(){var e,t,n,i,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=r[e].since<=r[e].until?1:-1,i=this.clone().startOf("day").valueOf(),r[e].since<=i&&i<=r[e].until||r[e].until<=i&&i<=r[e].since)return(this.year()-le(r[e].since).year())*n+r[e].offset;return this.year()}function L0(e){return vt(this,"_erasNameRegex")||Fc.call(this),e?this._erasNameRegex:this._erasRegex}function F0(e){return vt(this,"_erasAbbrRegex")||Fc.call(this),e?this._erasAbbrRegex:this._erasRegex}function G0(e){return vt(this,"_erasNarrowRegex")||Fc.call(this),e?this._erasNarrowRegex:this._erasRegex}function Lc(e,t){return t.erasAbbrRegex(e)}function H0(e,t){return t.erasNameRegex(e)}function B0(e,t){return t.erasNarrowRegex(e)}function W0(e,t){return t._eraYearOrdinalRegex||vs}function Fc(){var e=[],t=[],n=[],i=[],r,s,a,l,c,u=this.eras();for(r=0,s=u.length;r<s;++r)a=Mi(u[r].name),l=Mi(u[r].abbr),c=Mi(u[r].narrow),t.push(a),e.push(l),n.push(c),i.push(a),i.push(l),i.push(c);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}$e(0,["gg",2],0,function(){return this.weekYear()%100});$e(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Pl(e,t){$e(0,[e,e.length],0,t)}Pl("gggg","weekYear");Pl("ggggg","weekYear");Pl("GGGG","isoWeekYear");Pl("GGGGG","isoWeekYear");Ge("G",kl);Ge("g",kl);Ge("GG",It,Mn);Ge("gg",It,Mn);Ge("GGGG",xc,Ec);Ge("gggg",xc,Ec);Ge("GGGGG",Sl,Dl);Ge("ggggg",Sl,Dl);ko(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=ut(e)});ko(["gg","GG"],function(e,t,n,i){t[i]=le.parseTwoDigitYear(e)});function U0(e){return bg.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function j0(e){return bg.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Y0(){return Ni(this.year(),1,4)}function z0(){return Ni(this.isoWeekYear(),1,4)}function q0(){var e=this.localeData()._week;return Ni(this.year(),e.dow,e.doy)}function Q0(){var e=this.localeData()._week;return Ni(this.weekYear(),e.dow,e.doy)}function bg(e,t,n,i,r){var s;return e==null?lo(this,i,r).year:(s=Ni(e,i,r),t>s&&(t=s),$0.call(this,e,t,n,i,r))}function $0(e,t,n,i,r){var s=Zp(e,t,n,i,r),a=ao(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}$e("Q",0,"Qo","quarter");Ge("Q",Up);Dt("Q",function(e,t){t[Oi]=(ut(e)-1)*3});function V0(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}$e("D",["DD",2],"Do","date");Ge("D",It,ys);Ge("DD",It,Mn);Ge("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Dt(["D","DD"],ci);Dt("Do",function(e,t){t[ci]=ut(e.match(It)[0])});var wg=_s("Date",!0);$e("DDD",["DDDD",3],"DDDo","dayOfYear");Ge("DDD",Tl);Ge("DDDD",jp);Dt(["DDD","DDDD"],function(e,t,n){n._dayOfYear=ut(e)});function K0(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}$e("m",["mm",2],0,"minute");Ge("m",It,Dc);Ge("mm",It,Mn);Dt(["m","mm"],Jn);var J0=_s("Minutes",!1);$e("s",["ss",2],0,"second");Ge("s",It,Dc);Ge("ss",It,Mn);Dt(["s","ss"],Ii);var X0=_s("Seconds",!1);$e("S",0,0,function(){return~~(this.millisecond()/100)});$e(0,["SS",2],0,function(){return~~(this.millisecond()/10)});$e(0,["SSS",3],0,"millisecond");$e(0,["SSSS",4],0,function(){return this.millisecond()*10});$e(0,["SSSSS",5],0,function(){return this.millisecond()*100});$e(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});$e(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});$e(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});$e(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Ge("S",Tl,Up);Ge("SS",Tl,Mn);Ge("SSS",Tl,jp);var Xi,Cg;for(Xi="SSSS";Xi.length<=9;Xi+="S")Ge(Xi,vs);function Z0(e,t){t[Tr]=ut(("0."+e)*1e3)}for(Xi="S";Xi.length<=9;Xi+="S")Dt(Xi,Z0);Cg=_s("Milliseconds",!1);$e("z",0,0,"zoneAbbr");$e("zz",0,0,"zoneName");function ew(){return this._isUTC?"UTC":""}function tw(){return this._isUTC?"Coordinated Universal Time":""}var De=To.prototype;De.add=Qb;De.calendar=e0;De.clone=t0;De.diff=l0;De.endOf=y0;De.format=f0;De.from=h0;De.fromNow=p0;De.to=g0;De.toNow=m0;De.get=d_;De.invalidAt=S0;De.isAfter=n0;De.isBefore=i0;De.isBetween=r0;De.isSame=s0;De.isSameOrAfter=o0;De.isSameOrBefore=a0;De.isValid=D0;De.lang=gg;De.locale=pg;De.localeData=mg;De.max=Db;De.min=xb;De.parsingFlags=T0;De.set=f_;De.startOf=v0;De.subtract=$b;De.toArray=C0;De.toObject=E0;De.toDate=w0;De.toISOString=c0;De.inspect=d0;typeof Symbol<"u"&&Symbol.for!=null&&(De[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});De.toJSON=x0;De.toString=u0;De.unix=b0;De.valueOf=_0;De.creationData=k0;De.eraName=A0;De.eraNarrow=P0;De.eraAbbr=M0;De.eraYear=N0;De.year=qp;De.isLeapYear=c_;De.weekYear=U0;De.isoWeekYear=j0;De.quarter=De.quarters=V0;De.month=Jp;De.daysInMonth=w_;De.week=De.weeks=O_;De.isoWeek=De.isoWeeks=I_;De.weeksInYear=q0;De.weeksInWeekYear=Q0;De.isoWeeksInYear=Y0;De.isoWeeksInISOWeekYear=z0;De.date=wg;De.day=De.days=j_;De.weekday=Y_;De.isoWeekday=z_;De.dayOfYear=K0;De.hour=De.hours=X_;De.minute=De.minutes=J0;De.second=De.seconds=X0;De.millisecond=De.milliseconds=Cg;De.utcOffset=Mb;De.utc=Lb;De.local=Fb;De.parseZone=Gb;De.hasAlignedHourOffset=Hb;De.isDST=Bb;De.isLocal=Ub;De.isUtcOffset=jb;De.isUtc=cg;De.isUTC=cg;De.zoneAbbr=ew;De.zoneName=tw;De.dates=Un("dates accessor is deprecated. Use date instead.",wg);De.months=Un("months accessor is deprecated. Use month instead",Jp);De.years=Un("years accessor is deprecated. Use year instead",qp);De.zone=Un("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Nb);De.isDSTShifted=Un("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Wb);function nw(e){return Ot(e*1e3)}function iw(){return Ot.apply(null,arguments).parseZone()}function Eg(e){return e}var yt=bc.prototype;yt.calendar=Uy;yt.longDateFormat=qy;yt.invalidDate=$y;yt.ordinal=Jy;yt.preparse=Eg;yt.postformat=Eg;yt.relativeTime=Zy;yt.pastFuture=e_;yt.set=By;yt.eras=O0;yt.erasParse=I0;yt.erasConvertYear=R0;yt.erasAbbrRegex=F0;yt.erasNameRegex=L0;yt.erasNarrowRegex=G0;yt.months=v_;yt.monthsShort=y_;yt.monthsParse=b_;yt.monthsRegex=E_;yt.monthsShortRegex=C_;yt.week=D_;yt.firstDayOfYear=k_;yt.firstDayOfWeek=S_;yt.weekdays=G_;yt.weekdaysMin=B_;yt.weekdaysShort=H_;yt.weekdaysParse=U_;yt.weekdaysRegex=q_;yt.weekdaysShortRegex=Q_;yt.weekdaysMinRegex=$_;yt.isPM=K_;yt.meridiem=Z_;function al(e,t,n,i){var r=Bi(),s=gi().set(i,t);return r[n](s,e)}function xg(e,t,n){if(Gi(e)&&(t=e,e=void 0),e=e||"",t!=null)return al(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=al(e,i,n,"month");return r}function Gc(e,t,n,i){typeof e=="boolean"?(Gi(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,Gi(t)&&(n=t,t=void 0),t=t||"");var r=Bi(),s=e?r._week.dow:0,a,l=[];if(n!=null)return al(t,(n+s)%7,i,"day");for(a=0;a<7;a++)l[a]=al(t,(a+s)%7,i,"day");return l}function rw(e,t){return xg(e,t,"months")}function sw(e,t){return xg(e,t,"monthsShort")}function ow(e,t,n){return Gc(e,t,n,"weekdays")}function aw(e,t,n){return Gc(e,t,n,"weekdaysShort")}function lw(e,t,n){return Gc(e,t,n,"weekdaysMin")}ir("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=ut(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});le.lang=Un("moment.lang is deprecated. Use moment.locale instead.",ir);le.langData=Un("moment.langData is deprecated. Use moment.localeData instead.",Bi);var wi=Math.abs;function uw(){var e=this._data;return this._milliseconds=wi(this._milliseconds),this._days=wi(this._days),this._months=wi(this._months),e.milliseconds=wi(e.milliseconds),e.seconds=wi(e.seconds),e.minutes=wi(e.minutes),e.hours=wi(e.hours),e.months=wi(e.months),e.years=wi(e.years),this}function Dg(e,t,n,i){var r=ii(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function cw(e,t){return Dg(this,e,t,1)}function dw(e,t){return Dg(this,e,t,-1)}function sf(e){return e<0?Math.floor(e):Math.ceil(e)}function fw(){var e=this._milliseconds,t=this._days,n=this._months,i=this._data,r,s,a,l,c;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=sf(ju(n)+t)*864e5,t=0,n=0),i.milliseconds=e%1e3,r=Wn(e/1e3),i.seconds=r%60,s=Wn(r/60),i.minutes=s%60,a=Wn(s/60),i.hours=a%24,t+=Wn(a/24),c=Wn(Tg(t)),n+=c,t-=sf(ju(c)),l=Wn(n/12),n%=12,i.days=t,i.months=n,i.years=l,this}function Tg(e){return e*4800/146097}function ju(e){return e*146097/4800}function hw(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if(e=jn(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+i/864e5,n=this._months+Tg(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(ju(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+e)}}function Wi(e){return function(){return this.as(e)}}var Sg=Wi("ms"),pw=Wi("s"),gw=Wi("m"),mw=Wi("h"),vw=Wi("d"),yw=Wi("w"),_w=Wi("M"),bw=Wi("Q"),ww=Wi("y"),Cw=Sg;function Ew(){return ii(this)}function xw(e){return e=jn(e),this.isValid()?this[e+"s"]():NaN}function Gr(e){return function(){return this.isValid()?this._data[e]:NaN}}var Dw=Gr("milliseconds"),Tw=Gr("seconds"),Sw=Gr("minutes"),kw=Gr("hours"),Ow=Gr("days"),Iw=Gr("months"),Rw=Gr("years");function Aw(){return Wn(this.days()/7)}var Ti=Math.round,ns={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Pw(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function Mw(e,t,n,i){var r=ii(e).abs(),s=Ti(r.as("s")),a=Ti(r.as("m")),l=Ti(r.as("h")),c=Ti(r.as("d")),u=Ti(r.as("M")),f=Ti(r.as("w")),m=Ti(r.as("y")),g=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||a<=1&&["m"]||a<n.m&&["mm",a]||l<=1&&["h"]||l<n.h&&["hh",l]||c<=1&&["d"]||c<n.d&&["dd",c];return n.w!=null&&(g=g||f<=1&&["w"]||f<n.w&&["ww",f]),g=g||u<=1&&["M"]||u<n.M&&["MM",u]||m<=1&&["y"]||["yy",m],g[2]=t,g[3]=+e>0,g[4]=i,Pw.apply(null,g)}function Nw(e){return e===void 0?Ti:typeof e=="function"?(Ti=e,!0):!1}function Lw(e,t){return ns[e]===void 0?!1:t===void 0?ns[e]:(ns[e]=t,e==="s"&&(ns.ss=t-1),!0)}function Fw(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=ns,r,s;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(i=Object.assign({},ns,t),t.s!=null&&t.ss==null&&(i.ss=t.s-1)),r=this.localeData(),s=Mw(this,!n,i,r),n&&(s=r.pastFuture(+this,s)),r.postformat(s)}var du=Math.abs;function Vr(e){return(e>0)-(e<0)||+e}function Ml(){if(!this.isValid())return this.localeData().invalidDate();var e=du(this._milliseconds)/1e3,t=du(this._days),n=du(this._months),i,r,s,a,l=this.asSeconds(),c,u,f,m;return l?(i=Wn(e/60),r=Wn(i/60),e%=60,i%=60,s=Wn(n/12),n%=12,a=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=l<0?"-":"",u=Vr(this._months)!==Vr(l)?"-":"",f=Vr(this._days)!==Vr(l)?"-":"",m=Vr(this._milliseconds)!==Vr(l)?"-":"",c+"P"+(s?u+s+"Y":"")+(n?u+n+"M":"")+(t?f+t+"D":"")+(r||i||e?"T":"")+(r?m+r+"H":"")+(i?m+i+"M":"")+(e?m+a+"S":"")):"P0D"}var pt=Al.prototype;pt.isValid=Ib;pt.abs=uw;pt.add=cw;pt.subtract=dw;pt.as=hw;pt.asMilliseconds=Sg;pt.asSeconds=pw;pt.asMinutes=gw;pt.asHours=mw;pt.asDays=vw;pt.asWeeks=yw;pt.asMonths=_w;pt.asQuarters=bw;pt.asYears=ww;pt.valueOf=Cw;pt._bubble=fw;pt.clone=Ew;pt.get=xw;pt.milliseconds=Dw;pt.seconds=Tw;pt.minutes=Sw;pt.hours=kw;pt.days=Ow;pt.weeks=Aw;pt.months=Iw;pt.years=Rw;pt.humanize=Fw;pt.toISOString=Ml;pt.toString=Ml;pt.toJSON=Ml;pt.locale=pg;pt.localeData=mg;pt.toIsoString=Un("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ml);pt.lang=gg;$e("X",0,0,"unix");$e("x",0,0,"valueOf");Ge("x",kl);Ge("X",r_);Dt("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});Dt("x",function(e,t,n){n._d=new Date(ut(e))});//! moment.js
le.version="2.30.1";Gy(Ot);le.fn=De;le.min=Tb;le.max=Sb;le.now=kb;le.utc=gi;le.unix=nw;le.months=rw;le.isDate=Do;le.locale=ir;le.invalid=xl;le.duration=ii;le.isMoment=ti;le.weekdays=ow;le.parseZone=iw;le.localeData=Bi;le.isDuration=Ba;le.monthsShort=sw;le.weekdaysMin=lw;le.defineLocale=Ic;le.updateLocale=ib;le.locales=rb;le.weekdaysShort=aw;le.normalizeUnits=jn;le.relativeTimeRounding=Nw;le.relativeTimeThreshold=Lw;le.calendarFormat=Zb;le.prototype=De;le.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var kg="1.13.6",of=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Nl=Array.prototype,Hc=Object.prototype,af=typeof Symbol<"u"?Symbol.prototype:null,Gw=Nl.push,Oo=Nl.slice,co=Hc.toString,Hw=Hc.hasOwnProperty,Og=typeof ArrayBuffer<"u",Bw=typeof DataView<"u",Ww=Array.isArray,lf=Object.keys,uf=Object.create,cf=Og&&ArrayBuffer.isView,Uw=isNaN,jw=isFinite,Ig=!{toString:null}.propertyIsEnumerable("toString"),df=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Yw=Math.pow(2,53)-1;function En(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var s=Array(t+1);for(r=0;r<t;r++)s[r]=arguments[r];return s[t]=i,e.apply(this,s)}}function Hr(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function zw(e){return e===null}function Rg(e){return e===void 0}function Ag(e){return e===!0||e===!1||co.call(e)==="[object Boolean]"}function qw(e){return!!(e&&e.nodeType===1)}function cn(e){var t="[object "+e+"]";return function(n){return co.call(n)===t}}const Bc=cn("String"),Pg=cn("Number"),Qw=cn("Date"),$w=cn("RegExp"),Vw=cn("Error"),Mg=cn("Symbol"),Ng=cn("ArrayBuffer");var Lg=cn("Function"),Kw=of.document&&of.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Kw!="function"&&(Lg=function(e){return typeof e=="function"||!1});const pn=Lg,Fg=cn("Object");var Gg=Bw&&Fg(new DataView(new ArrayBuffer(8))),Wc=typeof Map<"u"&&Fg(new Map),Jw=cn("DataView");function Xw(e){return e!=null&&pn(e.getInt8)&&Ng(e.buffer)}const ll=Gg?Xw:Jw,Br=Ww||cn("Array");function lr(e,t){return e!=null&&Hw.call(e,t)}var Yu=cn("Arguments");(function(){Yu(arguments)||(Yu=function(e){return lr(e,"callee")})})();const Uc=Yu;function Zw(e){return!Mg(e)&&jw(e)&&!isNaN(parseFloat(e))}function Hg(e){return Pg(e)&&Uw(e)}function Bg(e){return function(){return e}}function Wg(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=Yw}}function Ug(e){return function(t){return t==null?void 0:t[e]}}const ul=Ug("byteLength"),e1=Wg(ul);var t1=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function n1(e){return cf?cf(e)&&!ll(e):e1(e)&&t1.test(co.call(e))}const jg=Og?n1:Bg(!1),xn=Ug("length");function i1(e){for(var t={},n=e.length,i=0;i<n;++i)t[e[i]]=!0;return{contains:function(r){return t[r]===!0},push:function(r){return t[r]=!0,e.push(r)}}}function Yg(e,t){t=i1(t);var n=df.length,i=e.constructor,r=pn(i)&&i.prototype||Hc,s="constructor";for(lr(e,s)&&!t.contains(s)&&t.push(s);n--;)s=df[n],s in e&&e[s]!==r[s]&&!t.contains(s)&&t.push(s)}function Zt(e){if(!Hr(e))return[];if(lf)return lf(e);var t=[];for(var n in e)lr(e,n)&&t.push(n);return Ig&&Yg(e,t),t}function r1(e){if(e==null)return!0;var t=xn(e);return typeof t=="number"&&(Br(e)||Bc(e)||Uc(e))?t===0:xn(Zt(e))===0}function zg(e,t){var n=Zt(t),i=n.length;if(e==null)return!i;for(var r=Object(e),s=0;s<i;s++){var a=n[s];if(t[a]!==r[a]||!(a in r))return!1}return!0}function wt(e){if(e instanceof wt)return e;if(!(this instanceof wt))return new wt(e);this._wrapped=e}wt.VERSION=kg;wt.prototype.value=function(){return this._wrapped};wt.prototype.valueOf=wt.prototype.toJSON=wt.prototype.value;wt.prototype.toString=function(){return String(this._wrapped)};function ff(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,ul(e))}var hf="[object DataView]";function zu(e,t,n,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var r=typeof e;return r!=="function"&&r!=="object"&&typeof t!="object"?!1:qg(e,t,n,i)}function qg(e,t,n,i){e instanceof wt&&(e=e._wrapped),t instanceof wt&&(t=t._wrapped);var r=co.call(e);if(r!==co.call(t))return!1;if(Gg&&r=="[object Object]"&&ll(e)){if(!ll(t))return!1;r=hf}switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return af.valueOf.call(e)===af.valueOf.call(t);case"[object ArrayBuffer]":case hf:return qg(ff(e),ff(t),n,i)}var s=r==="[object Array]";if(!s&&jg(e)){var a=ul(e);if(a!==ul(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(pn(l)&&l instanceof l&&pn(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var u=n.length;u--;)if(n[u]===e)return i[u]===t;if(n.push(e),i.push(t),s){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!zu(e[u],t[u],n,i))return!1}else{var f=Zt(e),m;if(u=f.length,Zt(t).length!==u)return!1;for(;u--;)if(m=f[u],!(lr(t,m)&&zu(e[m],t[m],n,i)))return!1}return n.pop(),i.pop(),!0}function s1(e,t){return zu(e,t)}function Io(e){if(!Hr(e))return[];var t=[];for(var n in e)t.push(n);return Ig&&Yg(e,t),t}function jc(e){var t=xn(e);return function(n){if(n==null)return!1;var i=Io(n);if(xn(i))return!1;for(var r=0;r<t;r++)if(!pn(n[e[r]]))return!1;return e!==Vg||!pn(n[Yc])}}var Yc="forEach",Qg="has",zc=["clear","delete"],$g=["get",Qg,"set"],o1=zc.concat(Yc,$g),Vg=zc.concat($g),a1=["add"].concat(zc,Yc,Qg);const l1=Wc?jc(o1):cn("Map"),u1=Wc?jc(Vg):cn("WeakMap"),c1=Wc?jc(a1):cn("Set"),d1=cn("WeakSet");function bs(e){for(var t=Zt(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i}function f1(e){for(var t=Zt(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i}function Kg(e){for(var t={},n=Zt(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t}function qu(e){var t=[];for(var n in e)pn(e[n])&&t.push(n);return t.sort()}function qc(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||n==null)return n;for(var r=1;r<i;r++)for(var s=arguments[r],a=e(s),l=a.length,c=0;c<l;c++){var u=a[c];(!t||n[u]===void 0)&&(n[u]=s[u])}return n}}const Jg=qc(Io),cl=qc(Zt),Xg=qc(Io,!0);function h1(){return function(){}}function Zg(e){if(!Hr(e))return{};if(uf)return uf(e);var t=h1();t.prototype=e;var n=new t;return t.prototype=null,n}function p1(e,t){var n=Zg(e);return t&&cl(n,t),n}function g1(e){return Hr(e)?Br(e)?e.slice():Jg({},e):e}function m1(e,t){return t(e),e}function em(e){return Br(e)?e:[e]}wt.toPath=em;function Ro(e){return wt.toPath(e)}function Qc(e,t){for(var n=t.length,i=0;i<n;i++){if(e==null)return;e=e[t[i]]}return n?e:void 0}function tm(e,t,n){var i=Qc(e,Ro(t));return Rg(i)?n:i}function v1(e,t){t=Ro(t);for(var n=t.length,i=0;i<n;i++){var r=t[i];if(!lr(e,r))return!1;e=e[r]}return!!n}function $c(e){return e}function fo(e){return e=cl({},e),function(t){return zg(t,e)}}function Vc(e){return e=Ro(e),function(t){return Qc(t,e)}}function Ao(e,t,n){if(t===void 0)return e;switch(n??3){case 1:return function(i){return e.call(t,i)};case 3:return function(i,r,s){return e.call(t,i,r,s)};case 4:return function(i,r,s,a){return e.call(t,i,r,s,a)}}return function(){return e.apply(t,arguments)}}function nm(e,t,n){return e==null?$c:pn(e)?Ao(e,t,n):Hr(e)&&!Br(e)?fo(e):Vc(e)}function Kc(e,t){return nm(e,t,1/0)}wt.iteratee=Kc;function Dn(e,t,n){return wt.iteratee!==Kc?wt.iteratee(e,t):nm(e,t,n)}function y1(e,t,n){t=Dn(t,n);for(var i=Zt(e),r=i.length,s={},a=0;a<r;a++){var l=i[a];s[l]=t(e[l],l,e)}return s}function im(){}function _1(e){return e==null?im:function(t){return tm(e,t)}}function b1(e,t,n){var i=Array(Math.max(0,e));t=Ao(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i}function Qu(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const ho=Date.now||function(){return new Date().getTime()};function rm(e){var t=function(s){return e[s]},n="(?:"+Zt(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(s){return s=s==null?"":""+s,i.test(s)?s.replace(r,t):s}}const sm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w1=rm(sm),C1=Kg(sm),E1=rm(C1),x1=wt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var fu=/(.)^/,D1={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T1=/\\|'|\r|\n|\u2028|\u2029/g;function S1(e){return"\\"+D1[e]}var k1=/^\s*(\w|\$)+\s*$/;function O1(e,t,n){!t&&n&&(t=n),t=Xg({},t,wt.templateSettings);var i=RegExp([(t.escape||fu).source,(t.interpolate||fu).source,(t.evaluate||fu).source].join("|")+"|$","g"),r=0,s="__p+='";e.replace(i,function(u,f,m,g,h){return s+=e.slice(r,h).replace(T1,S1),r=h+u.length,f?s+=`'+
((__t=(`+f+`))==null?'':_.escape(__t))+
'`:m?s+=`'+
((__t=(`+m+`))==null?'':__t)+
'`:g&&(s+=`';
`+g+`
__p+='`),u}),s+=`';
`;var a=t.variable;if(a){if(!k1.test(a))throw new Error("variable is not a bare identifier: "+a)}else s=`with(obj||{}){
`+s+`}
`,a="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var l;try{l=new Function(a,"_",s)}catch(u){throw u.source=s,u}var c=function(u){return l.call(this,u,wt)};return c.source="function("+a+`){
`+s+"}",c}function I1(e,t,n){t=Ro(t);var i=t.length;if(!i)return pn(n)?n.call(e):n;for(var r=0;r<i;r++){var s=e==null?void 0:e[t[r]];s===void 0&&(s=n,r=i),e=pn(s)?s.call(e):s}return e}var R1=0;function A1(e){var t=++R1+"";return e?e+t:t}function P1(e){var t=wt(e);return t._chain=!0,t}function om(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var s=Zg(e.prototype),a=e.apply(s,r);return Hr(a)?a:s}var ws=En(function(e,t){var n=ws.placeholder,i=function(){for(var r=0,s=t.length,a=Array(s),l=0;l<s;l++)a[l]=t[l]===n?arguments[r++]:t[l];for(;r<arguments.length;)a.push(arguments[r++]);return om(e,i,this,this,a)};return i});ws.placeholder=wt;const am=En(function(e,t,n){if(!pn(e))throw new TypeError("Bind must be called on a function");var i=En(function(r){return om(e,i,t,this,n.concat(r))});return i}),Nn=Wg(xn);function Wr(e,t,n,i){if(i=i||[],!t&&t!==0)t=1/0;else if(t<=0)return i.concat(e);for(var r=i.length,s=0,a=xn(e);s<a;s++){var l=e[s];if(Nn(l)&&(Br(l)||Uc(l)))if(t>1)Wr(l,t-1,n,i),r=i.length;else for(var c=0,u=l.length;c<u;)i[r++]=l[c++];else n||(i[r++]=l)}return i}const M1=En(function(e,t){t=Wr(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=am(e[i],e)}return e});function N1(e,t){var n=function(i){var r=n.cache,s=""+(t?t.apply(this,arguments):i);return lr(r,s)||(r[s]=e.apply(this,arguments)),r[s]};return n.cache={},n}const lm=En(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),L1=ws(lm,wt,1);function F1(e,t,n){var i,r,s,a,l=0;n||(n={});var c=function(){l=n.leading===!1?0:ho(),i=null,a=e.apply(r,s),i||(r=s=null)},u=function(){var f=ho();!l&&n.leading===!1&&(l=f);var m=t-(f-l);return r=this,s=arguments,m<=0||m>t?(i&&(clearTimeout(i),i=null),l=f,a=e.apply(r,s),i||(r=s=null)):!i&&n.trailing!==!1&&(i=setTimeout(c,m)),a};return u.cancel=function(){clearTimeout(i),l=0,i=r=s=null},u}function G1(e,t,n){var i,r,s,a,l,c=function(){var f=ho()-r;t>f?i=setTimeout(c,t-f):(i=null,n||(a=e.apply(l,s)),i||(s=l=null))},u=En(function(f){return l=this,s=f,r=ho(),i||(i=setTimeout(c,t),n&&(a=e.apply(l,s))),a});return u.cancel=function(){clearTimeout(i),i=s=l=null},u}function H1(e,t){return ws(t,e)}function Jc(e){return function(){return!e.apply(this,arguments)}}function B1(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function W1(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function um(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const U1=ws(um,2);function cm(e,t,n){t=Dn(t,n);for(var i=Zt(e),r,s=0,a=i.length;s<a;s++)if(r=i[s],t(e[r],r,e))return r}function dm(e){return function(t,n,i){n=Dn(n,i);for(var r=xn(t),s=e>0?0:r-1;s>=0&&s<r;s+=e)if(n(t[s],s,t))return s;return-1}}const Xc=dm(1),fm=dm(-1);function hm(e,t,n,i){n=Dn(n,i,1);for(var r=n(t),s=0,a=xn(e);s<a;){var l=Math.floor((s+a)/2);n(e[l])<r?s=l+1:a=l}return s}function pm(e,t,n){return function(i,r,s){var a=0,l=xn(i);if(typeof s=="number")e>0?a=s>=0?s:Math.max(s+l,a):l=s>=0?Math.min(s+1,l):s+l+1;else if(n&&s&&l)return s=n(i,r),i[s]===r?s:-1;if(r!==r)return s=t(Oo.call(i,a,l),Hg),s>=0?s+a:-1;for(s=e>0?a:l-1;s>=0&&s<l;s+=e)if(i[s]===r)return s;return-1}}const gm=pm(1,Xc,hm),j1=pm(-1,fm);function $u(e,t,n){var i=Nn(e)?Xc:cm,r=i(e,t,n);if(r!==void 0&&r!==-1)return e[r]}function Y1(e,t){return $u(e,fo(t))}function Hi(e,t,n){t=Ao(t,n);var i,r;if(Nn(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var s=Zt(e);for(i=0,r=s.length;i<r;i++)t(e[s[i]],s[i],e)}return e}function Pr(e,t,n){t=Dn(t,n);for(var i=!Nn(e)&&Zt(e),r=(i||e).length,s=Array(r),a=0;a<r;a++){var l=i?i[a]:a;s[a]=t(e[l],l,e)}return s}function mm(e){var t=function(n,i,r,s){var a=!Nn(n)&&Zt(n),l=(a||n).length,c=e>0?0:l-1;for(s||(r=n[a?a[c]:c],c+=e);c>=0&&c<l;c+=e){var u=a?a[c]:c;r=i(r,n[u],u,n)}return r};return function(n,i,r,s){var a=arguments.length>=3;return t(n,Ao(i,s,4),r,a)}}const hu=mm(1),pf=mm(-1);function ds(e,t,n){var i=[];return t=Dn(t,n),Hi(e,function(r,s,a){t(r,s,a)&&i.push(r)}),i}function z1(e,t,n){return ds(e,Jc(Dn(t)),n)}function gf(e,t,n){t=Dn(t,n);for(var i=!Nn(e)&&Zt(e),r=(i||e).length,s=0;s<r;s++){var a=i?i[s]:s;if(!t(e[a],a,e))return!1}return!0}function mf(e,t,n){t=Dn(t,n);for(var i=!Nn(e)&&Zt(e),r=(i||e).length,s=0;s<r;s++){var a=i?i[s]:s;if(t(e[a],a,e))return!0}return!1}function Li(e,t,n,i){return Nn(e)||(e=bs(e)),(typeof n!="number"||i)&&(n=0),gm(e,t,n)>=0}const q1=En(function(e,t,n){var i,r;return pn(t)?r=t:(t=Ro(t),i=t.slice(0,-1),t=t[t.length-1]),Pr(e,function(s){var a=r;if(!a){if(i&&i.length&&(s=Qc(s,i)),s==null)return;a=s[t]}return a==null?a:a.apply(s,n)})});function Zc(e,t){return Pr(e,Vc(t))}function Q1(e,t){return ds(e,fo(t))}function vm(e,t,n){var i=-1/0,r=-1/0,s,a;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Nn(e)?e:bs(e);for(var l=0,c=e.length;l<c;l++)s=e[l],s!=null&&s>i&&(i=s)}else t=Dn(t,n),Hi(e,function(u,f,m){a=t(u,f,m),(a>r||a===-1/0&&i===-1/0)&&(i=u,r=a)});return i}function $1(e,t,n){var i=1/0,r=1/0,s,a;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Nn(e)?e:bs(e);for(var l=0,c=e.length;l<c;l++)s=e[l],s!=null&&s<i&&(i=s)}else t=Dn(t,n),Hi(e,function(u,f,m){a=t(u,f,m),(a<r||a===1/0&&i===1/0)&&(i=u,r=a)});return i}var V1=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ym(e){return e?Br(e)?Oo.call(e):Bc(e)?e.match(V1):Nn(e)?Pr(e,$c):bs(e):[]}function _m(e,t,n){if(t==null||n)return Nn(e)||(e=bs(e)),e[Qu(e.length-1)];var i=ym(e),r=xn(i);t=Math.max(Math.min(t,r),0);for(var s=r-1,a=0;a<t;a++){var l=Qu(a,s),c=i[a];i[a]=i[l],i[l]=c}return i.slice(0,t)}function K1(e){return _m(e,1/0)}function J1(e,t,n){var i=0;return t=Dn(t,n),Zc(Pr(e,function(r,s,a){return{value:r,index:i++,criteria:t(r,s,a)}}).sort(function(r,s){var a=r.criteria,l=s.criteria;if(a!==l){if(a>l||a===void 0)return 1;if(a<l||l===void 0)return-1}return r.index-s.index}),"value")}function Ll(e,t){return function(n,i,r){var s=t?[[],[]]:{};return i=Dn(i,r),Hi(n,function(a,l){var c=i(a,l,n);e(s,a,c)}),s}}const X1=Ll(function(e,t,n){lr(e,n)?e[n].push(t):e[n]=[t]}),Z1=Ll(function(e,t,n){e[n]=t}),eC=Ll(function(e,t,n){lr(e,n)?e[n]++:e[n]=1}),tC=Ll(function(e,t,n){e[n?0:1].push(t)},!0);function nC(e){return e==null?0:Nn(e)?e.length:Zt(e).length}function iC(e,t,n){return t in n}const bm=En(function(e,t){var n={},i=t[0];if(e==null)return n;pn(i)?(t.length>1&&(i=Ao(i,t[1])),t=Io(e)):(i=iC,t=Wr(t,!1,!1),e=Object(e));for(var r=0,s=t.length;r<s;r++){var a=t[r],l=e[a];i(l,a,e)&&(n[a]=l)}return n}),rC=En(function(e,t){var n=t[0],i;return pn(n)?(n=Jc(n),t.length>1&&(i=t[1])):(t=Pr(Wr(t,!1,!1),String),n=function(r,s){return!Li(t,s)}),bm(e,n,i)});function wm(e,t,n){return Oo.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}function pu(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:wm(e,e.length-t)}function Ua(e,t,n){return Oo.call(e,t==null||n?1:t)}function sC(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:Ua(e,Math.max(0,e.length-t))}function oC(e){return ds(e,Boolean)}function aC(e,t){return Wr(e,t,!1)}const Cm=En(function(e,t){return t=Wr(t,!0,!0),ds(e,function(n){return!Li(t,n)})}),lC=En(function(e,t){return Cm(e,t)});function Vu(e,t,n,i){Ag(t)||(i=n,n=t,t=!1),n!=null&&(n=Dn(n,i));for(var r=[],s=[],a=0,l=xn(e);a<l;a++){var c=e[a],u=n?n(c,a,e):c;t&&!n?((!a||s!==u)&&r.push(c),s=u):n?Li(s,u)||(s.push(u),r.push(c)):Li(r,c)||r.push(c)}return r}const uC=En(function(e){return Vu(Wr(e,!0,!0))});function cC(e){for(var t=[],n=arguments.length,i=0,r=xn(e);i<r;i++){var s=e[i];if(!Li(t,s)){var a;for(a=1;a<n&&Li(arguments[a],s);a++);a===n&&t.push(s)}}return t}function Ku(e){for(var t=e&&vm(e,xn).length||0,n=Array(t),i=0;i<t;i++)n[i]=Zc(e,i);return n}const dC=En(Ku);function fC(e,t){for(var n={},i=0,r=xn(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}function hC(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),s=0;s<i;s++,e+=n)r[s]=e;return r}function pC(e,t){if(t==null||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(Oo.call(e,i,i+=t));return n}function ed(e,t){return e._chain?wt(t).chain():t}function Em(e){return Hi(qu(e),function(t){var n=wt[t]=e[t];wt.prototype[t]=function(){var i=[this._wrapped];return Gw.apply(i,arguments),ed(this,n.apply(wt,i))}}),wt}Hi(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Nl[e];wt.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),ed(this,n)}});Hi(["concat","join","slice"],function(e){var t=Nl[e];wt.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),ed(this,n)}});const gC=Object.freeze(Object.defineProperty({__proto__:null,VERSION:kg,after:W1,all:gf,allKeys:Io,any:mf,assign:cl,before:um,bind:am,bindAll:M1,chain:P1,chunk:pC,clone:g1,collect:Pr,compact:oC,compose:B1,constant:Bg,contains:Li,countBy:eC,create:p1,debounce:G1,default:wt,defaults:Xg,defer:L1,delay:lm,detect:$u,difference:Cm,drop:Ua,each:Hi,escape:w1,every:gf,extend:Jg,extendOwn:cl,filter:ds,find:$u,findIndex:Xc,findKey:cm,findLastIndex:fm,findWhere:Y1,first:pu,flatten:aC,foldl:hu,foldr:pf,forEach:Hi,functions:qu,get:tm,groupBy:X1,has:v1,head:pu,identity:$c,include:Li,includes:Li,indexBy:Z1,indexOf:gm,initial:wm,inject:hu,intersection:cC,invert:Kg,invoke:q1,isArguments:Uc,isArray:Br,isArrayBuffer:Ng,isBoolean:Ag,isDataView:ll,isDate:Qw,isElement:qw,isEmpty:r1,isEqual:s1,isError:Vw,isFinite:Zw,isFunction:pn,isMap:l1,isMatch:zg,isNaN:Hg,isNull:zw,isNumber:Pg,isObject:Hr,isRegExp:$w,isSet:c1,isString:Bc,isSymbol:Mg,isTypedArray:jg,isUndefined:Rg,isWeakMap:u1,isWeakSet:d1,iteratee:Kc,keys:Zt,last:sC,lastIndexOf:j1,map:Pr,mapObject:y1,matcher:fo,matches:fo,max:vm,memoize:N1,methods:qu,min:$1,mixin:Em,negate:Jc,noop:im,now:ho,object:fC,omit:rC,once:U1,pairs:f1,partial:ws,partition:tC,pick:bm,pluck:Zc,property:Vc,propertyOf:_1,random:Qu,range:hC,reduce:hu,reduceRight:pf,reject:z1,rest:Ua,restArguments:En,result:I1,sample:_m,select:ds,shuffle:K1,size:nC,some:mf,sortBy:J1,sortedIndex:hm,tail:Ua,take:pu,tap:m1,template:O1,templateSettings:x1,throttle:F1,times:b1,toArray:ym,toPath:em,transpose:Ku,unescape:E1,union:uC,uniq:Vu,unique:Vu,uniqueId:A1,unzip:Ku,values:bs,where:Q1,without:lC,wrap:H1,zip:dC},Symbol.toStringTag,{value:"Module"}));var k=Em(gC);k._=k;var gu={},vf;function mC(){return vf||(vf=1,function(e){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(l){return r(a(l),arguments)}function i(l,c){return n.apply(null,[l].concat(c||[]))}function r(l,c){var u=1,f=l.length,m,g="",h,v,y,E,b,w,T,x;for(h=0;h<f;h++)if(typeof l[h]=="string")g+=l[h];else if(typeof l[h]=="object"){if(y=l[h],y.keys)for(m=c[u],v=0;v<y.keys.length;v++){if(m==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[v],y.keys[v-1]));m=m[y.keys[v]]}else y.param_no?m=c[y.param_no]:m=c[u++];if(t.not_type.test(y.type)&&t.not_primitive.test(y.type)&&m instanceof Function&&(m=m()),t.numeric_arg.test(y.type)&&typeof m!="number"&&isNaN(m))throw new TypeError(n("[sprintf] expecting number but found %T",m));switch(t.number.test(y.type)&&(T=m>=0),y.type){case"b":m=parseInt(m,10).toString(2);break;case"c":m=String.fromCharCode(parseInt(m,10));break;case"d":case"i":m=parseInt(m,10);break;case"j":m=JSON.stringify(m,null,y.width?parseInt(y.width):0);break;case"e":m=y.precision?parseFloat(m).toExponential(y.precision):parseFloat(m).toExponential();break;case"f":m=y.precision?parseFloat(m).toFixed(y.precision):parseFloat(m);break;case"g":m=y.precision?String(Number(m.toPrecision(y.precision))):parseFloat(m);break;case"o":m=(parseInt(m,10)>>>0).toString(8);break;case"s":m=String(m),m=y.precision?m.substring(0,y.precision):m;break;case"t":m=String(!!m),m=y.precision?m.substring(0,y.precision):m;break;case"T":m=Object.prototype.toString.call(m).slice(8,-1).toLowerCase(),m=y.precision?m.substring(0,y.precision):m;break;case"u":m=parseInt(m,10)>>>0;break;case"v":m=m.valueOf(),m=y.precision?m.substring(0,y.precision):m;break;case"x":m=(parseInt(m,10)>>>0).toString(16);break;case"X":m=(parseInt(m,10)>>>0).toString(16).toUpperCase();break}t.json.test(y.type)?g+=m:(t.number.test(y.type)&&(!T||y.sign)?(x=T?"+":"-",m=m.toString().replace(t.sign,"")):x="",b=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",w=y.width-(x+m).length,E=y.width&&w>0?b.repeat(w):"",g+=y.align?x+m+E:b==="0"?x+E+m:E+x+m)}return g}var s=Object.create(null);function a(l){if(s[l])return s[l];for(var c=l,u,f=[],m=0;c;){if((u=t.text.exec(c))!==null)f.push(u[0]);else if((u=t.modulo.exec(c))!==null)f.push("%");else if((u=t.placeholder.exec(c))!==null){if(u[2]){m|=1;var g=[],h=u[2],v=[];if((v=t.key.exec(h))!==null)for(g.push(v[1]);(h=h.substring(v[0].length))!=="";)if((v=t.key_access.exec(h))!==null)g.push(v[1]);else if((v=t.index_access.exec(h))!==null)g.push(v[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");u[2]=g}else m|=2;if(m===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");f.push({placeholder:u[0],param_no:u[1],keys:u[2],sign:u[3],pad_char:u[4],align:u[5],width:u[6],precision:u[7],type:u[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");c=c.substring(u[0].length)}return s[l]=f}e.sprintf=n,e.vsprintf=i,typeof window<"u"&&(window.sprintf=n,window.vsprintf=i)})()}(gu)),gu}var xm=mC();const $t=xo(xm);function Dm(e){return e===null?"null":typeof e}function Tm(e){return!!e&&typeof e=="object"}function Sm(e){if(e===void 0)return"";if(e===null||typeof e=="object"&&!e.constructor)return"Object";var t=/function ([^(]*)/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""}function km(e,t,n){return e==="null"||e==="undefined"?e:(e!=="string"&&e!=="stringifiable"||(n='"'+n.replace(/"/g,'\\"')+'"'),e==="function"?t.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{}":n)}function yf(e){var t="";return Tm(e)?(t=Sm(e),Array.isArray(e)&&(t+="["+e.length+"]")):t=km(Dm(e),e,e),t}function _n(e){return"json-formatter-"+e}function rn(e,t,n){var i=document.createElement(e);return t&&i.classList.add(_n(t)),n!==void 0&&(n instanceof Node?i.appendChild(n):i.appendChild(document.createTextNode(String(n)))),i}(function(e){if(typeof window<"u"){var t=document.createElement("style");t.setAttribute("media","screen"),t.innerHTML=e,document.head.appendChild(t)}})(`.json-formatter-row,
.json-formatter-row a,
.json-formatter-row a:hover {
  color: black;
  text-decoration: none;
}
.json-formatter-row .json-formatter-row {
  margin-left: 1rem;
}
.json-formatter-row .json-formatter-children.json-formatter-empty {
  opacity: 0.5;
  margin-left: 1rem;
}
.json-formatter-row .json-formatter-children.json-formatter-empty:after {
  display: none;
}
.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {
  content: "No properties";
}
.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {
  content: "[]";
}
.json-formatter-row .json-formatter-string,
.json-formatter-row .json-formatter-stringifiable {
  color: green;
  white-space: pre;
  word-wrap: break-word;
}
.json-formatter-row .json-formatter-number {
  color: blue;
}
.json-formatter-row .json-formatter-boolean {
  color: red;
}
.json-formatter-row .json-formatter-null {
  color: #855A00;
}
.json-formatter-row .json-formatter-undefined {
  color: #ca0b69;
}
.json-formatter-row .json-formatter-function {
  color: #FF20ED;
}
.json-formatter-row .json-formatter-date {
  background-color: rgba(0, 0, 0, 0.05);
}
.json-formatter-row .json-formatter-url {
  text-decoration: underline;
  color: blue;
  cursor: pointer;
}
.json-formatter-row .json-formatter-bracket {
  color: blue;
}
.json-formatter-row .json-formatter-key {
  color: #00008B;
  padding-right: 0.2rem;
}
.json-formatter-row .json-formatter-toggler-link {
  cursor: pointer;
}
.json-formatter-row .json-formatter-toggler {
  line-height: 1.2rem;
  font-size: 0.7rem;
  vertical-align: middle;
  opacity: 0.6;
  cursor: pointer;
  padding-right: 0.2rem;
}
.json-formatter-row .json-formatter-toggler:after {
  display: inline-block;
  transition: transform 100ms ease-in;
  content: "";
}
.json-formatter-row > a > .json-formatter-preview-text {
  opacity: 0;
  transition: opacity 0.15s ease-in;
  font-style: italic;
}
.json-formatter-row:hover > a > .json-formatter-preview-text {
  opacity: 0.6;
}
.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {
  transform: rotate(90deg);
}
.json-formatter-row.json-formatter-open > .json-formatter-children:after {
  display: inline-block;
}
.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {
  display: none;
}
.json-formatter-row.json-formatter-open.json-formatter-empty:after {
  display: block;
}
.json-formatter-dark.json-formatter-row,
.json-formatter-dark.json-formatter-row a,
.json-formatter-dark.json-formatter-row a:hover {
  color: white;
  text-decoration: none;
}
.json-formatter-dark.json-formatter-row .json-formatter-row {
  margin-left: 1rem;
}
.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty {
  opacity: 0.5;
  margin-left: 1rem;
}
.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty:after {
  display: none;
}
.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {
  content: "No properties";
}
.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {
  content: "[]";
}
.json-formatter-dark.json-formatter-row .json-formatter-string,
.json-formatter-dark.json-formatter-row .json-formatter-stringifiable {
  color: #31F031;
  white-space: pre;
  word-wrap: break-word;
}
.json-formatter-dark.json-formatter-row .json-formatter-number {
  color: #66C2FF;
}
.json-formatter-dark.json-formatter-row .json-formatter-boolean {
  color: #EC4242;
}
.json-formatter-dark.json-formatter-row .json-formatter-null {
  color: #EEC97D;
}
.json-formatter-dark.json-formatter-row .json-formatter-undefined {
  color: #ef8fbe;
}
.json-formatter-dark.json-formatter-row .json-formatter-function {
  color: #FD48CB;
}
.json-formatter-dark.json-formatter-row .json-formatter-date {
  background-color: rgba(255, 255, 255, 0.05);
}
.json-formatter-dark.json-formatter-row .json-formatter-url {
  text-decoration: underline;
  color: #027BFF;
  cursor: pointer;
}
.json-formatter-dark.json-formatter-row .json-formatter-bracket {
  color: #9494FF;
}
.json-formatter-dark.json-formatter-row .json-formatter-key {
  color: #23A0DB;
  padding-right: 0.2rem;
}
.json-formatter-dark.json-formatter-row .json-formatter-toggler-link {
  cursor: pointer;
}
.json-formatter-dark.json-formatter-row .json-formatter-toggler {
  line-height: 1.2rem;
  font-size: 0.7rem;
  vertical-align: middle;
  opacity: 0.6;
  cursor: pointer;
  padding-right: 0.2rem;
}
.json-formatter-dark.json-formatter-row .json-formatter-toggler:after {
  display: inline-block;
  transition: transform 100ms ease-in;
  content: "";
}
.json-formatter-dark.json-formatter-row > a > .json-formatter-preview-text {
  opacity: 0;
  transition: opacity 0.15s ease-in;
  font-style: italic;
}
.json-formatter-dark.json-formatter-row:hover > a > .json-formatter-preview-text {
  opacity: 0.6;
}
.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {
  transform: rotate(90deg);
}
.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-children:after {
  display: inline-block;
}
.json-formatter-dark.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {
  display: none;
}
.json-formatter-dark.json-formatter-row.json-formatter-open.json-formatter-empty:after {
  display: block;
}
`);var vC=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,yC=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,_C=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,Ko=window.requestAnimationFrame||function(e){return e(),0},Ns={hoverPreviewEnabled:!1,hoverPreviewArrayCount:100,hoverPreviewFieldCount:5,animateOpen:!0,animateClose:!0,theme:null,useToJSON:!0,sortPropertiesBy:null,onToggle:null},ls=function(){function e(t,n,i,r){n===void 0&&(n=1),i===void 0&&(i=Ns),this.json=t,this.open=n,this.config=i,this.key=r,this._isOpen=null,this.config.hoverPreviewEnabled===void 0&&(this.config.hoverPreviewEnabled=Ns.hoverPreviewEnabled),this.config.hoverPreviewArrayCount===void 0&&(this.config.hoverPreviewArrayCount=Ns.hoverPreviewArrayCount),this.config.hoverPreviewFieldCount===void 0&&(this.config.hoverPreviewFieldCount=Ns.hoverPreviewFieldCount),this.config.useToJSON===void 0&&(this.config.useToJSON=Ns.useToJSON),this.key===""&&(this.key='""')}return Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._isOpen!==null?this._isOpen:this.open>0},set:function(t){this._isOpen=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDate",{get:function(){return this.json instanceof Date||this.type==="string"&&(vC.test(this.json)||_C.test(this.json)||yC.test(this.json))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUrl",{get:function(){return this.type==="string"&&this.json.indexOf("http")===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isArray",{get:function(){return Array.isArray(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isObject",{get:function(){return Tm(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmptyObject",{get:function(){return!this.keys.length&&!this.isArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useToJSON",{get:function(){return this.config.useToJSON&&this.type==="stringifiable"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasKey",{get:function(){return this.key!==void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"constructorName",{get:function(){return Sm(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.config.useToJSON&&this.json&&this.json.toJSON?"stringifiable":Dm(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){if(this.isObject){var t=Object.keys(this.json);return!this.isArray&&this.config.sortPropertiesBy?t.sort(this.config.sortPropertiesBy):t}return[]},enumerable:!0,configurable:!0}),e.prototype.toggleOpen=function(){this.isOpen=!this.isOpen,this.config.onToggle&&this.config.onToggle(this.isOpen),this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(_n("open")))},e.prototype.openAtDepth=function(t){t===void 0&&(t=1),t<0||(this.open=t,this.isOpen=t!==0,this.element&&(this.removeChildren(!1),t===0?this.element.classList.remove(_n("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(_n("open")))))},e.prototype.getInlinepreview=function(){var t=this;if(this.isArray)return this.json.length>this.config.hoverPreviewArrayCount?"Array["+this.json.length+"]":"["+this.json.map(yf).join(", ")+"]";var n=this.keys,i=n.slice(0,this.config.hoverPreviewFieldCount).map(function(s){return s+":"+yf(t.json[s])}),r=n.length>=this.config.hoverPreviewFieldCount?"":"";return"{"+i.join(", ")+r+"}"},e.prototype.render=function(){this.element=rn("div","row");var t=this.isObject?rn("a","toggler-link"):rn("span");if(this.isObject&&!this.useToJSON&&t.appendChild(rn("span","toggler")),this.hasKey&&t.appendChild(rn("span","key",this.key+":")),this.isObject&&!this.useToJSON){var n=rn("span","value"),i=rn("span"),r=rn("span","constructor-name",this.constructorName);if(i.appendChild(r),this.isArray){var s=rn("span");s.appendChild(rn("span","bracket","[")),s.appendChild(rn("span","number",this.json.length)),s.appendChild(rn("span","bracket","]")),i.appendChild(s)}n.appendChild(i),t.appendChild(n)}else{(n=this.isUrl?rn("a"):rn("span")).classList.add(_n(this.type)),this.isDate&&n.classList.add(_n("date")),this.isUrl&&(n.classList.add(_n("url")),n.setAttribute("href",this.json));var a=km(this.type,this.json,this.useToJSON?this.json.toJSON():this.json);n.appendChild(document.createTextNode(a)),t.appendChild(n)}if(this.isObject&&this.config.hoverPreviewEnabled){var l=rn("span","preview-text");l.appendChild(document.createTextNode(this.getInlinepreview())),t.appendChild(l)}var c=rn("div","children");return this.isObject&&c.classList.add(_n("object")),this.isArray&&c.classList.add(_n("array")),this.isEmpty&&c.classList.add(_n("empty")),this.config&&this.config.theme&&this.element.classList.add(_n(this.config.theme)),this.isOpen&&this.element.classList.add(_n("open")),this.element.appendChild(t),this.element.appendChild(c),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&!this.useToJSON&&t.addEventListener("click",this.toggleOpen.bind(this)),this.element},e.prototype.appendChildren=function(t){var n=this;t===void 0&&(t=!1);var i=this.element.querySelector("div."+_n("children"));if(i&&!this.isEmpty)if(t){var r=0,s=function(){var a=n.keys[r],l=new e(n.json[a],n.open-1,n.config,a);i.appendChild(l.render()),(r+=1)<n.keys.length&&(r>10?s():Ko(s))};Ko(s)}else this.keys.forEach(function(a){var l=new e(n.json[a],n.open-1,n.config,a);i.appendChild(l.render())})},e.prototype.removeChildren=function(t){t===void 0&&(t=!1);var n=this.element.querySelector("div."+_n("children"));if(t){var i=0,r=function(){n&&n.children.length&&(n.removeChild(n.children[0]),(i+=1)>10?r():Ko(r))};Ko(r)}else n&&(n.innerHTML="")},e}();function Ae(){this._keys=[],this._keyIndex={},this._map={},this._size=0,this._setHandlers={},this._prepend=!1}Object.defineProperty(Ae,"name",{value:"OrdMap"});Ae.prototype=Object.create(Object.prototype);Ae.prototype.constructor=Ae;Ae.fromArray=function(e,t){for(var n=new Ae,i=0;i<e.length;i+=1)n.set(e[i][t],e[i]);return n};Ae.fromMerge=function(e){for(var t=new Ae,n=0;n<e.length;n+=1){if(!(e[n]instanceof Ae))throw new Error("Call Error: `maps["+n+"]` must be an OrdMap");e[n].each(function(i,r){t.isSet(r)||t.set(r,i)})}return t};Ae.deserialize=function(e){var t=new Ae;typeof e=="string"&&(e=JSON.parse(e));for(var n=0;n<e._keys.length;n+=1)e._map[e._keys[n]]!==void 0&&t.set(e._keys[n],e._map[e._keys[n]]);return t};Ae.fromJSON=Ae.deserialize;Ae.prototype.setInsertOrder=function(e){switch(e){case"append":this._prepend=!1;break;case"prepend":this._prepend=!0;break;default:throw new Error('Call Error: `dir` must be either "append" or "prepend"')}};Ae.prototype.get=function(e,t){return this.isSet(e)?this._map[e]:t};Ae.prototype.set=function(e,t){if(this.isSet(e)||(this._prepend?this._keys.unshift(e):this._keys.push(e),this._keyIndex[e]=this._keys.length-1,this._size+=1),this._map[e]=t,this._setHandlers[e]!=null){for(var n=0;n<this._setHandlers[e].length;n+=1)this._setHandlers[e][n](t);this._setHandlers[e]=null}};Ae.prototype.append=function(e,t){this.isSet(e)?(Array.isArray(this._map[e])||(this._map[e]=[this._map[e]]),this._map[e].push(t)):this.set(e,[t])};Ae.prototype.unset=function(e){delete this._keyIndex[e],delete this._map[e],this._size-=1};Ae.prototype.isSet=function(e){return this._keyIndex[e]!==void 0};Ae.prototype.each=function(e){var t,n=0,i,r,s=this._keys.length;for(t=0;t<s;t+=1)i=this._keys[t],this._keyIndex[i]===t&&(r=this._map[i],e(r,i,n),n+=1)};Ae.prototype.keys=function(){var e,t,n=[],i=this._keys.length;for(e=0;e<i;e+=1)t=this._keys[e],this._keyIndex[t]===e&&n.push(t);return n};Ae.prototype.toString=function(){var e="";return this.each(function(t,n){t=JSON.stringify(t),t==null&&(t="null"),e!==""&&(e+=", "),e+='"'+n+'": '+t}),"{"+e+"}"};Ae.prototype.asMap=function(){return this._map};Ae.prototype.asHtmlDefnList=function(){var e=jQuery("<dl>");return this.each(function(t,n){var i=jQuery("<dt>").text(n),r=jQuery("<dd>");t instanceof jQuery||t instanceof Element?r.append(t):k.isObject(t)?r.append(new ls(t,0).render()):r.text(t),jQuery("<div>").append(i).append(r).appendTo(e)}),e};Ae.prototype.serialize=function(){return{_keys:this.keys(),_map:this.asMap()}};Ae.prototype.toJSON=Ae.prototype.serialize;Ae.prototype.size=function(){return this._size};Ae.prototype.whenSet=function(e,t,n){if(n=n||{},n.prepend==null&&(n.prepend=!1),this.isSet(e))return t(this.get(e));this._setHandlers[e]==null&&(this._setHandlers[e]=[]),n.prepend?this._setHandlers[e].unshift(t):this._setHandlers[e].push(t)};Ae.prototype.filter=function(e){var t=new Ae;return this.each(function(n,i){e(n,i)&&t.set(i,n)}),t};Ae.prototype.clone=function(){var e=new Ae;return this.each(function(t,n){e.set(n,it(t))}),e};Ae.prototype.clear=function(){this._keys=[],this._keyIndex={},this._map={},this._size=0};Ae.prototype.replaceWith=function(e){var t=this;if(!(e instanceof Ae))throw new Error("Call Error: `o` must be an instance of OrdMap");t.clear(),e.each(function(n,i){t.set(i,n)})};Ae.prototype.mergeWith=function(e){var t=this,n=0;if(!(e instanceof Ae))throw new Error("Call Error: `o` must be an instance of OrdMap");return e.each(function(i,r){t.isSet(r)||(t.set(r,i),n+=1)}),n};Ae.prototype._changeKeyIndex=function(e,t){var n=this,i=n._keys[e];n._keys.splice(e,1),n._keys.splice(t,0,i)};var qt=function(e,t){var n=this;n._name=e||"#"+qt._id++,n._lockCount=0,n._onUnlock=[]};qt._id=1;qt.prototype.lock=function(e){var t=this;this._lockCount+=1;var n="Locking to level: "+t._lockCount;e!=null&&(n+=" - "+e),console.debug("[DataVis // Lock(%s)] %s",t._name,n)};qt.prototype.unlock=function(e){var t=this;t._lockCount-=1,e!=null?console.debug("[DataVis // Lock(%s)] Unlocking to level %s: %s",t._name,t._lockCount,e):console.debug("[DataVis // Lock(%s)] Unlocking to level %s",t._name,t._lockCount);for(var n=t._onUnlock.length,i=0;t._onUnlock.length>0&&!t.isLocked();){i+=1;var r=t._onUnlock.shift();console.debug("[DataVis // Lock(%s)] Running onUnlock function (%d of %d) - %s",t._name,i,n,r.info||"[NO INFO]"),r.f()}};qt.prototype.completelyUnlock=function(){for(var e=this;e.isLocked();)e.unlock()};qt.prototype.isLocked=function(){var e=this;return e._lockCount!==0};qt.prototype.onUnlock=function(e,t){var n=this;if(!n.isLocked())return e();n._onUnlock.push({f:e,info:t}),console.debug("[DataVis // Lock(%s)] Saved onUnlock function (#%d) - %s",n._name,n._onUnlock.length,t||"[NO INFO]")};qt.prototype.flushUnlockQueue=function(){var e=this,t=e._onUnlock.length;if(t>0){var n=k.map(k.pluck(e._onUnlock,"info"),function(i){return i||"[NO INFO]"});console.debug("[DataVis // Lock(%s)] Flushing %d onUnlock functions: %O",e._name,t,n),e._onUnlock=[]}};qt.prototype.clear=function(){var e=this;e.flushUnlockQueue(),e.completelyUnlock()};var gt={};gt.registry=new Ae;gt.registry.setInsertOrder("prepend");gt.guess=function(e){for(var t=gt.registry.keys(),n=0;n<t.length;n+=1)if(gt.registry.get(t[n]).matches(e))return t[n]};gt.universalCmp=function(e,t){return e===t?0:e<t?-1:1};(function(){function e(a){return!0}function t(a){return a}function n(a,l){return typeof a=="string"?a:(console.error("[DataVis // Type(String) // Decode] Call Error: unsupported conversion: %s",l),null)}function i(a){return a}function r(a){return a}function s(a,l){return gt.universalCmp(a,l)}gt.registry.set("string",{matches:e,parse:t,decode:n,format:i,natRep:r,compare:s})})();(function(){var e=new RegExp(/(^-?[1-9]{1}[0-9]{0,2}(,?\d{3})*(\.\d+)?(e[+-]?\d+)?$)|(^0(e[+-]?\d+)?$)|(^-?0?\.\d+(e[+-]?\d+)?$)/),t=new RegExp(/,/g);window.Intl!=null&&window.Intl.NumberFormat!=null&&window.Intl.NumberFormat.prototype.formatToParts!=null&&k.each(Intl.NumberFormat(window.DATAVIS_LANG).formatToParts("1234.5"),function(v){switch(v.type){case"group":v.value;break;case"decimal":v.value}});function n(v){return typeof v=="number"||typeof v=="string"&&e.test(v)}function i(v,y){if(v.charAt(0)==="("&&v.charAt(-1)===")")return i(v.substring(1,v.length-1))*-1;var E=v.replace(t,"");return y==="string"?E:v.indexOf(".")>=0||v.indexOf("e")>=0?parseFloat(E):parseInt(E)}function r(v,y){var E;if(typeof v!="string")return console.error("[DataVis // Type(Number) // Parse] Call Error: `str` must be a string"),null;switch(y){case"primitive":return i(v,"number");case"numeral":return E=i(v,"number"),E==null?null:bt(E);case"bignumber":return E=i(v,"string"),E==null?null:new Et(E);default:return console.error("[DataVis // Type(Number) // Parse] Call Error: invalid internal representation: %s",y),null}}function s(v,y){if(typeof v=="string")return r(v,y);if(typeof v=="number")switch(y){case"primitive":return v;case"bignumber":return new Et(v);case"numeral":return bt(v);default:return console.error("[DataVis // Type(Number) // Decode] Call Error: invalid internal representation: %s",y),null}else return console.error("[DataVis // Type(Number) // Decode] Call Error: unsupported conversion: %s to %s",typeof v,y),null}function a(v){var y="";return y+=v.integerPart.grouping?"0,0":"0",v.decimalPlaces==null?y+="[.][0000000000000000]":v.decimalPlaces>0&&(y+=".",y+="0".repeat(v.decimalPlaces)),y}function l(v){var y={prefix:"",decimalSeparator:v.radixPoint,secondaryGroupSize:0,suffix:""};return v.integerPart.grouping?(y.groupSeparator=v.integerPart.groupSeparator,y.groupSize=v.integerPart.groupSize):y.groupSize=0,v.fractionalPart.grouping?(y.fractionGroupSeparator=v.fractionalPart.groupSeparator,y.fractionGroupSize=v.fractionalPart.groupSize):y.fractionGroupSize=0,y}function c(v){switch(v.roundingMethod){case"up":return Et.ROUND_UP;case"down":return Et.ROUND_DOWN;case"ceil":return Et.ROUND_CEIL;case"floor":return Et.ROUND_FLOOR;case"half_up":return Et.ROUND_HALF_UP;case"half_down":return Et.ROUND_HALF_DOWN;case"half_even":return Et.ROUND_HALF_EVEN;case"half_ceil":return Et.ROUND_HALF_CEIL;case"half_floor":return Et.ROUND_HALF_FLOOR}}function u(v,y){var E=window.Intl!=null&&window.Intl.NumberFormat!=null?"intl":"bignumber";switch(E){case"intl":var b={useGrouping:y.integerPart.grouping};return y.decimalPlaces!=null?(b.minimumFractionDigits=y.decimalPlaces,b.maximumFractionDigits=y.decimalPlaces):(b.minimumFractionDigits=0,b.maximumFractionDigits=17),Intl.NumberFormat(window.DATAVIS_LANG,b).format(v);case"bignumber":return new Et(v).toFormat(y.decimalPlaces,c(y),l(y));case"numeral":return bt(v).format(a(y));default:console.error("[DataVis // Type(Number) // Format] Unsupported primitive value formatting method: %s",E)}}function f(v,y,E){var b=!1,w;if(v==null)return"";if(typeof v=="number"){if(Number.isNaN(v))return"";v<0&&(b=!0,v=v*-1),w=u(v,y)}else if(bt.isNumeral(v))v.value()<0&&(b=!0,v=v.multiply(-1)),w=v.format(a(y));else if(Et.isBigNumber(v)){if(v.isNaN())return"";v.isNegative()&&(b=!0,v=v.abs()),w=v.toFormat(y.decimalPlaces,c(y),l(y))}else return console.error("[DataVis // Type(Number) // Format] Unsupported value type: %s",v),"";if(b)switch(y.negativeFormat){case"minus":w=(E?y.currencySymbol:"")+"-"+w;break;case"parens":w="("+(E?y.currencySymbol:"")+w+")";break}else w=(E?y.currencySymbol:"")+w;return w}function m(v){return bt.isNumeral(v)?v.value():le.isMoment(v)?v.unix():v}var g=function(v,y){var E=Number.EPSILON;return Math.abs(v-y)<E};function h(v,y){return v==null||y==null?v==y?0:v==null?-1:1:typeof v=="number"&&typeof y=="number"?g(v,y)?0:v<y?-1:1:bt.isNumeral(v)&&bt.isNumeral(y)?g(v.value(),y.value())?0:v.value()<y.value()?-1:1:Et.isBigNumber(v)&&Et.isBigNumber(y)?v.lt(y)?-1:v.gt(y)?1:0:bt.isNumeral(v)?Et.isBigNumber(y)?y.gt(v.value())?-1:y.lt(v.value())?1:0:typeof y=="number"?v.value()<y?-1:v.value()>y?1:0:gt.universalCmp(v,y):Et.isBigNumber(v)?bt.isNumeral(y)?v.lt(y.value())?-1:v.gt(y.value())?1:0:typeof y=="number"?v.lt(y)?-1:v.gt(y)?1:0:gt.universalCmp(v,y):typeof v=="number"?Et.isBigNumber(y)?y.gt(v)?-1:y.lt(v)?1:0:bt.isNumeral(y)?v<y.value()?-1:v>y.value()?1:0:gt.universalCmp(v,y):gt.universalCmp(v,y)}gt.registry.set("number",{matches:n,parse:r,decode:s,format:f,natRep:m,compare:h})})();(function(){function e(a){return typeof a!="string"?(console.error("[DataVis // Types // Currency // Parse] Call Error: `val` must be a string"),!1):a.charAt(0)==="$"?gt.registry.get("number").matches(a.substring(1)):a.startsWith("(")&&a.endsWith(")")?gt.registry.get("number").matches(a.substring(1,a.length-1)):!1}var t=new RegExp(/,/g);function n(a,l){if(a.charAt(0)==="$")return n(a.substring(1));if(a.charAt(0)==="("&&a.charAt(-1)===")")return n(a.substring(1,a.length-1))*-1;if(gt.registry.get("number").matches(a)){var c=a.replace(t,"");return l==="string"?c:a.indexOf(".")>=0||a.indexOf("e")>=0?parseFloat(c):parseInt(c)}else return null}function i(a,l){var c;if(typeof a!="string")return console.error("[DataVis // Type(Currency) // Parse] Call Error: `val` must be a string"),null;switch(l){case"primitive":return n(a,"number");case"numeral":return c=n(a,"number"),c==null?null:bt(c);case"bignumber":return c=n(a,"string"),c==null?null:new Et(c);default:return console.error("[DataVis // Type(Currency) // Parse] Call Error: invalid internal representation: %s",l),null}}function r(a,l){if(typeof a=="string")return i(a,l);if(typeof a=="number")switch(l){case"primitive":return a;case"bignumber":return new Et(a);case"numeral":return bt(a);default:return console.error("[DataVis // Type(Currency) // Decode] Call Error: invalid internal representation: %s",l),null}else return console.error("[DataVis // Type(Currency) // Decode] Call Error: unsupported conversion: %s to %s",typeof a,l),null}function s(a,l){return gt.registry.get("number").format(a,l,!0)}gt.registry.set("currency",{matches:e,parse:i,decode:r,format:s,natRep:gt.registry.get("number").natRep,compare:gt.registry.get("number").compare})})();(function(){var e=new RegExp(/^\d{4}-\d{2}-\d{2}$/);function t(l){return e.test(l)}function n(l,c,u){if(c=c||"string",u=u||{},typeof l!="string")return console.error("[DataVis // Type(Date) // Parse] Call Error: `val` must be a string"),null;switch(c){case"string":return l;case"native":return Date.parse(l);case"moment":return le(l,u);default:return null}}function i(l,c,u){if(typeof l=="string")return n(l,c,u)}function r(l,c){if(l==null)return"";if(typeof l=="string"){if(["","0000-00-00","0000-00-00 00:00:00"].indexOf(l)>=0)return"";l=le(l,"YYYY-MM-DD")}else l instanceof Date&&(l=le(l));return le.isMoment(l)?l.isValid()?l.format(c.full):"":(console.error("[DataVis // Type(Date) // Format] Unsupported value: %s",l),"")}function s(l){return typeof l=="string"?l:l instanceof Date?$t.sprintf("%04d-%02d-%02d",l.getFullYear(),l.getMonth()+1,l.getDate()):le.isMoment(l)?l.format("YYYY-MM-DD"):""}function a(l,c){return gt.registry.get("string").compare(s(l),s(c))}gt.registry.set("date",{matches:t,parse:n,decode:i,format:r,natRep:s,compare:a})})();(function(){var e=new RegExp(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/);function t(l){return e.test(l)}function n(l,c,u){if(c=c||"string",u=u||{},typeof l!="string")return console.error("[DataVis // Type(Date) // Parse] Call Error: `str` must be a string"),null;switch(c){case"string":return l;case"native":return Date.parse(l);case"moment":return le(l,u);default:return null}}function i(l,c){return typeof l=="string"?n(l,c):(console.error("[DataVis // Type(Datetime) // Decode] Call Error: unsupported conversion: %s to %s",typeof l,c),null)}function r(l,c){if(l==null)return"";if(typeof l=="string"){if(["","0000-00-00","0000-00-00 00:00:00"].indexOf(l)>=0)return"";l=le(l,"YYYY-MM-DD HH:mm:ss")}else l instanceof Date&&(l=le(l));return le.isMoment(l)?l.isValid()?c.abbrev&&l.hour()===0&&l.minute()===0&&l.second()===0?l.format(c.abbrev):l.format(c.full):"":(console.error("[DataVis // Type(Date) // Format] Unsupported value: %s",l),"")}function s(l){return typeof l=="string"?l:l instanceof Date?$t.sprintf("%04d-%02d-%02d %02d:%02d:%02d",l.getFullYear(),l.getMonth()+1,l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()):le.isMoment(l)?l.format("YYYY-MM-DD HH:mm:ss"):""}function a(l,c){return gt.registry.get("string").compare(s(l),s(c))}gt.registry.set("datetime",{matches:t,parse:n,decode:i,format:r,natRep:s,compare:a})})();(function(){var e=new RegExp(/^\d{2}:\d{2}:\d{2}$/);function t(l){return e.test(l)}function n(l,c,u){if(c=c||"string",typeof l!="string")return console.error("[DataVis // Type(Time) // Parse] Call Error: `str` must be a string"),null;switch(c){case"string":return l;case"native":return Date.parse("2000-01-01T"+l+".000Z");case"moment":return le("2000-01-01 "+l,"YYYY-MM-DD "+(u||"HH:mm:ss"));default:return null}}function i(l,c){return typeof l=="string"?n(l,c):(console.error("[DataVis // Type(Time) // Decode] Call Error: unsupported conversion: %s to %s",typeof l,c),null)}function r(l,c){if(l==null)return"";if(typeof l=="string"){if(["","0000-00-00","0000-00-00 00:00:00"].indexOf(l)>=0)return"";l=le("2000-01-01 "+l,"YYYY-MM-DD HH:mm:ss")}else l instanceof Date&&(l=le(l));return le.isMoment(l)?l.isValid()?l.format(c.full):"":(console.error("[DataVis // Type(Date) // Format] Unsupported value: %s",l),"")}function s(l){return typeof l=="string"?l:l instanceof Date?$t.sprintf("%02d:%02d:%02d",l.getHours(),l.getMinutes(),l.getSeconds()):le.isMoment(l)?l.format("HH:mm:ss"):""}function a(l,c){return gt.registry.get("string").compare(s(l),s(c))}gt.registry.set("time",{matches:t,parse:n,decode:i,format:r,natRep:s,compare:a})})();(function(){function e(r){return typeof r=="string"&&(r.startsWith("{")&&r.endsWith("}")||r.startsWith("[")&&r.endsWith("]"))}function t(r,s,a){if(s=s||"obj",typeof r!="string")return console.error("[DataVis // Type(JSON) // Parse] Call Error: `str` must be a string"),null;switch(s){case"obj":return JSON.parse(r);default:return null}}function n(r,s,a){if(typeof r=="string")return t(r,s);if(typeof r=="object")return r}function i(r,s){return typeof r=="string"?r:new ls(r,0,{onToggle:function(a){window.TableTool&&window.TableTool.update()}}).render()}gt.registry.set("json",{matches:e,parse:t,decode:n,format:i,natRep:null,compare:null})})();var Bt=function(){var e=0;return function(){return e+=1,"gensym-"+e}}();function Om(e){return function(t){return t(t)}(function(t){return e(function(){return t(t).apply(this,arguments)})})}function Ct(e){return e}function bC(){}function Sr(e,t){return e===t?0:e<t?-1:1}Number.EPSILON==null&&(Number.EPSILON=Math.pow(2,-52));var ur=function(){var e={},t=function(i,r){var s=Number.EPSILON;return Math.abs(i-r)<s};if(e.date=function(i,r){return i==null||r==null?i==r?0:i==null?-1:1:!le.isMoment(i)&&!le.isMoment(r)?i<r?-1:i>r?1:0:le.isMoment(i)&&le.isMoment(r)?i.isBefore(r)?-1:i.isAfter(r)?1:0:(de.warn("Cannot compare Moment w/ non-Moment"),0)},e.time=e.date,e.datetime=e.date,e.month=function(i,r){var s={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},a=s[i],l=s[r];return a==null?-1:l==null?1:a<l?-1:a>l?1:0},e.day_of_week=function(i,r){var s={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6},a=s[i],l=s[r];return a==null?-1:l==null?1:a<l?-1:a>l?1:0},e.year_and_month=function(i,r){var s={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},a=/^(\d{4}) (\w{3})$/,l,c,u,f,m;return(l=a.exec(i))!=null&&(c=Mr(l[1]),u=s[l[2]]),l==null||u==null?-1:((l=a.exec(r))!=null&&(f=Mr(l[1]),m=s[l[2]]),l==null||m==null?1:c<f?-1:c>f?1:u<m?-1:u>m?1:0)},Intl&&Intl.Collator){var n=Intl.Collator(void 0,{usage:"sort",sensitivity:"base"});e.string=function(i,r){return i==null||r==null?i==r?0:i==null?-1:1:n.compare(i,r)}}else e.string=function(i,r){return i==null||r==null?i==r?0:i==null?-1:1:i<r?-1:i>r?1:0};return e.number=function(i,r){return i==null||r==null?i==r?0:i==null?-1:1:typeof i=="number"&&typeof r=="number"?t(i,r)?0:i<r?-1:1:bt.isNumeral(i)&&bt.isNumeral(r)?t(i.value(),r.value())?0:i.value()<r.value()?-1:1:Et.isBigNumber(i)&&Et.isBigNumber(r)?i.lt(r)?-1:i.gt(r)?1:0:bt.isNumeral(i)?Et.isBigNumber(r)?r.gt(i.value())?-1:r.lt(i.value())?1:0:typeof r=="number"?i.value()<r?-1:i.value()>r?1:0:Sr(i,r):Et.isBigNumber(i)?bt.isNumeral(r)?i.lt(r.value())?-1:i.gt(r.value())?1:0:typeof r=="number"?i.lt(r)?-1:i.gt(r)?1:0:Sr(i,r):typeof i=="number"?Et.isBigNumber(r)?r.gt(i)?-1:r.lt(i)?1:0:bt.isNumeral(r)?i<r.value()?-1:i>r.value()?1:0:Sr(i,r):Sr(i,r)},e.currency=e.number,e.array=function(i,r){return Ur(i,r)},{byType:function(i){return e[i]},byValue:function(i){return typeof i=="number"||bt.isNumeral(i)||Et.isBigNumber(i)?e.number:le.isMoment(i)?e.date:k.isArray(i)?e.array:e.string}}}();function hn(e){return bt.isNumeral(e)?e.value():le.isMoment(e)?e.unix():e}function Im(){for(var e=Array.prototype.slice.call(arguments),t=e.shift(),n;e.length>0;){if(n=e.shift(),t instanceof Array||(t=[t]),typeof n!="function")return t;t=n.apply(null,t)}return t}function wC(){var e=Array.prototype.slice.call(arguments);return function(){var t=Array.prototype.slice.call(arguments);return Im.apply(null,Array.prototype.concat.call([t],e))}}function CC(){return Array.prototype.slice.call(arguments)}function Rm(e,t,n,i){return i=i||{},t.length===0?e(i):function(){return console.debug("[DataVis // Truly Yours] Calling #%s() to set property .%s",t[0].fn,t[0].prop),n[t[0].fn].bind(n)(function(r){return i[t[0].prop]=(t[0].conv||Ct)(r),Rm(e,t.slice(1),n,i)})}()}function EC(e,t,n){var i=this;if(!k.isArray(e))throw new Error("Call Error: `fns` must be an array");if(!k.isArray(t))throw new Error("Call Error: `args` must be an array");e=od(e);var r=function(){if(e.length===0)return n();e.shift().apply(i,t.concat(r))};return r()}function td(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.indexOf("#");return function(){var i=Array.prototype.slice.call(arguments),r=e.slice(),s=n===-1?[r.length,0]:[n,1];return Array.prototype.splice.apply(r,s.concat(i)),t.apply(this,r)}}function xC(){var e=Array.prototype.slice.call(arguments),t=td.apply(null,e);return t.prototype=e[0].prototype,t}function DC(){for(var e=Array.prototype.slice.call(arguments),t=0;t<e.length;t+=1)if(e[t]!==void 0)return e[t]}function nd(e){return e[0]}function id(e){return e.slice(1)}function Fl(e){return typeof e=="string"?String(parseInt(e,10))===e:+e===Math.floor(+e)}function Gl(e){return e===null||typeof e=="string"&&e===""?!1:!isNaN(+e)}function Mr(e){return typeof e=="string"?parseInt(e,10):Math.floor(+e)}function Hl(e){return+e}var Am=function(){var e=new RegExp(/^\d{4}-\d{2}-\d{2}$/),t=new RegExp(/^\d{2}:\d{2}:\d{2}$/),n=new RegExp(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/),i=new RegExp(/(^-?[1-9]{1}[0-9]{0,2}(,?\d{3})*(\.\d+)?(e[+-]?\d+)?$)|(^0(e[+-]?\d+)?$)|(^-?0?\.\d+(e[+-]?\d+)?$)/);return function r(s){var a;return e.test(s)?"date":t.test(s)?"time":n.test(s)?"datetime":typeof s=="string"&&s.startsWith("{")&&s.endsWith("}")||typeof s=="string"&&s.startsWith("[")&&s.endsWith("]")?"json":typeof s=="string"&&s.charAt(0)==="$"?(a=r(s.substring(1)),a==="number"?"currency":"string"):typeof s=="string"&&s.charAt(0)==="("&&s.charAt(s.length-1)===")"?(a=r(s.substring(1,s.length-1)),["number","currency"].indexOf(a)>=0?a:"string"):i.test(s)?"number":"string"}}(),TC=function(){var e=new RegExp(/(^-?[1-9]{1}[0-9]{0,2}(,?\d{3})*(\.\d+)?(e[+-]?\d+)?$)|(^0(e[+-]?\d+)?$)|(^-?0?\.\d+(e[+-]?\d+)?$)/),t=new RegExp(/,/g);return function n(i,r){if(typeof i!="string")throw new Error("Call Error: `s` must be a string");if(r!=null&&typeof r!="string")throw new Error("Call Error: `resultType` must be null or a string");if(r==null&&(r="number"),["number","string"].indexOf(r)<0)throw new Error('Call Error: `resultType` must be one of: ["number", "string"]');return i.charAt(0)==="$"?n(i.substring(1)):i.charAt(0)==="("&&i.charAt(-1)===")"?n(i.substring(1,i.length-1))*-1:e.test(i)?i.indexOf(".")>=0||i.indexOf("e")>=0?(r==="number"?parseFloat:Ct)(i.replace(t,"")):(r==="number"?parseInt:Ct)(i.replace(t,"")):null}}();function SC(e){return Fl(e)?Mr(e):0}function kC(e){return Gl(e)?Hl(e):0}function Ur(e,t){if(!k.isArray(e)||!k.isArray(t))throw new Error("Call Error: arguments must be arrays");if(e.length!==t.length)throw new Error("Call Error: arguments must have the same length");for(var n=0;n<e.length;n+=1){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function ni(e,t){if(!k.isArray(e)||!k.isArray(t))throw new Error("Call Error: arguments must be arrays");return e.length!==t.length?!1:Ur(e,t)===0}function ja(e,t,n){var i=e[t];e.splice(t,1),e.splice(n,0,i)}function OC(e,t,n){var i;for(i=0;i<e.length;i+=1)if(t(e[i],i)===n)return}function rd(e,t,n,i){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r],r,i)===n)return!1;return!0}function sd(e,t,n){if(!k.isArray(e))throw new Error("Call Error: `args` must be an array");if(typeof t!="function")throw new Error("Call Error: `fun` must be a function");if(typeof n!="function")throw new Error("Call Error: `done` must be a function");e=od(e);var i=0;function r(){return e.length===0?n():t(e.shift(),i++,r)}return r()}function Pm(e,t,n){for(var i=[],r=0;r<Math.min(e.length,n);r+=1)i.push(t(e[r],r));return i}var od=function(e){if(e==null)return{};var t;if(jQuery.isArray(e)){t=[];for(var n=0;n<e.length;n+=1)t[n]=e[n];return t}else if(jQuery.isPlainObject(e)){t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}else return e},it=function(e){var t=99;if(e==null)return{};function n(i,r){if(r>t)throw new Error("deepCopy: Maximum recursion depth exceeded");var s;if(jQuery.isArray(i)){s=[];for(var a=0;a<i.length;a+=1)s[a]=n(i[a],r+1);return s}else if(jQuery.isPlainObject(i)){s={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=n(i[l],r+1));return s}else return i}return n(e,0)},Mm=it;function ad(e){return e==null}function dl(e){var t=0;return k.each(e,function(){t+=1}),t===0}function Qe(){var e=Array.prototype.slice.call(arguments),t;e[0]===!0?(e.shift(),t=e.shift()):t=it(e.shift());var n=function(i,r){k.each(r,function(s,a){i[a]===void 0?i[a]=typeof s=="object"&&s!=null?it(s):s:k.isObject(i[a])&&k.isObject(s)&&n(i[a],s)})};return k.each(e,function(i){n(t,i)}),t}function me(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n;for(e=k.flatten(e),n=0;t!=null&&n<e.length;n+=1)t=t[e[n]];return n<e.length?void 0:t}function Ze(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=me.apply(void 0,e);return n!==void 0?n:t}function st(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift();e=k.flatten(e);for(var i=0;i<e.length-1;i+=1)n[e[i]]==null&&(n[e[i]]=k.isNumber(e[i])?[]:{}),n=n[e[i]];n[e[e.length-1]]=t}function di(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift();e=k.flatten(e);for(var i=0;i<e.length-1;i+=1)n[e[i]]===void 0&&(n[e[i]]=k.isNumber(e[i])?[]:{}),n=n[e[i]];n[e[e.length-1]]===void 0&&(n[e[e.length-1]]=t)}function fl(e,t,n,i){i=i||{},k.each(n,function(r){(Object.prototype.hasOwnProperty.call(e,r)||i.followPrototype&&r in e)&&(t[r]=e[r])})}function Po(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=me.apply(this,e);if(n===void 0)throw new t("Missing property: ["+e.slice(1).join(".")+"]");return n}function IC(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=Po.apply(this,e);if(t.indexOf(n)===-1)throw new Error("Property ["+e.slice(1).join(".")+'] must be one of: {"'+t.join('", "')+'"}');return n}function RC(){var e=Array.prototype.slice.call(arguments),t=e[0],n=Po.apply(this,e);if(!k.isArray(n))throw new t("Property ["+e.slice(1).join(".")+"] must be an array");return n}function AC(){var e=Array.prototype.slice.call(arguments),t=e[0],n=Po.apply(this,e);if(!k.isObject(n))throw new t("Property ["+e.slice(1).join(".")+"] must be an object");return n}function PC(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e.pop(),i=Po.apply(this,e);if(!(i instanceof n))throw new t("Property ["+e.slice(1).join(".")+"] must be an instance of "+n.name);return i}function MC(e,t,n){Nm(e,t);var i=arguments.callee.name+'(): Argument "'+t+'" must be an instance of '+n.name;if(!(e instanceof n))throw console.error(i+", received: %O",e),new Error(i);return e}function Nm(e,t){var n=arguments.callee.name+'(): Missing required argument "'+t+'"';if(ad(e))throw new Error(n);return e}function NC(e,t,n){var i=[],r,s;t==null?(r=0,s=e):(r=e,s=t),n==null&&(n=1);for(var a=r;a<=s;a+=n)i.push(a);return i}function LC(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=[],i;for(i=0;i<e.length;i+=1){if(t[e[i]]!==void 0&&(n.push(t),k.isObject(t[e[i]]))){t=t[e[i]];continue}break}for(i=n.length-1;i>=0&&(delete n[i][e[i]],!!dl(n[i]));i-=1);}function fs(e,t){var n=[];e.length>0&&n.push(e[0]);for(var i=1;i<e.length;i+=1)n.push(t),n.push(e[i]);return n}function FC(e,t,n){return t=t||Sr,Om(function(i){return function(r,s){function a(c,u,f){for(var m=[];c.length!==0&&u.length!==0;){var g=t(c[0],u[0]);if(!k.isNumber(g))throw"comparison result returned non-number";m.push(g<=0?c.shift():u.shift())}window.setTimeout(function(){f(m.concat(c.length>0?c:u))},0)}if(r.length<=1)window.setTimeout(function(){s(r)},0);else{var l=Math.floor(r.length/2);window.setTimeout(function(){i(r.slice(0,l),function(c){window.setTimeout(function(){i(r.slice(l),function(u){window.setTimeout(function(){a(c,u,s)},0)})},0)})},0)}}})(e,n)}function hl(e,t){t=t||function(a,l){return a<l};var n=function(a,l){for(var c=[],u=a.length,f=0,m=l.length,g=0;f<u&&g<m;){var h=t(a[f],l[g]);c.push(h?a[f++]:l[g++])}return c.concat(f<u?a.slice(f):l.slice(g))};if(e.length<=1)return e;var i=Math.floor(e.length/2),r=hl(e.slice(0,i),t),s=hl(e.slice(i),t);return n(r,s)}function GC(e,t,n,i){t=t||function(u,f){return u<f};var r=e.length,s=0,a=Math.min(e.length/50,500);function l(u,f){for(var m=[],g=u.length,h=0,v=f.length,y=0;h<g&&y<v;){var E=t(u[h],f[y]);m.push(E?u[h++]:f[y++])}return m.concat(h<g?u.slice(h):f.slice(y))}function c(u,f){if(u.length<=1)return f(u);var m=Math.floor(u.length/2);return c(u.slice(0,m),function(g){return c(u.slice(m),function(h){var v=function(){return f(l(g,h))};return s+=1,s%a===0?(typeof i=="function"&&i(s,r),window.setTimeout(v)):v()})})}return c(e,n)}var ld=function(e,t,n,i){t=t||function(h,v){return h<v};var r=e,s=e.length,a=new Array(s),l,c,u,f,m,g=function(h){for(var v=0;v+h<s;v+=h*2){for(l=v+h,c=l+h,c>s&&(c=s),m=v,u=v,f=l;u<l&&f<c;)t(r[u],r[f])?(a[m]=r[u],u++):(a[m]=r[f],f++),m++;for(;u<l;)a[m]=r[u],u++,m++;for(;f<c;)a[m]=r[f],f++,m++;for(m=v;m<c;m++)r[m]=a[m]}return h<s?(typeof i=="function"&&i(h,s),window.setTimeout(function(){g(h*2)})):n(r)};g(1)};function ud(e,t,n){var i={},r=[],s,a;for(s=0;s<t.length;s+=1)i[t[s]]=[];for(s=0;s<e.length;s+=1)i[e[s].sortSource]!=null&&i[e[s].sortSource].push(e[s]);for(s=0;s<t.length;s+=1)for(a=0;a<i[t[s]].length;a+=1)r.push(i[t[s]][a]);return n(r)}function Ju(e,t){var n,i=t.length;for(n=0;n<i&&e!==void 0;n+=1)e=e[t[n]];return e}function HC(e,t){return t=t||Sr,function(n,i){if(n=Ju(n,e),i=Ju(i,e),!k.isString(n)&&!k.isNumber(n)&&!k.isDate(n))throw`object "a" doesn't contain field path: `+e.toString();if(!k.isString(i)&&!k.isNumber(i)&&!k.isDate(i))throw`object "b" doesn't contain field path: `+e.toString();return t(n,i)}}function Yn(e,t){return k.reduce(e,function(n,i,r){return n[i]=t?t[r%t.length]:i,n},{})}function cd(e,t,n){n=Qe(n,{replace:!1,callOnNodes:!1});var i=function(r,s){return k.each(r,function(a,l){var c,u=s.slice();u.push(l),(n.callOnNodes||!k.isObject(a)||k.isArray(a))&&(c=t(a,u)),n.replace&&(r[l]=a=c),k.isObject(a)&&i(a,u)}),r};return i(e,[])}var Ee=function(e,t,n,i){if(typeof e!="string")throw new Error("Call Error: `name` must be a string");if(typeof t!="function")throw new Error("Call Error: `parent` must be a function");if(n!=null&&typeof n!="function")throw new Error("Call Error: `ctor` must be null or a function");if(i!=null&&typeof i!="object")throw new Error("Call Error: `ptype` must be null or an object");n==null&&t!==Object&&(n=function(){this.super.ctor.apply(this,arguments)});var r=function(){t!==Object&&(this.super=Bl(this,t)),n!=null&&n.apply(this,arguments)};return Object.defineProperty(r,"name",{value:e}),r.prototype=Object.create(t.prototype),r.prototype.constructor=r,k.each(i,function(s,a){r.prototype[a]=s}),r},Bl=function(e,t){var n=k.mapObject(t.prototype,function(i,r){if(typeof i=="function")return k.bind(i,e)});return n.ctor=k.bind(t,e),n},vi=function(){var e=0;return function(t,n){n!=null&&(t.events=Yn(n)),t._seenEvents={},t._eventHandlers={byEvent:{},byId:{}};var i=function(s){return typeof s.toString=="function"&&s.toString!==Object.prototype.toString?s.toString():t.prototype.constructor.name.toUpperCase()},r=function(s){return typeof s.getDebugTag=="function"?s.getDebugTag():typeof s.toString=="function"&&s.toString!==Object.prototype.toString?s.toString():t.prototype.constructor.name.toUpperCase()};t.prototype._initEventHandlers=function(){var s=this;s.eventHandlers==null&&(s.eventHandlers={},t.events!=null&&k.each(t.events,function(a){s.eventHandlers[a]=[]})),s.eventHandlersById==null&&(s.eventHandlersById=[])},t.prototype.echo=function(s,a,l){var c=this;l=l||{},k.isArray(a)||(a=[a]),k.each(a,function(u,f){if(typeof u!="string")throw new Error("Call Error: `evt["+f+"]` must be a string");if(t.events!=null&&t.events[u]===void 0)throw new Error("Unable to register handler on "+i(c)+' for "'+u+'" event: no such event available');s.on(u,function(){c.fire(u)},l)})},t.prototype.on=function(s,a,l){var c=this;return l=l||{},c._initEventHandlers(),k.isArray(s)||(s=[s]),k.each(s,function(u){if(t.events!=null&&t.events[u]===void 0)throw new Error("Unable to register handler on "+i(c)+' for "'+u+'" event: no such event available');var f={id:e++,who:l.who,info:l.info,cb:a,limit:l.limit};c.eventHandlers=c.eventHandlers||{},c.eventHandlers[u]=c.eventHandlers[u]||[],c.eventHandlers[u].push(f),c.eventHandlersById=c.eventHandlersById||[],c.eventHandlersById[f.id]=f;var m='Adding "'+s+'" event handler on '+i(c);l.who!=null&&(m+=" from "+l.who),console.debug("[DataVis // %s // On] %s",r(c),m)}),c},t.prototype.off=function(s,a,l){var c=this;if(l=l||{},c._initEventHandlers(),s==="*"){k.each(t.events,function(f){c.off(f,a,l)});return}if(t.events[s]===void 0)throw new Error("Unable to register handler on "+i(c)+' for "'+s+'" event: no such event available');var u=[];k.each(c.eventHandlers[s],function(f,m){f!=null&&(a==null||f.who===a?c.eventHandlersById[f.id]=null:u.push(f))}),l.silent||console.debug('[DataVis // %s // Off] Removed %s handlers from %s on "%s" event',r(c),c.eventHandlers[s].length-u.length,a,s),c.eventHandlers[s]=u},t.prototype.fire=function(){var s=this,a=Array.prototype.slice.call(arguments),l=a.shift(),c=a.shift()||{};if(s._initEventHandlers(),t.events[l]===void 0)throw new Error("Illegal event: "+l);var u=[];k.each(s.eventHandlers[l],function(g,m){var g=s.eventHandlers[l][m];g!=null&&(g.who&&c.notTo&&(k.isArray(c.notTo)&&c.notTo.indexOf(g.who)>=0||typeof c.notTo=="function"&&c.notTo(g.who)||typeof c.notTo=="object"&&c.notTo===g.who)||u.push({handler:g,index:m}))}),c.silent||console.debug('[DataVis // %s // Fire] Triggering %d handlers for "%s" event on %s: %O',r(s),u.length,l,i(s),a),sd(u,function(f,m,g){if(s.eventHandlersById[f.handler.id]!=null)return f.handler.info!=null?console.debug('[DataVis // %s // Fire] Executing "%s" handler %O (%d of %d) on %s: %s',r(s),l,f.handler.cb,m+1,u.length,i(s),f.handler.info):console.debug('[DataVis // %s // Fire] Executing "%s" handler %O (%d of %d) on %s',r(s),l,f.handler.cb,m+1,u.length,i(s)),f.handler.cb.apply(null,a),f.handler.limit&&(f.handler.limit-=1,f.handler.limit<=0&&(console.debug('[DataVis // %s // Fire] Removing "%s" handler #%d from %s after reaching invocation limit',r(s),l,m+1,i(s)),s.eventHandlers[l][f.index]=null)),c.async?window.setTimeout(g):g()},function(){c.silent||console.debug('[DataVis // %s // Fire] Done triggering handlers for "%s" event on %s',r(s),l,i(s)),s.eventHandlers[l]=k.without(s.eventHandlers[l],null)})}}}();function Ui(e,t){if(t!=null&&typeof t!="string"&&typeof t!="function")throw new Error("Call Error: `tagStart` must be null, a string, or a function");var n=function(i){return typeof t=="function"?t.call(i):typeof t=="string"?t:typeof i.getDebugTag=="function"?i.getDebugTag():typeof i.toString=="function"&&i.toString!==Object.prototype.toString?i.toString():e.prototype.constructor.name.toUpperCase()};e.prototype.debug=function(){var i=Array.prototype.slice.call(arguments),r=i.shift(),s=n(this);r!=null&&(s+=" // "+r),en.info.apply(null,Array.prototype.concat.call([s],i))}}function ji(e,t){if(t!=null&&typeof t!="string"&&typeof t!="function")throw new Error("Call Error: `tagPrefix` must be null, a string, or a function");var n=function(r){return typeof t=="function"?t.call(r):typeof t=="string"?t:typeof r.getDebugTag=="function"?r.getDebugTag():typeof r.toString=="function"&&r.toString!==Object.prototype.toString?r.toString():e.prototype.constructor.name.toUpperCase()},i=function(r){return function(){var s=Array.prototype.slice.call(arguments),a=s.shift(),l=s.shift(),c=["["+n(this)+(a!=null?" // "+a:"")+"] "+l],u=Function.prototype.call;u.apply(u,[console[r],console].concat(c,s))}};e.prototype.logDebug=i("debug"),e.prototype.logInfo=i("log"),e.prototype.logWarning=i("warn"),e.prototype.logError=i("error")}function Lm(e,t){k.each(t,function(n){e.prototype[n.name]=function(i,r){r=Qe(r,{sendEvent:!0,dontSendEventTo:[]}),this[n.prop]=i,n.event!=null&&r.sendEvent&&this.fire(n.event,{notTo:r.dontSendEventTo},i)}})}function Mo(e,t,n){k.isArray(n)||(n=[n]),k.each(n,function(i,r){if(typeof i!="string")throw new Error("Call Error: `methods["+r+"]` must be a string");e.prototype[i]=function(){var s=Array.prototype.slice.call(arguments);return this[t][i].apply(this[t],s)}})}function Cs(e){e.prototype.__namesGenerated=0,e.prototype.setName=function(t){var n=this;t!=null&&!k.isString(t)?(n.name=n.constructor.name+" #"+ ++e.prototype.__namesGenerated,n.logWarning(null,"Name provided for this "+n.constructor.name+" instance is not a string.")):t==null||t===""?(n.name=n.constructor.name+" #"+ ++e.prototype.__namesGenerated,n.logWarning(null,"Providing a name for this "+n.constructor.name+" instance is strongly recommended to improve logging.")):n.name=t},e.prototype.getName=function(){var t=this;return t.name}}function BC(e,t){e.locks===void 0&&(e.locks={}),e.locks[t]===void 0&&(e.locks[t]=0),e.locks[t]+=1,en.info("LOCK","Locking "+t+" - "+e.locks[t])}function WC(e,t){e.locks===void 0&&(e.locks={}),e.locks[t]===void 0&&(e.locks[t]=1),e.locks[t]-=1,en.info("LOCK","Unlocking "+t+" - "+e.locks[t])}function UC(e,t){return e.locks&&!!e.locks[t]}function dd(e){return jQuery("<div>").append(e).html()}function jC(e){return jQuery(e).map(function(t,n){return jQuery(n).text()})}function Wl(e){return e.css("display")!=="none"&&e.css("visibility")==="visible"}function Xt(e){return e instanceof Element||e instanceof jQuery}function fi(e){return e instanceof Element?e:e instanceof jQuery?e.get(0):null}function Fm(e,t){t instanceof jQuery&&(t=t.get(0));var n=t.getBoundingClientRect();if(n.top<0||n.left<0)return!1;if(e!==window){e instanceof Element&&(e=jQuery(e));var i=e.get(0).getBoundingClientRect();return n.bottom<=e.innerHeight()+i.top}else return n.bottom<=window.innerHeight}function Gm(e,t,n){var i;return function(){var r=Fm(e,t);r!==i&&(i!==void 0&&typeof n=="function"&&n(r),i=r)}}function Ne(e,t,n){var i=jQuery("<span>").addClass("fa");return e.substr(0,3)==="fa-"?i.addClass(e):i.text(String.fromCharCode(parseInt(e,16))),t!=null&&i.addClass(t),n!=null&&i.attr("title",n),i}var Hm=function(){var e={},t=new qt("LOAD SCRIPT");return function(n,i,r){k.defaults(r,{needAsyncSetup:!1});var s=function(l,c){var u=document.getElementsByTagName("head")[0],f=document.createElement("script");f.type="text/javascript",f.src=l,f.onreadystatechange=c,f.onload=c,u.appendChild(f)},a=function(l){var c=function(){console.debug(l?"[DataVis // Load Script] [url = %s] Already loaded":"[DataVis // Load Script] [url = %s] Finished executing loaded script",n)};return r.needAsyncSetup?function(){c(),i(l,function(){console.debug("[DataVis // Load Script] [url = %s] Exiting control of the script loader",n),l||(e[n]=!0,t.unlock())})}:function(){c(),console.debug("[DataVis // Load Script] [url = %s] Exiting control of the script loader",n),l||(e[n]=!0,t.unlock()),i(l)}};t.onUnlock(function(){e[n]?a(!0)():(t.lock(),s(n,a(!1)))},$t.sprintf("Waiting to load [url = %s]",n))}}();function An(e,t,n){n=n||{};var i=n.colConfig instanceof Ae&&n.colConfig.get(n.field)||n.colConfig||{};n.typeInfo instanceof Ae&&n.typeInfo.get(n.field)||n.typeInfo;var r=n.operations||[];if(e instanceof jQuery&&(e=e.get(0)),!(e instanceof HTMLTableCellElement))throw new Error("Call Error: `cell` must be a HTMLTableCellElement instance");var s=e;if(i.maxHeight!=null&&t!==""){var a=document.createElement("div");a.classList.add("wcdv_maxheight_wrapper"),a.style.maxHeight=i.maxHeight,i.width&&(a.classList.add("wcdv_maxheight_wrapper_withwidth"),a.style.width=i.width);var l=document.createElement("button");l.setAttribute("title","Full value has been truncated; click to show it."),l.classList.add("wcdv_icon_button"),l.classList.add("wcdv_icon_button_incell"),l.classList.add("wcdv_icon_button_nolabel"),l.classList.add("wcdv_show_full_value");var c=document.createElement("span");c.classList.add("fa"),c.classList.add("fa-asterisk");var u=document.createElement("div");u.style.display="inline-block",u.style.float="right",k.each(r,function(f,m){u.appendChild(pl("cell",f,m,{inCell:!0}))}),s=document.createElement("div"),e.appendChild(a),a.appendChild(l),l.appendChild(c),a.appendChild(u),a.appendChild(s)}else if(r.length>0){var a=document.createElement("div"),u=document.createElement("div");u.style.display="inline-block",u.style.float="right",k.each(r,function(g,h){u.appendChild(pl("cell",g,h,{inCell:!0}))}),s=document.createElement("div"),e.appendChild(a),a.appendChild(u),a.appendChild(s)}kr(s,t,n)}function kr(e,t,n){n=n||{};var i=n.colConfig instanceof Ae&&n.colConfig.get(n.field)||n.colConfig||{},r=n.typeInfo instanceof Ae&&n.typeInfo.get(n.field)||n.typeInfo||{};if(e instanceof jQuery&&(e=e.get(0)),!(e instanceof Element))throw new Error("Call Error: `container` must be an Element instance");t instanceof Element?e.appendChild(t):t instanceof jQuery?e.appendChild(t.get(0)):i.allowHtml&&r.type==="string"?e.innerHTML=t:t===""?e.innerText="":e.innerText=t}function pl(e,t,n,i){i=i||{},k.defaults(i,{inCell:!1});var r=document.createElement("button");return r.setAttribute("type","button"),r.setAttribute("data-operation-type",e),r.setAttribute("data-operation-index",n),r.classList.add("wcdv_operation"),e==="cell"?(r.classList.add("wcdv_icon_button"),r.classList.add("wcdv_icon_button_incell"),r.classList.add("wcdv_icon_button_nolabel"),r.style.float="initial",r.appendChild(Ne(t.icon).get(0))):(t.icon&&r.appendChild(Ne(t.icon).get(0)),t.label?(r.classList.add("wcdv_nowrap"),r.append(t.label)):r.classList.add("no_label")),t.tooltip&&r.setAttribute("title",t.tooltip),r}function Bm(e,t,n,i){var r=jQuery("<label>"),s=jQuery("<input>",{type:"checkbox",checked:e}).on("change",t);return r.append(s).append(n).appendTo(i),s}function Fi(e,t,n,i,r,s){return e!=null&&di(n,e,t),Bm(e!=null?me(e,t):n,function(){var a=jQuery(this).prop("checked");e!=null&&(console.debug("[DataVis // Grid // Toolbar] Setting `"+t.join(".")+"` to "+a),st(a,e,t)),typeof s=="function"&&s(a)},i,r)}function Wm(e,t,n,i,r,s,a,l,c){di(n,e,t);var u=me(e,t),f=jQuery("<div>").css("display","inline-block").appendTo(c),m=function(){var g=f.find("input[type=radio]:checked").val();typeof a=="function"&&(g=a(g)),console.debug("[DataVis // Grid // Toolbar] Setting `"+t.join(".")+"` to "+g),st(g,e,t),typeof l=="function"&&l(g)};return i&&jQuery("<label>").text(i).appendTo(f),k.each(s,function(g){var h=k.isString(g)?g:g.label,v=k.isString(g)?g:g.value;jQuery("<label>").append(jQuery("<input>",{type:"radio",name:r,value:v}).on("change",m)).append(h).appendTo(f)}),f.find("input[type=radio]").val([u]),f}function YC(e){return k.isNumber(e)?[e,": Number"]:k.isString(e)?['"'+e+'"',": String"]:k.isArray(e)?[e,": Array"]:k.isObject(e)?[e,": Object"]:[e,": Unknown"]}function zC(e,t){return":"+e+":"+t}var de={info:Function.prototype.bind.call(window.console.log,window.console),warn:Function.prototype.bind.call(window.console.warn,window.console),error:Function.prototype.bind.call(window.console.error,window.console)},qC={info:function(){de.info.apply(window.console,k.flatten(arguments,!0))},warn:function(){de.warn.apply(window.console,k.flatten(arguments,!0))},error:function(){de.error.apply(window.console,k.flatten(arguments,!0))}},en={info:function(e){if(window.MIE&&window.MIE.DEBUGGING){var t=Array.prototype.slice.call(arguments,1),n=Array.prototype.concat.call(["[DEBUG // "+e+"] "+t[0]],t.slice(1));return de.info.apply(window.console,n)}},warn:function(e){if(window.MIE&&window.MIE.DEBUGGING){var t=Array.prototype.slice.call(arguments,1),n=Array.prototype.concat.call(["[DEBUG // "+e+"] "+t[0]],t.slice(1));return de.warn.apply(window.console,n)}},error:function(e){if(window.MIE&&window.MIE.DEBUGGING){var t=Array.prototype.slice.call(arguments,1),n=Array.prototype.concat.call(["[DEBUG // "+e+"] "+t[0]],t.slice(1));return de.error.apply(window.console,n)}}},Ul=function(){var e={};return function(t){return e[t]=e[t]==null?0:e[t]+1,t+="["+e[t]+"]",console.log("~~~ ASYNC: "+t+" - START"),{finish:function(){console.log("~~~ ASYNC: "+t+" - FINISH")}}}}();function QC(e,t,n){var i=t+" See https://miewiki.med-web.com/wiki/index.php/Advanced_Reports:_Filtering,_Graphing,_Comparing#"+n+" for more information.";emailWarning(e,i)}var _f=function(e,t){e.decoded||(e.orig===void 0&&(e.orig=e.value),typeof e.orig=="string"?e.value=gt.registry.get(t.type).parse(e.orig,t.internalType,t.format):e.value=gt.registry.get(t.type).decode(e.orig,t.internalType),e.decoded=!0)};function ht(e,t,n,i){var r=!0;e=e||{},t=t||{},i=i||{decode:!0},k.defaults(i,{debug:!1,overrideType:null,saferCaching:!0}),i.debug&&console.debug("[DataVis // Format] typeInfo = %O ; colConfig = %O ; cell = %O ; opts = %O",t,e,n,i);var s=function(g,h){var v=it(h),y;return g[0]==="$"&&(v.currencySymbol="$",g=g.slice(1)),y=g.match(/^0,0/),st(!!y,v,"integerPart","grouping"),y=g.match(/\.(0+)$/),st(y!=null?y[1].length:0,v,"decimalPlaces"),v};if((le.isMoment(n)||bt.isNumeral(n)||Et.isBigNumber(n)||n==null||typeof n!="object")&&(n={value:n}),n.cachedRender!=null)return n.cachedRender;var a=n.orig||n.value,l=i.overrideType||t.type,c=e.format,u=e.format_dateOnly,f={integerPart:{grouping:!1,groupSize:3,groupSeparator:","},fractionalPart:{grouping:!1,groupSize:3,groupSeparator:" "},radixPoint:".",decimalPlaces:null,negativeFormat:"minus",roundingMethod:"half_up"};window.Intl!=null&&window.Intl.NumberFormat!=null&&window.Intl.NumberFormat.prototype.formatToParts!=null&&k.each(Intl.NumberFormat(window.DATAVIS_LANG).formatToParts("1234.5"),function(g){switch(g.type){case"group":f.integerPart.groupSeparator=g.value;break;case"decimal":f.radixPoint=g.value}});var m=Qe({integerPart:{grouping:!0},decimalPlaces:2,negativeFormat:"parens",currencySymbol:"$"},f);if(c==null)switch(l){case"number":c=it(f);break;case"currency":c=it(m);break;case"date":c="LL";break;case"datetime":c="LLL";break;case"time":c="LTS";break}else switch(l){case"number":c=typeof c=="string"?s(c,f):Qe(c,f);break;case"currency":c=typeof c=="string"?s(c,m):Qe(c,m);break}if(u==null&&l==="datetime"&&(u="LL"),a==null||a==="")a="";else if(["date","datetime"].indexOf(l)>=0&&(le.isMoment(n.value)&&!n.value.isValid()||["","0000-00-00","0000-00-00 00:00:00"].indexOf(n.value)>=0))a="";else switch(l){case"date":case"time":case"datetime":i.decode&&_f(n,t),a=gt.registry.get(l).format(n.value,{full:c,abbrev:l==="datetime"&&e.hideMidnight?u:null});break;case"number":case"currency":i.decode&&_f(n,t),a=gt.registry.get(l).format(n.value,c);break;case"json":typeof n.value=="string"?a=n.value:a=new ls(n.value,0,{onToggle:function(g){window.TableTool&&TableTool.update()}}).render();break;case"string":a=n.value;break;default:de.error('Unable to format - unknown type: { field = "%s", type = "%s", value = "%s" }',t.field,l,n.value)}return typeof n.render=="function"&&(a=n.render(a),i.saferCaching&&(a instanceof jQuery||a instanceof Element)&&(r=!1)),r&&(n.cachedRender=a),a}var Ys="yyyy-MM-dd",Um="HH:mm:ss";function $C(e){switch(miecgictrl.dateformat){case 1:Ys="MM-dd-yyyy";break;case 2:Ys="dd-MM-yyyy";break;case 3:Ys="yyyy-MM-dd";break;default:Ys="yyyy-MM-dd"}Um=miecgictrl.militaryTime?"HH:mm:ss":"hh:mm:ss tt",e()}function fd(e){var t={MM:function(n){var i=n.getMonth()+1;return i>9?i:"0"+i},dd:function(n){var i=n.getDate();return i>9?i:"0"+i},yyyy:function(n){return n.getFullYear()}};return k.map(Ys.split("-"),function(n){return t[n]?t[n](e):"[UNKNOWN]"}).join("-")}function hd(e){var t={HH:function(n){var i=n.getHours();return i>9?i:"0"+i},hh:function(n){var i=n.getHours();return i===0?i=12:i>12&&(i=i-12),i>9?i:"0"+i},mm:function(n){var i=n.getMinutes();return i>9?i:"0"+i},ss:function(n){var i=n.getSeconds();return i>9?i:"0"+i},tt:function(n){var i=n.getHours();return i<12?"AM":"PM"}};return Um.replace(/[A-Za-z]+/g,function(n){if(t[n])return t[n](e)})}function jm(e){return fd(e)+" "+hd(e)}function VC(e){return e===""||e==="0000-00-00"||e==="0000-00-00 00:00:00"?"[UNKNOWN]":fd(new Date(e))}function KC(e){return e===""||e==="0000-00-00"||e==="0000-00-00 00:00:00"?"[UNKNOWN]":hd(new Date(e))}function JC(e){if(e===""||e==="0000-00-00"||e==="0000-00-00 00:00:00")return"[UNKNOWN]";jm(new Date(e))}function XC(e){return e==="0000-00-00"?"":e}function ZC(e){return e==="0000-00-00 00:00:00"?"":e}var eE=/^\d\d\d\d-\d\d-\d\d$/;function tE(e){return typeof e=="string"&&eE.test(e)?e+" 00:00:00":e}function Ym(e,t,n){var i,r,s;if(e.table.blockCount===void 0&&(e.table.blockCount=0),e.table.blockCount+=1,console.debug("[DataVis // Blocking // Push] COUNT =",e.table.blockCount,"> INFO =",n),e.table.blockCount===1){switch(s=me(e,"table","output","method"),s){case"jqwidgets":i=jQuery(document.getElementById(e.table.id)).children('div [role="grid"]');break;case"pivot":i=jQuery(document.getElementById(e.table.id));break;default:i=null}i!==null?(r={message:null,overlayCSS:{opacity:.9,backgroundColor:"#FFF"}},typeof t=="function"&&(r.onBlock=t),i.block(r)):t()}else typeof t=="function"&&t()}function zm(e,t){var n,i;if(e.table.blockCount===void 0&&(e.table.blockCount=0),e.table.blockCount>0&&(e.table.blockCount-=1,console.debug("[DataVis // Blocking // Pop] COUNT =",e.table.blockCount,"> INFO =",t),e.table.blockCount===0)){switch(i=me(e,"table","output","method"),i){case"jqwidgets":n=jQuery(document.getElementById(e.table.id)).children('div [role="grid"]');break;case"pivot":n=jQuery(document.getElementById(e.table.id));break;default:n=null}n!==null&&n.unblock()}}function nE(e){return e.table.blockCount>0}function iE(e,t,n){if(typeof t!="function")throw Error("Call Error: `fn` must be a function");Ym(e,function(){window.setTimeout(function(){t(),zm(e,n)},jQuery.blockUI.defaults.fadeIn)},n)}function cr(){var e=this;e.data={},e.events={},e.eventCount={}}cr.prototype.start=function(e){var t=this,n=e[0],i=e[1];di([],t.events,n),di(0,t.eventCount,n,i),di({},t.data,n),t.eventCount[n][i]+=1,t.eventCount[n][i]>1&&(i+=" (#"+t.eventCount[n][i]+")"),t.events[n].push(i),console.debug("[DataVis // Timing] Received <START> event for ["+n+" ] "+i),st(Date.now(),t.data,n,i,"start")};cr.prototype.stop=function(e){var t=this,n=e[0],i=e[1];if(di(0,t.eventCount,n,i),t.eventCount[n][i]>1&&(i+=" (#"+t.eventCount[n][i]+")"),console.debug("[DataVis // Timing] Received <STOP> event for ["+n+" ] "+i),me(t.data,n,i,"start")===void 0){de.warn("Received <STOP> event for ["+n+" : "+i+"] with no <START> event");return}st(Date.now(),t.data,n,i,"end")};cr.prototype.getSubjects=function(){return k.keys(this.events)};cr.prototype.dump=function(e){var t=this,n=function(i){if(ad(t.events[i]))throw new Error("Unknown subject: "+i);k.each(t.events[i],function(r){var s=me(t.data,i,r,"start"),a=me(t.data,i,r,"end");de.info("[TIMING] "+i+" : "+r+" >> "+(a-s)+"ms")})};e!=null?n(e):k.each(t.getSubjects(),n)};function qm(){for(var e,t,n,i=/\+/g,r=/([^&=]+)=?([^&]*)/g,s=function(c){return decodeURIComponent(c.replace(i," "))},a=window.location.search.substring(1),l={};e=r.exec(a);)t=s(e[1]),n=s(e[2]),l[t]?(k.isArray(l[t])||(l[t]=[l[t]]),l[t].push(n)):l[t]=n;return l}function Qm(e,t){if(!(e instanceof Ae))throw new Error("Call Error: `colConfig` must be an OrdMap instance");return t==null?(de.warn("Unable to validate column configuration without data"),!1):t.isPlain?t.data.length===0?(de.info("Unable to validate column configuration using data with no rows"),!1):(e.each(function(n,i){if(t.data[0].rowData[i]===void 0)return de.warn('Column configuration refers to field "'+i+'" which does not exist in the data'),!1}),!0):(de.info("Can only validate column config for plain output"),!1)}function jr(e,t,n){var i=[];if(!(e instanceof Ae))throw new Error("Call Error: `colConfig` must be an OrdMap instance");if(!(n instanceof Ae))throw new Error("Call Error: `typeInfo` must be an OrdMap instance");if(Qm(e,t),e._keys.length>0){var r=e.filter(function(l){return!l.isHidden}),s=r.filter(function(l){return l.isPinned}).keys(),a=r.filter(function(l){return!l.isPinned}).keys();i=s.concat(a)}else n.size()>0?i=k.reject(n.keys(),function(l){return l.charAt(0)==="_"}):t!=null&&(t.isPlain&&t.data.length>0?i=k.keys(t.data[0].rowData):t.isGroup&&t.data[0].length>0?i=k.keys(t.data[0][0].rowData):t.isPivot&&t.data[0][0].length>0&&(i=k.keys(t.data[0][0][0].rowData)));return console.debug("[DataVis // Determine Columns] Columns = %O",i),i}function pd(e,t){if(!(e instanceof Blob))throw new Error("Call Error: `blob` must be a Blob");if(window.navigator.msSaveBlob!=null)window.navigator.msSaveBlob(e,t);else{var n=document.createElement("a");n.download=t,n.href=URL.createObjectURL(e),jQuery(document.body).append(n),n.click(),n.remove()}}function $m(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);var a=new Blob([i],{type:n});return a}function Vm(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}function rE(e){}var po=Ee("EagerPipeline",Object,function(e){this.x=e});po.prototype.andThen=function(e){var t=this.x;return new po(e(t))};po.prototype.andThenCurry=function(){var e=td.apply(null,arguments);return this.andThen(e)};po.prototype.done=function(){return this.x};String.prototype.repeat||(String.prototype.repeat=function(e){if(this==null)throw new TypeError("can't convert "+this+" to object");var t=""+this;if(e=+e,e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e|=0,t.length==0||e==0)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(;e>>=1;)t+=t;return t+=t.substring(0,t.length*e-t.length),t});String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){var n=t>0?t|0:0;return this.substring(n,n+e.length)===e}});String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(t===void 0||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e});Number.isNaN=Number.isNaN||function(e){return e!==e};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null});const sE=Object.freeze(Object.defineProperty({__proto__:null,EagerPipeline:po,I:Ct,NOP:bC,Timing:cr,Y:Om,addSrcInfo:zC,addTimeComponent:tE,arrayCompare:Ur,arrayCopy:Mm,arrayEqual:ni,asyncChain:EC,asyncEach:sd,blockGrid:Ym,car:nd,cdr:id,chain:Im,cmpObjField:HC,concatLog:qC,copyProps:fl,curry:td,curryCtor:xC,dataURItoBlob:$m,debug:en,deepCopy:it,deepDefaults:Qe,delegate:Mo,deprecated:QC,determineColumns:jr,eachUntil:OC,eachUntilObj:rd,either:DC,fontAwesome:Ne,format:ht,formatDate:fd,formatDateString:VC,formatDateTime:jm,formatDateTimeString:JC,formatTime:hd,formatTimeString:KC,gensym:Bt,getComparisonFn:ur,getElement:fi,getNatRep:hn,getParamsFromUrl:qm,getProp:me,getPropDef:Ze,getText:jC,gridIsBlocked:nE,init:$C,interleaveWith:fs,iota:NC,isElement:Xt,isElementInViewport:Fm,isEmpty:dl,isFloat:Gl,isInt:Fl,isLocked:UC,isNothing:ad,isVisible:Wl,loadScript:Hm,lock:BC,log:de,logAsync:Ul,makeArray:CC,makeChain:wC,makeCheckbox:Bm,makeOperationButton:pl,makeRadioButtons:Wm,makeSetters:Lm,makeSubclass:Ee,makeSuper:Bl,makeToggleCheckbox:Fi,mapLimit:Pm,mergeSort:FC,mergeSort2:hl,mergeSort3:GC,mergeSort4:ld,mixinDebugging:Ui,mixinEventHandling:vi,mixinLogging:ji,mixinNameSetting:Cs,moveArrayElement:ja,needArg:Nm,needArgInst:MC,needProp:Po,needPropArr:RC,needPropIn:IC,needPropInst:PC,needPropObj:AC,objFromArray:Yn,objGetPath:Ju,onVisibilityChange:Gm,outerHtml:dd,parseNumber:TC,pigeonHoleSort:ud,presentDownload:pd,pruneTree:LC,removeZeroDateTimes:ZC,removeZeroDates:XC,setElement:kr,setProp:st,setPropDef:di,setTableCell:An,shallowCopy:od,sleep:rE,stringValueType:Am,toFloat:Hl,toInt:Mr,trulyYours:Rm,tryFloatConvert:kC,tryIntConvert:SC,unblockGrid:zm,universalCmp:Sr,unlock:WC,uuid:Vm,validateColConfig:Qm,valueInfo:YC,walkObj:cd,withGridBlock:iE},Symbol.toStringTag,{value:"Module"})),Km={"AGGREGATE.FIELD.DENOMINATOR":"Denom","AGGREGATE.FIELD.NUMERATOR":"Num","AGGREGATE.HEADER_DISPLAY":"%s of %s","AGGREGATE.NAME.AVERAGE":"Average","AGGREGATE.NAME.COUNT":"Count","AGGREGATE.NAME.COUNT_DISTINCT":"Count Distinct","AGGREGATE.NAME.COUNT_OVER_COUNT":"Count/Count","AGGREGATE.NAME.DISTINCT_VALUES":"Distinct Values","AGGREGATE.NAME.FIRST":"First","AGGREGATE.NAME.LAST":"Last","AGGREGATE.NAME.MAX":"Max","AGGREGATE.NAME.MIN":"Min","AGGREGATE.NAME.NTH":"Nth","AGGREGATE.NAME.SUM":"Sum","AGGREGATE.NAME.SUM_OVER_SUM":"Sum/Sum","AGGREGATE.NAME.VALUES":"Values","AGGREGATE.NAME.VALUES_WITH_COUNTS":"Values w/ Counts","CALENDAR.DATE":"date","CALENDAR.DAY":"day","CALENDAR.DAY.FRIDAY":"Friday","CALENDAR.DAY.MONDAY":"Monday","CALENDAR.DAY.SATURDAY":"Saturday","CALENDAR.DAY.SUNDAY":"Sunday","CALENDAR.DAY.THURSDAY":"Thursday","CALENDAR.DAY.TUESDAY":"Tuesday","CALENDAR.DAY.WEDNESDAY":"Wednesday","CALENDAR.MONTH":"month","CALENDAR.MONTH.APRIL":"April","CALENDAR.MONTH.AUGUST":"August","CALENDAR.MONTH.DECEMBER":"December","CALENDAR.MONTH.FEBRUARY":"February","CALENDAR.MONTH.JANUARY":"January","CALENDAR.MONTH.JULY":"July","CALENDAR.MONTH.JUNE":"June","CALENDAR.MONTH.MARCH":"March","CALENDAR.MONTH.MAY":"May","CALENDAR.MONTH.NOVEMBER":"November","CALENDAR.MONTH.OCTOBER":"October","CALENDAR.MONTH.SEPTEMBER":"September","CALENDAR.QUARTER":"quarter","CALENDAR.WEEK":"week","CALENDAR.YEAR":"year","DIALOG.CANCEL":"Cancel","DIALOG.OK":"OK","FILTER.DATE.OPERATOR.AFTER":"after","FILTER.DATE.OPERATOR.AND":"and","FILTER.DATE.OPERATOR.BEFORE":"before","FILTER.DATE.OPERATOR.BETWEEN":"between","FILTER.DATE.OPERATOR.CURRENT":"current","FILTER.DATE.OPERATOR.EVERY":"every","FILTER.DATE.OPERATOR.LAST":"last","FILTER.DATE.OPERATOR.ON":"on","GRAPH.TITLEBAR.SHOW_HIDE":"Show/Hide Graph","GRAPH.TITLEBAR.SHOW_HIDE_CONTROLS":"Show/Hide Graph Controls","GRID.COLCONFIG_WIN.ALLOW_HTML":"Allow HTML to be rendered?","GRID.COLCONFIG_WIN.HIDE_COL":"Hide column?","GRID.COLCONFIG_WIN.MOVE_COL_TO_BOTTOM":"Move to bottom of column list","GRID.COLCONFIG_WIN.MOVE_COL_TO_TOP":"Move to top of column list","GRID.COLCONFIG_WIN.PINNED_COL_WARNING":"Pinned columns always appear before any others in plain (non-grouped) output, in the relative order shown above.","GRID.COLCONFIG_WIN.PIN_COL":"Pin column to left side of table?","GRID.COLCONFIG_WIN.RENAME_COL":"Rename column in table.","GRID.COLCONFIG_WIN.RENAME_COL.PROMPT":'Rename field "%s" to what?',"GRID.COLCONFIG_WIN.REORDER_COLS":"Click and drag to reorder columns","GRID.COLCONFIG_WIN.RESET_COL_ORDER":"Reset Column Order","GRID.COLCONFIG_WIN.TBL.DISPLAY":"Display","GRID.COLCONFIG_WIN.TBL.FIELD":"Field","GRID.COLCONFIG_WIN.TBL.OPTIONS":"Options","GRID.COLCONFIG_WIN.TITLE":"Columns","GRID.GROUP_FUN.DATE.FULL_DATE":"Full Date (No Time)","GRID.GROUP_FUN.DATE.YEAR":"Year","GRID.GROUP_FUN.DATE.YEAR_AND_MONTH":"Year & Month","GRID.GROUP_FUN.DATE.YEAR_AND_QUARTER":"Year & Quarter","GRID.GROUP_FUN.DATE.YEAR_AND_WEEK":"Year & Week (ISO)","GRID.GROUP_FUN.DATE_TIME.SLICE.15MIN":"Date & Time: 15 min slices","GRID.GROUP_FUN.DATE_TIME.SLICE.1HR":"Date & Time: 1 hr slices","GRID.GROUP_FUN.DIALOG.DATE":"Date","GRID.GROUP_FUN.DIALOG.DATE_TIME":"Date & Time","GRID.GROUP_FUN.DIALOG.OTHER":"Other","GRID.GROUP_FUN.DIALOG.REPEATING":"Repeating","GRID.GROUP_FUN.DIALOG.TIME":"Time","GRID.GROUP_FUN.DIALOG.TITLE":"Apply Function to %s","GRID.GROUP_FUN.NONE":"None","GRID.GROUP_FUN.REPEATING.DAY_OF_WEEK":"Day of Week","GRID.GROUP_FUN.REPEATING.MONTH":"Month","GRID.GROUP_FUN.REPEATING.QUARTER":"Quarter","GRID.GROUP_FUN.REPEATING.WEEK":"Week (ISO)","GRID.GROUP_FUN.TIME.SLICE.15MIN":"Time: 15 min slices","GRID.GROUP_FUN.TIME.SLICE.1HR":"Time: 1 hr slices","GRID.PERSPECTIVE_WIN.TEMP_PERSPECTIVE_WARNING":"This perspective is temporary; the configuration below does not reflect the current state of any bound prefs modules.","GRID.PERSPECTIVE_WIN.TITLE":"Perspective","GRID.TABLE.ADD_FILTER_HELP":'Click to add a filter for "%s"',"GRID.TABLE.DRAGGABLE_FIELD_HELP":"You can drag & drop this field into the grid controls above to filter, group or pivot.","GRID.TABLE.SORT_MENU.ASCENDING":"%s, Ascending","GRID.TABLE.SORT_MENU.DESCENDING":"%s, Descending","GRID.TABLE.SORT_MENU.RESET_SORT":"Reset Sort","GRID.TEMPLATE_EDITOR.CONFIG.AFTER":"After","GRID.TEMPLATE_EDITOR.CONFIG.AFTER_GROUP":"After Group","GRID.TEMPLATE_EDITOR.CONFIG.BEFORE":"Before","GRID.TEMPLATE_EDITOR.CONFIG.BEFORE_GROUP":"Before Group","GRID.TEMPLATE_EDITOR.CONFIG.EMPTY":"Empty","GRID.TEMPLATE_EDITOR.CONFIG.ITEM":"Item","GRID.TEMPLATE_EDITOR.GROUPED":"Grouped","GRID.TEMPLATE_EDITOR.PIVOTTED":"Pivotted","GRID.TEMPLATE_EDITOR.PLAIN":"Plain","GRID.TEMPLATE_EDITOR.TITLE":"Template Editor","GRID.TITLEBAR.CANCEL":"Cancel","GRID.TITLEBAR.CLEAR_FILTER":"clear filter","GRID.TITLEBAR.DATA_LIMITED_WARNING":"You are not looking at all of the records. Click to fetch the rest (this may take a while).","GRID.TITLEBAR.DOWNLOAD_CSV":"Download CSV","GRID.TITLEBAR.GENERATE_CSV":"Generate CSV","GRID.TITLEBAR.GROUP_COUNT_PLURAL":"%d groups","GRID.TITLEBAR.GROUP_COUNT_SINGULAR":"%d group","GRID.TITLEBAR.LOADED":"Loaded","GRID.TITLEBAR.LOADING":"Loading...","GRID.TITLEBAR.NOT_LOADED":"Not Loaded","GRID.TITLEBAR.RECORD_COUNT_PLURAL":"%d records","GRID.TITLEBAR.RECORD_COUNT_SINGULAR":"%d record","GRID.TITLEBAR.REFRESH":"Refresh","GRID.TITLEBAR.SELECTED_COUNT_PLURAL":"%d records selected","GRID.TITLEBAR.SELECTED_COUNT_SINGULAR":"%d record selected","GRID.TITLEBAR.SHOW_DEBUG_INFO":"Show Grid Debug Info","GRID.TITLEBAR.SHOW_HIDE":"Show/Hide Grid","GRID.TITLEBAR.SHOW_HIDE_CONTROLS":"Show/Hide Grid Controls","GRID.TITLEBAR.WORKING":"Working...","GRID_CONTROL.AGGREGATE.EDIT_OPTIONS":"Edit options","GRID_CONTROL.AGGREGATE.OPTIONS_DIALOG.TITLE":"Options for %s","GRID_CONTROL.AGGREGATE.TITLE":"Aggregate","GRID_CONTROL.FIELD":"Field","GRID_CONTROL.FIELD.REMOVE":"Remove","GRID_CONTROL.FIELD.SHOW_FUNCTIONS":"Show functions available for this field","GRID_CONTROL.FILTER.TITLE":"Filters","GRID_CONTROL.GROUP.TITLE":"Group Fields","GRID_CONTROL.OPERATIONS.TITLE":"Operations","GRID_CONTROL.PIVOT.TITLE":"Pivot Fields","GRID_CONTROL.SELECT_AGGREGATE":"Select Aggregate","GRID_CONTROL.SELECT_FIELD":"Select Field","GRID_TOOLBAR.GROUP.MODE.DETAIL":"Detail","GRID_TOOLBAR.GROUP.MODE.SUMMARY":"Summary","GRID_TOOLBAR.GROUP.PIN_GROUPS":"Pin Groups","GRID_TOOLBAR.GROUP.TOTAL_ROW":"Total Row","GRID_TOOLBAR.MIRAGE.STORE_DISPLAYED_DATA":"Store Displayed Data","GRID_TOOLBAR.PIVOT.HIDE_ZERO_VALUES":"Hide Zero Values","GRID_TOOLBAR.PIVOT.TOTAL_ROW_COLUMN":"Total Row/Column","GRID_TOOLBAR.PLAIN.COLUMNS":"Columns","GRID_TOOLBAR.PLAIN.SHOW_ALL_ROWS":"Show All Rows","GRID_TOOLBAR.PLAIN.SHOW_MORE_ON_SCROLL":"Show More on Scroll","GRID_TOOLBAR.PLAIN.TEMPLATES_EDITOR":"Templates Editor","GRID_TOOLBAR.PREFS.BACK.TOOLTIP":"Back","GRID_TOOLBAR.PREFS.BACKEND_DOES_NOT_SAVE":"The preferences system is not configured to permanently save perspectives.","GRID_TOOLBAR.PREFS.DELETE.TOOLTIP":"Delete","GRID_TOOLBAR.PREFS.DELETE_PERSPECTIVE.CONFIRM":"Are you sure you want to delete this perspective?","GRID_TOOLBAR.PREFS.FORWARD.TOOLTIP":"Forward","GRID_TOOLBAR.PREFS.INFO.TOOLTIP":"Info","GRID_TOOLBAR.PREFS.NEW_PERSPECTIVE":"New Perspective...","GRID_TOOLBAR.PREFS.NEW_PERSPECTIVE.PROMPT":"Enter new perspective name","GRID_TOOLBAR.PREFS.RENAME.TOOLTIP":"Rename","GRID_TOOLBAR.PREFS.RENAME_PERSPECTIVE.PROMPT":'Rename perspective "%s" to what?',"GRID_TOOLBAR.PREFS.RESET.CONFIRM":"Are you sure you want to reset all configuration, delete all perspectives, and start over?","GRID_TOOLBAR.PREFS.RESET.TOOLTIP":"Reset","GRID_TOOLBAR.PREFS.SAVE.HELP":"Click to save the current configuration.  The next time this grid is visited, the previously saved configuration will automatically be used.","GRID_TOOLBAR.PREFS.SAVE.TOOLTIP":"Save","GRID_TOOLBAR.PREFS.SAVE_AS.HELP":"This pre-defined perspective cannot be saved with this name.  Click to save with a new name.  After that, any changes will be saved under the new name.","GRID_TOOLBAR.PREFS.SAVE_AS.TOOLTIP":"Save As...","GRID_TOOLBAR.RENDERER.DISPLAY_OPTIONS":"Display Options"},Jm={"AGGREGATE.FIELD.DENOMINATOR":"Denominacin","AGGREGATE.FIELD.NUMERATOR":"Nmero","AGGREGATE.NAME.AVERAGE":"Promedio","AGGREGATE.NAME.COUNT":"Contar","AGGREGATE.NAME.COUNT_DISTINCT":"Cuenta distinta","AGGREGATE.NAME.COUNT_OVER_COUNT":"Recuento/recuento","AGGREGATE.NAME.DISTINCT_VALUES":"Valores distintos","AGGREGATE.NAME.FIRST":"Primero","AGGREGATE.NAME.LAST":"ltimo","AGGREGATE.NAME.MAX":"Mximo","AGGREGATE.NAME.MIN":"Mnimo","AGGREGATE.NAME.NTH":"Ensimo","AGGREGATE.NAME.SUM":"Suma","AGGREGATE.NAME.SUM_OVER_SUM":"Suma/suma","AGGREGATE.NAME.VALUES":"Valores","AGGREGATE.NAME.VALUES_WITH_COUNTS":"Valores con recuentos","DIALOG.CANCEL":"Cancelar","DIALOG.OK":"OK","GRAPH.TITLEBAR.SHOW_HIDE":"Mostrar/ocultar grfico","GRAPH.TITLEBAR.SHOW_HIDE_CONTROLS":"Mostrar/ocultar controles de grfico","GRID.COLCONFIG_WIN.ALLOW_HTML":"Permitir que se represente HTML?","GRID.COLCONFIG_WIN.HIDE_COL":"Ocultar columna?","GRID.COLCONFIG_WIN.MOVE_COL_TO_BOTTOM":"Mover al final de la lista de columnas","GRID.COLCONFIG_WIN.MOVE_COL_TO_TOP":"Mover al principio de la lista de columnas","GRID.COLCONFIG_WIN.PINNED_COL_WARNING":"Las columnas ancladas siempre aparecen antes que cualesquier otras en la salida simple (no agrupada), en el orden relativo que se muestra arriba.","GRID.COLCONFIG_WIN.PIN_COL":"Anclar la columna al lado izquierdo de la tabla?","GRID.COLCONFIG_WIN.RENAME_COL":"Cambiar el nombre de la columna en la tabla.","GRID.COLCONFIG_WIN.RENAME_COL.PROMPT":'Cambiar el nombre del campo "%s" a qu?',"GRID.COLCONFIG_WIN.REORDER_COLS":"Haga clic y arrastre para reordenar las columnas","GRID.COLCONFIG_WIN.RESET_COL_ORDER":"Restablecer el orden de las columnas","GRID.COLCONFIG_WIN.TBL.DISPLAY":"Mostrar","GRID.COLCONFIG_WIN.TBL.FIELD":"Campo","GRID.COLCONFIG_WIN.TBL.OPTIONS":"Opciones","GRID.COLCONFIG_WIN.TITLE":"Columnas","GRID.GROUP_FUN.DATE.FULL_DATE":"Fecha completa (sin hora)","GRID.GROUP_FUN.DATE.YEAR":"Ao","GRID.GROUP_FUN.DATE.YEAR_AND_MONTH":"Ao y mes","GRID.GROUP_FUN.DATE.YEAR_AND_QUARTER":"Ao y trimestre","GRID.GROUP_FUN.DATE.YEAR_AND_WEEK":"Ao y semana (ISO)","GRID.GROUP_FUN.DATE_TIME.SLICE.15MIN":"Fecha y hora:perodos de 15 minutos","GRID.GROUP_FUN.DATE_TIME.SLICE.1HR":"Fecha y hora: perodos de 1 hora","GRID.GROUP_FUN.DIALOG.DATE":"Fecha","GRID.GROUP_FUN.DIALOG.DATE_TIME":"Fecha y hora","GRID.GROUP_FUN.DIALOG.OTHER":"Otro","GRID.GROUP_FUN.DIALOG.REPEATING":"Repitiendo","GRID.GROUP_FUN.DIALOG.TIME":"Tiempo","GRID.GROUP_FUN.DIALOG.TITLE":"Aplicar funcin a %s","GRID.GROUP_FUN.NONE":"Ninguno","GRID.GROUP_FUN.REPEATING.DAY_OF_WEEK":"Da de la semana","GRID.GROUP_FUN.REPEATING.MONTH":"Mes","GRID.GROUP_FUN.REPEATING.QUARTER":"Trimestre","GRID.GROUP_FUN.REPEATING.WEEK":"Semana (ISO)","GRID.GROUP_FUN.TIME.SLICE.15MIN":"Tiempo: perodos de 15 minutos","GRID.GROUP_FUN.TIME.SLICE.1HR":"Tiempo: perodos de 1 hora","GRID.PERSPECTIVE_WIN.TEMP_PERSPECTIVE_WARNING":"Esta perspectiva es temporal; la configuracin que aparece a continuacin no refleja el estado actual de cualquier mdulo de preferencias vinculado.","GRID.PERSPECTIVE_WIN.TITLE":"Perspectiva","GRID.TABLE.ADD_FILTER_HELP":'Haga clic para agregar un filtro para "%s"',"GRID.TABLE.DRAGGABLE_FIELD_HELP":"Puede arrastrar y soltar este campo en los controles de cuadrcula de arriba para filtrar, agrupar o girar.","GRID.TABLE.SORT_MENU.ASCENDING":"%s, ascendente","GRID.TABLE.SORT_MENU.DESCENDING":"%s, descendente","GRID.TABLE.SORT_MENU.RESET_SORT":"Restablecer clasificacin","GRID.TITLEBAR.CANCEL":"Cancelar","GRID.TITLEBAR.DATA_LIMITED_WARNING":"Usted no tiene visibilidad de todos los registros. Haga clic para obtener el resto (esto puede tomar un tiempo).","GRID.TITLEBAR.DOWNLOAD_CSV":"Descargar CSV","GRID.TITLEBAR.GENERATE_CSV":"Generar CSV","GRID.TITLEBAR.GROUP_COUNT_PLURAL":"Grupos %d","GRID.TITLEBAR.GROUP_COUNT_SINGULAR":"Grupo %d","GRID.TITLEBAR.LOADED":"Cargado","GRID.TITLEBAR.LOADING":"Cargando...","GRID.TITLEBAR.NOT_LOADED":"No cargado","GRID.TITLEBAR.RECORD_COUNT_PLURAL":"Registros %d","GRID.TITLEBAR.RECORD_COUNT_SINGULAR":"Registro %d","GRID.TITLEBAR.REFRESH":"Actualizar","GRID.TITLEBAR.SELECTED_COUNT_PLURAL":"Registros seleccionados %d","GRID.TITLEBAR.SELECTED_COUNT_SINGULAR":"Registro seleccionado %d","GRID.TITLEBAR.SHOW_DEBUG_INFO":"Mostrar informacin de depuracin de cuadrcula","GRID.TITLEBAR.SHOW_HIDE":"Mostrar/ocultar cuadrcula","GRID.TITLEBAR.SHOW_HIDE_CONTROLS":"Mostrar/ocultar controles de cuadrcula","GRID.TITLEBAR.WORKING":"En proceso...","GRID_CONTROL.AGGREGATE.EDIT_OPTIONS":"Editar opciones","GRID_CONTROL.AGGREGATE.OPTIONS_DIALOG.TITLE":"Opciones para %s","GRID_CONTROL.AGGREGATE.TITLE":"Agregar","GRID_CONTROL.FIELD":"Campo","GRID_CONTROL.FIELD.REMOVE":"Eliminar","GRID_CONTROL.FIELD.SHOW_FUNCTIONS":"Mostrar las funciones disponibles para este campo","GRID_CONTROL.FILTER.TITLE":"Filtros","GRID_CONTROL.GROUP.TITLE":"Campos de grupo","GRID_CONTROL.PIVOT.TITLE":"Campos dinmicos","GRID_CONTROL.SELECT_AGGREGATE":"Seleccionar agregado","GRID_CONTROL.SELECT_FIELD":"Seleccionar campo","GRID_TOOLBAR.GROUP.MODE.DETAIL":"Detalle","GRID_TOOLBAR.GROUP.MODE.SUMMARY":"Resumen","GRID_TOOLBAR.GROUP.PIN_GROUPS":"Grupos de pin","GRID_TOOLBAR.GROUP.TOTAL_ROW":"Fila total","GRID_TOOLBAR.MIRAGE.STORE_DISPLAYED_DATA":"Almacenar los datos mostrados","GRID_TOOLBAR.PIVOT.HIDE_ZERO_VALUES":"Ocultar valores cero","GRID_TOOLBAR.PIVOT.TOTAL_ROW_COLUMN":"Fila/columna total","GRID_TOOLBAR.PLAIN.COLUMNS":"Columnas","GRID_TOOLBAR.PLAIN.SHOW_ALL_ROWS":"Mostrar todas las filas","GRID_TOOLBAR.PLAIN.SHOW_MORE_ON_SCROLL":"Mostrar ms en desplazamiento","GRID_TOOLBAR.PREFS.BACK.TOOLTIP":"Atrs","GRID_TOOLBAR.PREFS.BACKEND_DOES_NOT_SAVE":"El sistema de preferencias no est configurado para guardar perspectivas permanentemente.","GRID_TOOLBAR.PREFS.DELETE.TOOLTIP":"Eliminar","GRID_TOOLBAR.PREFS.DELETE_PERSPECTIVE.CONFIRM":"Est seguro de que desea eliminar esta perspectiva?","GRID_TOOLBAR.PREFS.FORWARD.TOOLTIP":"Adelante","GRID_TOOLBAR.PREFS.INFO.TOOLTIP":"Informacin","GRID_TOOLBAR.PREFS.NEW_PERSPECTIVE":"Nueva perspectiva...","GRID_TOOLBAR.PREFS.NEW_PERSPECTIVE.PROMPT":"Ingrese el nombre de la nueva perspectiva","GRID_TOOLBAR.PREFS.RENAME.TOOLTIP":"Renombrar","GRID_TOOLBAR.PREFS.RENAME_PERSPECTIVE.PROMPT":'Cambiar el nombre de la perspectiva "%s" a qu?',"GRID_TOOLBAR.PREFS.RESET.CONFIRM":"Est seguro de que desea restablecer toda la configuracin, eliminar todas las perspectivas y volver a empezar?","GRID_TOOLBAR.PREFS.RESET.TOOLTIP":"Restablecer","GRID_TOOLBAR.PREFS.SAVE.HELP":"Haga clic para guardar la configuracin actual.  La prxima vez que se visite esta cuadrcula, se utilizar de manera automtica la configuracin guardada previamente.","GRID_TOOLBAR.PREFS.SAVE.TOOLTIP":"Guardar","GRID_TOOLBAR.PREFS.SAVE_AS.HELP":"Esta perspectiva predefinida no se puede guardar con este nombre.  Haga clic para guardar con un nuevo nombre.  Despus de eso, cualquier cambio se guardar con el nuevo nombre.","GRID_TOOLBAR.PREFS.SAVE_AS.TOOLTIP":"Guardar como...","GRID_TOOLBAR.RENDERER.DISPLAY_OPTIONS":"Opciones de visualizacin"},Xm={"AGGREGATE.FIELD.DENOMINATOR":"Denom.","AGGREGATE.FIELD.NUMERATOR":"Num.","AGGREGATE.NAME.AVERAGE":"Mdia","AGGREGATE.NAME.COUNT":"Contar","AGGREGATE.NAME.COUNT_DISTINCT":"Contar distintos","AGGREGATE.NAME.COUNT_OVER_COUNT":"Contagem/Contagem","AGGREGATE.NAME.DISTINCT_VALUES":"Valores distintos","AGGREGATE.NAME.FIRST":"Primeiro","AGGREGATE.NAME.LAST":"ltimo","AGGREGATE.NAME.MAX":"Mx.","AGGREGATE.NAME.MIN":"Min.","AGGREGATE.NAME.NTH":"Ensimo","AGGREGATE.NAME.SUM":"Soma","AGGREGATE.NAME.SUM_OVER_SUM":"Soma/Soma","AGGREGATE.NAME.VALUES":"Valores","AGGREGATE.NAME.VALUES_WITH_COUNTS":"Valores com contagem","DIALOG.CANCEL":"Cancelar","GRAPH.TITLEBAR.SHOW_HIDE":"Exibir/Ocultar grfico","GRAPH.TITLEBAR.SHOW_HIDE_CONTROLS":"Exibir/Ocultar controles grficos","GRID.COLCONFIG_WIN.ALLOW_HTML":"Permitir que o HTML seja renderizado?","GRID.COLCONFIG_WIN.HIDE_COL":"Ocultar coluna?","GRID.COLCONFIG_WIN.MOVE_COL_TO_BOTTOM":"Mover para a parte inferior da lista de colunas","GRID.COLCONFIG_WIN.MOVE_COL_TO_TOP":"Mover para o topo da lista de colunas","GRID.COLCONFIG_WIN.PINNED_COL_WARNING":"As colunas fixadas sempre aparecem antes de qualquer outra na sada simples (no agrupada), na ordem relativa exibida acima.","GRID.COLCONFIG_WIN.PIN_COL":"Fixar a coluna no lado esquerdo da tabela?","GRID.COLCONFIG_WIN.RENAME_COL":"Renomear a coluna na tabela.","GRID.COLCONFIG_WIN.RENAME_COL.PROMPT":'Renomear o campo "%s" como?',"GRID.COLCONFIG_WIN.REORDER_COLS":"Clique e arraste para reordenar as colunas","GRID.COLCONFIG_WIN.RESET_COL_ORDER":"Redefinir ordem das colunas","GRID.COLCONFIG_WIN.TBL.DISPLAY":"Exibio","GRID.COLCONFIG_WIN.TBL.FIELD":"Campo","GRID.COLCONFIG_WIN.TBL.OPTIONS":"Opes","GRID.COLCONFIG_WIN.TITLE":"Colunas","GRID.GROUP_FUN.DATE.FULL_DATE":"Data completa (sem hora)","GRID.GROUP_FUN.DATE.YEAR":"Ano","GRID.GROUP_FUN.DATE.YEAR_AND_MONTH":"Ano e ms","GRID.GROUP_FUN.DATE.YEAR_AND_QUARTER":"Ano e trimestre","GRID.GROUP_FUN.DATE.YEAR_AND_WEEK":"Ano e semana (ISO)","GRID.GROUP_FUN.DATE_TIME.SLICE.15MIN":"Data e hora: intervalos de 15 min","GRID.GROUP_FUN.DATE_TIME.SLICE.1HR":"Data e hora: intervalos de 1 hora","GRID.GROUP_FUN.DIALOG.DATE":"Data","GRID.GROUP_FUN.DIALOG.DATE_TIME":"Data e hora","GRID.GROUP_FUN.DIALOG.OTHER":"Outros","GRID.GROUP_FUN.DIALOG.REPEATING":"Repetindo","GRID.GROUP_FUN.DIALOG.TIME":"Hora","GRID.GROUP_FUN.DIALOG.TITLE":"Aplicar funo a %s","GRID.GROUP_FUN.NONE":"Nenhum","GRID.GROUP_FUN.REPEATING.DAY_OF_WEEK":"Dia da semana","GRID.GROUP_FUN.REPEATING.MONTH":"Ms","GRID.GROUP_FUN.REPEATING.QUARTER":"Trimestre","GRID.GROUP_FUN.REPEATING.WEEK":"Semana (ISO)","GRID.GROUP_FUN.TIME.SLICE.15MIN":"Hora: intervalos de 15 min","GRID.GROUP_FUN.TIME.SLICE.1HR":"Hora: intervalos de 1 hora","GRID.PERSPECTIVE_WIN.TEMP_PERSPECTIVE_WARNING":"Essa perspectiva  temporria; a configurao abaixo no reflete o estado atual de nenhum mdulo preferencial vinculado.","GRID.PERSPECTIVE_WIN.TITLE":"Perspectiva","GRID.TABLE.ADD_FILTER_HELP":'Clicar para adicionar um filtro para "%s"',"GRID.TABLE.DRAGGABLE_FIELD_HELP":"Voc pode arrastar e soltar este campo nos controles de grade acima para filtrar, agrupar ou pivotar.","GRID.TABLE.SORT_MENU.ASCENDING":"%s, Ascendente","GRID.TABLE.SORT_MENU.DESCENDING":"%s, Descendente","GRID.TABLE.SORT_MENU.RESET_SORT":"Redefinir classificao","GRID.TITLEBAR.CANCEL":"Cancelar","GRID.TITLEBAR.DATA_LIMITED_WARNING":"Voc no est visualizando todos os registros. Clique para recuperar os restantes (isso pode demorar um pouco).","GRID.TITLEBAR.DOWNLOAD_CSV":"Baixar .csv","GRID.TITLEBAR.GENERATE_CSV":"Gerar .csv","GRID.TITLEBAR.GROUP_COUNT_PLURAL":"%d grupos","GRID.TITLEBAR.GROUP_COUNT_SINGULAR":"%d grupo","GRID.TITLEBAR.LOADED":"Carregado","GRID.TITLEBAR.LOADING":"Carregando...","GRID.TITLEBAR.NOT_LOADED":"No carregado","GRID.TITLEBAR.RECORD_COUNT_PLURAL":"%d registros","GRID.TITLEBAR.RECORD_COUNT_SINGULAR":"%d registro","GRID.TITLEBAR.REFRESH":"Atualizar","GRID.TITLEBAR.SELECTED_COUNT_PLURAL":"%d registros selecionados","GRID.TITLEBAR.SELECTED_COUNT_SINGULAR":"%d registro selecionado","GRID.TITLEBAR.SHOW_DEBUG_INFO":"Exibir informaes de depurao da grade","GRID.TITLEBAR.SHOW_HIDE":"Exibir/Ocultar grade","GRID.TITLEBAR.SHOW_HIDE_CONTROLS":"Exibir/Ocultar controles da grade","GRID.TITLEBAR.WORKING":"Trabalhando...","GRID_CONTROL.AGGREGATE.EDIT_OPTIONS":"Editar opes","GRID_CONTROL.AGGREGATE.OPTIONS_DIALOG.TITLE":"Opes para %s","GRID_CONTROL.AGGREGATE.TITLE":"Agregar","GRID_CONTROL.FIELD":"Campo","GRID_CONTROL.FIELD.REMOVE":"Remover","GRID_CONTROL.FIELD.SHOW_FUNCTIONS":"Exibir as funes disponveis para este campo","GRID_CONTROL.FILTER.TITLE":"Filtros","GRID_CONTROL.GROUP.TITLE":"Campos de grupo","GRID_CONTROL.PIVOT.TITLE":"Pivotar campos","GRID_CONTROL.SELECT_AGGREGATE":"Selecionar agregar","GRID_CONTROL.SELECT_FIELD":"Selecionar campo","GRID_TOOLBAR.GROUP.MODE.DETAIL":"Detalhe","GRID_TOOLBAR.GROUP.MODE.SUMMARY":"Resumo","GRID_TOOLBAR.GROUP.PIN_GROUPS":"Fixar grupos","GRID_TOOLBAR.GROUP.TOTAL_ROW":"Total de linhas","GRID_TOOLBAR.MIRAGE.STORE_DISPLAYED_DATA":"Armazenar dados exibidos","GRID_TOOLBAR.PIVOT.HIDE_ZERO_VALUES":"Ocultar valores zero","GRID_TOOLBAR.PIVOT.TOTAL_ROW_COLUMN":"Total de linhas/colunas","GRID_TOOLBAR.PLAIN.COLUMNS":"Colunas","GRID_TOOLBAR.PLAIN.SHOW_ALL_ROWS":"Exibir todas as linhas","GRID_TOOLBAR.PLAIN.SHOW_MORE_ON_SCROLL":"Exibir mais na rolagem","GRID_TOOLBAR.PREFS.BACK.TOOLTIP":"Voltar","GRID_TOOLBAR.PREFS.BACKEND_DOES_NOT_SAVE":"O sistema de preferncias no est configurado para salvar perspectivas permanentemente.","GRID_TOOLBAR.PREFS.DELETE.TOOLTIP":"Excluir","GRID_TOOLBAR.PREFS.DELETE_PERSPECTIVE.CONFIRM":"Tem certeza de que deseja excluir esta perspectiva?","GRID_TOOLBAR.PREFS.FORWARD.TOOLTIP":"Avanar","GRID_TOOLBAR.PREFS.INFO.TOOLTIP":"Informaes","GRID_TOOLBAR.PREFS.NEW_PERSPECTIVE":"Nova perspectiva...","GRID_TOOLBAR.PREFS.NEW_PERSPECTIVE.PROMPT":"Inserir o novo nome da perspectiva","GRID_TOOLBAR.PREFS.RENAME.TOOLTIP":"Renomear","GRID_TOOLBAR.PREFS.RENAME_PERSPECTIVE.PROMPT":'Como renomear a perspectiva "%s"?',"GRID_TOOLBAR.PREFS.RESET.CONFIRM":"Tem certeza de que deseja redefinir todas as configuraes, excluir todas as perspectivas e comear novamente?","GRID_TOOLBAR.PREFS.RESET.TOOLTIP":"Reiniciar","GRID_TOOLBAR.PREFS.SAVE.HELP":"Clique para salvar a configurao atual. Na prxima vez que essa grade for acessada, a ltima configurao salva ser usada automaticamente.","GRID_TOOLBAR.PREFS.SAVE.TOOLTIP":"Salvar","GRID_TOOLBAR.PREFS.SAVE_AS.HELP":"Esta perspectiva predefinida no pode ser salva com este nome. Clique para salvar com um novo nome. Depois disso, todas as alteraes sero salvas com o novo nome.","GRID_TOOLBAR.PREFS.SAVE_AS.TOOLTIP":"Salvar como...","GRID_TOOLBAR.RENDERER.DISPLAY_OPTIONS":"Exibir opes"};var Kn=new Ae;Kn.set("EN",Km);Kn.set("EN-US",Km);Kn.set("ES",Jm);Kn.set("ES-MX",Jm);Kn.set("PT",Xm);Kn.set("PT-BR",Xm);var ae=function(){var e={};return function(){var t=Array.prototype.slice.call(arguments),n=t.shift(),i=window.DATAVIS_LANG;i==null&&(Kn.isSet(navigator.language.toUpperCase())?i=navigator.language:i=navigator.language.split("-")[0]),Kn.isSet(i.toUpperCase())?Kn.get(i.toUpperCase())[n]==null&&console.error('Missing DataVis translation for key "'+n+'" in locale "'+i+'"'):e[i]||(console.error('Missing DataVis translation info for language "'+i+'"'),e[i]=!0);var r=(Kn.get(i.toUpperCase())||{})[n]||(Kn.get("EN")||{})[n]||n;return t.length>0&&(t.unshift(r),r=xm.sprintf.apply(null,t)),i==="xx"&&(r=r.replace(/[A-Za-z]/g,"x")),r}}(),Gt=Ee("Aggregate",Object,function(e){var t=this;t.opts=Qe(e,{isHidden:!1})},{enabled:!0,fieldCount:0,fieldInfo:[],inheritFormatting:!1,numItems:0});Gt.prototype.calculate=function(e){var t=this,n,i,r,s;if(!t.checkOpts()||!t.checkData(e))return t.bottomValue;if(t.numItems=0,r=e.length,s=typeof t.init=="function"?t.init():t.init!=null?t.init:t.bottomValue,i=0,r===0)return typeof t.calculateDone=="function"?t.calculateDone(s):s;for(s==null&&(s=e[0].rowData,t.opts.fields&&t.opts.fields.length>0&&(s=t.getRealValue(s[t.opts.fields[0]])),i=1),n=i;n<r;n+=1)try{s=t.calculateStep(s,e[n].rowData,e,n)}catch(a){return de.error("Aggregate "+t.name+": Error occurred at data index ["+n+"]: "+a.toString()),t.bottomValue}return t.calculateDone!=null?t.calculateDone(s):s};Gt.prototype.checkOpts=function(){var e=this;if(e.fieldCount>0){if(e.opts.fields==null)return de.error("Aggregate "+e.name+": Missing `opts.fields`"),!1;if(k.isArray(e.opts.fields)){if(e.opts.fields.length!==e.fieldCount)return de.error("Aggregate "+e.name+": `opts.fields` must include "+e.fieldCount+" elements"),!1}else return de.error("Aggregate "+e.name+": `opts.fields` must be an array"),!1;if(e.opts.typeInfo==null)return de.error("Aggregate "+e.name+": Missing `opts.typeInfo`"),!1;if(k.isArray(e.opts.typeInfo)){if(e.opts.typeInfo.length!==e.fieldCount)return de.error("Aggregate "+e.name+": `opts.typeInfo` must include "+e.fieldCount+" elements"),!1}else return de.error("Aggregate "+e.name+": `opts.typeInfo` must be an array"),!1}return!0};Gt.prototype.checkData=function(e){var t=this;return k.isArray(e)?!0:(de.error("Aggregate "+t.name+": `data` must be an array"),!1)};Gt.prototype.getRealValue=function(e){if(k.isString(e))return e;if(k.isNumber(e))return e;if(k.isObject(e)){if(e.value!==void 0)return e.value;if(e.orig!==void 0)return e.orig;throw new Error("Unable to get real value of cell")}};Gt.prototype.getFormattedValue=function(e){var t=this;t.getRealValue(e);var n=t.opts.colConfig?t.opts.colConfig[0]:null,i=t.opts.typeInfo?t.opts.typeInfo[0]:null;return ht(n,i,e)};Gt.prototype.getNumber=function(e){return window.numeral&&window.numeral.isNumeral(e)?e.value():k.isString(e)?Fl(e)?Mr(e):Gl(e)?Hl(e):0:k.isNumber(e)?e:0};Gt.prototype.getFullName=function(){var e=this;return e.opts.name!=null?e.opts.name:e.fieldCount>0&&k.isArray(e.opts.fields)&&e.opts.fields.length>0?ae("AGGREGATE.HEADER_DISPLAY",e.name,k.map(e.opts.fields,function(t,n){var i=Ze({},e.opts,"colConfig",n);return i.displayText||t}).join(", ")):e.name};Gt.prototype.getType=function(){var e=this,t=e.type;if(me(e.opts,"fields","length")){var n=k.uniq(k.pluck(e.opts.typeInfo,"type"));n.length===1&&(e.allowedTypes&&e.allowedTypes.indexOf(n[0])>=0||t==null)&&(t=n[0])}return t==null&&(t="string"),t};var Zm=Ee("CountAggregate",Gt,null,{name:ae("AGGREGATE.NAME.COUNT"),fieldCount:0,type:"number",inheritFormatting:!1,bottomValue:0});Zm.prototype.calculate=function(e){var t=this;return!t.checkOpts()||!t.checkData(e)?t.bottomValue:e&&e.length||t.bottomValue};var gd=Ee("CountDistinctAggregate",Gt,function(){var e=this;e.set={},e.super.ctor.apply(e,arguments)},{name:ae("AGGREGATE.NAME.COUNT_DISTINCT"),fieldCount:1,type:"number",inheritFormatting:!1,bottomValue:0,init:function(){return{set:{},count:0}}});gd.prototype.calculateStep=function(e,t){var n=this,i=t[n.opts.fields[0]],r=hn(i.value);return r!=null&&r!=""&&e.set[r]==null&&(e.set[r]=!0,e.count+=1),e};gd.prototype.calculateDone=function(e){return e.count};var md=Ee("ValuesAggregate",Gt,null,{name:ae("AGGREGATE.NAME.VALUES"),fieldCount:1,inheritFormatting:!1,type:"string",init:function(){return{resultIsElement:!1,values:[]}},options:{separator:{displayText:"Separator"}}});md.prototype.calculateStep=function(e,t){var n=this,i=n.getFormattedValue(t[n.opts.fields[0]]);return Xt(i)&&(e.resultIsElement=!0),e.values.push(i),e};md.prototype.calculateDone=function(e){var t=this;if(e.resultIsElement){var n=jQuery("<div>");return k.each(e.values,function(i,r){r>0&&n.append(t.opts.separator||", "),n.append(Xt(i)?jQuery(i).clone():i)}),n}else return e.values.join(t.opts.separator||", ")};var jl=Ee("ValuesWithCountsAggregate",Gt,null,{name:ae("AGGREGATE.NAME.VALUES_WITH_COUNTS"),fieldCount:1,inheritFormatting:!1,type:"string",init:function(){return{map:new Ae,resultIsElement:!1}},options:{separator:{displayText:"Separator"}}});jl.prototype.calculateStep=function(e,t){var n=this,i=t[n.opts.fields[0]],r=hn(i.value),s=n.getFormattedValue(i);if(e.map.isSet(r)){var a=e.map.get(r);a.count+=1}else e.map.set(r,{formatted:s,count:1}),Xt(s)&&(e.resultIsElement=!0);return e};jl.prototype.calculateDone=function(e){var t=this;if(e.resultIsElement){var n=jQuery("<div>");return e.map.each(function(r,s,a){a>0&&n.append(t.opts.separator||", "),n.append(Xt(r.formatted)?r.formatted.clone():r.formatted),n.append(" ("+r.count+")")}),n}else{var i=[];return e.map.each(function(r,s){i.push(s+" ("+r.count+")")}),i.join(t.opts.separator||", ")}};var ev=Ee("DistinctValuesAggregate",jl,null,{name:ae("AGGREGATE.NAME.DISTINCT_VALUES")});ev.prototype.calculateDone=function(e){var t=this;if(e.resultIsElement){var n=jQuery("<div>");return e.map.each(function(r,s,a){a>0&&n.append(t.opts.separator||", "),n.append(Xt(r.formatted)?r.formatted.clone():r.formatted)}),n}else{var i=[];return e.map.each(function(r,s){i.push(s)}),i.join(t.opts.separator||", ")}};var vd=Ee("SumAggregate",Gt,null,{name:ae("AGGREGATE.NAME.SUM"),fieldCount:1,type:"number",allowedTypes:["number","currency"],inheritFormatting:!0,bottomValue:0,init:function(){switch(this.opts.typeInfo[0].internalType){case"primitive":return 0;case"numeral":return bt(0);case"bignumber":return Et(0)}}});vd.prototype.calculateStep=function(e,t){var n=this,i=n.getRealValue(t[n.opts.fields[0]]);if(i==null)return e;switch(n.opts.typeInfo[0].internalType){case"primitive":return Number.isNaN(i)?e:(n.numItems+=1,e+i);case"numeral":return Number.isNaN(i)||i.value()===null?e:(n.numItems+=1,e.add(i.value()));case"bignumber":return i.isNaN()?e:(n.numItems+=1,e.plus(i))}};var tv=Ee("AverageAggregate",Gt,function(e){var t=this;t.sumAgg=new vd(e),t.super.ctor.apply(t,arguments)},{name:ae("AGGREGATE.NAME.AVERAGE"),fieldCount:1,type:"number",allowedTypes:["number","currency"],inheritFormatting:!0,bottomValue:0});tv.prototype.calculate=function(e){var t=this;if(!t.checkOpts()||!t.checkData(e))return t.bottomValue;var n=t.sumAgg.calculate(e),i=t.sumAgg.numItems;if(n==null||i===0)return t.bottomVal;switch(t.opts.typeInfo[0].internalType){case"primitive":return Number.isNaN(n)?t.bottomVal:n/i;case"numeral":return Number.isNaN(n)||n.value()===null?t.bottomVal:n.divide(i);case"bignumber":return n.isNaN()?t.bottomVal:n.div(i)}};var yd=Ee("MinAggregate",Gt,null,{name:ae("AGGREGATE.NAME.MIN"),fieldCount:1,inheritFormatting:!0});yd.prototype.checkOpts=function(){var e=this;return e.opts.typeInfo==null?(de.error("Aggregate "+e.name+": Missing `opts.typeInfo`"),!1):(e.opts.compare==null&&(e.opts.compare=ur.byType(e.opts.typeInfo[0].type)),typeof e.opts.compare!="function"?(de.error("Aggregate "+e.name+": Missing `opts.compare`"),!1):e.super.checkOpts())};yd.prototype.calculateStep=function(e,t){var n=this,i=n.getRealValue(t[n.opts.fields[0]]);return n.opts.compare(e,i)<0?e:i};var _d=Ee("MaxAggregate",Gt,null,{name:ae("AGGREGATE.NAME.MAX"),fieldCount:1,inheritFormatting:!0});_d.prototype.checkOpts=function(){var e=this;return e.opts.typeInfo==null?(de.error("Aggregate "+e.name+": Missing `opts.typeInfo`"),!1):(e.opts.compare==null&&(e.opts.compare=ur.byType(e.opts.typeInfo[0].type)),typeof e.opts.compare!="function"?(de.error("Aggregate "+e.name+": Missing `opts.compare`"),!1):e.super.checkOpts())};_d.prototype.calculateStep=function(e,t){var n=this,i=n.getRealValue(t[n.opts.fields[0]]);return n.opts.compare(e,i)<0?i:e};var bd=Ee("FirstAggregate",Gt,null,{name:ae("AGGREGATE.NAME.FIRST"),fieldCount:1,inheritFormatting:!0});bd.prototype.checkData=function(e){var t=this;return e.length===0?!1:t.super.checkData(e)};bd.prototype.calculate=function(e){var t=this;return!t.checkOpts()||!t.checkData(e)?t.bottomValue:t.getRealValue(e[0].rowData[t.opts.fields[0]])};var wd=Ee("LastAggregate",Gt,null,{name:ae("AGGREGATE.NAME.LAST"),fieldCount:1,inheritFormatting:!0});wd.prototype.checkData=function(e){var t=this;return e.length===0?!1:t.super.checkData(e)};wd.prototype.calculate=function(e){var t=this;return!t.checkOpts()||!t.checkData(e)?t.bottomValue:t.getRealValue(e[e.length-1].rowData[t.opts.fields[0]])};var Yl=Ee("NthAggregate",Gt,null,{name:ae("AGGREGATE.NAME.NTH"),enabled:!1,fieldCount:1,inheritFormatting:!0});Yl.prototype.checkOpts=function(){var e=this;return e.opts.index==null?(de.error("Aggregate "+e.name+": Missing `opts.index`"),!1):k.isNumber(e.opts.index)?e.super.checkOpts():(de.error("Aggregate "+e.name+": `opts.index` must be a number"),!1)};Yl.prototype.checkData=function(e){var t=this;return e.length===0?!1:e.length<=t.opts.index?(de.error("Aggregate "+t.name+": `data` has insufficient number of elements"),t.bottomValue):t.super.checkData(e)};Yl.prototype.calculate=function(e){var t=this;return!t.checkOpts()||!t.checkData(e)?t.bottomValue:e[e.length-1]};var zl=Ee("SumOverSumAggregate",Gt,null,{name:ae("AGGREGATE.NAME.SUM_OVER_SUM"),fieldCount:2,fieldInfo:[{name:ae("AGGREGATE.FIELD.NUMERATOR")},{name:ae("AGGREGATE.FIELD.DENOMINATOR")}],type:"string",inheritFormatting:!1,bottomValue:0,init:function(){return{a:0,b:0}},options:{format:{}}});zl.prototype.calculateStep=function(e,t){var n=this;return e.a+=n.getNumber(t[n.opts.fields[0]].value),e.b+=n.getNumber(t[n.opts.fields[1]].value),e};zl.prototype.calculateDone=function(e){var t=this,n=(e.a+0)/(e.b+0);return window.sprintf?t.opts.format?$t.sprintf(t.opts.format,n):n>=100?$t.sprintf("%d",n):n>=10?$t.sprintf("%3.1f",n):n>=1?$t.sprintf("%3.2f",n):$t.sprintf("%3.3f",n):n};zl.prototype.getFullName=function(){var e=this;return"Sum("+Ze(e.opts.fields[0],e.opts,"colConfig",0,"displayText")+") / Sum("+Ze(e.opts.fields[1],e.opts,"colConfig",1,"displayText")+")"};Ee("CountOverCountAggregate",Gt,null,{name:ae("AGGREGATE.NAME.COUNT_OVER_COUNT"),fieldCount:2,fieldInfo:[{name:ae("AGGREGATE.FIELD.NUMERATOR")},{name:ae("AGGREGATE.FIELD.DENOMINATOR")}],type:"number",inheritFormatting:!1,bottomValue:0});var Ut=new Ae;Ut.set("count",Zm);Ut.set("countDistinct",gd);Ut.set("values",md);Ut.set("valuesWithCounts",jl);Ut.set("distinctValues",ev);Ut.set("sum",vd);Ut.set("average",tv);Ut.set("min",yd);Ut.set("max",_d);Ut.set("first",bd);Ut.set("last",wd);Ut.set("nth",Yl);Ut.set("sumOverSum",zl);var Yi=Ee("AggregateInfo",Object,function(e,t,n,i,r,s){var a=this;if(a.aggNum=n,a.aggType=e,a.fun=t.fun,a.name=t.name,a.isHidden=t.isHidden,a.fields=[],a.colConfig=[],a.typeInfo=[],a.debug=t.debug,typeof e!="string")throw new Error("Call Error: `aggType` must be a string");if(!k.isObject(t))throw new Error("Call Error: `spec` must be an object");if(typeof t.fun!="string")throw new Error("Call Error: `spec.fun` must be a string");if(t.fields!=null&&!k.isArray(t.fields))throw new Error("Call Error: `spec.fields` must be null or an array");if(n!=null&&typeof n!="number")throw new Error("Call Error: `aggNum` must be null or a number");if(i!=null&&!(i instanceof Ae))throw new Error("Call Error: `colConfig` must be null or an OrdMap instance");if(r!=null&&!(r instanceof Ae))throw new Error("Call Error: `typeInfo` must be null or an OrdMap instance");if(s!=null&&typeof s!="function")throw new Error("Call Error: `decode` must be null or a function");var l=Ut.get(t.fun);if(l==null)throw new Error('No such aggregate function: "'+t.fun+'"'+(t.name?' (output name = "'+t.name+'")':""));var c={name:t.name};t.fields&&(a.fields=t.fields),a.fields.length!==l.prototype.fieldCount&&de.warn("Creating "+e+"["+n+'] aggregate function "'+t.fun+'" to be applied over fields '+JSON.stringify(a.fields)+", which doesn't match the number of fields supported by the aggregate function ("+l.prototype.fieldCount+")... expect trouble."),a.fields.length>0&&(i!=null?a.colConfig=k.map(a.fields,function(u){return i.get(u)}):de.warn("Creating "+e+"["+n+'] aggregate function "'+t.fun+'" to be applied over fields '+JSON.stringify(a.fields)+", but no column config was provided."),r!=null?a.typeInfo=k.map(a.fields,function(u){return r.get(u)}):de.warn("Creating "+e+"["+n+'] aggregate function "'+t.fun+'" to be applied over fields '+JSON.stringify(a.fields)+", but no type info was provided."),k.each(a.typeInfo,function(u,f){if(u==null)throw new Error('Aggregate function applied to unknown field: "'+a.fields[f]+'"');u.needsDecoding&&(s!=null?s(u.field):de.warn('Unable to decode field "'+u.field+'" on demand for aggregate function, no decoding function provided.'))}),c.fields=a.fields,c.isHidden=a.isHidden,c.colConfig=a.colConfig,c.typeInfo=a.typeInfo),k.extend(c,t.opts),a.instance=new l(c)}),Ya=Ee("FilterError",Error,function(e){this.message=e}),Es=function(e){var t=this;if(e.inputName&&!e.paramName?e.paramName=e.inputName:e.paramName&&!e.inputName&&(e.inputName=e.paramName),k.defaults(e,{required:!1,defaultValue:null,sendEmpty:!1,emptyValue:""}),k.extend(t,e),t.type==="multi-autocomplete"&&(t.method==="json_where"||t.method==="json_having")&&t.json.operator!=="$in"&&t.json.operator!=="$nin")throw new Ya('Filter "'+t.paramName+`" is a multi-autocomplete, so the operator must be either "$in" or "$nin" (right now it's "`+t.json.operator+'").')};Es.prototype.store=function(e){var t=e?document.getElementById(e):null,n=t?function(a){return jQuery(t).find(a)}:jQuery,i=this;if(i.type===void 0)i.value=typeof i.defaultValue=="function"?i.defaultValue():i.defaultValue;else switch(i.type){case"hidden":case"text":i.value=n('input[name="'+i.inputName+'"]').val();break;case"textarea":i.value=n('textarea[name="'+i.inputName+'"]').val();break;case"date":i.internalValue={};var r=k.map(["YEAR","MONTH","DAY"],function(a){var l=n('[name="'+i.inputName+a+'"]')[0].value;return i.internalValue[a]=l,l}).join("-");i.value=r==="--"?"":r;break;case"checkbox":i.value=k.map(n('input[name="'+i.inputName+'"]:checkbox:checked'),function(a){return n(a).val()});break;case"toggle-checkbox":i.value=n('input[name="'+i.inputName+'"]').prop("checked")?"on":"off";break;case"radio":i.value=n('input[name="'+i.inputName+'"]:radio:checked').val();break;case"select":i.value=n('select[name="'+i.inputName+'"]').val();break;case"autocomplete":throw new Error;case"multi-autocomplete":i.value=[],i.internalValue=[],k.each(n('input[name="'+i.inputName+'"]'),function(a,l){i.value[l]=jQuery(a).val(),i.internalValue[l]=jQuery(a).parent().text()});break;case"form":var s={};n("input").each(function(a,l){var c=jQuery(l),u=c.attr("name"),f=c.attr("type");if(u!=null)switch(f){case"hidden":case"text":s[u]=c.val();break;case"checkbox":case"radio":c.prop("checked")&&(s[c.attr("name")]==null&&(s[u]=[]),s[u].push(c.val()));break}}),n("select,textarea").each(function(a,l){var c=jQuery(l),u=c.attr("name");u!=null&&(s[u]=c.val())}),i.value=s;break;default:throw'Invalid parameter specification: unknown input type "'+i.type+'"'}console.debug("[DataVis // Filter // Store] Input Type = %s, Input Name = %s, Param Name = %s, Value = %s",i.type,i.inputName,i.paramName,i.value)};Es.prototype.load=function(e,t){var n=this;if(n.type===void 0)return;t=t||{};var i=e?document.getElementById(e):null,r=i?function(l){return jQuery(i).find(l)}:jQuery;if(k.defaults(t,{fade:!1}),t.fade&&!(k.isString(t.bgAccentIn)&&k.isString(t.bgAccentOut)))throw"Cannot load filter with fading without specifying bgAccent[In|Out] properties";var s={backgroundColor:jQuery.Color(t.bgAccentIn)};function a(){jQuery(this).animate({backgroundColor:jQuery.Color(t.bgAccentOut)},500)}switch(n.type){case"hidden":(function(){var l=r('input[name="'+n.inputName+'"]');l.val(n.value?n.value:n.defaultValue?n.defaultValue:"")})();break;case"text":(function(){var l=r('input[name="'+n.inputName+'"]');t.fade&&l.val()!==n.value&&l.animate(s,500,a),l.val(n.value?n.value:n.defaultValue?n.defaultValue:"")})();break;case"date":k.each(["YEAR","MONTH","DAY"],function(l){var c=r('input[name="'+n.inputName+l+'"]');c.val(k.isObject(n.internalValue)&&k.isString(n.internalValue[l])&&n.internalValue[l]!==""?n.internalValue[l]:n.defaultValue?n.defaultValue:""),t.fade&&c.animate(s,500,a)});break;case"checkbox":(function(){var l=r('input[name="'+n.inputName+'"]:checkbox:checked'),c={};k.each(l,function(u){c[jQuery(u).val()]=u}),l.prop("checked",!1),k.each(n.value,function(u){var f=r('input[name="'+n.inputName+'"]:checkbox[value="'+u+'"]');f.prop("checked",!0),delete c[u],t.fade&&f.parent("label").animate(s,500,a)}),t.fade&&k.each(c,function(u){var f=jQuery(u).parent("label");f.animate(s,500,a)})})();break;case"toggle-checkbox":(function(){var l=r('input[name="'+n.inputName+'"]'),c=l.prop("checked")?"on":"off";l.prop("checked",n.value==="on"),t.fade&&c!==n.value&&l.parent("label").animate(s,500,a)})();break;case"radio":(function(){var l=r('input[name="'+n.inputName+'"]:radio[value="'+n.value+'"]');l.prop("checked",!0),t.fade&&l.parent("label").animate(s,500,a)})();break;case"select":(function(){var l=r('select[name="'+n.inputName+'"]'),c=l.val();l.val(n.value),t.fade&&c!==n.value&&l.parent().animate(s,500,a)})();break;case"autocomplete":return new Error;case"multi-autocomplete":(function(){if(!k.isObject(window[n.inputName+"_ac"]))throw'Autocomplete object "'+n.inputName+'" does not exist';window[n.inputName+"_ac"].storedvalues=[],jQuery(document.getElementById(n.inputName+"_ac_div")).children().remove(),k.each(n.value,function(l,c){window[n.inputName+"_ac"].multiAddValue(l,n.internalValue[c])}),t.fade&&jQuery(document.getElementById(n.inputName+"_ac_div")).animate(s,500,a)})();break;default:throw'Invalid parameter specification: unknown input type "'+n.type+'"'}};Es.prototype.buildInput=function(e){var t=this,n=k.isArray(this.value)?this.value:[this.value];k.each(n,function(i){jQuery("<input>").attr({type:"hidden",name:t.paramName,value:i}).appendTo(e)})};Es.prototype.addJsonParam=function(e){var t=this,n;if(t.json==null)throw new Ya("Missing configuration object for JSON grid parameter.");if(t.json.name==null||t.json.name==="")throw new Ya("Missing constraint set name for JSON grid parameter.");if(t.json.column==null||t.json.column==="")throw new Ya("Missing column name for JSON grid parameter.");(t.json.operator==null||t.json.operator==="")&&(t.json.operator="$eq");var i=t.json.name,r=t.json.column,s=t.json.operator;if(t.value===null||t.type==="date"&&t.value===""||t.type==="multi-autocomplete"&&t.value.length===0){me(e,i,r,s)&&(delete e[i][r][s],dl(e[i][r])&&delete e[i][r],dl(e[i])&&delete e[i]);return}k.isArray(t.json.operand)?(n=Mm(t.json.operand),k.each(n,function(a,l){k.isArray(a)&&a.length===0&&(n[l]=t.value)})):n=t.json.operand==null?t.value:t.json.operand,st(n,e,i,r,s)};Es.prototype.toParams=function(e){var t=this;switch(t.store(),t.method){case"json_where":e.report_json_where=e.report_json_where||{},t.addJsonParam(e.report_json_where);break;case"json_having":e.report_json_having=e.report_json_having||{},t.addJsonParam(e.report_json_having);break;case"cgi":t.type==="form"?k.each(t.value,function(n,i){(n!=t.emptyValue||t.sendEmpty)&&(e[i]=n)}):(t.value!=t.emptyValue||t.sendEmpty)&&(e[t.paramName]=t.value);break;default:throw"INVALID METHOD"}};var mu=Ee("ParamInputError",Error,function(e){this.message=e}),nv=function(e,t){var n=this,i={};switch(n.inputName=t.inputName,n.inputType=t.inputType,e){case"report":switch(n.reportMethod=t.reportMethod,i={type:n.inputType,method:n.reportMethod,inputName:n.inputName},n.reportMethod){case"cgi":n.cgiName=t.cgi.name,n.cgiValue=t.cgi.value,i.paramName=n.cgiName,i.defaultValue=n.cgiValue;break;case"json_where":case"json_having":n.jsonName=t.json.name,n.jsonColumn=t.json.column,n.jsonOperator=t.json.operator,n.jsonOperand=t.json.operand,i.json={name:n.jsonName,column:n.jsonColumn,operator:n.jsonOperator,operand:n.jsonOperand};break;default:throw new mu('Unrecognized report method "'+t.reportMethod+'". Must be "cgi", "json_where", or "json_having".')}break;case"json":case"json_api":n.reportMethod="cgi",i={type:n.inputType,method:n.reportMethod,inputName:n.inputName},n.cgiName=Ze(n.inputName,t,"cgi","name"),n.cgiValue=me(t,"cgi","value"),i.paramName=n.cgiName,i.defaultValue=n.cgiValue;break;case"local":throw new mu("Parameter inputs not allowed for local data.");default:throw new mu('Unrecognized source type "'+e+'". Must be "report", "json", or "local".')}n.filter=new Es(i)};Mo(nv,"filter",["toParams"]);var za={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/var oE=za.exports,bf;function aE(){return bf||(bf=1,function(e,t){(function(n,i){e.exports=i()})(oE,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,a={},l=0,c={parse:function(I,P){var M=(P=P||{}).dynamicTyping||!1;if(R(M)&&(P.dynamicTypingFunction=M,M={}),P.dynamicTyping=M,P.transform=!!R(P.transform)&&P.transform,P.worker&&c.WORKERS_SUPPORTED){var B=function(){if(!c.WORKERS_SUPPORTED)return!1;var te=(Ce=i.URL||i.webkitURL||null,Oe=n.toString(),c.BLOB_URL||(c.BLOB_URL=Ce.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Oe,")();"],{type:"text/javascript"})))),pe=new i.Worker(te),Ce,Oe;return pe.onmessage=w,pe.id=l++,a[pe.id]=pe}();return B.userStep=P.step,B.userChunk=P.chunk,B.userComplete=P.complete,B.userError=P.error,P.step=R(P.step),P.chunk=R(P.chunk),P.complete=R(P.complete),P.error=R(P.error),delete P.worker,void B.postMessage({input:I,config:P,workerId:B.id})}var z=null;return c.NODE_STREAM_INPUT,typeof I=="string"?(I=function(te){return te.charCodeAt(0)===65279?te.slice(1):te}(I),z=P.download?new m(P):new h(P)):I.readable===!0&&R(I.read)&&R(I.on)?z=new v(P):(i.File&&I instanceof File||I instanceof Object)&&(z=new g(P)),z.stream(I)},unparse:function(I,P){var M=!1,B=!0,z=",",te=`\r
`,pe='"',Ce=pe+pe,Oe=!1,ve=null,ne=!1;(function(){if(typeof P=="object"){if(typeof P.delimiter!="string"||c.BAD_DELIMITERS.filter(function(ue){return P.delimiter.indexOf(ue)!==-1}).length||(z=P.delimiter),(typeof P.quotes=="boolean"||typeof P.quotes=="function"||Array.isArray(P.quotes))&&(M=P.quotes),typeof P.skipEmptyLines!="boolean"&&typeof P.skipEmptyLines!="string"||(Oe=P.skipEmptyLines),typeof P.newline=="string"&&(te=P.newline),typeof P.quoteChar=="string"&&(pe=P.quoteChar),typeof P.header=="boolean"&&(B=P.header),Array.isArray(P.columns)){if(P.columns.length===0)throw new Error("Option columns is empty");ve=P.columns}P.escapeChar!==void 0&&(Ce=P.escapeChar+pe),(typeof P.escapeFormulae=="boolean"||P.escapeFormulae instanceof RegExp)&&(ne=P.escapeFormulae instanceof RegExp?P.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var V=new RegExp(E(pe),"g");if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return fe(null,I,Oe);if(typeof I[0]=="object")return fe(ve||Object.keys(I[0]),I,Oe)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||ve),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),fe(I.fields||[],I.data||[],Oe);throw new Error("Unable to serialize unrecognized input");function fe(ue,Ie,ce){var Le="";typeof ue=="string"&&(ue=JSON.parse(ue)),typeof Ie=="string"&&(Ie=JSON.parse(Ie));var He=Array.isArray(ue)&&0<ue.length,We=!Array.isArray(Ie[0]);if(He&&B){for(var Ye=0;Ye<ue.length;Ye++)0<Ye&&(Le+=z),Le+=ye(ue[Ye],Ye);0<Ie.length&&(Le+=te)}for(var Re=0;Re<Ie.length;Re++){var F=He?ue.length:Ie[Re].length,H=!1,U=He?Object.keys(Ie[Re]).length===0:Ie[Re].length===0;if(ce&&!He&&(H=ce==="greedy"?Ie[Re].join("").trim()==="":Ie[Re].length===1&&Ie[Re][0].length===0),ce==="greedy"&&He){for(var J=[],K=0;K<F;K++){var q=We?ue[K]:K;J.push(Ie[Re][q])}H=J.join("").trim()===""}if(!H){for(var ie=0;ie<F;ie++){0<ie&&!U&&(Le+=z);var Q=He&&We?ue[ie]:ie;Le+=ye(Ie[Re][Q],ie)}Re<Ie.length-1&&(!ce||0<F&&!U)&&(Le+=te)}}return Le}function ye(ue,Ie){if(ue==null)return"";if(ue.constructor===Date)return JSON.stringify(ue).slice(1,25);var ce=!1;ne&&typeof ue=="string"&&ne.test(ue)&&(ue="'"+ue,ce=!0);var Le=ue.toString().replace(V,Ce);return(ce=ce||M===!0||typeof M=="function"&&M(ue,Ie)||Array.isArray(M)&&M[Ie]||function(He,We){for(var Ye=0;Ye<We.length;Ye++)if(-1<He.indexOf(We[Ye]))return!0;return!1}(Le,c.BAD_DELIMITERS)||-1<Le.indexOf(z)||Le.charAt(0)===" "||Le.charAt(Le.length-1)===" ")?pe+Le+pe:Le}}};if(c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!r&&!!i.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=b,c.ParserHandle=y,c.NetworkStreamer=m,c.FileStreamer=g,c.StringStreamer=h,c.ReadableStreamStreamer=v,i.jQuery){var u=i.jQuery;u.fn.parse=function(I){var P=I.config||{},M=[];return this.each(function(te){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var pe=0;pe<this.files.length;pe++)M.push({file:this.files[pe],inputElem:this,instanceConfig:u.extend({},P)})}),B(),this;function B(){if(M.length!==0){var te,pe,Ce,Oe,ve=M[0];if(R(I.before)){var ne=I.before(ve.file,ve.inputElem);if(typeof ne=="object"){if(ne.action==="abort")return te="AbortError",pe=ve.file,Ce=ve.inputElem,Oe=ne.reason,void(R(I.error)&&I.error({name:te},pe,Ce,Oe));if(ne.action==="skip")return void z();typeof ne.config=="object"&&(ve.instanceConfig=u.extend(ve.instanceConfig,ne.config))}else if(ne==="skip")return void z()}var V=ve.instanceConfig.complete;ve.instanceConfig.complete=function(fe){R(V)&&V(fe,ve.file,ve.inputElem),z()},c.parse(ve.file,ve.instanceConfig)}else R(I.complete)&&I.complete()}function z(){M.splice(0,1),B()}}}function f(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(P){var M=D(P);M.chunkSize=parseInt(M.chunkSize),P.step||P.chunk||(M.chunkSize=null),this._handle=new y(M),(this._handle.streamer=this)._config=M}).call(this,I),this.parseChunk=function(P,M){if(this.isFirstChunk&&R(this._config.beforeFirstChunk)){var B=this._config.beforeFirstChunk(P);B!==void 0&&(P=B)}this.isFirstChunk=!1,this._halted=!1;var z=this._partialLine+P;this._partialLine="";var te=this._handle.parse(z,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var pe=te.meta.cursor;this._finished||(this._partialLine=z.substring(pe-this._baseIndex),this._baseIndex=pe),te&&te.data&&(this._rowCount+=te.data.length);var Ce=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:te,workerId:c.WORKER_ID,finished:Ce});else if(R(this._config.chunk)&&!M){if(this._config.chunk(te,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);te=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(te.data),this._completeResults.errors=this._completeResults.errors.concat(te.errors),this._completeResults.meta=te.meta),this._completed||!Ce||!R(this._config.complete)||te&&te.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Ce||te&&te.meta.paused||this._nextChunk(),te}this._halted=!0},this._sendError=function(P){R(this._config.error)?this._config.error(P):s&&this._config.error&&i.postMessage({workerId:c.WORKER_ID,error:P,finished:!1})}}function m(I){var P;(I=I||{}).chunkSize||(I.chunkSize=c.RemoteChunkSize),f.call(this,I),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(M){this._input=M,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(P=new XMLHttpRequest,this._config.withCredentials&&(P.withCredentials=this._config.withCredentials),r||(P.onload=O(this._chunkLoaded,this),P.onerror=O(this._chunkError,this)),P.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var M=this._config.downloadRequestHeaders;for(var B in M)P.setRequestHeader(B,M[B])}if(this._config.chunkSize){var z=this._start+this._config.chunkSize-1;P.setRequestHeader("Range","bytes="+this._start+"-"+z)}try{P.send(this._config.downloadRequestBody)}catch(te){this._chunkError(te.message)}r&&P.status===0&&this._chunkError()}},this._chunkLoaded=function(){P.readyState===4&&(P.status<200||400<=P.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:P.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(M){var B=M.getResponseHeader("Content-Range");return B===null?-1:parseInt(B.substring(B.lastIndexOf("/")+1))}(P),this.parseChunk(P.responseText)))},this._chunkError=function(M){var B=P.statusText||M;this._sendError(new Error(B))}}function g(I){var P,M;(I=I||{}).chunkSize||(I.chunkSize=c.LocalChunkSize),f.call(this,I);var B=typeof FileReader<"u";this.stream=function(z){this._input=z,M=z.slice||z.webkitSlice||z.mozSlice,B?((P=new FileReader).onload=O(this._chunkLoaded,this),P.onerror=O(this._chunkError,this)):P=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var z=this._input;if(this._config.chunkSize){var te=Math.min(this._start+this._config.chunkSize,this._input.size);z=M.call(z,this._start,te)}var pe=P.readAsText(z,this._config.encoding);B||this._chunkLoaded({target:{result:pe}})},this._chunkLoaded=function(z){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(z.target.result)},this._chunkError=function(){this._sendError(P.error)}}function h(I){var P;f.call(this,I=I||{}),this.stream=function(M){return P=M,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var M,B=this._config.chunkSize;return B?(M=P.substring(0,B),P=P.substring(B)):(M=P,P=""),this._finished=!P,this.parseChunk(M)}}}function v(I){f.call(this,I=I||{});var P=[],M=!0,B=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(z){this._input=z,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){B&&P.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),P.length?this.parseChunk(P.shift()):M=!0},this._streamData=O(function(z){try{P.push(typeof z=="string"?z:z.toString(this._config.encoding)),M&&(M=!1,this._checkIsFinished(),this.parseChunk(P.shift()))}catch(te){this._streamError(te)}},this),this._streamError=O(function(z){this._streamCleanUp(),this._sendError(z)},this),this._streamEnd=O(function(){this._streamCleanUp(),B=!0,this._streamData("")},this),this._streamCleanUp=O(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(I){var P,M,B,z=Math.pow(2,53),te=-z,pe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ce=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Oe=this,ve=0,ne=0,V=!1,fe=!1,ye=[],ue={data:[],errors:[],meta:{}};if(R(I.step)){var Ie=I.step;I.step=function(Re){if(ue=Re,He())Le();else{if(Le(),ue.data.length===0)return;ve+=Re.data.length,I.preview&&ve>I.preview?M.abort():(ue.data=ue.data[0],Ie(ue,Oe))}}}function ce(Re){return I.skipEmptyLines==="greedy"?Re.join("").trim()==="":Re.length===1&&Re[0].length===0}function Le(){return ue&&B&&(Ye("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),B=!1),I.skipEmptyLines&&(ue.data=ue.data.filter(function(Re){return!ce(Re)})),He()&&function(){if(!ue)return;function Re(H,U){R(I.transformHeader)&&(H=I.transformHeader(H,U)),ye.push(H)}if(Array.isArray(ue.data[0])){for(var F=0;He()&&F<ue.data.length;F++)ue.data[F].forEach(Re);ue.data.splice(0,1)}else ue.data.forEach(Re)}(),function(){if(!ue||!I.header&&!I.dynamicTyping&&!I.transform)return ue;function Re(H,U){var J,K=I.header?{}:[];for(J=0;J<H.length;J++){var q=J,ie=H[J];I.header&&(q=J>=ye.length?"__parsed_extra":ye[J]),I.transform&&(ie=I.transform(ie,q)),ie=We(q,ie),q==="__parsed_extra"?(K[q]=K[q]||[],K[q].push(ie)):K[q]=ie}return I.header&&(J>ye.length?Ye("FieldMismatch","TooManyFields","Too many fields: expected "+ye.length+" fields but parsed "+J,ne+U):J<ye.length&&Ye("FieldMismatch","TooFewFields","Too few fields: expected "+ye.length+" fields but parsed "+J,ne+U)),K}var F=1;return!ue.data.length||Array.isArray(ue.data[0])?(ue.data=ue.data.map(Re),F=ue.data.length):ue.data=Re(ue.data,0),I.header&&ue.meta&&(ue.meta.fields=ye),ne+=F,ue}()}function He(){return I.header&&ye.length===0}function We(Re,F){return H=Re,I.dynamicTypingFunction&&I.dynamicTyping[H]===void 0&&(I.dynamicTyping[H]=I.dynamicTypingFunction(H)),(I.dynamicTyping[H]||I.dynamicTyping)===!0?F==="true"||F==="TRUE"||F!=="false"&&F!=="FALSE"&&(function(U){if(pe.test(U)){var J=parseFloat(U);if(te<J&&J<z)return!0}return!1}(F)?parseFloat(F):Ce.test(F)?new Date(F):F===""?null:F):F;var H}function Ye(Re,F,H,U){var J={type:Re,code:F,message:H};U!==void 0&&(J.row=U),ue.errors.push(J)}this.parse=function(Re,F,H){var U=I.quoteChar||'"';if(I.newline||(I.newline=function(q,ie){q=q.substring(0,1048576);var Q=new RegExp(E(ie)+"([^]*?)"+E(ie),"gm"),ee=(q=q.replace(Q,"")).split("\r"),se=q.split(`
`),re=1<se.length&&se[0].length<ee[0].length;if(ee.length===1||re)return`
`;for(var ge=0,_e=0;_e<ee.length;_e++)ee[_e][0]===`
`&&ge++;return ge>=ee.length/2?`\r
`:"\r"}(Re,U)),B=!1,I.delimiter)R(I.delimiter)&&(I.delimiter=I.delimiter(Re),ue.meta.delimiter=I.delimiter);else{var J=function(q,ie,Q,ee,se){var re,ge,_e,Se;se=se||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var qe=0;qe<se.length;qe++){var Be=se[qe],o=0,d=0,p=0;_e=void 0;for(var _=new b({comments:ee,delimiter:Be,newline:ie,preview:10}).parse(q),C=0;C<_.data.length;C++)if(Q&&ce(_.data[C]))p++;else{var S=_.data[C].length;d+=S,_e!==void 0?0<S&&(o+=Math.abs(S-_e),_e=S):_e=S}0<_.data.length&&(d/=_.data.length-p),(ge===void 0||o<=ge)&&(Se===void 0||Se<d)&&1.99<d&&(ge=o,re=Be,Se=d)}return{successful:!!(I.delimiter=re),bestDelimiter:re}}(Re,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);J.successful?I.delimiter=J.bestDelimiter:(B=!0,I.delimiter=c.DefaultDelimiter),ue.meta.delimiter=I.delimiter}var K=D(I);return I.preview&&I.header&&K.preview++,P=Re,M=new b(K),ue=M.parse(P,F,H),Le(),V?{meta:{paused:!0}}:ue||{meta:{paused:!1}}},this.paused=function(){return V},this.pause=function(){V=!0,M.abort(),P=R(I.chunk)?"":P.substring(M.getCharIndex())},this.resume=function(){Oe.streamer._halted?(V=!1,Oe.streamer.parseChunk(P,!0)):setTimeout(Oe.resume,3)},this.aborted=function(){return fe},this.abort=function(){fe=!0,M.abort(),ue.meta.aborted=!0,R(I.complete)&&I.complete(ue),P=""}}function E(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(I){var P,M=(I=I||{}).delimiter,B=I.newline,z=I.comments,te=I.step,pe=I.preview,Ce=I.fastMode,Oe=P=I.quoteChar===void 0||I.quoteChar===null?'"':I.quoteChar;if(I.escapeChar!==void 0&&(Oe=I.escapeChar),(typeof M!="string"||-1<c.BAD_DELIMITERS.indexOf(M))&&(M=","),z===M)throw new Error("Comment character same as delimiter");z===!0?z="#":(typeof z!="string"||-1<c.BAD_DELIMITERS.indexOf(z))&&(z=!1),B!==`
`&&B!=="\r"&&B!==`\r
`&&(B=`
`);var ve=0,ne=!1;this.parse=function(V,fe,ye){if(typeof V!="string")throw new Error("Input must be a string");var ue=V.length,Ie=M.length,ce=B.length,Le=z.length,He=R(te),We=[],Ye=[],Re=[],F=ve=0;if(!V)return A();if(I.header&&!fe){var H=V.split(B)[0].split(M),U=[],J={},K=!1;for(var q in H){var ie=H[q];R(I.transformHeader)&&(ie=I.transformHeader(ie,q));var Q=ie,ee=J[ie]||0;for(0<ee&&(K=!0,Q=ie+"_"+ee),J[ie]=ee+1;U.includes(Q);)Q=Q+"_"+ee;U.push(Q)}if(K){var se=V.split(B);se[0]=U.join(M),V=se.join(B)}}if(Ce||Ce!==!1&&V.indexOf(P)===-1){for(var re=V.split(B),ge=0;ge<re.length;ge++){if(Re=re[ge],ve+=Re.length,ge!==re.length-1)ve+=B.length;else if(ye)return A();if(!z||Re.substring(0,Le)!==z){if(He){if(We=[],p(Re.split(M)),N(),ne)return A()}else p(Re.split(M));if(pe&&pe<=ge)return We=We.slice(0,pe),A(!0)}}return A()}for(var _e=V.indexOf(M,ve),Se=V.indexOf(B,ve),qe=new RegExp(E(Oe)+E(P),"g"),Be=V.indexOf(P,ve);;)if(V[ve]!==P)if(z&&Re.length===0&&V.substring(ve,ve+Le)===z){if(Se===-1)return A();ve=Se+ce,Se=V.indexOf(B,ve),_e=V.indexOf(M,ve)}else if(_e!==-1&&(_e<Se||Se===-1))Re.push(V.substring(ve,_e)),ve=_e+Ie,_e=V.indexOf(M,ve);else{if(Se===-1)break;if(Re.push(V.substring(ve,Se)),S(Se+ce),He&&(N(),ne))return A();if(pe&&We.length>=pe)return A(!0)}else for(Be=ve,ve++;;){if((Be=V.indexOf(P,Be+1))===-1)return ye||Ye.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:We.length,index:ve}),C();if(Be===ue-1)return C(V.substring(ve,Be).replace(qe,P));if(P!==Oe||V[Be+1]!==Oe){if(P===Oe||Be===0||V[Be-1]!==Oe){_e!==-1&&_e<Be+1&&(_e=V.indexOf(M,Be+1)),Se!==-1&&Se<Be+1&&(Se=V.indexOf(B,Be+1));var o=_(Se===-1?_e:Math.min(_e,Se));if(V.substr(Be+1+o,Ie)===M){Re.push(V.substring(ve,Be).replace(qe,P)),V[ve=Be+1+o+Ie]!==P&&(Be=V.indexOf(P,ve)),_e=V.indexOf(M,ve),Se=V.indexOf(B,ve);break}var d=_(Se);if(V.substring(Be+1+d,Be+1+d+ce)===B){if(Re.push(V.substring(ve,Be).replace(qe,P)),S(Be+1+d+ce),_e=V.indexOf(M,ve),Be=V.indexOf(P,ve),He&&(N(),ne))return A();if(pe&&We.length>=pe)return A(!0);break}Ye.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:We.length,index:ve}),Be++}}else Be++}return C();function p(G){We.push(G),F=ve}function _(G){var Y=0;if(G!==-1){var X=V.substring(Be+1,G);X&&X.trim()===""&&(Y=X.length)}return Y}function C(G){return ye||(G===void 0&&(G=V.substring(ve)),Re.push(G),ve=ue,p(Re),He&&N()),A()}function S(G){ve=G,p(Re),Re=[],Se=V.indexOf(B,ve)}function A(G){return{data:We,errors:Ye,meta:{delimiter:M,linebreak:B,aborted:ne,truncated:!!G,cursor:F+(fe||0)}}}function N(){te(A()),We=[],Ye=[]}},this.abort=function(){ne=!0},this.getCharIndex=function(){return ve}}function w(I){var P=I.data,M=a[P.workerId],B=!1;if(P.error)M.userError(P.error,P.file);else if(P.results&&P.results.data){var z={abort:function(){B=!0,T(P.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(R(M.userStep)){for(var te=0;te<P.results.data.length&&(M.userStep({data:P.results.data[te],errors:P.results.errors,meta:P.results.meta},z),!B);te++);delete P.results}else R(M.userChunk)&&(M.userChunk(P.results,z,P.file),delete P.results)}P.finished&&!B&&T(P.workerId,P.results)}function T(I,P){var M=a[I];R(M.userComplete)&&M.userComplete(P),M.terminate(),delete a[I]}function x(){throw new Error("Not implemented.")}function D(I){if(typeof I!="object"||I===null)return I;var P=Array.isArray(I)?[]:{};for(var M in I)P[M]=D(I[M]);return P}function O(I,P){return function(){I.apply(P,arguments)}}function R(I){return typeof I=="function"}return s&&(i.onmessage=function(I){var P=I.data;if(c.WORKER_ID===void 0&&P&&(c.WORKER_ID=P.workerId),typeof P.input=="string")i.postMessage({workerId:c.WORKER_ID,results:c.parse(P.input,P.config),finished:!0});else if(i.File&&P.input instanceof File||P.input instanceof Object){var M=c.parse(P.input,P.config);M&&i.postMessage({workerId:c.WORKER_ID,results:M,finished:!0})}}),(m.prototype=Object.create(f.prototype)).constructor=m,(g.prototype=Object.create(f.prototype)).constructor=g,(h.prototype=Object.create(h.prototype)).constructor=h,(v.prototype=Object.create(f.prototype)).constructor=v,c})}(za)),za.exports}var lE=aE();const Cd=xo(lE);var zt=Ee("SourceError",Error,function(e){this.message=e}),No=Ee("LocalSource",Object,function(e){var t=this;t.varName=e.varName,t.cache={data:it(window[t.varName].data),typeInfo:new Ae},k.isArray(window[t.varName].typeInfo)?k.each(window[t.varName].typeInfo,function(n){t.cache.typeInfo.set(n.field,n)}):k.each(window[t.varName].typeInfo,function(n,i){n.field=i,t.cache.typeInfo.set(i,n)})});No.prototype.getData=function(e,t){var n=this;return t(!0,n.cache.data)};No.prototype.getTypeInfo=function(e){var t=this;return e(!0,t.cache.typeInfo)};No.prototype.clearCachedData=function(){var e=this;e.cache=null};No.prototype.getName=function(){var e=this;return e.varName};var xs=Ee("HttpSource",Object,function(e,t){var n=this;n.url=e.url,n.method=e.method||"GET",n.dataType=e.dataType,n.cache=null,n.userTypeInfo=t});xs.prototype.parseData=function(e){var t={data:[],typeInfo:new Ae};if(e instanceof Document){var n=jQuery(e).children("root");if(!n.is("root"))throw new zt("HTTP Data Source / XML Parser / Missing (root) element");if(e=n.children("data"),e.length===0)throw new zt("HTTP Data Source / XML Parser / Missing (root > data) element");if(e.length>1)throw new zt("HTTP Data Source / XML Parser / Too many (root > data) elements");e.children("item").each(function(c,u){u=jQuery(u);var f={};u.children().each(function(m,g){g=jQuery(g),f[g.prop("tagName")]=g.text()}),t.data.push(f)});var i=n.children("typeInfo");if(i.length===0)throw new zt("HTTP Data Source / XML Parser / Missing (root > typeInfo) element");if(i.length>1)throw new zt("HTTP Data Source / XML Parser / Too many (root > typeInfo) elements");i.children().each(function(c,u){u=jQuery(u);var f=u.prop("tagName");if(t.typeInfo.set(f,{}),u.children().length===0)t.typeInfo.get(f).type=u.text();else{var m=u.children("type");if(m.length===0)throw new zt("HTTP Data Source / XML Parser / Missing (root > typeInfo > "+f+" > type) element");if(m.length>1)throw new zt("HTTP Data Source / XML Parser / Too many (root > typeInfo > "+f+" > type) elements");if(m.children().length>0)throw new zt("HTTP Data Source / XML Parser / (root > typeInfo > "+f+" > type) element cannot have children");t.typeInfo.get(f).type=m.text();var g=u.children("format");if(g.length>1)throw new zt("HTTP Data Source / XML Parser / Too many (root > typeInfo > "+f+" > format) elements");if(g.length===1){if(g.children().length>0)throw new zt("HTTP Data Source / XML Parser / (root > typeInfo > "+f+" > format) element cannot have children");t.typeInfo.get(f).format=g.text()}}})}else if(typeof e=="string"){var r=Cd.parse(e,{skipEmptyLines:!0}),s=r.data[0];k.each(r.data.slice(1),function(c){var u={};k.each(c,function(f,m){u[s[m]]=f}),t.data.push(u)}),k.each(s,function(c){t.typeInfo.set(c,{type:"string"})})}else{if(e.data===void 0)throw new zt("HTTP Data Source / JSON Parser / Missing (data) property");if(!k.isArray(e.data))throw new zt("HTTP Data Source / JSON Parser / (data) property must be an array");if(e.typeInfo===void 0)throw new zt("HTTP Data Source / JSON Parser / Missing (typeInfo) property");k.each(e.typeInfo,function(c){var u=c.field;delete c.field,t.typeInfo.set(u,c)});for(var a=0;a<e.data.length;a+=1)if(k.isArray(e.data[a])){var l={};t.typeInfo.each(function(c,u,f){l[u]=e.data[a][f]}),e.data[a]=l}t.data=e.data}return t};xs.prototype.getData=function(e,t){var n=this;if(n.cache!=null)return t(!0,n.cache.data);var i=Ul("HttpSource#getData");return n.xhr=jQuery.ajax(n.url,{method:n.method,data:e,traditional:!0,dataType:n.dataType,error:function(r,s,a){return i.finish(),de.error("HTTP Data Source / AJAX Error / "+a),t(!1)},success:function(r,s,a){return i.finish(),n.cache=n.parseData(r),t(!0,n.cache.data)}}),n.xhr};xs.prototype.getTypeInfo=function(e){var t=this;return t.cache!=null?e(!0,t.cache.typeInfo):t.getData(void 0,function(n){return n?e(!0,t.cache.typeInfo):e(!1)})};xs.prototype.clearCachedData=function(){var e=this;e.cache=null};xs.prototype.cancel=function(){var e=this;e.xhr.abort()};var Ds=Ee("FileSource",Object,function(e,t,n){var i=this;i.spec=e,i.userTypeInfo=t,i.source=n,i.cache={data:[],typeInfo:new Ae}});Ds.prototype.setToolbar=function(e){var t=this;jQuery("<input>",{type:"file",name:"file",accept:".csv"}).on("change",function(){Cd.parse(this.files.item(0),{header:!0,skipEmptyLines:!0,complete:function(n,i){console.log(n),t.cache.data=n.data,t.cache.typeInfo=new Ae,k.each(n.meta.fields,function(r){t.cache.typeInfo.set(r,{type:"string"})}),t.source.clearCachedData()}})}).appendTo(e)};Ds.prototype.setFiles=function(e){var t=this;e instanceof FileList&&Cd.parse(e.item(0),{header:!0,skipEmptyLines:!0,complete:function(n,i){console.log(n),t.cache.data=n.data,t.cache.typeInfo=new Ae,k.each(n.meta.fields,function(r){t.cache.typeInfo.set(r,{type:"string"})}),t.source.clearCachedData()}})};Ds.prototype.getData=function(e,t){var n=this;return t(!0,n.cache.data)};Ds.prototype.getTypeInfo=function(e){var t=this;return e(!0,t.cache.typeInfo)};var Ed=Ee("TableSource",Object,function(e,t,n){var i=this;i.spec=e,i.userTypeInfo=t,i.source=n,i.cache={}});Ed.prototype.getData=function(e,t){var n=this;if(n.cache.data!=null)return n.cache.data;var i=function(g){return jQuery(g).map(function(h,v){return jQuery(v).text()})};n.spec.tableSelector;var r=n.spec.columnSelector||'div[id="lv_'+n.source.table.id+'_span"] table tbody:eq(0) tr th a font',s=n.spec.dataSelector||'div[id="lv_'+n.source.table.id+'_span"] table tbody:eq(1) tr td font',a=i(r),l=i(s),c,u,f=[],m;for(c=0;c<l.length/a.length;c+=1){for(m={},u=0;u<a.length;u+=1)m[a[u]]=l[c*a.length+u];f.push(m)}return n.cache.data=f,t(!0,n.cache.data)};Ed.prototype.getTypeInfo=function(e){var t=this;if(t.cache.typeInfo!=null)return t.cache.typeInfo;var n=function(a){return jQuery(a).map(function(l,c){return jQuery(c).text()})},i=t.spec.columnSelector||'div[id="lv_'+t.source.table.id+'_span"] table tbody:eq(0) tr th a font',r=n(i),s=new Ae;return k.each(r,function(a){s.set(a,{type:"string"})}),t.cache.typeInfo=s,e(!0,t.cache.typeInfo)};var Ke=Ee("Source",Object,function(e,t,n,i){var r=this;if(i=Qe(i,{deferDecoding:!0,passThroughParams:!1}),r.setName(i.name),r.error=e.error,r.type=e.type,r.cache={},r.params=t,r.locks={},r.opts=i,r.eventHandlers={},k.each(k.keys(Ke.events),function(a){r.eventHandlers[a]=[]}),r.guessColumnTypes=!0,k.isArray(n)?r.userTypeInfo=k.indexBy(n,"field"):r.userTypeInfo=n,Ke.sources[r.type]===void 0)throw new zt("Unsupported data source type: "+r.type);r.origin=new Ke.sources[r.type](e,n,r);var s=function(a,l){k.each(a,function(c,u){if(typeof c=="string"){if(Ke.converters[c]===void 0)throw new zt("Conversion"+(l?' for field "'+l+'", ':"")+" #"+u+': Named converter "'+c+'" not registered');if(typeof Ke.converters[c]!="function")throw new zt("Conversion"+(l?' for field "'+l+'", ':"")+" #"+u+': Named converter "'+c+'" is not a function')}else if(typeof c!="function")throw new zt("Invalid Source config: `.conversion"+(l?"["+l+"]":"")+"["+u+"]` must be a function or string")})};k.isArray(e.conversion)?s(e.conversion):k.each(e.conversion,function(a,l){s(a,l)}),r.conversion=e.conversion,r.locks.getData=new qt(r.toString()+" // GET DATA"),r.locks.refresh=new qt(r.toString()+" // REFRESH")});vi(Ke,["fetchDataBegin","fetchDataEnd","fetchDataCancel","dataUpdated","getTypeInfo"]);Ui(Ke);ji(Ke);Cs(Ke);Ke.sources={local:No,http:xs,file:Ds,table:Ed};Ke.converters={};Ke.decode=function(e,t){e.decoded||(e.orig===void 0&&(e.orig=e.value),typeof e.orig=="string"?e.value=gt.registry.get(t.type).parse(e.orig,t.internalType,t.format):e.value=gt.registry.get(t.type).decode(e.orig,t.internalType),e.decoded=!0)};Ke.decodeAll=function(e,t,n){var i=n.get(t);i.needsDecoding&&(console.debug('[DataVis // Source // Decoding] Decoding all values: field = "%s" ; type = %s ; internalType = %s ; valueTypeOf = %s',t,i.type,i.internalType,typeof me(e,0,t,"value")),k.each(e,function(r){Ke.decode(r[t],n.get(t))}),i.deferDecoding=!1,i.needsDecoding=!1)};Ke.prototype.unlimit=function(){var e=this;if(typeof e.origin.unlimit=="function")return e.origin.unlimit()};Ke.prototype.getName=function(){var e=this;if(typeof e.origin.getName=="function")return e.origin.getName()};Ke.prototype.getData=function(e){var t=this;return t.locks.getData.isLocked()?t.locks.getData.onUnlock(function(){return t.getData(e)}):t.cache.data!=null?e(!0,t.cache.data):(t.locks.getData.lock(),t.fire("fetchDataBegin",{async:!0}),t.origin.getData(t.createParams(),function(n,i){if(!n)return t.locks.getData.unlock(),t.fire("fetchDataEnd",{async:!0}),e(!1);t.postProcess(i,function(r){return t.cache.data=r,t.locks.getData.unlock(),t.fire("fetchDataEnd",{async:!0}),e(!0,r)})}))};Ke.prototype.getUniqueVals=function(e){var t=this;if(t.cache.uniqElts!=null)return e(t.cache.uniqElts);t.getData(function(n,i){var r={},s={};return n?(k.each(i,function(a){k.each(a,function(l,c){r[c]===void 0&&(r[c]={count:0,values:[]},s[c]={}),s[c][l.value]===void 0&&(s[c][l.value]=!0,r[c].count+=1,r[c].values.push(l.value))})}),k.each(r,function(a){a.values.sort()}),t.cache.uniqElts=r,e(t.cache.uniqElts)):e({})})};Ke.prototype.getTypeInfo=function(e){var t=this;return t.cache.typeInfo!=null?e(!0,t.cache.typeInfo):t.origin.getTypeInfo(function(n,i){return n?(i.each(function(r,s){typeof r=="string"&&(r={type:r},i.set(s,r)),r.field=s,r.overridden=!1}),t.userTypeInfo!=null&&k.each(t.userTypeInfo,function(r,s){i.isSet(s)||(de.warn('Overriding type information on field "'+s+'" which is not present in the source.'),i.set(s,{})),typeof r=="string"&&(r={type:r});var a=i.get(s);r.type!=null&&(a.overridden=!0),k.extend(a,r),t.debug("GET TYPE INFO",'Overriding origin type information { field = "'+s+'", typeInfo = %O }',r)}),t.cache.typeInfo=i,t.debug("GET TYPE INFO","Type Info = %O",it(t.cache.typeInfo.asMap())),t.fire(Ke.events.getTypeInfo,null,t.cache.typeInfo,t),e(!0,t.cache.typeInfo)):e(!1)})};Ke.prototype.getDisplayName=function(e){var t=this;return t.cache.displayName!=null?e(t.cache.displayName):t.origin.getDisplayName!=null?t.origin.getDisplayName(function(n){return t.cache.displayName=n,e(t.cache.displayName)}):(t.cache.displayName={},e(t.cache.displayName))};Ke.prototype.postProcess=function(e,t){var n=this;if(e==null)throw new zt("Data Source / Post Process / Received nothing");if(!k.isArray(e))throw new zt("Data Source / Post Process / Data is not an array");n.debug("POST-PROCESSING","Beginning post-processing"),n.getTypeInfo(function(i,r){if(!i)return t(e);n.debug("POST-PROCESSING","Received type info from source origin: %O",r.asMap()),r.each(function(f){f.type==null&&(f.type="string")});var s={};if(r.each(function(f,m){s[m]=n.getConversionFuncs(m)}),k.each(e,function(f,m){k.each(f,function(g,h){var v=r.get(h),y={value:g};if(s[h]!=null)for(var E={row:f,source:n,rowNum:m,totalRows:e.length},b=0;b<s[h].length&&!s[h][b](y,h,v,E);b+=1);f[h]=y})}),n.guessTypes(e,r),n.setConversionTypeInfo(e,r),k.each(e,function(f,m){k.each(f,function(g,h){var v=r.get(h);v!=null&&(!v.deferDecoding||h===n.discriminatorField)&&Ke.decode(f[h],v)})}),n.discriminatorField!=null){var a=r.get(n.discriminatorField),l=ur.byType(a),c=null,u=null;n.debug("POST-PROCESSING",'Checking discriminator ranges for "%s" field (type = %s)',n.discriminatorField,a.type),k.each(e,function(f,m){for(var g=f[n.discriminatorField].value,h=!1,v=0;v<n.discriminatorRanges.length&&!h;v+=1){var y=n.discriminatorRanges[v];l(y[0],g)<=0&&l(g,y[1])<=0&&(h=!0)}h?e[m]=null:((c==null||l(g,c)<0)&&(c=g),(u==null||l(u,g)>0)&&(u=g))}),n.addDiscriminatorRange([c,u]),e=k.without(e,null)}return n.debug("POST-PROCESSING","Post-processing finished"),t(e)})};Ke.prototype.getConversionFuncs=function(e){var t=this,n=[],i=function(r){k.each(r,function(s,a){typeof s=="function"?n.push(s):typeof s=="string"&&n.push(Ke.converters[s])})};return t.conversion!==void 0&&(k.isArray(t.conversion)?i(t.conversion):t.conversion[e]!==void 0&&i(t.conversion[e])),n};Ke.prototype.guessTypes=function(e,t){var n=this;t.each(function(i,r){if(!(i.overridden||i.type!=="string")){n.debug("CONVERSION // TYPE GUESSING",'Guessing type for field "%s"',i.field);for(var s=null,a=0;s!=="string"&&a<e.length;a+=1){var l=e[a][r].value,c=Am(l);s==null?s=c:c!==s&&(n.debug("CONVERSION // TYPE GUESSING",'For field "%s", previous guess "%s" disagrees with current guess "%s" (rowNum = %d, value = %O)',r,s,c,a,l),s="string")}s!=null&&s!=="string"&&(n.debug("CONVERSION // TYPE GUESSING",'For field "%s", successfully guessed new type "%s"',r,s),i.type=s)}})};Ke.prototype.setConversionTypeInfo=function(e,t){var n=this;t.each(function(i,r){i.type==="string"?i.internalType="string":["number","currency"].indexOf(i.type)>=0?(i.deferDecoding=n.opts.deferDecoding,i.needsDecoding=!0,i.internalType==null?i.type==="currency"?i.internalType="bignumber":i.internalType="primitive":["primitive","numeral","bignumber"].indexOf(i.internalType)<0&&(de.error('Invalid internalType "'+i.internalType+'" requested for field "'+i.field+'" - falling back to "primitive" instead'),i.internalType="primitive")):["date","datetime","time"].indexOf(i.type)>=0&&(i.deferDecoding=n.opts.deferDecoding,i.type==="date"&&(i.format===void 0||i.format==="YYYY-MM-DD")||i.type==="datetime"&&(i.format===void 0||i.format==="YYYY-MM-DD HH:mm:ss")||i.type==="time"&&(i.format===void 0||i.format==="HH:mm:ss"||i.format==="HH:mm")?i.internalType="string":(i.needsDecoding=!0,i.internalType="moment")),i.deferDecoding&&n.debug("CONVERSION",'Deferring conversion until <%s> { field = "%s", type = "%s", format = "%s" }',i.needsDecoding?"SORT":"DISPLAY",r,i.type,i.format)})};Ke.prototype.clearCachedData=function(){var e=this;typeof e.origin.clearCachedData=="function"&&e.origin.clearCachedData(),e.cache={},e.fire("dataUpdated")};Ke.prototype.refresh=function(){var e=this;if(!e.locks.refresh.isLocked()){e.debug(null,"Refreshing..."),e.locks.refresh.lock(),typeof e.origin.clearCachedData=="function"&&e.origin.clearCachedData();var t=e.cache;e.cache={},e.getData(function(n){e.locks.refresh.unlock(),n?e.fire("dataUpdated"):e.cache=t})}};Ke.prototype.createParams=function(){var e=this,t={};return e.opts.passThroughParams&&(t=qm()),k.each(e.params,function(n){e.debug("CREATE PARAMS","Parameter =",n),n.toParams(t)}),e.debug("CREATE PARAMS","Final Parameters =",t),t.report_json_where!=null&&(t.report_json_where=JSON.stringify(t.report_json_where)),t.report_json_having!=null&&(t.report_json_having=JSON.stringify(t.report_json_having)),t};Ke.prototype.swapRows=function(e,t){var n=this;if(n.cache.data===void 0)throw new zt("Attempted to swap rows before retrieving data");var i=n.cache.data.splice(e,1);n.cache.data.splice(t,0,i[0])};Ke.prototype.isCancellable=function(){var e=this;return typeof e.origin.cancel=="function"};Ke.prototype.cancel=function(){var e=this;typeof e.origin.cancel=="function"&&(e.origin.cancel(),e.locks.getData.clear(),e.locks.refresh.clear(),e.fire("fetchDataCancel"))};Ke.prototype.toString=function(){var e=this;return"Source("+e.name+", "+e.type+")"};Ke.prototype.setToolbar=function(e){var t=this;t.toolbar=e,typeof t.origin.setToolbar=="function"&&t.origin.setToolbar(e)};Ke.prototype.setDiscriminatorField=function(e){this.discriminatorField=e};Ke.prototype.setDiscriminatorRanges=function(e){this.discriminatorRanges=e};Ke.prototype.addDiscriminatorRange=function(e){this.discriminatorRanges.push(e)};Ke.prototype.clearDiscriminatorRanges=function(){this.discriminatorRanges=[]};Ke.prototype.condenseDiscriminatorRanges=function(){var e=this;if(e.discriminatorRanges.length!==0){var t=null,n=null;k.each(e.discriminatorRanges,function(i){(t==null||cmp(i[0],t)<0)&&(t=i[0]),(n==null||cmp(n,i[1])>0)&&(n=i[1])}),t==null||n==null?e.clearDiscriminatorRanges():e.setDiscriminatorRanges([[t,n]])}};j.fn.extend({_isChecked:function(){return this.prop("checked")},_check:function(){this.prop("checked",!0)},_uncheck:function(){this.prop("checked",!1)},_toggleCheck:function(){var e=!this.prop("checked");return this.prop("checked",e),e},_isDisabled:function(){return this.attr("disabled")},_isHidden:function(){return this.css("display")==="none"||this.css("visibility")!=="visible"},_addTrailing:function(e){var t=this.text();t.slice(e.length*-1)!==e&&this.text(t+e)},_stripTrailing:function(e){var t=this.text();t.slice(e.length*-1)===e&&this.text(t.slice(0,e.length*-1))},_makeIconCheckbox:function(){var e=this,t=Array.prototype.slice.call(arguments),n={};t.length===1?typeof t[0]=="string"?n={on:{icon:t[0],classes:"wcdv_icon_checkbox_on"},off:{icon:t[0],classes:"wcdv_icon_checkbox_off"}}:n=t[0]:t.length===2&&(n={on:{icon:t[0]},off:{icon:t[1]}});var i=j("<button>",{type:"button",disabled:j(e).prop("disabled"),title:e.attr("title")}).addClass("wcdv_icon_button wcdv_button_left").on("click",function(){e._toggleCheck(),e.trigger("change")}),r=Ne(n.on.icon,n.on.classes).css("display","inline-block").hide().appendTo(i),s=Ne(n.off.icon,n.off.classes).css("display","inline-block").hide().appendTo(i),a=function(){e._isChecked()?(r.show(),s.hide(),n.on.tooltip!=null&&i.attr("title",n.on.tooltip)):(r.hide(),s.show(),n.off.tooltip!=null&&i.attr("title",n.off.tooltip))};return a(),e.hide(),e.before(i),e.on("change",a),e._updateIcon=a,e},_addEventDebugging:function(e,t){switch(e){case"drag":this.on("dragstart",function(n,i){console.log("### "+t+" > DRAG.START: evt = %O, ui = %O",n,i)}),this.on("dragstop",function(n,i){console.log("### "+t+" > DRAG.STOP: evt = %O, ui = %O",n,i)});break;case"drop":this.on("dropactivate",function(n,i){console.log("### "+t+" > DROP.ACTIVATE: evt = %O, ui = %O",n,i)}),this.on("dropdeactivate",function(n,i){console.log("### "+t+" > DROP.DEACTIVATE: evt = %O, ui = %O",n,i)}),this.on("drop",function(n,i){console.log("### "+t+" > DROP.DROP: evt = %O, ui = %O",n,i)});break;case"sort":this.on("sortreceive",function(n,i){console.log("### "+t+" > SORT.RECEIVE: evt = %O, ui = %O",n,i)}),this.on("sortremove",function(n,i){console.log("### "+t+" > SORT.REMOVE: evt = %O, ui = %O",n,i)}),this.on("sortstart",function(n,i){console.log("### "+t+" > SORT.START: evt = %O, ui = %O",n,i)}),this.on("sortstop",function(n,i){console.log("### "+t+" > SORT.STOP: evt = %O, ui = %O",n,i)}),this.on("sortactivate",function(n,i){console.log("### "+t+" > SORT.ACTIVATE: evt = %O, ui = %O",n,i)}),this.on("sortdeactivate",function(n,i){console.log("### "+t+" > SORT.DEACTIVATE: evt = %O, ui = %O",n,i)}),this.on("sortupdate",function(n,i){console.log("### "+t+" > SORT.UPDATE: evt = %O, ui = %O",n,i)});break;default:throw new Error('Call Error: Event type must be one of: ["drag", "drop", "sort"]')}return this},_makeDraggableField:function(e){e=Qe(!0,{classes:{"ui-draggable-handle":"wcdv_drag_handle"},distance:8,helper:"clone",appendTo:document.body,revert:!0,revertDuration:0}),this.attr("title","XXX");var t=j("<div>").append(Ne("fa-info-circle").css("padding-right","0.25em").addClass("wcdv_text-primary")).append(ae("GRID.TABLE.DRAGGABLE_FIELD_HELP"));return this.tooltip({classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow wcdv_info_tooltip wcdv_border-primary"},show:{delay:2e3},content:t}),this.draggable(e)},_makeSortableTable:function(e){var t=this,n=function(r,s){var a=s.children(),l=s.clone(),c=s.index(),u=s.parent().children(),f=s.find("select");l.children().each(function(g,h){j(h).width(a.eq(g).width())}),l.find("select").val(function(g){return f.eq(g).val()});for(var m=c+1;m<u.length;m++)m%2==0?j(u[m]).addClass("odd"):j(u[m]).addClass("even");return c%2==0?l.addClass("odd"):l.addClass("even"),l};t.on("keydown","button.drag-handle",function(r){var s=j(r.currentTarget).closest("tr"),a=s.index(),l=a;switch(r.keyCode){case 38:if(r.preventDefault(),s.prev().length)s.insertBefore(s.prev());else return!0;break;case 40:if(r.preventDefault(),s.next().length)s.insertAfter(s.next());else return!0;break;default:return!0}l=s.index(),a!==l&&e(a,l),j(r.currentTarget).focus()});var i={forcePlaceholderSize:!0,axis:"y",cancel:"input,textarea,select,option",helper:n,handle:".drag-handle",containment:t,start:function(r,s){s.placeholder.height(s.helper.height()),s.item.data("originIndex",s.item.index())},stop:function(r,s){var a=s.item.data("originIndex"),l=s.item.index();s.item.parent().children().removeClass("even odd"),typeof a<"u"&&typeof l<"u"&&a!==l?e(a,l):j(this).sortable("cancel")}};return t.sortable(i),this},_onFileDrop:function(e){function t(i){i.stopPropagation(),i.preventDefault(),e(i.dataTransfer.files)}function n(i){switch(i.stopPropagation(),i.preventDefault(),me(i.dataTransfer,"items",0,"type")){case"text/csv":case"application/csv":case"application/vnd.ms-excel":i.dataTransfer.dropEffect="copy";break;default:i.dataTransfer.dropEffect="none"}}this.get(0).addEventListener("dragover",n,!1),this.get(0).addEventListener("drop",t,!1)},findFieldCell:function(e){return this.children().filter(function(t,n){return j(n).attr("data-wcdv-field")===e})},dvAttr:function(){var e=Array.prototype.slice.call(arguments);if(e.length===1){if(typeof e[0]=="string")return this.attr("data-wcdv-"+e[0]);if(typeof e[0]=="object"){for(var t in e[0])Object.prototype.hasOwnProperty.call(e[0],t)&&(e[0]["data-wcdv-"+t]=e[0][t],delete e[0][t]);return this.attr(e[0])}else throw new Error("Call Error: Sole argument must be a string (getter) or object (setter)")}else if(e.length===2){if(typeof e[0]!="string")throw new Error("Call Error: With two arguments, first argument must be a string");if(e[1]!=null&&typeof e[1]!="string"&&typeof e[1]!="number")if(typeof e[1]=="boolean")e[1]=e[1]?"1":"0";else throw new Error("Call Error: With two arguments, second must be a string, number, boolean, or null");return this.attr("data-wcdv-"+e[0],e[1])}else throw new Error("Call Error: dvAttr(string|object), dvAttr(string, string|number|boolean)")}});var mn=Ee("GroupFunction",Object,function(e){var t=this;if(e=Qe(e,{}),e.displayName==null||typeof e.displayName!="string")throw new Error("Call Error: `displayName` must be a string");if(e.allowedTypes!=null&&!k.isArray(e.allowedTypes))throw new Error("Call Error: `allowedTypes` must be null or an array");if(e.valueFun!=null&&typeof e.valueFun!="function")throw new Error("Call Error: `valueFun` must be null or a function");if(e.resultType!=null&&typeof e.resultType!="string")throw new Error("Call Error: `resultType` must be null or a string");if(e.sortType!=null&&typeof e.sortType!="string")throw new Error("Call Error: `sortType` must be null or a string");if(e.valueToFilter!=null&&typeof e.valueToFilter!="function")throw new Error("Call Error: `valueToFilter` must be null or a function");e=Qe(e,{category:"other",resultType:"string",canFilter:!0,valueToFilter:function(n){return{$eq:n}}}),e.sortType==null&&(e.sortType=e.resultType),fl(e,t,["category","displayName","allowedTypes","valueFun","resultType","sortType","canFilter","valueToFilter"])});mn.prototype.applyValueFun=function(e,t){return this.valueFun?this.valueFun(e,t):e};var dt=new Ae;dt.set("year",new mn({category:"date",displayName:ae("GRID.GROUP_FUN.DATE.YEAR"),allowedTypes:["date","datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("YYYY")},valueToFilter:function(e){return{$gte:le(e,"YYYY").format("YYYY-MM-DD HH:mm:ss"),$lte:le(e,"YYYY").add(1,"years").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}}}));dt.set("quarter",new mn({category:"repeating",displayName:ae("GRID.GROUP_FUN.REPEATING.QUARTER"),allowedTypes:["date","datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("[Q]Q")},canFilter:!1}));dt.set("month",new mn({category:"repeating",displayName:ae("GRID.GROUP_FUN.REPEATING.MONTH"),allowedTypes:["date","datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("MMM")},sortType:"month",canFilter:!1}));dt.set("week_iso",new mn({category:"repeating",displayName:ae("GRID.GROUP_FUN.REPEATING.WEEK"),allowedTypes:["date","datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("[W]WW")},canFilter:!1}));dt.set("day_of_week",new mn({category:"repeating",displayName:ae("GRID.GROUP_FUN.REPEATING.DAY_OF_WEEK"),allowedTypes:["date","datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("ddd")},sortType:"day_of_week",canFilter:!1}));dt.set("year_and_quarter",new mn({category:"date",displayName:ae("GRID.GROUP_FUN.DATE.YEAR_AND_QUARTER"),allowedTypes:["date","datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("YYYY [Q]Q")},valueToFilter:function(e){return{$gte:le(e,"YYYY [Q]Q").format("YYYY-MM-DD HH:mm:ss"),$lte:le(e,"YYYY [Q]Q").add(1,"quarters").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}}}));dt.set("year_and_month",new mn({category:"date",displayName:ae("GRID.GROUP_FUN.DATE.YEAR_AND_MONTH"),allowedTypes:["date","datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("YYYY MMM")},sortType:"year_and_month",valueToFilter:function(e){return{$gte:le(e,"YYYY MMM").format("YYYY-MM-DD HH:mm:ss"),$lte:le(e,"YYYY MMM").add(1,"months").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}}}));dt.set("year_and_week_iso",new mn({category:"date",displayName:ae("GRID.GROUP_FUN.DATE.YEAR_AND_WEEK"),allowedTypes:["date","datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("YYYY [W]WW")},valueToFilter:function(e){return{$gte:le(e,"YYYY [W]WW").format("YYYY-MM-DD HH:mm:ss"),$lte:le(e,"YYYY [W]WW").add(1,"weeks").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}}}));dt.set("day",new mn({category:"date",displayName:ae("GRID.GROUP_FUN.DATE.FULL_DATE"),allowedTypes:["datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("YYYY-MM-DD")},resultType:"date",valueToFilter:function(e){return{$gte:le(e).format("YYYY-MM-DD HH:mm:ss"),$lte:le(e).add(1,"days").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}}}));dt.set("day_and_time_1hr",new mn({category:"datetime",displayName:ae("GRID.GROUP_FUN.DATE_TIME.SLICE.1HR"),allowedTypes:["datetime"],valueFun:function(e){return typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("YYYY-MM-DD HH:00:00")},resultType:"datetime",valueToFilter:function(e){return{$gte:le(e).format("YYYY-MM-DD HH:mm:ss"),$lte:le(e).add(1,"hours").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}}}));dt.set("day_and_time_15min",new mn({category:"datetime",displayName:ae("GRID.GROUP_FUN.DATE_TIME.SLICE.15MIN"),allowedTypes:["datetime"],valueFun:function(e){if(typeof e=="string"&&(e=le(e)),!le.isMoment(e)||!e.isValid())return"Invalid Date";var t=e.minutes(),n=t>=0&&t<=14?"00":t>=15&&t<=29?"15":t>=30&&t<=44?"30":t>=45&&t<=59?"45":"00";return e.format("YYYY-MM-DD HH:"+n+":00")},resultType:"datetime",valueToFilter:function(e){return{$gte:le(e).format("YYYY-MM-DD HH:mm:ss"),$lte:le(e).add(15,"minutes").subtract(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}}}));dt.set("time_1hr",new mn({category:"time",displayName:ae("GRID.GROUP_FUN.TIME.SLICE.1HR"),allowedTypes:["time"],valueFun:function(e,t){return typeof e=="string"&&(e=le(e,me(t,"format"))),!le.isMoment(e)||!e.isValid()?"Invalid Date":e.format("HH:00:00")},resultType:"time",valueToFilter:function(e){return{$gte:le(e).format("HH:mm:ss"),$lte:le(e).add(1,"hours").subtract(1,"seconds").format("HH:mm:ss")}}}));dt.set("time_15min",new mn({category:"time",displayName:ae("GRID.GROUP_FUN.TIME.SLICE.15MIN"),allowedTypes:["time"],valueFun:function(e,t){if(typeof e=="string"&&(e=le(e,me(t,"format"))),!le.isMoment(e)||!e.isValid())return"Invalid Date";var n=e.minutes(),i=n>=0&&n<=14?"00":n>=15&&n<=29?"15":n>=30&&n<=44?"30":n>=45&&n<=59?"45":"00";return e.format("HH:"+i+":00")},resultType:"time",valueToFilter:function(e){return{$gte:le(e).format("HH:mm:ss"),$lte:le(e).add(15,"minutes").subtract(1,"seconds").format("HH:mm:ss")}}}));var at=function(){var e=0,t=function(){return"GridFilter_"+e++};return Ee("GridFilter",Object,function(n,i,r,s){var a=this,l;a.id=t(),a.field=n,a.gridFilterSet=i,a.typeInfo=r,a.opts=s,a.limit=0,a.applyImmediately=!1,a.div=j("<div>").addClass("wcdv_filter_control_filter"),a.opts.makeRemoveButton?(a.removeBtn=a.makeRemoveBtn(),l=a.removeBtn):a.opts.removeButton&&(l=a.opts.removeButton),l&&l.on("click",function(){a.gridFilterSet.remove(a.getId(),a.opts.filterButton),typeof a.opts.onRemove=="function"&&a.opts.onRemove()}),a.gridFilterSet.gridTable&&a.gridFilterSet.gridTable.on("columnResize",function(){a.adjustInputWidth({useSizingElement:!0,fromColumnResize:!0})})})}();at.prototype.getValue=function(){var e=this,t=e.gridFilterSet.view.typeInfo.get(e.field);switch(t.type){case"date":case"time":case"datetime":return e.input.val()===""?void 0:t.internalType==="moment"?le(e.input.val()):e.input.val();case"number":case"currency":if(e.input.val()==="")return;switch(t.internalType){case"bignumber":return new Et(e.input.val());case"numeral":return bt(e.input.val());case"primitive":return Fl(e.input.val())?Mr(e.input.val()):Gl(e.input.val())?Hl(e.input.val()):e.input.val();default:return e.input.val()}case"string":default:return e.input.val()}};at.prototype.setValue=function(e){var t=this;["$exists","$notexists"].indexOf(t.getOperator())<0&&(bt&&bt.isNumeral(e)?t.input.val(e._value):t.input.val(e))};at.prototype.getOperator=function(){var e=this;return e.operatorDrop.val()};at.prototype.setOperator=function(e){var t=this;t.operatorDrop&&(t.operatorDrop.val(e),t.operatorDrop.change())};at.prototype.getId=function(){return this.id};at.prototype.makeOperatorDrop=function(e){var t=this,n=[["$contains",""],["$notcontains",""],["$eq","="],["$ne",""],["$gt",">"],["$gte",""],["$lt","<"],["$lte",""],["$in","in"],["$nin","not in"],["$exists","not blank"],["$notexists","blank"]];e!==void 0&&k.isArray(e)&&(n=k.reject(n,function(r){return e.indexOf(r[0])<0}));var i=j("<select>");return i.css({"margin-right":"0.5em"}),k.each(n,function(r){var s=r[0],a=r[1];i.append(j("<option>",{value:s}).text(a))}),i.on("change",function(){t.input&&(["$exists","$notexists"].indexOf(t.getOperator())>=0?t.hideInput():t.showInput()),(["$exists","$notexists"].indexOf(t.getOperator())>=0||t.getValue()!=="")&&t.gridFilterSet.update()}),i};at.prototype.makeRemoveBtn=function(){var e=j(Ne("F00D",null,"Click to remove filter"));return e.css({cursor:"pointer","margin-left":"0.5em"}),e};at.prototype.remove=function(){var e=this;e.div.remove(),e.gridFilterSet.update(!1)};at.prototype.isRange=function(){return!1};at.prototype.adjustInputWidth=function(e){var t=this;if(t.opts.autoUpdateInputWidth){e===void 0&&(e={}),k.defaults(e,{useSizingElement:!1,input:t.input}),console.debug("[DataVis // Grid Filter // Adjust Input Width] Target: %O",e.input);var n=e.useSizingElement?t.opts.sizingElement.width():t.div.width();console.debug("[DataVis // Grid Filter // Adjust Input Width] Available Space: "+n+"px "+(e.useSizingElement?"[sizing element]":"[div]")),t.removeBtn&&(n-=t.removeBtn.outerWidth(),console.debug("[DataVis // Grid Filter // Adjust Input Width] Remove Button: "+t.removeBtn.outerWidth()+"px")),t.operatorDrop!==void 0&&(n-=t.operatorDrop.outerWidth(),console.debug("[DataVis // Grid Filter // Adjust Input Width] Operator Drop: "+t.operatorDrop.outerWidth()+"px")),console.debug("[DataVis // Grid Filter"+(e.fromColumnResize?" // Handler(columnResize)":"")+"] Adjusting "+t.field+" filter widget width to "+n+"px to match column width"),e.input.outerWidth(n),typeof e.callback=="function"&&e.callback(n)}};at.prototype.showInput=function(e){var t=this;t.input.show()};at.prototype.hideInput=function(e){var t=this;t.input.hide()};var hs=Ee("DateFilter",at,function(){var e=this;at.apply(e,arguments),e.limit=1,e.operatorDrop=e.makeOperatorDrop();var t={day:["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],month:["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"]},n=["DATE","WEEK","MONTH","QUARTER","YEAR"];e.inputs={},e.inputs.single=j("<input>").attr({type:e.typeInfo.type==="date"?"date":"datetime-local"}).on("blur",function(){e.gridFilterSet.update(!1)}),e.inputs.range=j("<div>"),e.inputs.rangeStart=j("<input>").attr({type:e.typeInfo.type==="date"?"date":"datetime-local"}).on("blur",function(){e.gridFilterSet.update(!1)}),e.inputs.rangeEnd=j("<input>").attr({type:e.typeInfo.type==="date"?"date":"datetime-local"}).on("blur",function(){e.gridFilterSet.update(!1)}),e.inputs.range.append(e.inputs.rangeStart).append("  ").append(e.inputs.rangeEnd),e.inputs.every=j("<div>"),e.inputs.everyDay=j("<select>").on("change",function(){e.gridFilterSet.update(!1)}),e.inputs.everyMonth=j("<select>").on("change",function(){e.gridFilterSet.update(!1)}),k.each(t.day,function(i){e.inputs.everyDay.append(j("<option>",{value:i}).text(ae("CALENDAR.DAY."+i)))}),k.each(t.month,function(i){e.inputs.everyMonth.append(j("<option>",{value:i}).text(ae("CALENDAR.MONTH."+i)))}),e.inputs.everyDropdown=j("<select>").css({"margin-right":"0.5em"}).append(j("<option>",{value:"DAY"}).text(ae("CALENDAR.DAY"))).append(j("<option>",{value:"MONTH"}).text(ae("CALENDAR.MONTH"))).on("change",function(){switch(e.inputs.everyDay.hide(),e.inputs.everyMonth.hide(),this.value){case"DAY":e.inputs.everyDay.show();break;case"MONTH":e.inputs.everyMonth.show();break}e.gridFilterSet.update(!1)}),e.inputs.every.append(e.inputs.everyDropdown.show()).append(e.inputs.everyDay.show()).append(e.inputs.everyMonth.hide()),e.inputs.last=j("<select>").on("change",function(){e.gridFilterSet.update(!1)}),k.each(n,function(i){e.inputs.last.append(j("<option>",{value:i}).text(ae("CALENDAR."+i)))}),e.div.append(e.operatorDrop).append(e.inputs.single.show()).append(e.inputs.range.hide()).append(e.inputs.every.hide()).append(e.inputs.last.hide()),e.removeBtn&&e.div.append(e.removeBtn)});hs.prototype.makeOperatorDrop=function(){var e=this,t=[["$eq","ON"],["$bet","BETWEEN"],["$lte","BEFORE"],["$gte","AFTER"],["$every","EVERY"],["$this","CURRENT"],["$last","LAST"]],n=j("<select>");return n.css({"margin-right":"0.5em"}),k.each(t,function(i){var r=i[0],s=i[1];n.append(j("<option>",{value:r}).text(ae("FILTER.DATE.OPERATOR."+s)))}),n.on("change",function(){switch(e.inputs.single.hide(),e.inputs.range.hide(),e.inputs.every.hide(),e.inputs.last.hide(),this.value){case"$eq":case"$ne":case"$lte":case"$gte":e.inputs.single.show();break;case"$bet":e.inputs.range.show();break;case"$every":e.inputs.every.show();break;case"$this":case"$last":e.inputs.last.show();break}e.gridFilterSet.update()}),n};hs.prototype.getValue=function(){var e=this,t;switch(e.getOperator()){case"$eq":case"$ne":case"$gte":case"$lte":if(e.inputs.single.val()==="")break;t=e.typeInfo.type==="date"?e.inputs.single.val():e.inputs.single.val().replace("T"," "),e.typeInfo.internalType==="moment"&&(t=le(t));break;case"$bet":if(e.inputs.rangeStart.val()===""||e.inputs.rangeEnd.val()==="")break;switch(e.typeInfo.type){case"date":t=[e.inputs.rangeStart.val(),e.inputs.rangeEnd.val()];break;case"datetime":t=[e.inputs.rangeStart.val().replace("T"," "),e.inputs.rangeEnd.val().replace("T"," ")];break}e.typeInfo.internalType==="moment"&&(t[0]=le(t[0]),t[1]=le(t[1]));break;case"$every":t=e.inputs.everyDropdown.val()==="DAY"?e.inputs.everyDay.val():e.inputs.everyDropdown.val()==="MONTH"?e.inputs.everyMonth.val():null;break;case"$this":case"$last":t=e.inputs.last.val();break}return t};hs.prototype.setValue=function(e,t){var n=this;switch(n.getOperator()){case"$bet":n.inputs.rangeStart.val(e),n.inputs.rangeEnd.val(t);break;case"$eq":case"$ne":case"$lte":case"$gte":n.inputs.single.val(e);break;case"$every":var i=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],r=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],s=i.indexOf(e),a=r.indexOf(e);s>=0?(n.inputs.everyDropdown.val("DAY").change(),n.inputs.everyDay.val(e)):a>=0?(n.inputs.everyDropdown.val("MONTH").change(),n.inputs.everyMonth.val(e)):console.error('Invalid filter for operator "'+n.getOperator()+'" and value "'+e+'"');break;case"$this":case"$last":n.inputs.last.val(e);break}};var uE=Ee("StringTextboxGridFilter",at,function(){var e=this;e.ctor.apply(e,arguments),e.input=jQuery('<input type="text">'),e.input.on("change",function(t){e.gridFilterSet.update(!1)}),e.operatorDrop=e.makeOperatorDrop(),e.div.append(e.operatorDrop).append(e.input),e.removeBtn&&e.div.append(e.removeBtn)}),iv=Ee("StringDropdownGridFilterChosen",at,function(){var e=this;at.apply(e,arguments),e.super=Bl(e,at),e.limit=1,e.input=jQuery("<select>").attr({multiple:!0}),e.input.on("change",function(t){e.gridFilterSet.update(!1)}),e.div.append(e.input),e.removeBtn&&e.div.append(e.removeBtn),e.afterAdd=function(t){e.gridFilterSet.view.getUniqueVals(function(n){k.each(Ze([],n,e.field,"values"),function(i){jQuery("<option>").attr({value:i}).text(i).appendTo(e.input)}),e.input.chosen({width:e.div.innerWidth()-e.removeBtn.outerWidth()}),e.chosen=e.input.next("div.chosen-container")})},e.gridFilterSet.gridTable&&e.gridFilterSet.gridTable.on("columnResize",function(){var t=e.opts.sizingElement.innerWidth()-e.removeBtn.outerWidth()-14;console.debug("[DataVis // Grid Filter // Handler(GridTablePlain.columnResize)] Adjusting Chosen widget width to "+t+"px to match column width"),e.chosen.innerWidth(t)})});iv.prototype.getOperator=function(){return"$in"};iv.prototype.getValue=function(){var e=this,t=e.super.getValue(e);return t===null?void 0:t};var Yr=Ee("StringDropdownGridFilterSumo",at,function(){var e=this;at.apply(e,arguments),e.super=Bl(e,at),e.limit=1,e.minDropdownWidth=200,e.input=jQuery("<select>").attr({multiple:!0}).on("change",function(t){if(e.pleaseDontFireChangeEvent){delete e.pleaseDontFireChangeEvent;return}e.gridFilterSet.update(!1)}),e.operatorDrop=e.makeOperatorDrop(["$in","$nin","$exists","$notexists"]),e.div.append(e.operatorDrop),e.div.append(e.input),e.removeBtn&&e.div.append(e.removeBtn),e.afterAdd=function(t){e.gridFilterSet.view.getUniqueVals(function(n){k.each(Ze([],n,e.field,"values"),function(i){jQuery("<option>").attr({value:i}).text(i===""?"[blank]":i).appendTo(e.input)}),e.input.SumoSelect({triggerChangeCombined:!0,selectAll:!0,search:!0,okCancelInMulti:!0,isClickAwayOk:!0}),e.optWrapper=e.input.closest("div.SumoSelect").find("div.optWrapper")})}});Yr.prototype.adjustInputWidth=function(e){var t=this;e===void 0&&(e={}),e.input=t.input.closest("div.SumoSelect"),e.callback=function(n){t.optWrapper.outerWidth(Math.max(n,t.minDropdownWidth))},t.super.adjustInputWidth(e)};Yr.prototype.getValue=function(){var e=this,t=e.super.getValue();return t===null?void 0:t};Yr.prototype.setValue=function(e){var t=this;k.isArray(e)?e=k.flatten(e):e=[e],k.each(e,function(n){typeof n=="string"&&(t.pleaseDontFireChangeEvent=!0,t.input.get(0).sumo.selectItem(n))})};Yr.prototype.setOperator=function(e){var t=this;return e==="$eq"&&(e="$in"),t.super.setOperator(e)};Yr.prototype.showInput=function(e){var t=this;t.input.closest("div.SumoSelect").show()};Yr.prototype.hideInput=function(e){var t=this;t.input.closest("div.SumoSelect").hide()};var wf=Ee("NumberTextboxGridFilter",at,function(){var e=this;at.apply(e,arguments),e.input=jQuery("<input>",{type:"text"}),e.input.attr("size","10"),e.input.on("change",function(t){e.gridFilterSet.update(!1)}),e.operatorDrop=e.makeOperatorDrop(["$eq","$ne","$lt","$lte","$gt","$gte","$exists","$notexists"]),e.div.append(e.operatorDrop),e.div.append(e.input),e.removeBtn&&e.div.append(e.removeBtn)}),xd=Ee("NumberCheckboxGridFilter",at,function(){var e=this;at.apply(e,arguments),e.input=jQuery("<input>",{id:Bt(),type:"checkbox"}),e.input.on("change",function(){e.gridFilterSet.update(!1)}),e.div.append(jQuery("<label>").append(e.input).append(" Filter")),e.removeBtn&&e.div.append(e.removeBtn),e.limit=1});xd.prototype.getValue=function(){return this.input[0].checked?1:0};xd.prototype.getOperator=function(){return"$eq"};var ql=Ee("NumberTriBoolGridFilter",at,function(){var e=this;at.apply(e,arguments),e.inputName=Bt();var t=jQuery("<input>",{type:"radio",name:e.inputName,value:"true"}),n=jQuery("<input>",{type:"radio",name:e.inputName,value:"false"}),i=jQuery("<input>",{type:"radio",name:e.inputName,value:"both"});e.inputs=jQuery([t.get(0),n.get(0),i.get(0)]),e.inputs.css("margin-right","0.4em"),e.inputs.each(function(r,s){s=jQuery(s),s.on("change",function(a){e.gridFilterSet.update(!1)})}),e.div.append(jQuery("<label>").append(t).append("True")).append(jQuery("<label>").css("padding-left","0.8em").append(n).append("False")).append(jQuery("<label>").css("padding-left","0.8em").append(i).append("Both")),e.removeBtn&&e.div.append(e.removeBtn),e.limit=1});ql.prototype.getValue=function(){var e=this,t=e.inputs.filter(":checked").val();switch(t){case"true":return 1;case"false":return 0;case"both":return;default:throw new Error("Impossible")}};ql.prototype.setValue=function(e){var t=this,n;switch(e){case 0:n="false";break;case 1:n="true";break;default:n="both"}t.inputs.filter('[value="'+n+'"]').prop("checked",!0)};ql.prototype.getOperator=function(){return"$eq"};var Cf=Ee("DateSingleGridFilter",at,function(){var e=this;at.apply(e,arguments),e.input=jQuery("<input>").attr({type:"text",placeholder:"Select date..."}),e.input.flatpickr({altInput:!1,allowInput:!0,onChange:function(t,n,i){console.log(t,n)}}),e.div.append(e.input),e.removeBtn&&e.div.append(e.removeBtn)}),Nr=Ee("DateRangeGridFilter",at,function(){var e=this;at.apply(e,arguments),e.limit=1,e.input=jQuery("<input>").attr({type:"text",placeholder:"Click here; pick start/end dates.",size:28}),e.widget=e.input.flatpickr({altInput:!1,allowInput:!0,mode:"range",onChange:function(t,n,i){e.selectedDates=t,e.gridFilterSet.update(!1)}}),e.div.append(e.input),e.removeBtn&&e.div.append(e.removeBtn)});Nr.prototype.getValue=function(){var e=this,t;if(e.selectedDates!=null)return e.isRange()?(t={start:le(e.selectedDates[0]),end:le(e.selectedDates[1]).hour(23).minute(59).second(59)},e.typeInfo.internalType==="string"&&(e.typeInfo.type==="date"?t=k.mapObject(t,function(n){return n.format("YYYY-MM-DD")}):e.typeInfo.type==="datetime"&&(t=k.mapObject(t,function(n){return n.format("YYYY-MM-DD HH:mm:ss")})))):(t=le(e.selectedDates[0]),e.typeInfo.internalType==="string"&&(e.typeInfo.type==="date"?t=t.format("YYYY-MM-DD"):e.typeInfo.type==="datetime"&&(t=t.format("YYYY-MM-DD HH:mm:ss")))),t};Nr.prototype.setValue=function(e){var t=this;t.selectedDates=e,t.widget.setDate(e)};Nr.prototype.getOperator=function(){var e=this;return e.isRange()?["$gte","$lte"]:"$gte"};Nr.prototype.isRange=function(){var e=this;return e.selectedDates!=null&&e.selectedDates.length>1};var Dd=Ee("BooleanCheckboxGridFilter",at,function(e,t){});Dd.prototype.getValue=function(){return this.input.val()};Dd.prototype.getOperator=function(){return"$eq"};Dd.prototype.getId=function(){return this.input.attr("id")};at.widgets={string:{textbox:uE,dropdown:Yr},number:{textbox:wf,checkbox:xd,tribool:ql},currency:{textbox:wf},date:{single:Cf,range:Nr,neon:hs},datetime:{single:Cf,range:Nr,neon:hs}};at.defaultWidgets={string:"dropdown",number:"textbox",currency:"textbox",date:"neon",datetime:"neon"};var Pn=Ee("GridFilterSet",Object,function(e,t,n,i,r){var s=this;s.view=e,s.prefs=t,s.gridTable=n,s.progress=i,s.opts=Qe(r,{sendEvent:!0,dontSendEventTo:[],updateData:!0}),s.filters={all:[],byId:{},byCol:{}},s.delayUpdate=!1});vi(Pn,["filterAdded","filterRemoved","widgetResizedHoriz","widgetResizedVert"]);Pn.prototype.add=function(e,t,n){var i=this,r;return n=n||{},r=i.build(e,t,n),r==null?null:(i.filters.byCol[e]===void 0&&(i.filters.byCol[e]=[]),i.filters.all.push(r),i.filters.byCol[e].push(r),i.filters.byId[r.getId()]=r,t.append(r.div),typeof r.afterAdd=="function"&&r.afterAdd(t),r.adjustInputWidth(),n.filterBtn&&i.filters.byCol[e].length===r.limit&&n.filterBtn.hide(),i.fire(Pn.events.filterAdded),r.applyImmediately&&i.update(),r)};Pn.prototype.build=function(e,t,n){var i=this,r=i.view.typeInfo.get(e);if(r==null)return null;var s=r.type;if(s==null)throw new Error('Unable to determine type of column "'+e+'"');if(at.widgets[s]===void 0)throw new Error('Unknown type "'+s+'" for column "'+e+'"');var a=n.filterType||at.defaultWidgets[s],l=at.widgets[s][a];if(l===void 0)throw new Error('Invalid filter type "'+a+'" for type "'+s+'" of column "'+e+'"');return console.debug('[DataVis // Grid Filter] Creating new widget: column type = "'+s+'" ; filter type = "'+a+'"'),new l(e,i,r,n)};Pn.prototype.remove=function(e,t,n){var i=this,r=i.filters.byId[e];if(r===void 0){de.warn('Attempted to remove filter with ID "'+e+`" from the grid, but it doesn't exist`);return}var s=function(c){return c.getId()===e},a=k.findIndex(i.filters.all,s),l=k.findIndex(i.filters.byCol[r.field],s);delete i.filters.byId[e],i.filters.all.splice(a,1),i.filters.byCol[r.field].splice(l,1),r.remove(),t&&i.filters.byCol[r.field].length<r.limit&&t.show(),n||i.fire(Pn.events.filterRemoved)};Pn.prototype.removeField=function(e,t){var n=this;k.each(n.filters.byCol[e],function(i){n.remove(i.getId(),t,!0)}),n.fire(Pn.events.filterRemoved)};Pn.prototype.reset=function(e){var t=this;e=e||{},k.defaults(e,{updateView:!0}),t.delayUpdate=!0,k.each(t.filters.all,function(n){n.remove()}),t.filters={all:[],byId:{},byCol:{}},e.updateView&&t.view.clearFilter(),t.delayUpdate=!1};Pn.prototype.update=function(){var e=this,t={};if(!e.delayUpdate){if(e.filters.all.length===0){e.view.setFilter(null);return}k.each(e.filters.byCol,function(n,i){k.each(n,function(r){var s=r.getOperator(),a=r.getValue();a===void 0&&["$exists","$notexists"].indexOf(s)<0||(t[i]===void 0&&(t[i]={}),s==="$exists"?t[i].$exists=!0:s==="$notexists"?t[i].$notexists=!0:s==="$bet"?(t[i].$gte=a[0],t[i].$lte=a[1]):t[i][s]===void 0?t[i][s]=a:k.isArray(t[i][s])?t[i][s].push(a):["$eq","$ne","$contains"].indexOf(s)>=0?t[i][s]=[t[i][s],a]:t[i][s]=a)})}),console.debug("[DataVis // Grid Filter Set] Updating with "+e.filters.all.length+" filters: ",t),e.view.setFilter(t,e.progress,e.opts)}};Pn.prototype.set=function(e,t,n){var i=this;n=Qe(n,{updateView:!0}),typeof t!="object"&&(t={$eq:t});var r=i.filters.byCol[e];if(!(r==null||r.length==null||r.length===0)){var s=r[0];n.updateView||(i.delayUpdate=!0),s instanceof Nr&&"$lte"in t&&"$gte"in t?s.setValue([t.$gte,t.$lte]):s instanceof hs&&"$lte"in t&&"$gte"in t?(s.setOperator("$bet"),s.setValue(t.$gte,t.$lte)):k.each(t,function(a,l){console.debug("[DataVis // Grid Filter Set] Setting filter: { field = %s ; operator = %s ; value = %s }",e,l,typeof a=="object"?JSON.stringify(a):a),s.setOperator(l),s.setValue(a)}),n.updateView||(i.delayUpdate=!1)}};var rv=Ee("GroupFunWin",Object,function(e,t){var n=this,i={effect:"fade",duration:100},r=null;n.win=jQuery("<div>",{title:e}).dialog({autoOpen:!1,modal:!0,width:"600",position:{my:"center",at:"center",of:window},classes:{"ui-dialog":"ui-corner-all wcdv_dialog","ui-dialog-titlebar":"ui-corner-all"},show:i,hide:i,open:function(){r=null},close:function(){n.cb(r)}});var s=jQuery("<div>").css({display:"flex"}).appendTo(n.win),a=new Ae;a.set("repeating",{display:ae("GRID.GROUP_FUN.DIALOG.REPEATING")}),a.set("date",{display:ae("GRID.GROUP_FUN.DIALOG.DATE")}),a.set("datetime",{display:ae("GRID.GROUP_FUN.DIALOG.DATE_TIME")}),a.set("time",{display:ae("GRID.GROUP_FUN.DIALOG.TIME")}),a.set("other",{display:ae("GRID.GROUP_FUN.DIALOG.OTHER")}),a.each(function(l){l.div=jQuery("<div>",{class:"wcdv_groupfun_buttons"}),l.root=jQuery("<div>").css({flex:"1 1 auto"}),l.root.append(jQuery("<h1>",{class:"wcdv_groupfun_header"}).text(l.display)),l.root.append(l.div),l.members=0}),n.buttons={},t.each(function(l,c){n.buttons[c]=jQuery("<button>",{type:"button",class:"wcdv_option","data-wcdv-groupfunname":c,title:l.displayName}).text(l.displayName).on("click",function(){r=c,n.win.dialog("close")});var u=a.get(l.category)||a.get("other");u.div.append(n.buttons[c]),u.members+=1}),a.each(function(l){l.members>0&&s.append(l.root)}),n.buttons.none=jQuery("<button>",{type:"button",class:"wcdv_option","data-wcdv-groupfunname":"none",title:ae("GRID.GROUP_FUN.NONE")}).text(ae("GRID.GROUP_FUN.NONE")).on("click",function(){r="none",n.win.dialog("close")}),n.win.append(jQuery("<div>").append(n.buttons.none))});rv.prototype.show=function(e,t){var n=this;n.cb=t,n.win.dialog("open"),e!=null&&n.buttons[e]!=null&&n.buttons[e].focus()};var zi=function(){var e=0;return Ee("GridControlField",Object,function(t,n,i,r,s){var a=this;a.control=t,typeof n=="string"?a.field={field:n}:a.field=it(n),a.displayText=i,a.colConfig=r,a.opts=s,a.fti=a.control.typeInfo.get(a.field.field),a.ui={},a.id=e++})}();zi.prototype.draw=function(){var e=this,t=e.displayText||e.colConfig&&e.colConfig.displayText||e.field.field;return e.ui.removeButton=jQuery("<button>",{type:"button"}).append(Ne("F146")).attr("title",ae("GRID_CONTROL.FIELD.REMOVE")).addClass("wcdv_icon_button wcdv_remove wcdv_text-primary").on("click",function(){e.control.removeField(e)}),e.ui.fieldLabel=jQuery("<span>",{class:"wcdv_field_name",title:t}).text(t),e.ui.root=jQuery("<div>",{class:"wcdv_field"}).append(e.ui.removeButton).append(e.ui.fieldLabel),e._addErrorIndicator(e.ui.root,"wcdv_aggregate_control_error"),e.ui.root};zi.prototype.getElement=function(){var e=this;return e.ui.root};zi.prototype.destroy=function(){};zi.prototype.showError=function(e){var t=this;en.error("GRID // CONTROL",e),t.ui.error?(t.ui.error.attr("title",e),t.ui.error.show()):de.error("Call Error: Attempted to call `showError()` on a ControlField subclass instance that does not provide a way of indicating errors in the user interface.")};zi.prototype._addErrorIndicator=function(e,t){var n=this;n.ui.error=Ne("fa-exclamation-triangle",t).hide().tooltip({classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow "+t+"_tooltip"},show:{delay:1e3}}).appendTo(e)};zi.prototype.getSpec=function(){var e=this;return{field:e.field.field}};var Lo=Ee("FunGridControlField",zi);Lo.prototype.draw=function(){var e=this;e.super.draw();var t=dt.filter(function(i){return e.fti==null?!1:i.allowedTypes.indexOf(e.fti.type)>=0});if(t.size()>0){if(e.ui.groupFunWin=new rv(ae("GRID.GROUP_FUN.DIALOG.TITLE",e.field.field),t),e.ui.groupFunWinBtn=jQuery("<button>",{type:"button","data-wcdv-role":"set-group-fun",title:ae("GRID_CONTROL.FIELD.SHOW_FUNCTIONS")}).addClass("wcdv_icon_button wcdv_button_left wcdv_text-primary").on("click",function(){e.showFunWin()}).append(Ne("fa-bolt")).appendTo(e.ui.root),e.field.fun!=null){var n=dt.get(e.field.fun);e.ui.fieldLabel.text(e.field.field+" ("+n.displayName+")"),e.ui.fieldLabel.attr("title",e.field.field+" ("+n.displayName+")")}e.ui.fieldLabel.after(e.ui.groupFunWinBtn)}return e.ui.root};Lo.prototype.getSpec=function(){var e=this;return{field:e.field.field,fun:e.field.fun}};Lo.prototype.showFunWin=function(){var e=this;e.ui.groupFunWin.show(e.field.fun||"none",function(t){if(t!=null){if(t==="none")e.field.fun=null,e.ui.fieldLabel.text(e.field.field);else{e.field.fun=t;var n=dt.get(e.field.fun);e.ui.fieldLabel.text(e.field.field+" ("+n.displayName+")")}e.control.updateView()}else e.field.fun===void 0&&(e.field.fun=null,e.control.updateView())})};var cE=Ee("GroupControlField",Lo),dE=Ee("PivotControlField",Lo),sv=Ee("FilterControlField",zi);sv.prototype.draw=function(){var e=this;return e.super.draw(),e.ui.filterContainer=jQuery("<div>").addClass("wcdv_filter_control_filter_container").appendTo(e.ui.root),e.control.gfs.add(e.field.field,e.ui.filterContainer,{filterType:e.colConfig&&e.colConfig.filter}),e.ui.root};var Fo=Ee("AggregateControlField",zi,function(){var e=this;e.super.ctor.apply(e,arguments),e.fieldDropdowns=[],e.shouldGraph=!1});Fo.prototype.draw=function(){var e=this;e.super.draw(),e._addErrorIndicator(e.ui.root,"wcdv_aggregate_control_error");for(var t=Ut.get(e.field.field),n=jQuery("<ul>",{class:"wcdv_aggregate_control_fieldlist"}).appendTo(e.ui.root),i=0;i<t.prototype.fieldCount;i+=1){var r=jQuery("<li>").addClass("wcdv_aggregate_field").appendTo(n);me(t.prototype,"fieldInfo",i,"name")&&jQuery("<label>").text(t.prototype.fieldInfo[i].name+":").appendTo(r);var s=jQuery("<select>").on("change",function(a){s.children("option[data-wcdv-bad-field]").filter(function(l,c){return jQuery(c).attr("value")!==s.val()}).remove(),e.control.updateView()}).appendTo(r);e.fieldDropdowns.push(s)}return k.each(jr(e.control.colConfig,null,e.control.typeInfo),function(a){var l=me(e.control.colConfig.get(a),"displayText")||a;k.each(e.fieldDropdowns,function(c,u){jQuery("<option>",{value:a}).text(l).appendTo(c)})}),k.each(e.fieldDropdowns,function(a,l){if(me(e.opts,"fields",l)){var c=a.children("option").filter(function(u,f){return jQuery(f).attr("value")===e.opts.fields[l]});c.length===0&&jQuery("<option>",{value:e.opts.fields[l],"data-wcdv-bad-field":"yup"}).text(e.opts.fields[l]+"  Invalid").appendTo(a),a.val(e.opts.fields[l])}}),t.prototype.options!=null&&(jQuery("<button>",{type:"button",title:ae("GRID_CONTROL.AGGREGATE.EDIT_OPTIONS")}).addClass("wcdv_icon_button wcdv_button_left wcdv_text-primary").on("click",function(){e.ui.optionsDialog.dialog("open")}).append(Ne("F044")).appendTo(e.ui.root),e._makeOptionsDialog(t)),e.control.view.hasClientKind("graph")&&(e.ui.graphBtn=jQuery("<button>",{type:"button"}).addClass("wcdv_icon_button wcdv_text-primary").on("click",function(){e.control.clearGraphFlag(),e.shouldGraph=!0,e.control.updateView()}).append(Ne("fa-bar-chart")).appendTo(e.ui.root)),e.ui.isHiddenCheckbox=jQuery("<input>",{type:"checkbox"}).prop("checked",me(e.opts,"isHidden")).on("change",function(){e.control.updateView()}).appendTo(e.ui.root)._makeIconCheckbox("fa-eye-slash wcdv_text-primary","fa-eye wcdv_text-primary"),e.ui.root};Fo.prototype._makeOptionsDialog=function(e){var t=this;t.ui.optionsDiv=jQuery("<div>").css("display","none").appendTo(document.body);var n=jQuery("<table>").appendTo(t.ui.optionsDiv),i={};k.each(e.prototype.options,function(r,s){r=Qe(r,{type:"string",widget:"text",displayText:s});var a=Bt(),l=jQuery("<input>",{type:"text",id:a});i[s]=l;var c=jQuery("<label>",{for:a}).text(r.displayText);jQuery("<tr>").append(jQuery("<td>").append(c)).append(jQuery("<td>").append(l)).appendTo(n)}),jQuery("<div>").css({"text-align":"center","margin-top":"1ex"}).append(jQuery("<button>",{type:"button"}).append(Ne("F00C")).append("OK").on("click",function(){t.aggFunOpts=i,t.control.updateView(),t.ui.optionsDialog.dialog("close")})).append(jQuery("<button>",{type:"button"}).css("margin-left","1em").append(Ne("F05E")).append("Cancel").on("click",function(){t.ui.optionsDialog.dialog("close")})).appendTo(t.ui.optionsDiv),t.ui.optionsDialog=t.ui.optionsDiv.dialog({autoOpen:!1,modal:!0,title:ae("GRID_CONTROL.AGGREGATE.OPTIONS_DIALOG.TITLE",e.prototype.name),minHeight:0})};Fo.prototype.destroy=function(){var e=this;e.ui.optionsDiv!=null&&(e.ui.optionsDialog.dialog("destroy"),e.ui.optionsDiv.remove()),e.super.destroy()};Fo.prototype.getInfo=function(){var e=this;return{fun:e.field.field,name:null,fields:k.map(e.fieldDropdowns,function(t){return t.val()}),isHidden:e.ui.isHiddenCheckbox._isChecked(),shouldGraph:e.shouldGraph,opts:k.mapObject(e.aggFunOpts,function(t,n){return t.val()})}};var tn=Ee("GridControl",Object,function(e,t,n,i,r){var s=this;if(!(e instanceof rt))throw new Error("Call Error: `grid` must be an instance of MIE.WC_DataVis.Grid");s.grid=e,s.colConfig=t,s.view=n,s.features=i,s.timing=r,s.fields=[],s.controlFields=[],s.controlFieldsByField={},s.controlFieldsById={},s.ui={},s.grid.on("colConfigUpdate",function(a){s.colConfig=a})},{isHorizontal:!1,isReorderable:!0,showColumns:!0,disableUsedItems:!1,useColConfig:!0,updateCanHide:!0});vi(tn,["fieldAdded","fieldRemoved","cleared"]);tn.prototype.makeClearButton=function(e){var t=this;return jQuery(Ne("F05E")).addClass("wcdv_button wcdv_text-primary wcdv_control_clear_button").hide().on("click",function(){jQuery(this).hide(),t.clear()}).appendTo(e)};tn.prototype.addField=function(e,t,n,i,r){var s=this,a=Array.prototype.slice.call(arguments),l;if(n=Qe(n,{updateView:!0,silent:!1,openControls:!1}),e==null||e===""||(l=typeof e=="string"?e:e.field,l==null||l===""||s.disableUsedItems&&s.fields.indexOf(l)>=0))return typeof r=="function"?r(!1):void 0;if(s.typeInfo==null)return s.view.getTypeInfo(function(f,m){return f?(s.typeInfo=m,tn.prototype.addField.apply(s,a)):typeof r=="function"?r(!1):void 0});n.openControls&&s.grid.showControls(),s.updateCanHide&&s.colConfig!=null&&s.colConfig.isSet(l)&&(s.colConfig.get(l).isHidden=!1,s.colConfig.get(l).canHide=!1);var c=new s.controlFieldCtor(s,e,t,s.useColConfig?s.colConfig.get(l):null,i);s.controlFields.push(c),s.controlFieldsById[c.id]=c,s.controlFieldsByField[l]==null&&(s.controlFieldsByField[l]=[]),s.controlFieldsByField[l].push(c),s.ui.clearBtn.show();var u=jQuery("<li>").attr({"data-wcdv-field":l,"data-wcdv-control-field-id":c.id,"data-wcdv-draggable-origin":"GRID_CONTROL_FIELD"});return s.isHorizontal&&u.append(Ne("F178")),u.append(c.draw()),u.appendTo(s.ui.fields),s.disableUsedItems&&s.ui.dropdown.find("option").filter(function(){return jQuery(this).val()===l}).prop("disabled",!0),s.ui.dropdown.val(""),s.fields.push(l),typeof s.updateView=="function"&&n.updateView&&s.updateView(),n.silent||s.fire("fieldAdded",null,l,s.fields),typeof r=="function"?r(!0,c):void 0};tn.prototype.removeField=function(e){var t=this,n=e.field.field;t.updateCanHide&&t.colConfig!=null&&t.colConfig.isSet(n)&&(t.colConfig.get(n).canHide=!0),e.destroy(),e.getElement().parent("li").remove(),t.controlFields=k.without(t.controlFields,e),t.controlFieldsById[e.id]=void 0,t.controlFieldsByField[n]=k.without(t.controlFieldsByField[n],e),t.fields.splice(t.fields.indexOf(n),1),t.disableUsedItems&&t.ui.dropdown.find("option").filter(function(){return jQuery(this).val()===n}).prop("disabled",!1),t.controlFields.length===0&&t.ui.clearBtn.hide(),t.updateView(),t.fire(tn.events.fieldRemoved,null,n,t.fields)};tn.prototype.clear=function(e){var t=this;e=e||{},k.defaults(e,{updateView:!0}),t.updateCanHide&&t.colConfig!=null&&t.colConfig.each(function(n){n.canHide=!0}),t.fields=[],t.controlFields=[],t.controlFieldsById={},t.controlFieldsByField={},t.ui.fields.children().remove(),t.ui.dropdown.find("option:disabled").filter(function(){return jQuery(this).val()!==""}).prop("disabled",!1),t.ui.clearBtn.hide(),e.updateView&&t.updateView(),t.fire(tn.events.cleared)};tn.prototype.destroy=function(){var e=this;console.debug("[DataVis // GridControl] Good-bye, cruel world!"),e.view.off("*",e),e.grid.off("*",e),e.ui.root.remove()};tn.prototype.addViewConfigChangeHandler=function(e,t){var n=this,i=function(){n.ui.dropdown.children().remove(),jQuery("<option>",{value:"",disabled:!0,selected:!0}).text(ae("GRID_CONTROL.SELECT_FIELD")).appendTo(n.ui.dropdown)},r=function(a){console.debug("[DataVis // %s // %s Control] Synchronizing column configuration with grid",n.grid.toString(),n.controlType.toUpperCase()),n.colConfig=a,n.showColumns&&(i(),a.each(function(l){jQuery("<option>",{value:l.field}).text(l.displayText||l.field).appendTo(n.ui.dropdown)}))},s=function(){console.debug("[DataVis // %s // %s Control] Synchronizing user interface with view",n.grid.toString(),n.controlType.toUpperCase()),t()};n.grid.colConfig!=null?(r(n.grid.colConfig),n.grid.on("colConfigUpdate",r),n.view.typeInfo!=null?(s(),n.view.on(e,s,{who:n})):n.view.on("getTypeInfo",function(){s(),n.view.on(e,s,{who:n})},{limit:1})):n.grid.on("colConfigUpdate",function(a){r(a),n.grid.on("colConfigUpdate",r),n.view.typeInfo!=null?(s(),n.view.on(e,s,{who:n})):n.view.on("getTypeInfo",function(l){s(),n.view.on(e,s,{who:n})},{limit:1})},{limit:1})};tn.prototype.getListElement=function(){var e=this;return e.ui.fields};tn.prototype.draw=function(e){throw new Error("ABSTRACT")};tn.prototype.updateView=function(){throw new Error("ABSTRACT")};var Ts=Ee("GroupControl",tn,function(){var e=this;e.super.ctor.apply(e,arguments),e.view.on(je.events.invalidGroupField,function(t){k.each(e.controlFieldsByField[t],function(n){n.showError("This field does not exist in the data.")})})},{controlFieldCtor:cE,controlType:"Group"});Ts.prototype.draw=function(e){var t=this;e.droppable({classes:{"ui-droppable-hover":"wcdv_drop_target_hover"},drop:function(i,r){if(r.draggable.attr("data-wcdv-draggable-origin")==="GRID_TABLE_HEADER"){var s=r.draggable.attr("data-wcdv-field");t.addField(s,me(t.colConfig.get(s),"displayText"),{autoShowFunWin:!0})}}})._addEventDebugging("drop","GROUP"),t.ui.root=jQuery("<div>").appendTo(e),t.ui.title=jQuery("<div>").addClass("wcdv_control_title_bar").appendTo(t.ui.root),jQuery("<span>",{class:"wcdv_control_title"}).text(ae("GRID_CONTROL.GROUP.TITLE")).appendTo(t.ui.title),t.ui.clearBtn=t.makeClearButton(t.ui.title),t.ui.fields=jQuery("<ul>",{id:Bt(),class:t.isHorizontal?"wcdv_control_horizontal":"wcdv_control_vertical"}).appendTo(t.ui.root);var n=jQuery("<div>").appendTo(t.ui.root);return t.ui.dropdown=jQuery("<select>",{class:"wcdv_control_addField"}).appendTo(n),t.ui.dropdown.on("change",function(){t.addField(t.ui.dropdown.val(),t.ui.dropdown.find("option:selected").text(),{autoShowFunWin:!0})}),t.addViewConfigChangeHandler("groupSet",function(){var i=t.view.getGroup(),r=!t.view.source.origin.isLimited&&i&&i.fieldNames||[];t.clear({updateView:!1}),console.debug("[DataVis // %s // Group Control] View set group fields to: %s",t.grid.toString(),JSON.stringify(r)),k.each(r,function(s){t.addField(s,me(t.colConfig.get(s),"displayText"),{updateView:!1})})}),t.ui.root};Ts.prototype.updateView=function(){var e=this,t=k.map(e.controlFields,function(n){return n.getSpec()});t.length>0?e.view.setGroup({fieldNames:t},{dontSendEventTo:e}):e.view.clearGroup()};Ts.prototype.toString=function(){var e=this;return e.grid.id+", Group"};Ts.prototype.sortableSync=function(){var e=this,t=e.ui.fields.children("li").map(function(n,i){return jQuery(i).attr("data-wcdv-control-field-id")}).get();return e.controlFields=[],k.each(t,function(n){e.controlFields.push(e.controlFieldsById[n])}),e.updateView()};Ts.prototype.addField=function(e,t,n){var i=this;n=Qe(n,{autoShowFunWin:!1,updateView:!0});var r=n.updateView;n.updateView=!1,i.super.addField(e,t,n,null,function(s,a){s&&(n.autoShowFunWin&&a.fti!=null&&["date","datetime"].indexOf(a.fti.type)>=0&&a.field.fun===void 0?a.showFunWin():r&&i.updateView())})};var Ss=Ee("PivotControl",tn,function(){var e=this;e.super.ctor.apply(e,arguments),e.view.on(je.events.invalidPivotField,function(t){k.each(e.controlFieldsByField[t],function(n){n.showError("This field does not exist in the data.")})})},{controlFieldCtor:dE,controlType:"Pivot"});Ss.prototype.draw=function(e){var t=this;e.droppable({classes:{"ui-droppable-hover":"wcdv_drop_target_hover"},drop:function(i,r){if(r.draggable.attr("data-wcdv-draggable-origin")==="GRID_TABLE_HEADER"){var s=r.draggable.attr("data-wcdv-field");t.addField(s,me(t.colConfig.get(s),"displayText"),{autoShowFunWin:!0})}}})._addEventDebugging("drop","PIVOT"),t.ui.root=jQuery("<div>").appendTo(e),t.ui.title=jQuery("<div>").addClass("wcdv_control_title_bar").appendTo(t.ui.root),jQuery("<span>").addClass("wcdv_control_title").text(ae("GRID_CONTROL.PIVOT.TITLE")).appendTo(t.ui.title),t.ui.clearBtn=t.makeClearButton(t.ui.title),t.ui.fields=jQuery("<ul>",{id:Bt(),class:t.isHorizontal?"wcdv_control_horizontal":"wcdv_control_vertical"}).appendTo(t.ui.root);var n=jQuery("<div>").appendTo(t.ui.root);return t.ui.dropdown=jQuery("<select>",{class:"wcdv_control_addField"}).appendTo(n),t.ui.dropdown.on("change",function(){t.addField(t.ui.dropdown.val(),t.ui.dropdown.find("option:selected").text(),{autoShowFunWin:!0})}),t.addViewConfigChangeHandler("pivotSet",function(i){i=t.view.getPivot();var r=!t.view.source.origin.isLimited&&i&&i.fieldNames||[];t.clear({updateView:!1}),console.debug("[DataVis // %s // Pivot Control] View set pivot fields to: %s",t.grid.toString(),JSON.stringify(r)),k.each(r,function(s){t.addField(s,me(t.colConfig.get(s),"displayText"),{updateView:!1})})}),t.ui.root};Ss.prototype.updateView=function(){var e=this,t=k.map(e.controlFields,function(n){return n.getSpec()});t.length>0?e.view.setPivot({fieldNames:t},{dontSendEventTo:e}):e.view.clearPivot()};Ss.prototype.toString=function(){var e=this;return e.grid.id+", Pivot"};Ss.prototype.sortableSync=function(){var e=this,t=e.ui.fields.children("li").map(function(n,i){return jQuery(i).attr("data-wcdv-control-field-id")}).get();return e.controlFields=[],k.each(t,function(n){e.controlFields.push(e.controlFieldsById[n])}),e.updateView()};Ss.prototype.addField=function(e,t,n){var i=this;n=Qe(n,{autoShowFunWin:!1,updateView:!0});var r=n.updateView;n.updateView=!1,i.super.addField(e,t,n,null,function(s,a){s&&(n.autoShowFunWin&&a.fti!=null&&["date","datetime"].indexOf(a.fti.type)>=0&&a.field.fun===void 0?a.showFunWin():r&&i.updateView())})};var qi=Ee("AggregateControl",tn,function(){var e=this;e.super.ctor.apply(e,arguments),e.view.on(je.events.invalidAggregate,function(t,n){e.controlFields[t].showError(n)})},{disableUsedItems:!1,showColumns:!1,updateCanHide:!1,controlFieldCtor:Fo,controlType:"Aggregate"});qi.prototype.draw=function(e){var t=this;t.ui.root=jQuery("<div>").appendTo(e),t.ui.title=jQuery("<div>").addClass("wcdv_control_title_bar").appendTo(t.ui.root),jQuery("<span>").addClass("wcdv_control_title").text(ae("GRID_CONTROL.AGGREGATE.TITLE")).appendTo(t.ui.title),t.ui.clearBtn=t.makeClearButton(t.ui.title),t.ui.fields=jQuery("<ul>",{id:Bt(),class:t.isHorizontal?"wcdv_control_horizontal":"wcdv_control_vertical"}).appendTo(t.ui.root);var n=jQuery("<div>").appendTo(t.ui.root);return t.ui.dropdown=jQuery("<select>",{class:"wcdv_control_addField"}).appendTo(n),t.ui.dropdown.on("change",function(){t.addField(t.ui.dropdown.val(),t.ui.dropdown.find("option:selected").text())}),jQuery("<option>",{value:"",disabled:!0,selected:!0}).text(ae("GRID_CONTROL.SELECT_AGGREGATE")).appendTo(t.ui.dropdown),Ut.each(function(i,r){jQuery("<option>",{value:r}).text(i.prototype.name).appendTo(t.ui.dropdown)}),t.addViewConfigChangeHandler("aggregateSet",function(){var i=t.view.getAggregate();t.clear({updateView:!1}),i!=null&&(console.debug("[DataVis // %s // Aggregate Control] View set aggregate to: %s",t.grid.toString(),JSON.stringify(i.all)),k.each(i.all,function(r){t.addField(r.fun,Ut.get(r.fun).prototype.name,{updateView:!1},{fields:r.fields,isHidden:r.isHidden})}))}),t.ui.root};qi.prototype.updateView=function(){var e=this,t=k.map(e.controlFields,function(n){return n.getInfo()});e.ui.root.find(".wcdv_aggregate_control_error").hide(),e.view.setAggregate(Yn(["group","pivot","cell","all"],[t]),{dontSendEventTo:e})};qi.prototype.clearGraphFlag=function(){var e=this;k.each(e.controlFields,function(t){t.shouldGraph=!1})};qi.prototype.triggerAggChange=function(){var e=this,t=Ut.get(e.ui.funDropdown.val());t.prototype.fieldCount>e.ui.fields.length&&e.addFieldDropdowns(t),e.showHideFields(t);var n=Yn(["group","pivot","cell","all"],[[{fun:e.ui.funDropdown.val(),fields:t.prototype.fieldCount>0&&Pm(e.ui.fields,function(i){return i.dropdown.val()},t.prototype.fieldCount)}]]);e.view.setAggregate(n,{dontSendEventTo:e})};qi.prototype.showHideFields=function(e){var t=this,n;for(n=0;n<t.ui.fields.length;n+=1)n<e.prototype.fieldCount?t.ui.fields[n].div.show():t.ui.fields[n].div.hide()};qi.prototype.addFieldDropdowns=function(e){var t=this;for(console.debug("[DataVis // %s // Aggregate Control] Adding %s extra field dropdowns for the %s aggregate function",t.grid.toString(),e.prototype.fieldCount-t.ui.fields.length,e.prototype.name);t.ui.fields.length<e.prototype.fieldCount;){var n={};n.div=jQuery("<div>").css({"margin-top":"4px"}).appendTo(t.ui.root),n.label=jQuery("<label>").text(ae("GRID_CONTROL.FIELD")+":").appendTo(n.div),n.dropdown=jQuery("<select>").on("change",function(){t.triggerAggChange()}).appendTo(n.div),t.ui.fields.push(n)}t.updateFieldDropdowns()};qi.prototype.updateFieldDropdowns=function(){var e=this;k.each(e.ui.fields,function(t){t.dropdown.children().remove()}),k.each(jr(e.colConfig,null,e.typeInfo),function(t){var n=me(e.colConfig.get(t),"displayText")||t;k.each(e.ui.fields,function(i){jQuery("<option>",{value:t}).text(n).appendTo(i.dropdown)})})};qi.prototype.toString=function(){var e=this;return e.grid.id+", Aggregate"};var zr=Ee("FilterControl",tn,function(){var e=this;e.super.ctor.apply(e,arguments),e.gfs=new Pn(e.view,null,null,null,{dontSendEventTo:e})},{isReorderable:!1,disableUsedItems:!0,controlFieldCtor:sv,controlType:"Filter"});zr.prototype.draw=function(e){var t=this;e.droppable({classes:{"ui-droppable-hover":"wcdv_drop_target_hover"},drop:function(i,r){var s=r.draggable.attr("data-wcdv-field");t.addField(s,me(t.colConfig.get(s),"displayText"))}})._addEventDebugging("drop","FILTER"),t.ui.root=jQuery("<div>").appendTo(e),t.ui.title=jQuery("<div>").addClass("wcdv_control_title_bar").appendTo(t.ui.root),jQuery("<span>",{class:"wcdv_control_title"}).text(ae("GRID_CONTROL.FILTER.TITLE")).appendTo(t.ui.title),t.ui.clearBtn=t.makeClearButton(t.ui.title),t.ui.fields=jQuery("<ul>",{id:Bt(),class:t.isHorizontal?"wcdv_control_horizontal":"wcdv_control_vertical"}).appendTo(t.ui.root);var n=jQuery("<div>").appendTo(t.ui.root);return t.ui.dropdown=jQuery("<select>",{class:"wcdv_control_addField"}).appendTo(n),t.ui.dropdown.on("change",function(){t.addField(t.ui.dropdown.val(),t.ui.dropdown.find("option:selected").text())}),t.addViewConfigChangeHandler("filterSet",function(){var i=t.view.getFilter();console.debug("[DataVis // %s // Filter Control] View set filter to: %s",t.grid.toString(),JSON.stringify(i)),t.clear({updateView:!1}),k.each(i,function(r,s){t.addField(s,me(t.colConfig.get(s),"displayText"),{updateView:!1}),t.gfs.set(s,r,{updateView:!1})})}),t.ui.root};zr.prototype.addField=function(e,t,n){var i=this;i.super.addField(e,t||me(i.colConfig.get(e),"displayText"),n)};zr.prototype.removeField=function(e){var t=this;t.gfs.removeField(e.field.field),t.super.removeField(e)};zr.prototype.clear=function(e){var t=this;t.gfs.reset(e),t.super.clear(e)};zr.prototype.updateView=function(){};zr.prototype.toString=function(){var e=this;return e.grid.id+", Filter"};var Xe=Ee("View",Object,function(e,t,n){var i=this;if(!(t instanceof Ke)&&!(t instanceof Xe))throw new Error("Call Error: `source` must be an instance of MIE.WC_DataVis.Source or MIE.WC_DataVis.View");if(n=Qe(n,{prefs:null,saveViewConfig:!0,groupIsPivot:!1}),n.prefs!=null&&!(n.prefs instanceof tt))throw new Error("Call Error: `opts.prefs` must be null or an instance of MIE.WC_DataVis.Prefs");i.source=t,i.opts=n,i.source.on("dataUpdated",function(){i.clearCache(),i.fire("dataUpdated")}),i.source.on("fetchDataCancel",function(){i.lock.clear()}),i.echo(i.source,["fetchDataBegin","fetchDataEnd"]),i.name=e||t.getName()||Bt(),i.colConfig=new Ae,i.timing=new cr,i.lock=new qt(i.toString()),i.sortSpec=null,i.filterSpec=null,i.groupSpec=null,i.pivotSpec=null,i.aggregateSpec=Yn(["group","pivot","cell","all"],[[{fun:"count"}]]),n.prefs!=null&&i.setPrefs(n.prefs),i.isBoundToPrefs=!1});vi(Xe,["fetchDataBegin","fetchDataEnd","getTypeInfo","dataUpdated","workBegin","workEnd","sortSet","filterSet","groupSet","pivotSet","aggregateSet","sortBegin","sort","sortEnd","filterBegin","filter","filterEnd","invalidFilterField","invalidGroupField","invalidPivotField","invalidSortField","invalidAggregate"]);Mo(Xe,"source",["getUniqueVals","decodeAll","setToolbar"]);Lm(Xe,[{name:"setFilter",prop:"filterSpec",event:"filterSet"},{name:"setGroup",prop:"groupSpec",event:"groupSet"},{name:"setPivot",prop:"pivotSpec",event:"pivotSet"},{name:"setAggregate",prop:"aggregateSpec",event:"aggregateSet"},{name:"setSort",prop:"sortSpec",event:"sortSet"}]);Ui(Xe);ji(Xe);Xe.prototype.toString=function(){var e=this;return"View("+e.name+")"};Xe.prototype.addClient=function(e,t){var n=this;n.clients=n.clients||{},n.clients[t]=n.clients[t]||[],n.clients[t].push(e)};Xe.prototype.hasClientKind=function(e){var t=this;return Ze(0,t.clients,e,"length")>0};Xe.prototype.getRowCount=function(){var e=this;if(e.data.isPlain)return e.data.data.length;if(e.data.isGroup)return k.reduce(e.data.data,function(t,n,i){return t+n.length},0);if(e.data.isPivot)return k.reduce(e.data.data,function(t,n,i){return t+k.reduce(n,function(r,s,a){return r+s.length},0)},0);throw new Error("Unable to determine row count when data is not plain, but also not grouped.")};Xe.prototype.getTotalRowCount=function(){return this.source.cache.data.length};Xe.prototype._setSort=function(e,t){var n=this,i=Array.prototype.slice.call(arguments),r=!1;return n.lock.isLocked()?n.lock.onUnlock(function(){n.setSort.apply(n,i)},"Waiting to set sort: "+JSON.stringify(e)):(t=Qe(t,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),n.debug("SET SORT","spec = %O",e),r=!k.isEqual(n.sortSpec,e),n.sortSpec=e,t.sendEvent&&n.fire("sortSet",{notTo:t.dontSendEventTo},e),r&&n.prefs!=null&&t.savePrefs&&n.prefs.save(),n.clearCache(),t.updateData&&n.getData(),!0)};Xe.prototype.getSort=function(){var e=this;return e.sortSpec};Xe.prototype.clearSort=function(e){return this.setSort(null,e)};Xe.prototype.sort=function(e){var t=this,n=['Data Source "'+t.source.name+'" : '+t.name,"Sorting"],i=me(t.data,"agg","info");if(t.sortSpec==null)return e(!1);t.debug("SORT","Beginning sort: %s",JSON.stringify(t.sortSpec));var r=function(u,f){var m;return f==null?(de.error("Unable to sort: no type information {spec = %O}",u),null):((typeof f=="string"||f instanceof String)&&(f={type:f}),f.type==null?(de.error("Unable to sort: type unknown {spec = %O, fti = %O}",u,f),null):(m=ur.byType(f.type),m==null?(de.error("Unable to sort: no comparison function for type {spec = %O, type = %s}",u,f.type),null):typeof m!="function"?(de.error("Unable to sort: invalid comparison function for type {spec = %O, type = %s}",u,f.type),null):(t._maybeDecode("SORT",f),m)))},s=function(u,f,m){var g,h;if(m==null)return de.error("Unable to sort: no sort source function given {spec = %O}",u),null;switch(f){case"vertical":h=t.data.isPlain?t.data.data.length:t.data.rowVals.length;break;case"horizontal":h=t.data.isPlain?t.data.data.length:t.data.colVals.length;break;default:return null}g=new Array(h);for(var v=0;v<h;v+=1)g[v]={oldIndex:v,sortSource:m(v)};return g},a=function(u){return function(f){t.debug("SORT // UNPACK","Unpacking bundle of %d sorted chunks in %s orientation",f.length,u);var m=t.data.data,g=me(t.data,"rowVals"),h=me(t.data,"colVals"),v=me(t.data,"agg","results","cell"),y=me(t.data,"agg","results","group"),E=me(t.data,"agg","results","pivot"),b,w;switch(u){case"vertical":t.data.data=[],g!=null&&(t.data.rowVals=[]),v!=null&&(t.data.agg.results.cell=[]),y!=null&&(t.data.agg.results.group=[]);var T={};if(k.each(f,function(D,O){t.data.isPlain&&t.fire("sort",{silent:!0},m[D.oldIndex].rowNum,O),t.data.data[O]=m[D.oldIndex],g!=null&&(t.data.rowVals[O]=g[D.oldIndex]),T[D.oldIndex]=O}),t.data.isGroup||t.data.isPivot){var x=function(D,O){D.children==null?(D.rowValIndex=T[D.rowValIndex],t.data.groupMetadata.lookup.byRowValIndex[D.rowValIndex]=D):(k.each(D.children,function(R){x(R,O+1)}),O>0&&(D.rowValIndex=D.children[k.keys(D.children)[0]].rowValIndex))};x(t.data.groupMetadata,0)}if(v!=null)for(b=0;b<v.length;b+=1)t.data.agg.results.cell[b]=[],k.each(f,function(D,O){t.data.agg.results.cell[b][O]=v[b][D.oldIndex]});if(y!=null)for(b=0;b<y.length;b+=1)t.data.agg.results.group[b]=[],k.each(f,function(D,O){t.data.agg.results.group[b][O]=y[b][D.oldIndex]});break;case"horizontal":if(t.data.data=[],h!=null&&(t.data.colVals=[]),v!=null&&(t.data.agg.results.cell=[]),E!=null&&(t.data.agg.results.pivot=[]),k.each(f,function(D,O){if(t.data.colVals[O]=h[D.oldIndex],h!=null)for(var R=0;R<t.data.rowVals.length;R+=1)t.data.data[R]===void 0&&(t.data.data[R]=[]),t.data.data[R][O]=m[R][D.oldIndex]}),v!=null)for(b=0;b<v.length;b+=1)for(t.data.agg.results.cell[b]=new Array(t.data.rowVals.length),w=0;w<t.data.rowVals.length;w+=1)t.data.agg.results.cell[b][w]=new Array(t.data.colVals.length),k.each(f,function(D,O){t.data.agg.results.cell[b][w][O]=v[b][w][D.oldIndex]});if(E!=null)for(b=0;b<E.length;b+=1)t.data.agg.results.pivot[b]=new Array(t.data.colVals.length),k.each(f,function(D,O){t.data.agg.results.pivot[b][O]=E[b][D.oldIndex]});break}}},l=function(u,f){return function(m){return typeof u=="function"?u(m):t.data.data=m,f(!0)}},c=function(u,f){var m,g,h=me(t,"sortSpec",u),v="mergeSort",y,E,b;if(h==null)return f(!1);if(h=it(h),t.data.isPlain){if(u==="horizontal")return de.error("Unable to sort: cannot perform horizontal sort on plain data"),f(!1);h.field&&(h.values?v="pigeonHole":m=t.typeInfo.get(h.field),g=function(R){return t.data.data[R].rowData[h.field].value})}else if(t.data.isGroup){if(u==="horizontal")return de.error("Unable to sort: cannot perform horizontal sort on grouped data"),f(!1);if(h.field!=null&&(b=t.data.groupFields.indexOf(h.field),b<0?de.error('Unable to sort: `field` property does not refer to a grouped field {field = "%s", groupFields = %s}',h.field,t.data.groupFields):h.groupFieldIndex=b),h.groupFieldIndex!=null){if(h.groupFieldIndex<0||h.groupFieldIndex>=t.data.groupFields.length)return de.error("Unable to sort: groupFieldIndex out of range {spec = %O, range = [0,%d]}",h,t.data.groupFields.length),f(!1);h.values?v="pigeonHole":t.data.groupSpec[h.groupFieldIndex].fun!=null?m={type:dt.get(t.data.groupSpec[h.groupFieldIndex].fun).sortType}:m=t.typeInfo.get(t.data.groupFields[h.groupFieldIndex]),g=function(R){return t.data.rowVals[R][h.groupFieldIndex]}}else if(h.aggType==="group"&&h.aggNum!=null){if(h.aggNum<0||h.aggNum>=i.group.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",h,i.group.length),f(!1);m=i.group[h.aggNum].instance.getType(),g=function(R){return t.data.agg.results.group[h.aggNum][R]}}}else if(t.data.isPivot){if(h.field!=null)switch(u){case"vertical":b=t.data.groupFields.indexOf(h.field),b<0?de.error('Unable to sort: `field` property does not refer to a grouped field {field = "%s", groupFields = %s}',h.field,t.data.groupFields):h.groupFieldIndex=b;break;case"horizontal":var w=t.data.pivotFields.indexOf(h.field);w<0?de.error('Unable to sort: `field` property does not refer to a pivotted field {field = "%s", pivotFields = %s}',h.field,t.data.pivotFields):h.pivotFieldIndex=w;break}if(h.groupFieldIndex!=null){if(h.groupFieldIndex<0||h.groupFieldIndex>=t.data.groupFields.length)return de.error("Unable to sort: groupFieldIndex out of range {spec = %O, range = [0,%d]}",h,t.data.groupFields.length),f(!1);h.values?v="pigeonHole":t.data.groupSpec[h.groupFieldIndex].fun!=null?m={type:dt.get(t.data.groupSpec[h.groupFieldIndex].fun).sortType}:m=t.typeInfo.get(t.data.groupFields[h.groupFieldIndex]),g=function(R){return t.data.rowVals[R][h.groupFieldIndex]}}else if((h.rowVal||h.rowValIndex!=null)&&h.aggNum!=null){if(h.rowVal){for(h.rowValIndex=-1,y=0;y<t.data.rowVals.length;y+=1)if(k.isEqual(t.data.rowVals[y],h.rowVal)){h.rowValIndex=y;break}if(h.rowValIndex===-1)return de.error("Unable to sort: invalid rowVal {spec = %O}",h),f(!1)}if(h.rowValIndex<0||h.rowValIndex>=t.data.rowVals.length)return de.error("Unable to sort: rowValIndex out of range {spec = %O, range = [0,%d]}",h,t.data.rowVals.length),f(!1);if(h.aggNum<0||h.aggNum>=i.cell.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",h,i.cell.length),f(!1);m=i.cell[h.aggNum].instance.getType(),g=function(R){return t.data.agg.results.cell[h.aggNum][h.rowValIndex][R]}}else if(h.pivotFieldIndex!=null){if(h.pivotFieldIndex<0||h.pivotFieldIndex>=t.data.pivotFields.length)return de.error("Unable to sort: pivotFieldIndex out of range {spec = %O, range = [0,%d]}",h,t.data.pivotFields.length),f(!1);h.values?v="pigeonHole":t.data.pivotSpec[h.pivotFieldIndex].fun!=null?m={type:dt.get(t.data.pivotSpec[h.pivotFieldIndex].fun).sortType}:m=t.typeInfo.get(t.data.pivotFields[h.pivotFieldIndex]),g=function(R){return t.data.colVals[R][h.pivotFieldIndex]}}else if((h.colVal||h.colValIndex!=null)&&h.aggNum!=null){if(h.colVal){for(h.colValIndex=-1,E=0;E<t.data.colVals.length;E+=1)if(k.isEqual(t.data.colVals[E],h.colVal)){h.colValIndex=E;break}if(h.colValIndex===-1)return de.error("Unable to sort: invalid colVal {spec = %O}",h),f(!1)}if(h.colValIndex<0||h.colValIndex>=t.data.colVals.length)return de.error("Unable to sort: colValIndex out of range {spec = %O, range = [0,%d]}",h,t.data.colVals.length),f(!1);if(h.aggNum<0||h.aggNum>=i.cell.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",h,i.cell.length),f(!1);m=i.cell[h.aggNum].instance.getType(),g=function(R){return t.data.agg.results.cell[h.aggNum][R][h.colValIndex]}}else if(h.aggType==="pivot"&&h.aggNum!=null){if(h.aggNum<0||h.aggNum>=i.pivot.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",h,i.pivot.length),f(!1);m=i.pivot[h.aggNum].instance.getType(),g=function(R){return t.data.agg.results.pivot[h.aggNum][R]}}else if(h.aggType==="group"&&h.aggNum!=null){if(h.aggNum<0||h.aggNum>=i.group.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",h,i.group.length),f(!1);m=i.group[h.aggNum].instance.getType(),g=function(R){return t.data.agg.results.group[h.aggNum][R]}}else return de.error("Invalid sort spec for pivotted data: "+JSON.stringify(h)),f(!1)}var T,x;if(v==="mergeSort"){if(T=r(h,m),T==null)return f(!1);x=function(R,I){if(h.dir.toUpperCase()==="ASC")return T(R.sortSource,I.sortSource)<=0;if(h.dir.toUpperCase()==="DESC")return T(R.sortSource,I.sortSource)>0;throw new Error('Invalid sort spec: `dir` must be either "ASC" or "DESC"')}}var D=s(h,u,g);if(D==null)return f(!1);var O=l(a(u),f);switch(t.debug("SORT","Performing sort using %s algorithm",v),v){case"mergeSort":return ld(D,x,O,t.sortProgress&&t.sortProgress.update);case"pigeonHole":return ud(D,h.values,O);default:throw new Error("Internal Error: Invalid sort algorithm: "+v)}};t.fire("sortBegin"),t.timing.start(n),t.sortProgress&&typeof t.sortProgress.begin=="function"&&t.sortProgress.begin(),c("horizontal",function(u){c("vertical",function(f){return t.sortProgress&&typeof t.sortProgress.end=="function"&&t.sortProgress.end(),t.timing.stop(n),t.fire("sortEnd"),e(u||f)})})};Xe.prototype._setFilter=function(e,t,n){var i=this,r=Array.prototype.slice.call(arguments),s=!1;return n=it(n)||{},i.lock.isLocked()?i.lock.onUnlock(function(){i.setFilter.apply(i,r)},"Waiting to set filter: "+JSON.stringify(e)):(n=Qe(n,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),i.debug("SET FILTER","spec = %O ; options = %O",e,n),s=!k.isEqual(i.filterSpec,e),i.filterSpec!=null&&e==null&&(i.wasPreviouslyFiltered=!0),i.filterSpec=e,i.filterProgress=t,n.sendEvent&&i.fire("filterSet",{notTo:n.dontSendEventTo},e),s&&i.prefs!=null&&n.savePrefs&&i.prefs.save(),i.clearCache(),n.updateData&&i.getData(),!0)};Xe.prototype.getFilter=function(){var e=this;return e.filterSpec};Xe.prototype.clearFilter=function(e){this.setFilter(null,null,e)};Xe.prototype.isFiltered=function(){return this.filterSpec!=null};Xe.prototype.filter=function(e){var t=this,n=['Data Source "'+t.source.name+'" : '+t.name,"Filtering"];if(t.filterSpec==null)if(t.wasPreviouslyFiltered)t.wasPreviouslyFiltered=!1;else return e(!1,t.data.data);k.each(t.filterSpec,function(u,f){var m=t.typeInfo.get(f);if(m===void 0){de.error('Filter field "'+f+'" does not exist in the source'),t.fire("invalidFilterField",null,f),delete t.filterSpec[f];return}if(m.type===void 0){de.error('Unable to filter field "'+f+'", type is unknown'),t.fire("invalidFilterField",null,f),delete t.filterSpec[f];return}["date","datetime"].indexOf(m.type)>=0&&m.internalType==="moment"&&k.each(u,function(g,h){typeof g=="string"&&(u[h]=le(g))}),t._maybeDecode("FILTER",m)});function i(u,f,m){var g=t.typeInfo.get(f),h=m[f].value;if(h===void 0)return en.warn("VIEW ("+t.name+") // FILTER","Attempted to filter by non-existent column: "+f),!1;le.isMoment(h),bt.isNumeral(h);var v=typeof h=="string",y=typeof h=="number",E={},b=ur.byType(g.type);E.$eq=function(x){return b(h,x)===0},E.$ne=function(x){return!E.$eq(x)},E.$contains=function(x){return v&&h.indexOf(x.toString().toLowerCase())>=0||y&&!1},E.$notcontains=function(x){return!E.$notcontains(x)},E.$gt=function(x){return b(h,x)>0},E.$gte=function(x){return E.$gt(x)||E.$eq(x)},E.$lt=function(x){return b(h,x)<0},E.$lte=function(x){return E.$lt(x)||E.$eq(x)},k.isArray(u)?u={$in:u}:k.isObject(u)||(u={$eq:u});for(var w in u)if(Object.prototype.hasOwnProperty.call(u,w)){var T=u[w];if(E[w]!==void 0){if(k.isArray(T)){if(k.every(T,E[w])===!1)return!1}else if(E[w](T)===!1)return!1}else switch(w){case"$in":if(!k.isArray(T))throw new Error('Invalid filter spec, operator "$in" for column "'+f+'" requires array value');if(k.map(T,function(x){return x.toString().toLowerCase()}).indexOf(h.toString().toLowerCase())<0)return!1;break;case"$nin":if(!k.isArray(T))throw new Error('Invalid filter spec, operator "$nin" for column "'+f+'" requires array value');if(k.map(T,function(x){return x.toString().toLowerCase()}).indexOf(h.toString().toLowerCase())>=0)return!1;break;default:throw new Error('Invalid operator "'+w+'" for column "'+f+'"')}}return!0}function r(u){var f=t.filterSpec==null?!0:rd(t.filterSpec,i,!1,u.rowData);return t.fire("filter",{silent:!0},u.rowNum,!f),f}var s={val:0},a=t.filterProgress?100:t.data.data.length,l=[],c=function(){var u;for(u=s.val;u<t.data.data.length&&u<s.val+a;u+=1)r(t.data.data[u])&&l.push(t.data.data[u]);return u<t.data.data.length?(s.val=u,t.filterProgress&&typeof t.filterProgress.update=="function"&&t.filterProgress.update(u,t.data.data.length),Ul("View#filter"),window.setTimeout(c)):(t.filterProgress&&typeof t.filterProgress.end=="function"&&t.filterProgress.end(),t.fire("filterEnd"),t.timing.stop(n),e(!0,l))};return t.timing.start(n),t.filterProgress&&typeof t.filterProgress.begin=="function"&&t.filterProgress.begin(),t.fire("filterBegin"),c()};Xe.prototype._setGroup=function(e,t,n){var i=this,r=Array.prototype.slice.call(arguments),s=!1;if(i.lock.isLocked())return i.lock.onUnlock(function(){i.setGroup.apply(i,r)},"Waiting to set group: "+JSON.stringify(e));if(t=Qe(t,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),i.debug("SET GROUP","spec = %O",e),e==null&&i.pivotSpec!=null&&(de.warn("VIEW ("+i.name+") // SET GROUP","Having a pivot without a group is not allowed"),i.clearPivot(t)),e!=null){k.isArray(e.fieldNames)||(de.warn("VIEW ("+i.name+") // SET GROUP","`spec.fieldNames` is not an array"),e.fieldNames=[]);for(var a=0;a<e.fieldNames.length;a+=1)typeof e.fieldNames[a]=="string"&&(e.fieldNames[a]={field:e.fieldNames[a]})}return s=!k.isEqual(i.groupSpec,e),i.groupSpec=e,t.sendEvent&&i.fire("groupSet",{notTo:t.dontSendEventTo},e),s&&i.prefs!=null&&t.savePrefs&&i.prefs.save(),i.clearCache(),t.updateData&&i.getData(),!0};Xe.prototype.getGroup=function(){var e=this;return e.groupSpec};Xe.prototype.clearGroup=function(e){return this.setGroup(null,e)};Xe.prototype.group=function(){var e=this,t=[],n,i;if(e.groupSpec==null)return!1;if(e.typeInfo==null)return de.error("Source type information is missing"),!1;if(k.each(e.groupSpec.fieldNames,function(u){var f=e.typeInfo.get(u.field);f==null?(de.error("Group field does not exist in the source: "+u.field),e.fire("invalidGroupField",null,u.field)):f.type==null?de.error('Unable to group by field "%s": type is undefined'):(e._maybeDecode("GROUP",f),t.push(u))}),t.length===0)return!1;for(var r=[],s=function(u){var f=[],m,g,h,v,y,E,b,w,T,x;for(h=0;h<e.data.data.length;h+=1){for(g=e.data.data[h],m=[],y=0;y<t.length;y+=1)v=t[y],E=g.rowData[v.field],b=E.value,v.fun==null?(w=hn(b),r[y][w]=b):(T=dt.get(v.fun),x=T.applyValueFun(b,e.typeInfo.get(v.field)),w=hn(x),r[y][w]=x),m[y]=w,st(w,E,"natRep","group",y);k.findIndex(f,function(O){return ni(m,O)})===-1&&f.push(m)}if(u!=null)for(var D=0;D<u.length;D+=1){if(m=u[D],m.length!=t.length){de.error("Unable to add rowVal %s when grouping by %s: the lengths must be the same",JSON.stringify(m),JSON.stringify(t));continue}for(y=0;y<m.length;y+=1)b=m[y],w=hn(b),r[y][w]=b,m[y]=w;k.findIndex(f,function(O){return ni(m,O)})===-1&&f.push(m)}return f.sort(function(O,R){return Ur(O,R)}),f},a=function(u,f){var m,g,h,v,y,E,b,w=new Array(f.length),T={lookup:{byRowNum:new Array(u.length),byRowValIndex:new Array(f.length),byId:[]}};for(g=0;g<f.length;g+=1)m=f[g],h={rowValIndex:g,rowValElt:m[m.length-1],parent:null,numRows:0,rows:[]},w[g]=h.rows,st(h,T,"children",fs(m,"children")),T.lookup.byRowValIndex[g]=h;for(y=0;y<u.length;y+=1){for(v=u[y],m=new Array(t.length),b=0;b<t.length;b+=1)E=t[b],m[b]=v.rowData[E.field].natRep.group[b];h=me(T,"children",fs(m,"children")),T.lookup.byRowNum[v.rowNum]=h,h.rows.push(v)}var x=0,D=function(O,R){O.id=x++,O.numRows=0,T.lookup.byId[O.id]=O,O.children==null?O.rows!=null&&(O.numRows=O.rows.length):(O.numChildren=k.keys(O.children).length,O.rows=[],k.each(O.children,function(I){I.parent=O,D(I,R+1),O.numRows+=I.numRows,O.rows=O.rows.concat(I.rows)}),R>0&&(O.rowValIndex=O.children[k.keys(O.children)[0]].rowValIndex,O.rowValElt=f[O.rowValIndex][R-1])),R>0&&(O.groupFieldIndex=R-1,O.groupField=t[O.groupFieldIndex].field,O.groupSpec=t[O.groupFieldIndex],O.rows!=null&&O.rows.length>0&&(O.rowValCell=O.rows[0].rowData[O.groupField]))};return D(T,0),{data:w,metadata:T}},l=function(u){for(var f=[],m=0;m<u.length;m+=1){var g=u[m];f[m]=[];for(var h=0;h<t.length;h+=1)f[m][h]=r[h][g[h]]}return f},c=0;c<t.length;c+=1)r[c]={};return i=s(e.groupSpec.addRowVals),n=a(e.data.data,i),i=l(i),e.debug("GROUP","Group Spec: %O",t),e.debug("GROUP","Row Vals: %O",i),e.debug("GROUP","New Data: %O",n.data),e.data.isPlain=!1,e.data.isGroup=!0,e.data.groupFields=k.pluck(t,"field"),e.data.groupSpec=t,e.data.rowVals=i,e.data.data=n.data,e.data.groupMetadata=n.metadata,e.debug("GROUP","Final Data: %O",e.data),!0};Xe.prototype._setPivot=function(e,t){var n=this,i=Array.prototype.slice.call(arguments),r=!1;if(n.lock.isLocked())return n.lock.onUnlock(function(){n.setPivot.apply(n,i)},"Waiting to set pivot: "+JSON.stringify(e));if(t=Qe(t,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),n.debug("SET PIVOT","spec = %O",e),n.groupSpec==null&&e!=null)return de.warn("VIEW ("+n.name+") // SET PIVOT","Having a pivot without a group is not allowed"),n.clearPivot(t),!1;if(e!=null){k.isArray(e.fieldNames)||(de.warn("VIEW ("+n.name+") // SET PIVOT","`spec.fieldNames` is not an array"),e.fieldNames=[]);for(var s=0;s<e.fieldNames.length;s+=1)typeof e.fieldNames[s]=="string"&&(e.fieldNames[s]={field:e.fieldNames[s]})}return r=!k.isEqual(n.pivotSpec,e),n.pivotSpec=e,t.sendEvent&&n.fire("pivotSet",{notTo:t.dontSendEventTo},e),r&&n.prefs!=null&&t.savePrefs&&n.prefs.save(),n.clearCache(),t.updateData&&n.getData(),!0};Xe.prototype.getPivot=function(){var e=this;return e.pivotSpec};Xe.prototype.clearPivot=function(e){return this.setPivot(null,e)};Xe.prototype.pivot_orig=function(){var e=this,t=[],n,i;if(!e.data.isGroup||e.pivotSpec==null)return!1;if(e.typeInfo==null)return de.error("Source type information is missing"),!1;if(k.each(e.pivotSpec.fieldNames,function(l,c){e.typeInfo.isSet(l)?t.push(l):(de.error("Pivot field does not exist in the source: "+l),e.fire("invalidPivotField",null,l))}),t.length===0)return!1;var r=function(l){var c={};return k.each(e.data.data,function(u){(function f(m,g,h){var v=nd(m),y={};k.each(g,function(E){var b=E.rowData[v].orig||E.rowData[v].value;h[b]===void 0&&(h[b]=m.length>1?{}:!0),y[b]===void 0&&(y[b]=[]),y[b].push(E)}),m.length>1&&k.each(y,function(E,b){f(id(m),E,h[b])})})(l,u,c)}),c},s=function(l){var c=[];return function u(f,m,g){m===e.pivotSpec.fieldNames.length?k.each(k.keys(f).sort(),function(h){c.push(g.concat([h]))}):k.each(f,function(h,v){u(h,m+1,g.concat([v]))})}(l,1,[]),c},a=function(l){var c=[];return k.each(l,function(u,f){var m=[];k.each(i,function(g){var h=[];k.each(u,function(v){k.every(g,function(y,E){var b=t[E],w=v.rowData[b].value,T=hn(w);return y===T})&&h.push(v)}),m.push(h)}),c.push(m)}),c};return n=r(t),i=s(n),e.data.data=a(e.data.data),e.debug("PIVOT","Pivot Fields: %O",t),e.debug("PIVOT","Col Vals Tree: %O",n),e.debug("PIVOT","Col Vals: %O",i),e.debug("PIVOT","New Data: %O",e.data),e.data.isPlain=!1,e.data.isGroup=!1,e.data.isPivot=!0,e.data.pivotFields=t,e.data.colVals=i,!0};Xe.prototype.pivot=function(){var e=this,t=[],n,i;if(!e.data.isGroup||e.pivotSpec==null)return!1;if(e.typeInfo==null)return de.error("Source type information is missing"),!1;if(k.each(e.pivotSpec.fieldNames,function(u){var f=e.typeInfo.get(u.field);f==null?(de.error("Pivot field does not exist in the source: "+u.field),e.fire("invalidPivotField",null,u.field)):f.type==null?de.error('Unable to pivot by field "%s": type is undefined'):(e._maybeDecode("PIVOT",f),t.push(u))}),t.length===0)return!1;for(var r=[],s=function(u){var f,m,g,h,v,y,E,b,w,T,x,D=[];for(E=0;E<e.data.data.length;E+=1)for(b=e.data.data[E],T=0;T<b.length;T+=1){for(w=b[T],f=[],m=0;m<t.length;m+=1)g=t[m],h=w.rowData[g.field].value,g.fun==null?(v=hn(h),r[m][v]=h):(y=dt.get(g.fun),v=y.applyValueFun(h,e.typeInfo.get(g.field)),r[m][v]=v),st(v,w.rowData[g.field],"natRep","pivot",m),f[m]=v;k.findIndex(D,function(O){return ni(f,O)})===-1&&D.push(f)}if(u!=null)for(x=0;x<u.length;x+=1){if(f=u[x],f.length!=t.length){de.error("Unable to add colVal %s when pivotting by %s: the lengths must be the same",JSON.stringify(f),JSON.stringify(t));continue}for(m=0;m<f.length;m+=1)h=f[m],v=hn(h),r[m][v]=h,f[m]=v;k.findIndex(D,function(O){return ni(f,O)})===-1&&D.push(f)}return D.sort(function(O,R){return Ur(O,R)}),D},a=function(u){var f=[];return k.each(u,function(m,g){var h=[];k.each(n,function(v){var y=[];k.each(m,function(E){k.every(v,function(b,w){var T=t[w];return b===E.rowData[T.field].natRep.pivot[w]})&&y.push(E)}),h.push(y)}),f.push(h)}),f},l=function(u){for(var f=[],m=0;m<u.length;m+=1){var g=u[m];f[m]=[];for(var h=0;h<t.length;h+=1)f[m][h]=r[h][g[h]]}return f},c=0;c<t.length;c+=1)r[c]={};return n=s(e.pivotSpec.addColVals),i=a(e.data.data),n=l(n),e.debug("PIVOT","Pivot Spec: %O",t),e.debug("PIVOT","Orig Keys: %O",r),e.debug("PIVOT","Col Vals: %O",n),e.debug("PIVOT","New Data: %O",i),e.data.isPlain=!1,e.data.isGroup=!1,e.data.isPivot=!0,e.data.pivotFields=k.pluck(t,"field"),e.data.pivotSpec=t,e.data.colVals=n,e.data.data=i,e.debug("GROUP","Final Data: %O",e.data),!0};Xe.prototype._setAggregate=function(e,t){var n=this,i=Array.prototype.slice.call(arguments),r=!1,s={group:[],pivot:[]};return n.lock.isLocked()?n.lock.onUnlock(function(){n.setAggregate.apply(n,i)},"Waiting to set aggregate: "+JSON.stringify(e)):(t=Qe(t,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),n.debug("SET AGGREGATE","spec = %O ; options = %O",e,t),r=!k.isEqual(n.aggregateSpec,e),e==null?n.aggregateSpec=null:(k.each(e,function(a,l){a=k.filter(a,function(c){var u=Ut.get(c.fun);return u==null?(de.error('Ignoring aggregate "'+c.fun+'" because no such aggregate function exists'),!1):((l==="group"||l==="pivot")&&c.shouldGraph&&s[l].push(c),!0)}),e[l]=a}),n.aggregateSpec=it(e)),t.sendEvent&&n.fire("aggregateSet",{notTo:t.dontSendEventTo},e,s),r&&n.prefs!=null&&t.savePrefs&&n.prefs.save(),n.clearCache(),t.updateData&&n.getData(),!0)};Xe.prototype.getAggregate=function(){var e=this;return e.aggregateSpec};Xe.prototype.clearAggregate=function(e){var t=this;return t.setAggregate(Yn(["group","pivot","cell","all"],[[{fun:"count"}]]),e)};Xe.prototype.aggregate=function(e){var t=this;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");if(!(t.aggregateSpec&&(t.data.isGroup||t.data.isPivot)))return e(!1);k.each(["group","pivot","cell","all"],function(l){t.debug("AGGREGATE","Computing %s aggregate functions: %s",l,k.pluck(me(t,"aggregateSpec",l),"fun").join(", "))});var n=[],i=[],r=[],s=[],a={group:[],pivot:[],cell:[],all:[]};k.each(["group","pivot","cell","all"],function(l){k.each(t.aggregateSpec[l],function(c,u){try{a[l][u]=new Yi(l,c,u,t.colConfig,t.typeInfo,k.bind(t._maybeDecode,t))}catch(f){de.error("Invalid Aggregate: "+l+"["+u+"] - "+f.message),a[l][u]=null,t.fire("invalidAggregate",null,u,f.message)}}),a[l]=k.without(a[l],null)}),k.each(t.data.rowVals,function(l,c){k.each(a.group,function(u,f){n[f]===void 0&&(n[f]=[]);var m=u.instance.calculate(k.flatten(t.data.data[c]));n[f][c]=m,u.debug&&t.debug("AGGREGATE","Group aggregate [%d] (%s) : Group [%s] = %s",f,a.group[f].instance.name+(a.group[f].name?" -> "+a.group[f].name:""),l.join(", "),Xt(m)?fi(m).innerText:JSON.stringify(m))}),t.data.isPivot&&k.each(a.cell,function(u,f){r[f]===void 0&&(r[f]=[]),r[f][c]=[],k.each(t.data.colVals,function(m,g){var h=u.instance.calculate(t.data.data[c][g]);r[f][c][g]=h,u.debug&&t.debug("AGGREGATE","Cell aggregate [%d] (%s) : Cell [%s ; %s] = %s",f,a.cell[f].instance.name+(a.cell[f].name?" -> "+a.cell[f].name:""),l.join(", "),m.join(", "),Xt(h)?fi(h).innerText:JSON.stringify(h))})})}),t.data.isPivot&&a.pivot&&k.each(a.pivot,function(l,c){i[c]=[],k.each(t.data.colVals,function(u,f){var m=l.instance.calculate(k.flatten(k.pluck(t.data.data,f)));i[c][f]=m,l.debug&&t.debug("AGGREGATE","Pivot aggregate [%d] (%s) : Col Val [%s] = %s",c,a.pivot[c].instance.name+(a.pivot[c].name?" -> "+a.pivot[c].name:""),u.join(", "),Xt(m)?fi(m).innerText:JSON.stringify(m))})}),a.all&&(t.data.isGroup||t.data.isPivot)&&k.each(a.all,function(l,c){var u=l.instance.calculate(k.flatten(t.data.data));s[c]=u,l.debug&&t.debug("AGGREGATE","All aggregate [%d] (%s) = %s",c,a.all[c].instance.name+(a.all[c].name?" -> "+a.all[c].name:""),JSON.stringify(u))}),t.data.agg={info:a,results:{group:n,pivot:i,cell:r,all:s}},e(!0)};Xe.prototype.getData=function(e,t){throw new Error("Implementation Error: `getData()` is abstract and must be implemented by a subclass of View")};Xe.prototype.getTypeInfo=function(e){throw new Error("Implementation Error: `getTypeInfo()` is abstract and must be implemented by a subclass of View")};Xe.prototype.clearCache=function(){var e=this;e.data=void 0,e.typeInfo=void 0,e.debug(null,"Cleared cache")};Xe.prototype.clearSourceData=function(){var e=this;e.source instanceof Ke?e.source.clearCachedData():e.source instanceof Xe&&e.source.clearSourceData(),e.debug(null,"Cleared source data")};Xe.prototype.refresh=function(){var e=this;e.debug(null,"Refreshing..."),e.source.refresh()};Xe.prototype.reset=function(e){var t=this;e=Qe(e,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0});var n=jQuery.extend({},e,{updateData:!1});if(t.debug(null,"RESET!"),t.clearSort(n),t.clearFilter(n),t.clearAggregate(n),t.clearPivot(n),t.clearGroup(n),!e.updateData){delete t.lastOps;return}t.getData()};Xe.prototype.getLastOps=function(){var e=this;return e.lastOps};Xe.prototype.setColConfig=function(e){var t=this;if(!(e instanceof Ae))throw new Error("Call Error: `colConfig` must be an instance of OrdMap");t.debug(null,"Setting column configuration"),t.colConfig=e};Xe.prototype.setPrefs=function(e){var t=this;if(!(e instanceof tt))throw new Error("Call Error: `prefs` must be an instance of Prefs");t.prefs=e,t.prefs.bind(t.prefsModule,t)};var dr=Ee("MirageSource",Object,function(e){var t=this;if(e=Qe(e,{backend:{type:"IndexedDB",dbName:"datavis_mirage"}}),!Xu.isSet(e.backend.type))throw new Error('Call Error: requested backend type "'+e.backend.type+'" does not exist');var n=Xu.get(e.backend.type);t.backend=new n(e.backend)});ji(dr);dr.prototype.initFromView=function(e,t,n){var i=this;if(!(e instanceof tt))throw new Error("Call Error: `prefs` must be an instance of Prefs");if(!(t instanceof Xe))throw new Error("Call Error: `view` must be an instance of View");if(!(n instanceof Ke))throw new Error("Call Error: `source` must be an instance of Source");i.prefsName=e.name,i.perspectiveName=e.currentPerspective.name,i.viewConfig={filterSpec:t.getFilter(),groupSpec:t.getGroup(),pivotSpec:t.getPivot(),aggregateSpec:t.getAggregate()},i.sourceType=n.type,i.sourceName=n.getName(),i.sourceParams=n.createParams()};dr.prototype.initFromPrefs=function(e){var t=this;if(!(e instanceof tt))throw new Error("Call Error: `prefs` must be an instance of Prefs");t.prefsName=e.name,t.perspectiveName=e.currentPerspective.name};dr.prototype.setPerspectiveName=function(e){var t=this;t.perspectiveName=e};dr.prototype.toString=function(){var e=this;return'MIRAGE SOURCE {prefsName="'+e.prefsName+'", perspectiveName="'+e.perspectiveName+'"}'};dr.prototype.save=function(e,t,n,i){var r=this;if(e.isPlain)throw new Error("Cannot store mirage data for plain data.");r.logDebug("SAVE","Processing view data to store in backend");for(var s=[],a=0;a<e.agg.info.cell.length;a+=1)for(var l=0;l<e.rowVals.length;l+=1)for(var c=0;c<e.colVals.length;c+=1)e.data[l][c].length>0&&s.push({aggType:"cell",aggNum:a,coordinates:[].concat(e.rowVals[l],e.colVals[c]),result:e.agg.results.cell[a][l][c]});for(var a=0;a<e.agg.info.group.length;a+=1)for(var l=0;l<e.rowVals.length;l+=1)s.push({aggType:"group",aggNum:a,coordinates:e.rowVals[l],result:e.agg.results.group[a][l]});for(var a=0;a<e.agg.info.pivot.length;a+=1)for(var c=0;c<e.colVals.length;c+=1)s.push({aggType:"pivot",aggNum:a,coordinates:e.colVals[c],result:e.agg.results.pivot[a][c]});for(var a=0;a<e.agg.info.all.length;a+=1)s.push({aggType:"all",aggNum:a,coordinates:[],result:e.agg.results.all[a]});var u={prefsName:r.prefsName,perspectiveName:r.perspectiveName,sourceType:r.sourceType,sourceName:r.sourceName,sourceParams:r.sourceParams,typeInfo:t.serialize(),filterSpec:r.viewConfig.filterSpec,groupSpec:r.viewConfig.groupSpec,pivotSpec:r.viewConfig.pivotSpec,aggregateSpec:r.viewConfig.aggregateSpec};r.logDebug("SAVE","Sending processed data to backend: {metadata=%O, aggRes=%O}",u,s),r.backend.save(u,s,n,i)};dr.prototype.load=function(e,t){var n=this,i={groupFields:[],pivotFields:[],rowVals:[],colVals:[],agg:{results:{cell:[],group:[],pivot:[],all:[]},info:{cell:[],group:[],pivot:[],all:[]}},data:[],groupMetadata:{lookup:{byRowValIndex:[]}}};return n.backend.load(n.prefsName,n.perspectiveName,function(r,s){var a={},l={};fl(r,a,["sourceType","sourceName","sourceParams"]),fl(r,l,["filterSpec","groupSpec","pivotSpec","aggregateSpec"]),i.groupSpec=r.groupSpec.fieldNames,i.groupFields=k.pluck(i.groupSpec,"field"),i.pivotSpec=r.pivotSpec.fieldNames,i.pivotFields=k.pluck(i.pivotSpec,"field"),k.each(s,function(g){var h=null,v=null,y=null,E=null;switch(g.aggType){case"cell":h=g.coordinates.slice(0,i.groupFields.length),v=g.coordinates.slice(i.groupFields.length);break;case"group":h=g.coordinates;break;case"pivot":v=g.coordinates;break}if(h!=null&&(y=k.findIndex(i.rowVals,function(T){return ni(T,h)})),v!=null&&(E=k.findIndex(i.colVals,function(T){return ni(T,v)})),y!=null&&y<0){y=i.rowVals.length,i.rowVals.push(h);var b={rowValIndex:y,rowValElt:h[h.length-1]};st(b,i.groupMetadata,"children",fs(h,"children")),i.groupMetadata.lookup.byRowValIndex[y]=b}switch(E!=null&&E<0&&(E=i.colVals.length,i.colVals.push(v)),g.aggType){case"cell":st(g.result,i.agg.results.cell,g.aggNum,y,E);break;case"group":st(g.result,i.agg.results.group,g.aggNum,y);break;case"pivot":st(g.result,i.agg.results.pivot,g.aggNum,E);break;case"all":st(g.result,i.agg.results.all,g.aggNum);break}if(i.agg.info[g.aggType][g.aggNum]==null){var w=new Yi(g.aggType,r.aggregateSpec[g.aggType][g.aggNum],g.aggNum,null,null,null);st(w,i.agg.info[g.aggType],g.aggNum)}});for(var c=0;c<i.rowVals.length;c+=1){i.data[c]=[];for(var u=0;u<i.colVals.length;u+=1){i.data[c][u]=[];for(var f=0;f<r.aggregateSpec.cell.length;f+=1)i.agg.results.cell[f][c][u]===void 0&&(i.agg.results.cell[f][c][u]=i.agg.info.cell[f].instance.bottomValue)}}for(var c=0;c<i.rowVals.length;c+=1)for(var f=0;f<r.aggregateSpec.group.length;f+=1)i.agg.results.group[f][c]===void 0&&(i.agg.results.group[f][c]=i.agg.info.group[f].instance.bottomValue);for(var u=0;u<i.colVals.length;u+=1)for(var f=0;f<r.aggregateSpec.pivot.length;f+=1)i.agg.results.pivot[f][u]===void 0&&(i.agg.results.pivot[f][u]=i.agg.info.pivot[f].instance.bottomValue);for(var f=0;f<r.aggregateSpec.all.length;f+=1)i.agg.results.all[f]===void 0&&(i.agg.results.all[f]=i.agg.info.all[f].instance.bottomValue);var m=function(g,h){g.children!=null&&(k.each(g.children,function(v){v.parent=g,m(v,h+1)}),h>0&&(g.rowValIndex=g.children[k.keys(g.children)[0]].rowValIndex,g.rowValElt=i.rowVals[g.rowValIndex][h-1])),h>0&&(g.groupFieldIndex=h-1,g.groupField=i.groupSpec[g.groupFieldIndex].field,g.groupSpec=i.groupSpec[g.groupFieldIndex])};return m(i.groupMetadata,0),i.colVals.length>0?k.extend(i,{isPlain:!1,isGroup:!1,isPivot:!0}):i.rowVals.length>0?k.extend(i,{isPlain:!1,isGroup:!0,isPivot:!1}):k.extend(i,{isPlain:!0,isGroup:!1,isPivot:!1}),e(Ae.deserialize(r.typeInfo),i,l,a)},t)};var Td=Ee("MirageBackend",Object,function(e){});Td.prototype.save=function(e){throw new Error("Abstract Method Error: this method must be implemented by a concrete derived class")};Td.prototype.load=function(e){throw new Error("Abstract Method Error: this method must be implemented by a concrete derived class")};var qr=Ee("MirageBackend_IndexedDB",Td,function(e){var t=this;if(!k.isString(e.dbName))throw new Error("Call Error: `opts.dbName` must be a string");if(t.dbName=e.dbName,!window.indexedDB)throw new Error("Browser does not support indexedDB")},{DB_CURRENT_VERSION:1});ji(qr);qr.prototype.toString=function(){var e=this;return'MIRAGE BACKEND // INDEXEDDB {dbName="'+e.dbName+'"}'};qr.prototype.open=function(e,t){var n=this;if(n.db!=null)return e();var i=window.indexedDB.open(n.dbName,n.DB_CURRENT_VERSION);i.onupgradeneeded=function(r){n.logInfo("OPEN","Upgrading database from version "+r.target.version+" to "+n.DB_CURRENT_VERSION+"..."),n.db=r.target.result;var s=n.db.createObjectStore("metadata",{keyPath:"metadataId",autoIncrement:!0});s.createIndex("primary",["prefsName","perspectiveName"],{unique:!0});var a=n.db.createObjectStore("aggResult",{keyPath:"aggResultId",autoIncrement:!0});a.createIndex("primary",["metadataId","coordinates","aggType","aggNum"],{unique:!0}),a.createIndex("metadata",["metadataId"],{unique:!1})},i.onsuccess=function(r){return n.db=r.target.result,e()},i.onerror=t};qr.prototype.close=function(){var e=this;e.db.close(),delete e.db};qr.prototype.save=function(e,t,n,i){var r=this;r.open(function(){var s=r.db.transaction(["metadata","aggResult"],"readwrite");s.oncomplete=function(u){return r.logInfo("SAVE","Successfully stored all mirage data."),n()},s.onerror=function(u){return i(u.target.error.message)};var a=s.objectStore("metadata"),l=s.objectStore("aggResult"),c;c=a.add(e),c.onsuccess=function(u){k.each(t,function(f){f.metadataId=u.target.result;var m=l.add(f);m.onerror=function(g){return r.logError("SAVE","Failed to add aggregate results: %O",f),i(g.target.error.message)}})},c.onerror=function(u){return r.logError("SAVE","Failed to add metadata: %O",e),i(u.target.error.message)}},function(s){return r.logError("SAVE","Failed to open database."),i(s.target.error.message)})};qr.prototype.load=function(e,t,n,i){var r=this;r.open(function(){var s=r.db.transaction(["metadata","aggResult"],"readonly");s.oncomplete=function(m){r.logInfo("SAVE","Successfully loaded all mirage data.")},s.onerror=function(m){return i(m.target.error.message)};var a=s.objectStore("metadata"),l=s.objectStore("aggResult"),c=a.index("primary"),u=l.index("metadata"),f;f=c.get([e,t]),f.onsuccess=function(m){var g=m.target.result;if(g==null)return i('Mirage metadata for {prefs = "'+e+'", perspective = "'+t+'"} does not exist');var h=u.getAll([g.metadataId]);h.onsuccess=function(v){var y=v.target.result;return y==null?i('Mirage aggregate results for {prefs = "'+e+'", perspective = "'+t+'", metadataId = '+g.metadataId+"} do not exist"):n(g,y)},h.onerror=function(v){return r.logError("SAVE","Failed to retrieve aggregate results."),i(v.target.error.message)}},f.onerror=function(m){return r.logError("SAVE","Failed to retrieve metadata."),i(m.target.error.message)}},function(s){return r.logError("SAVE","Failed to open database."),i(s.target.error.message)})};var Xu=new Ae;Xu.set("IndexedDB",qr);var gn=Ee("MirageView",Xe,function(e){var t=this;t.opts=Qe(e,{}),t.setName(t.opts.name),t.source=new dr(t.opts)},{prefsModule:"mirage"});gn.prototype.initFromView=function(e,t,n,i,r){var s=this;if(!(e instanceof tt))throw new Error("Call Error: `prefs` must be an instance of Prefs");if(!(t instanceof Xe))throw new Error("Call Error: `view` must be an instance of View");if(!(n instanceof Ke))throw new Error("Call Error: `source` must be an instance of Source");if(i!=null&&typeof i!="function")throw new Error("Call Error: `ok` must be null or a function");if(r!=null&&typeof r!="function")throw new Error("Call Error: `fail` must be null or a function");i=i||Ct,r=r||Ct,s.setFilter(t.getFilter()),s.setGroup(t.getGroup()),s.setPivot(t.getPivot()),s.setAggregate(t.getAggregate()),s.setSort(t.getSort()),t.getTypeInfo(function(a,l){if(a)s.typeInfo=l,t.getData(function(c,u){return c?(s.data=u,s.source.initFromView(e,t,n),i()):r()});else return r()})};gn.prototype.initFromPrefs=function(e,t){var n=this;n.opts=t,n.source.initFromPrefs(e)};Cs(gn);gn.prototype.toString=function(){var e=this;return"MirageView("+e.name+")"};gn.prototype.prime=function(e){var t=this,n=Array.prototype.slice.call(arguments);if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");if(t.isPrimed)return e(!1);if(t.lock.isLocked())return t.lock.onUnlock(function(){t.prime.apply(t,n)},"Waiting to prime");t.lock.lock("Priming!"),t.prefs.prime(function(){t.source.getData(function(){t.prefs.bind("mirage_view",t),t.isPrimed=!0,t.lock.unlock(),e(!0)})})};gn.prototype.getData=function(e,t){var n=this;if(n.data)return e(!0,n.data);n.load(function(i,r,s,a){var l={updateData:!1,savePrefs:!1};return n.typeInfo=i,n.data=r,n.setFilter(s.filterSpec,null,l),n.setGroup(s.groupSpec,l),n.setPivot(s.pivotSpec,l),n.setAggregate(s.aggregateSpec,l),n.setSort(s.sortSpec,l),e(!0,n.data)},function(i){return n.logError("GET DATA",i),e(!1)})};gn.prototype.getTypeInfo=function(e){var t=this;if(t.typeInfo)return e(!0,t.typeInfo);t.load(function(n,i){return t.typeInfo=n,t.data=i,e(!0,t.typeInfo)},function(){return e(!1)})};gn.prototype.refresh=function(){};gn.prototype.save=function(e,t){var n=this;return n.source.save(n.data,n.typeInfo,e,t)};gn.prototype.load=function(e,t){var n=this;return n.source.load(e,t)};gn.prototype.setPerspectiveName=function(e){var t=this;t.source.setPerspectiveName(e),t.perspectiveName=e};var Jo={exports:{}},Xo={exports:{}},Vn={},vn={},Ef;function Tn(){if(Ef)return vn;Ef=1,vn.__esModule=!0,vn.extend=r,vn.indexOf=c,vn.escapeExpression=u,vn.isEmpty=f,vn.createFrame=m,vn.blockParams=g,vn.appendContextPath=h;var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},t=/[&<>"'`=]/g,n=/[&<>"'`=]/;function i(v){return e[v]}function r(v){for(var y=1;y<arguments.length;y++)for(var E in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],E)&&(v[E]=arguments[y][E]);return v}var s=Object.prototype.toString;vn.toString=s;var a=function(y){return typeof y=="function"};a(/x/)&&(vn.isFunction=a=function(v){return typeof v=="function"&&s.call(v)==="[object Function]"}),vn.isFunction=a;var l=Array.isArray||function(v){return v&&typeof v=="object"?s.call(v)==="[object Array]":!1};vn.isArray=l;function c(v,y){for(var E=0,b=v.length;E<b;E++)if(v[E]===y)return E;return-1}function u(v){if(typeof v!="string"){if(v&&v.toHTML)return v.toHTML();if(v==null)return"";if(!v)return v+"";v=""+v}return n.test(v)?v.replace(t,i):v}function f(v){return!v&&v!==0?!0:!!(l(v)&&v.length===0)}function m(v){var y=r({},v);return y._parent=v,y}function g(v,y){return v.path=y,v}function h(v,y){return(v?v+".":"")+y}return vn}var Zo={exports:{}},xf;function ri(){return xf||(xf=1,function(e,t){t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function i(r,s){var a=s&&s.loc,l=void 0,c=void 0,u=void 0,f=void 0;a&&(l=a.start.line,c=a.end.line,u=a.start.column,f=a.end.column,r+=" - "+l+":"+u);for(var m=Error.prototype.constructor.call(this,r),g=0;g<n.length;g++)this[n[g]]=m[n[g]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{a&&(this.lineNumber=l,this.endLineNumber=c,Object.defineProperty?(Object.defineProperty(this,"column",{value:u,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:f,enumerable:!0})):(this.column=u,this.endColumn=f))}catch{}}i.prototype=new Error,t.default=i,e.exports=t.default}(Zo,Zo.exports)),Zo.exports}var Ls={},ea={exports:{}},Df;function fE(){return Df||(Df=1,function(e,t){t.__esModule=!0;var n=Tn();t.default=function(i){i.registerHelper("blockHelperMissing",function(r,s){var a=s.inverse,l=s.fn;if(r===!0)return l(this);if(r===!1||r==null)return a(this);if(n.isArray(r))return r.length>0?(s.ids&&(s.ids=[s.name]),i.helpers.each(r,s)):a(this);if(s.data&&s.ids){var c=n.createFrame(s.data);c.contextPath=n.appendContextPath(s.data.contextPath,s.name),s={data:c}}return l(r,s)})},e.exports=t.default}(ea,ea.exports)),ea.exports}var ta={exports:{}},Tf;function hE(){return Tf||(Tf=1,function(e,t){t.__esModule=!0;function n(a){return a&&a.__esModule?a:{default:a}}var i=Tn(),r=ri(),s=n(r);t.default=function(a){a.registerHelper("each",function(l,c){if(!c)throw new s.default("Must pass iterator to #each");var u=c.fn,f=c.inverse,m=0,g="",h=void 0,v=void 0;c.data&&c.ids&&(v=i.appendContextPath(c.data.contextPath,c.ids[0])+"."),i.isFunction(l)&&(l=l.call(this)),c.data&&(h=i.createFrame(c.data));function y(x,D,O){h&&(h.key=x,h.index=D,h.first=D===0,h.last=!!O,v&&(h.contextPath=v+x)),g=g+u(l[x],{data:h,blockParams:i.blockParams([l[x],x],[v+x,null])})}if(l&&typeof l=="object")if(i.isArray(l))for(var E=l.length;m<E;m++)m in l&&y(m,m,m===l.length-1);else if(typeof Symbol=="function"&&l[Symbol.iterator]){for(var b=[],w=l[Symbol.iterator](),T=w.next();!T.done;T=w.next())b.push(T.value);l=b;for(var E=l.length;m<E;m++)y(m,m,m===l.length-1)}else(function(){var x=void 0;Object.keys(l).forEach(function(D){x!==void 0&&y(x,m-1),x=D,m++}),x!==void 0&&y(x,m-1,!0)})();return m===0&&(g=f(this)),g})},e.exports=t.default}(ta,ta.exports)),ta.exports}var na={exports:{}},Sf;function pE(){return Sf||(Sf=1,function(e,t){t.__esModule=!0;function n(s){return s&&s.__esModule?s:{default:s}}var i=ri(),r=n(i);t.default=function(s){s.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new r.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default}(na,na.exports)),na.exports}var ia={exports:{}},kf;function gE(){return kf||(kf=1,function(e,t){t.__esModule=!0;function n(a){return a&&a.__esModule?a:{default:a}}var i=Tn(),r=ri(),s=n(r);t.default=function(a){a.registerHelper("if",function(l,c){if(arguments.length!=2)throw new s.default("#if requires exactly one argument");return i.isFunction(l)&&(l=l.call(this)),!c.hash.includeZero&&!l||i.isEmpty(l)?c.inverse(this):c.fn(this)}),a.registerHelper("unless",function(l,c){if(arguments.length!=2)throw new s.default("#unless requires exactly one argument");return a.helpers.if.call(this,l,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},e.exports=t.default}(ia,ia.exports)),ia.exports}var ra={exports:{}},Of;function mE(){return Of||(Of=1,function(e,t){t.__esModule=!0,t.default=function(n){n.registerHelper("log",function(){for(var i=[void 0],r=arguments[arguments.length-1],s=0;s<arguments.length-1;s++)i.push(arguments[s]);var a=1;r.hash.level!=null?a=r.hash.level:r.data&&r.data.level!=null&&(a=r.data.level),i[0]=a,n.log.apply(n,i)})},e.exports=t.default}(ra,ra.exports)),ra.exports}var sa={exports:{}},If;function vE(){return If||(If=1,function(e,t){t.__esModule=!0,t.default=function(n){n.registerHelper("lookup",function(i,r,s){return i&&s.lookupProperty(i,r)})},e.exports=t.default}(sa,sa.exports)),sa.exports}var oa={exports:{}},Rf;function yE(){return Rf||(Rf=1,function(e,t){t.__esModule=!0;function n(a){return a&&a.__esModule?a:{default:a}}var i=Tn(),r=ri(),s=n(r);t.default=function(a){a.registerHelper("with",function(l,c){if(arguments.length!=2)throw new s.default("#with requires exactly one argument");i.isFunction(l)&&(l=l.call(this));var u=c.fn;if(i.isEmpty(l))return c.inverse(this);var f=c.data;return c.data&&c.ids&&(f=i.createFrame(c.data),f.contextPath=i.appendContextPath(c.data.contextPath,c.ids[0])),u(l,{data:f,blockParams:i.blockParams([l],[f&&f.contextPath])})})},e.exports=t.default}(oa,oa.exports)),oa.exports}var Af;function ov(){if(Af)return Ls;Af=1,Ls.__esModule=!0,Ls.registerDefaultHelpers=y,Ls.moveHelperToHooks=E;function e(b){return b&&b.__esModule?b:{default:b}}var t=fE(),n=e(t),i=hE(),r=e(i),s=pE(),a=e(s),l=gE(),c=e(l),u=mE(),f=e(u),m=vE(),g=e(m),h=yE(),v=e(h);function y(b){n.default(b),r.default(b),a.default(b),c.default(b),f.default(b),g.default(b),v.default(b)}function E(b,w,T){b.helpers[w]&&(b.hooks[w]=b.helpers[w],T||delete b.helpers[w])}return Ls}var aa={},la={exports:{}},Pf;function _E(){return Pf||(Pf=1,function(e,t){t.__esModule=!0;var n=Tn();t.default=function(i){i.registerDecorator("inline",function(r,s,a,l){var c=r;return s.partials||(s.partials={},c=function(u,f){var m=a.partials;a.partials=n.extend({},m,s.partials);var g=r(u,f);return a.partials=m,g}),s.partials[l.args[0]]=l.fn,c})},e.exports=t.default}(la,la.exports)),la.exports}var Mf;function bE(){if(Mf)return aa;Mf=1,aa.__esModule=!0,aa.registerDefaultDecorators=i;function e(r){return r&&r.__esModule?r:{default:r}}var t=_E(),n=e(t);function i(r){n.default(r)}return aa}var ua={exports:{}},Nf;function av(){return Nf||(Nf=1,function(e,t){t.__esModule=!0;var n=Tn(),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(s){if(typeof s=="string"){var a=n.indexOf(i.methodMap,s.toLowerCase());a>=0?s=a:s=parseInt(s,10)}return s},log:function(s){if(s=i.lookupLevel(s),typeof console<"u"&&i.lookupLevel(i.level)<=s){var a=i.methodMap[s];console[a]||(a="log");for(var l=arguments.length,c=Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];console[a].apply(console,c)}}};t.default=i,e.exports=t.default}(ua,ua.exports)),ua.exports}var Kr={},ca={},Lf;function wE(){if(Lf)return ca;Lf=1,ca.__esModule=!0,ca.createNewLookupObject=t;var e=Tn();function t(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.extend.apply(void 0,[Object.create(null)].concat(i))}return ca}var Ff;function lv(){if(Ff)return Kr;Ff=1,Kr.__esModule=!0,Kr.createProtoAccessControl=s,Kr.resultIsAllowed=a,Kr.resetLoggedProperties=u;function e(f){return f&&f.__esModule?f:{default:f}}var t=wE(),n=av(),i=e(n),r=Object.create(null);function s(f){var m=Object.create(null);m.constructor=!1,m.__defineGetter__=!1,m.__defineSetter__=!1,m.__lookupGetter__=!1;var g=Object.create(null);return g.__proto__=!1,{properties:{whitelist:t.createNewLookupObject(g,f.allowedProtoProperties),defaultValue:f.allowProtoPropertiesByDefault},methods:{whitelist:t.createNewLookupObject(m,f.allowedProtoMethods),defaultValue:f.allowProtoMethodsByDefault}}}function a(f,m,g){return l(typeof f=="function"?m.methods:m.properties,g)}function l(f,m){return f.whitelist[m]!==void 0?f.whitelist[m]===!0:f.defaultValue!==void 0?f.defaultValue:(c(m),!1)}function c(f){r[f]!==!0&&(r[f]=!0,i.default.log("error",'Handlebars: Access has been denied to resolve the property "'+f+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}function u(){Object.keys(r).forEach(function(f){delete r[f]})}return Kr}var Gf;function Sd(){if(Gf)return Vn;Gf=1,Vn.__esModule=!0,Vn.HandlebarsEnvironment=v;function e(E){return E&&E.__esModule?E:{default:E}}var t=Tn(),n=ri(),i=e(n),r=ov(),s=bE(),a=av(),l=e(a),c=lv(),u="4.7.8";Vn.VERSION=u;var f=8;Vn.COMPILER_REVISION=f;var m=7;Vn.LAST_COMPATIBLE_COMPILER_REVISION=m;var g={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};Vn.REVISION_CHANGES=g;var h="[object Object]";function v(E,b,w){this.helpers=E||{},this.partials=b||{},this.decorators=w||{},r.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}v.prototype={constructor:v,logger:l.default,log:l.default.log,registerHelper:function(b,w){if(t.toString.call(b)===h){if(w)throw new i.default("Arg not supported with multiple helpers");t.extend(this.helpers,b)}else this.helpers[b]=w},unregisterHelper:function(b){delete this.helpers[b]},registerPartial:function(b,w){if(t.toString.call(b)===h)t.extend(this.partials,b);else{if(typeof w>"u")throw new i.default('Attempting to register a partial called "'+b+'" as undefined');this.partials[b]=w}},unregisterPartial:function(b){delete this.partials[b]},registerDecorator:function(b,w){if(t.toString.call(b)===h){if(w)throw new i.default("Arg not supported with multiple decorators");t.extend(this.decorators,b)}else this.decorators[b]=w},unregisterDecorator:function(b){delete this.decorators[b]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var y=l.default.log;return Vn.log=y,Vn.createFrame=t.createFrame,Vn.logger=l.default,Vn}var da={exports:{}},Hf;function CE(){return Hf||(Hf=1,function(e,t){t.__esModule=!0;function n(i){this.string=i}n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default}(da,da.exports)),da.exports}var Ci={},fa={},Bf;function EE(){if(Bf)return fa;Bf=1,fa.__esModule=!0,fa.wrapHelper=e;function e(t,n){if(typeof t!="function")return t;var i=function(){var s=arguments[arguments.length-1];return arguments[arguments.length-1]=n(s),t.apply(this,arguments)};return i}return fa}var Wf;function xE(){if(Wf)return Ci;Wf=1,Ci.__esModule=!0,Ci.checkRevision=f,Ci.template=m,Ci.wrapProgram=g,Ci.resolvePartial=h,Ci.invokePartial=v,Ci.noop=y;function e(x){return x&&x.__esModule?x:{default:x}}function t(x){if(x&&x.__esModule)return x;var D={};if(x!=null)for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(D[O]=x[O]);return D.default=x,D}var n=Tn(),i=t(n),r=ri(),s=e(r),a=Sd(),l=ov(),c=EE(),u=lv();function f(x){var D=x&&x[0]||1,O=a.COMPILER_REVISION;if(!(D>=a.LAST_COMPATIBLE_COMPILER_REVISION&&D<=a.COMPILER_REVISION))if(D<a.LAST_COMPATIBLE_COMPILER_REVISION){var R=a.REVISION_CHANGES[O],I=a.REVISION_CHANGES[D];throw new s.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+R+") or downgrade your runtime to an older version ("+I+").")}else throw new s.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+x[1]+").")}function m(x,D){if(!D)throw new s.default("No environment passed to template");if(!x||!x.main)throw new s.default("Unknown template object: "+typeof x);x.main.decorator=x.main_d,D.VM.checkRevision(x.compiler);var O=x.compiler&&x.compiler[0]===7;function R(M,B,z){z.hash&&(B=i.extend({},B,z.hash),z.ids&&(z.ids[0]=!0)),M=D.VM.resolvePartial.call(this,M,B,z);var te=i.extend({},z,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),pe=D.VM.invokePartial.call(this,M,B,te);if(pe==null&&D.compile&&(z.partials[z.name]=D.compile(M,x.compilerOptions,D),pe=z.partials[z.name](B,te)),pe!=null){if(z.indent){for(var Ce=pe.split(`
`),Oe=0,ve=Ce.length;Oe<ve&&!(!Ce[Oe]&&Oe+1===ve);Oe++)Ce[Oe]=z.indent+Ce[Oe];pe=Ce.join(`
`)}return pe}else throw new s.default("The partial "+z.name+" could not be compiled when running in runtime-only mode")}var I={strict:function(B,z,te){if(!B||!(z in B))throw new s.default('"'+z+'" not defined in '+B,{loc:te});return I.lookupProperty(B,z)},lookupProperty:function(B,z){var te=B[z];if(te==null||Object.prototype.hasOwnProperty.call(B,z)||u.resultIsAllowed(te,I.protoAccessControl,z))return te},lookup:function(B,z){for(var te=B.length,pe=0;pe<te;pe++){var Ce=B[pe]&&I.lookupProperty(B[pe],z);if(Ce!=null)return B[pe][z]}},lambda:function(B,z){return typeof B=="function"?B.call(z):B},escapeExpression:i.escapeExpression,invokePartial:R,fn:function(B){var z=x[B];return z.decorator=x[B+"_d"],z},programs:[],program:function(B,z,te,pe,Ce){var Oe=this.programs[B],ve=this.fn(B);return z||Ce||pe||te?Oe=g(this,B,ve,z,te,pe,Ce):Oe||(Oe=this.programs[B]=g(this,B,ve)),Oe},data:function(B,z){for(;B&&z--;)B=B._parent;return B},mergeIfNeeded:function(B,z){var te=B||z;return B&&z&&B!==z&&(te=i.extend({},z,B)),te},nullContext:Object.seal({}),noop:D.VM.noop,compilerInfo:x.compiler};function P(M){var B=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],z=B.data;P._setup(B),!B.partial&&x.useData&&(z=E(M,z));var te=void 0,pe=x.useBlockParams?[]:void 0;x.useDepths&&(B.depths?te=M!=B.depths[0]?[M].concat(B.depths):B.depths:te=[M]);function Ce(Oe){return""+x.main(I,Oe,I.helpers,I.partials,z,pe,te)}return Ce=b(x.main,Ce,I,B.depths||[],z,pe),Ce(M,B)}return P.isTop=!0,P._setup=function(M){if(M.partial)I.protoAccessControl=M.protoAccessControl,I.helpers=M.helpers,I.partials=M.partials,I.decorators=M.decorators,I.hooks=M.hooks;else{var B=i.extend({},D.helpers,M.helpers);w(B,I),I.helpers=B,x.usePartial&&(I.partials=I.mergeIfNeeded(M.partials,D.partials)),(x.usePartial||x.useDecorators)&&(I.decorators=i.extend({},D.decorators,M.decorators)),I.hooks={},I.protoAccessControl=u.createProtoAccessControl(M);var z=M.allowCallsToHelperMissing||O;l.moveHelperToHooks(I,"helperMissing",z),l.moveHelperToHooks(I,"blockHelperMissing",z)}},P._child=function(M,B,z,te){if(x.useBlockParams&&!z)throw new s.default("must pass block params");if(x.useDepths&&!te)throw new s.default("must pass parent depths");return g(I,M,x[M],B,0,z,te)},P}function g(x,D,O,R,I,P,M){function B(z){var te=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],pe=M;return M&&z!=M[0]&&!(z===x.nullContext&&M[0]===null)&&(pe=[z].concat(M)),O(x,z,x.helpers,x.partials,te.data||R,P&&[te.blockParams].concat(P),pe)}return B=b(O,B,x,M,R,P),B.program=D,B.depth=M?M.length:0,B.blockParams=I||0,B}function h(x,D,O){return x?!x.call&&!O.name&&(O.name=x,x=O.partials[x]):O.name==="@partial-block"?x=O.data["partial-block"]:x=O.partials[O.name],x}function v(x,D,O){var R=O.data&&O.data["partial-block"];O.partial=!0,O.ids&&(O.data.contextPath=O.ids[0]||O.data.contextPath);var I=void 0;if(O.fn&&O.fn!==y&&function(){O.data=a.createFrame(O.data);var P=O.fn;I=O.data["partial-block"]=function(B){var z=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return z.data=a.createFrame(z.data),z.data["partial-block"]=R,P(B,z)},P.partials&&(O.partials=i.extend({},O.partials,P.partials))}(),x===void 0&&I&&(x=I),x===void 0)throw new s.default("The partial "+O.name+" could not be found");if(x instanceof Function)return x(D,O)}function y(){return""}function E(x,D){return(!D||!("root"in D))&&(D=D?a.createFrame(D):{},D.root=x),D}function b(x,D,O,R,I,P){if(x.decorator){var M={};D=x.decorator(D,M,O,R&&R[0],I,P,R),i.extend(D,M)}return D}function w(x,D){Object.keys(x).forEach(function(O){var R=x[O];x[O]=T(R,D)})}function T(x,D){var O=D.lookupProperty;return c.wrapHelper(x,function(R){return i.extend({lookupProperty:O},R)})}return Ci}var ha={exports:{}},Uf;function uv(){return Uf||(Uf=1,function(e,t){t.__esModule=!0,t.default=function(n){(function(){typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();var i=globalThis.Handlebars;n.noConflict=function(){return globalThis.Handlebars===n&&(globalThis.Handlebars=i),n}},e.exports=t.default}(ha,ha.exports)),ha.exports}var jf;function DE(){return jf||(jf=1,function(e,t){t.__esModule=!0;function n(w){return w&&w.__esModule?w:{default:w}}function i(w){if(w&&w.__esModule)return w;var T={};if(w!=null)for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(T[x]=w[x]);return T.default=w,T}var r=Sd(),s=i(r),a=CE(),l=n(a),c=ri(),u=n(c),f=Tn(),m=i(f),g=xE(),h=i(g),v=uv(),y=n(v);function E(){var w=new s.HandlebarsEnvironment;return m.extend(w,s),w.SafeString=l.default,w.Exception=u.default,w.Utils=m,w.escapeExpression=m.escapeExpression,w.VM=h,w.template=function(T){return h.template(T,w)},w}var b=E();b.create=E,y.default(b),b.default=b,t.default=b,e.exports=t.default}(Xo,Xo.exports)),Xo.exports}var pa={exports:{}},Yf;function cv(){return Yf||(Yf=1,function(e,t){t.__esModule=!0;var n={helpers:{helperExpression:function(r){return r.type==="SubExpression"||(r.type==="MustacheStatement"||r.type==="BlockStatement")&&!!(r.params&&r.params.length||r.hash)},scopedId:function(r){return/^\.|this\b/.test(r.original)},simpleId:function(r){return r.parts.length===1&&!n.helpers.scopedId(r)&&!r.depth}}};t.default=n,e.exports=t.default}(pa,pa.exports)),pa.exports}var Jr={},ga={exports:{}},zf;function TE(){return zf||(zf=1,function(e,t){t.__esModule=!0;var n=function(){var i={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(l,c,u,f,m,g,h){var v=g.length-1;switch(m){case 1:return g[v-1];case 2:this.$=f.prepareProgram(g[v]);break;case 3:this.$=g[v];break;case 4:this.$=g[v];break;case 5:this.$=g[v];break;case 6:this.$=g[v];break;case 7:this.$=g[v];break;case 8:this.$=g[v];break;case 9:this.$={type:"CommentStatement",value:f.stripComment(g[v]),strip:f.stripFlags(g[v],g[v]),loc:f.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:g[v],value:g[v],loc:f.locInfo(this._$)};break;case 11:this.$=f.prepareRawBlock(g[v-2],g[v-1],g[v],this._$);break;case 12:this.$={path:g[v-3],params:g[v-2],hash:g[v-1]};break;case 13:this.$=f.prepareBlock(g[v-3],g[v-2],g[v-1],g[v],!1,this._$);break;case 14:this.$=f.prepareBlock(g[v-3],g[v-2],g[v-1],g[v],!0,this._$);break;case 15:this.$={open:g[v-5],path:g[v-4],params:g[v-3],hash:g[v-2],blockParams:g[v-1],strip:f.stripFlags(g[v-5],g[v])};break;case 16:this.$={path:g[v-4],params:g[v-3],hash:g[v-2],blockParams:g[v-1],strip:f.stripFlags(g[v-5],g[v])};break;case 17:this.$={path:g[v-4],params:g[v-3],hash:g[v-2],blockParams:g[v-1],strip:f.stripFlags(g[v-5],g[v])};break;case 18:this.$={strip:f.stripFlags(g[v-1],g[v-1]),program:g[v]};break;case 19:var y=f.prepareBlock(g[v-2],g[v-1],g[v],g[v],!1,this._$),E=f.prepareProgram([y],g[v-1].loc);E.chained=!0,this.$={strip:g[v-2].strip,program:E,chain:!0};break;case 20:this.$=g[v];break;case 21:this.$={path:g[v-1],strip:f.stripFlags(g[v-2],g[v])};break;case 22:this.$=f.prepareMustache(g[v-3],g[v-2],g[v-1],g[v-4],f.stripFlags(g[v-4],g[v]),this._$);break;case 23:this.$=f.prepareMustache(g[v-3],g[v-2],g[v-1],g[v-4],f.stripFlags(g[v-4],g[v]),this._$);break;case 24:this.$={type:"PartialStatement",name:g[v-3],params:g[v-2],hash:g[v-1],indent:"",strip:f.stripFlags(g[v-4],g[v]),loc:f.locInfo(this._$)};break;case 25:this.$=f.preparePartialBlock(g[v-2],g[v-1],g[v],this._$);break;case 26:this.$={path:g[v-3],params:g[v-2],hash:g[v-1],strip:f.stripFlags(g[v-4],g[v])};break;case 27:this.$=g[v];break;case 28:this.$=g[v];break;case 29:this.$={type:"SubExpression",path:g[v-3],params:g[v-2],hash:g[v-1],loc:f.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:g[v],loc:f.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:f.id(g[v-2]),value:g[v],loc:f.locInfo(this._$)};break;case 32:this.$=f.id(g[v-1]);break;case 33:this.$=g[v];break;case 34:this.$=g[v];break;case 35:this.$={type:"StringLiteral",value:g[v],original:g[v],loc:f.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(g[v]),original:Number(g[v]),loc:f.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:g[v]==="true",original:g[v]==="true",loc:f.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:f.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:f.locInfo(this._$)};break;case 40:this.$=g[v];break;case 41:this.$=g[v];break;case 42:this.$=f.preparePath(!0,g[v],this._$);break;case 43:this.$=f.preparePath(!1,g[v],this._$);break;case 44:g[v-2].push({part:f.id(g[v]),original:g[v],separator:g[v-1]}),this.$=g[v-2];break;case 45:this.$=[{part:f.id(g[v]),original:g[v]}];break;case 46:this.$=[];break;case 47:g[v-1].push(g[v]);break;case 48:this.$=[];break;case 49:g[v-1].push(g[v]);break;case 50:this.$=[];break;case 51:g[v-1].push(g[v]);break;case 58:this.$=[];break;case 59:g[v-1].push(g[v]);break;case 64:this.$=[];break;case 65:g[v-1].push(g[v]);break;case 70:this.$=[];break;case 71:g[v-1].push(g[v]);break;case 78:this.$=[];break;case 79:g[v-1].push(g[v]);break;case 82:this.$=[];break;case 83:g[v-1].push(g[v]);break;case 86:this.$=[];break;case 87:g[v-1].push(g[v]);break;case 90:this.$=[];break;case 91:g[v-1].push(g[v]);break;case 94:this.$=[];break;case 95:g[v-1].push(g[v]);break;case 98:this.$=[g[v]];break;case 99:g[v-1].push(g[v]);break;case 100:this.$=[g[v]];break;case 101:g[v-1].push(g[v]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(l,c){throw new Error(l)},parse:function(l){var c=this,u=[0],f=[null],m=[],g=this.table,h="",v=0,y=0;this.lexer.setInput(l),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var E=this.lexer.yylloc;m.push(E);var b=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function w(){var te;return te=c.lexer.lex()||1,typeof te!="number"&&(te=c.symbols_[te]||te),te}for(var T,x,D,O,R={},I,P,M,B;;){if(x=u[u.length-1],this.defaultActions[x]?D=this.defaultActions[x]:((T===null||typeof T>"u")&&(T=w()),D=g[x]&&g[x][T]),typeof D>"u"||!D.length||!D[0]){var z="";{B=[];for(I in g[x])this.terminals_[I]&&I>2&&B.push("'"+this.terminals_[I]+"'");this.lexer.showPosition?z="Parse error on line "+(v+1)+`:
`+this.lexer.showPosition()+`
Expecting `+B.join(", ")+", got '"+(this.terminals_[T]||T)+"'":z="Parse error on line "+(v+1)+": Unexpected "+(T==1?"end of input":"'"+(this.terminals_[T]||T)+"'"),this.parseError(z,{text:this.lexer.match,token:this.terminals_[T]||T,line:this.lexer.yylineno,loc:E,expected:B})}}if(D[0]instanceof Array&&D.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+T);switch(D[0]){case 1:u.push(T),f.push(this.lexer.yytext),m.push(this.lexer.yylloc),u.push(D[1]),T=null,y=this.lexer.yyleng,h=this.lexer.yytext,v=this.lexer.yylineno,E=this.lexer.yylloc;break;case 2:if(P=this.productions_[D[1]][1],R.$=f[f.length-P],R._$={first_line:m[m.length-(P||1)].first_line,last_line:m[m.length-1].last_line,first_column:m[m.length-(P||1)].first_column,last_column:m[m.length-1].last_column},b&&(R._$.range=[m[m.length-(P||1)].range[0],m[m.length-1].range[1]]),O=this.performAction.call(R,h,y,v,this.yy,D[1],f,m),typeof O<"u")return O;P&&(u=u.slice(0,-1*P*2),f=f.slice(0,-1*P),m=m.slice(0,-1*P)),u.push(this.productions_[D[1]][0]),f.push(R.$),m.push(R._$),M=g[u[u.length-2]][u[u.length-1]],u.push(M);break;case 3:return!0}}return!0}},r=function(){var a={EOF:1,parseError:function(c,u){if(this.yy.parser)this.yy.parser.parseError(c,u);else throw new Error(c)},setInput:function(c){return this._input=c,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var c=this._input[0];this.yytext+=c,this.yyleng++,this.offset++,this.match+=c,this.matched+=c;var u=c.match(/(?:\r\n?|\n).*/g);return u?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),c},unput:function(c){var u=c.length,f=c.split(/(?:\r\n?|\n)/g);this._input=c+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-u-1),this.offset-=u;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),f.length-1&&(this.yylineno-=f.length-1);var g=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:f?(f.length===m.length?this.yylloc.first_column:0)+m[m.length-f.length].length-f[0].length:this.yylloc.first_column-u},this.options.ranges&&(this.yylloc.range=[g[0],g[0]+this.yyleng-u]),this},more:function(){return this._more=!0,this},less:function(c){this.unput(this.match.slice(c))},pastInput:function(){var c=this.matched.substr(0,this.matched.length-this.match.length);return(c.length>20?"...":"")+c.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var c=this.match;return c.length<20&&(c+=this._input.substr(0,20-c.length)),(c.substr(0,20)+(c.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var c=this.pastInput(),u=new Array(c.length+1).join("-");return c+this.upcomingInput()+`
`+u+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var c,u,f,m,g;this._more||(this.yytext="",this.match="");for(var h=this._currentRules(),v=0;v<h.length&&(f=this._input.match(this.rules[h[v]]),!(f&&(!u||f[0].length>u[0].length)&&(u=f,m=v,!this.options.flex)));v++);return u?(g=u[0].match(/(?:\r\n?|\n).*/g),g&&(this.yylineno+=g.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:g?g[g.length-1].length-g[g.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+u[0].length},this.yytext+=u[0],this.match+=u[0],this.matches=u,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(u[0].length),this.matched+=u[0],c=this.performAction.call(this,this.yy,this,h[m],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),c||void 0):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var c=this.next();return typeof c<"u"?c:this.lex()},begin:function(c){this.conditionStack.push(c)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(c){this.begin(c)}};return a.options={},a.performAction=function(c,u,f,m){function g(h,v){return u.yytext=u.yytext.substring(h,u.yyleng-v+h)}switch(f){case 0:if(u.yytext.slice(-2)==="\\\\"?(g(0,1),this.begin("mu")):u.yytext.slice(-1)==="\\"?(g(0,1),this.begin("emu")):this.begin("mu"),u.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw"?15:(g(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(u.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return u.yytext=g(1,2).replace(/\\"/g,'"'),80;case 32:return u.yytext=g(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return u.yytext=u.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},a}();i.lexer=r;function s(){this.yy={}}return s.prototype=i,i.Parser=s,new s}();t.default=n,e.exports=t.default}(ga,ga.exports)),ga.exports}var ma={exports:{}},va={exports:{}},qf;function dv(){return qf||(qf=1,function(e,t){t.__esModule=!0;function n(u){return u&&u.__esModule?u:{default:u}}var i=ri(),r=n(i);function s(){this.parents=[]}s.prototype={constructor:s,mutating:!1,acceptKey:function(f,m){var g=this.accept(f[m]);if(this.mutating){if(g&&!s.prototype[g.type])throw new r.default('Unexpected node type "'+g.type+'" found when accepting '+m+" on "+f.type);f[m]=g}},acceptRequired:function(f,m){if(this.acceptKey(f,m),!f[m])throw new r.default(f.type+" requires "+m)},acceptArray:function(f){for(var m=0,g=f.length;m<g;m++)this.acceptKey(f,m),f[m]||(f.splice(m,1),m--,g--)},accept:function(f){if(f){if(!this[f.type])throw new r.default("Unknown type: "+f.type,f);this.current&&this.parents.unshift(this.current),this.current=f;var m=this[f.type](f);if(this.current=this.parents.shift(),!this.mutating||m)return m;if(m!==!1)return f}},Program:function(f){this.acceptArray(f.body)},MustacheStatement:a,Decorator:a,BlockStatement:l,DecoratorBlock:l,PartialStatement:c,PartialBlockStatement:function(f){c.call(this,f),this.acceptKey(f,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:a,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(f){this.acceptArray(f.pairs)},HashPair:function(f){this.acceptRequired(f,"value")}};function a(u){this.acceptRequired(u,"path"),this.acceptArray(u.params),this.acceptKey(u,"hash")}function l(u){a.call(this,u),this.acceptKey(u,"program"),this.acceptKey(u,"inverse")}function c(u){this.acceptRequired(u,"name"),this.acceptArray(u.params),this.acceptKey(u,"hash")}t.default=s,e.exports=t.default}(va,va.exports)),va.exports}var Qf;function SE(){return Qf||(Qf=1,function(e,t){t.__esModule=!0;function n(f){return f&&f.__esModule?f:{default:f}}var i=dv(),r=n(i);function s(){var f=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=f}s.prototype=new r.default,s.prototype.Program=function(f){var m=!this.options.ignoreStandalone,g=!this.isRootSeen;this.isRootSeen=!0;for(var h=f.body,v=0,y=h.length;v<y;v++){var E=h[v],b=this.accept(E);if(b){var w=a(h,v,g),T=l(h,v,g),x=b.openStandalone&&w,D=b.closeStandalone&&T,O=b.inlineStandalone&&w&&T;b.close&&c(h,v,!0),b.open&&u(h,v,!0),m&&O&&(c(h,v),u(h,v)&&E.type==="PartialStatement"&&(E.indent=/([ \t]+$)/.exec(h[v-1].original)[1])),m&&x&&(c((E.program||E.inverse).body),u(h,v)),m&&D&&(c(h,v),u((E.inverse||E.program).body))}}return f},s.prototype.BlockStatement=s.prototype.DecoratorBlock=s.prototype.PartialBlockStatement=function(f){this.accept(f.program),this.accept(f.inverse);var m=f.program||f.inverse,g=f.program&&f.inverse,h=g,v=g;if(g&&g.chained)for(h=g.body[0].program;v.chained;)v=v.body[v.body.length-1].program;var y={open:f.openStrip.open,close:f.closeStrip.close,openStandalone:l(m.body),closeStandalone:a((h||m).body)};if(f.openStrip.close&&c(m.body,null,!0),g){var E=f.inverseStrip;E.open&&u(m.body,null,!0),E.close&&c(h.body,null,!0),f.closeStrip.open&&u(v.body,null,!0),!this.options.ignoreStandalone&&a(m.body)&&l(h.body)&&(u(m.body),c(h.body))}else f.closeStrip.open&&u(m.body,null,!0);return y},s.prototype.Decorator=s.prototype.MustacheStatement=function(f){return f.strip},s.prototype.PartialStatement=s.prototype.CommentStatement=function(f){var m=f.strip||{};return{inlineStandalone:!0,open:m.open,close:m.close}};function a(f,m,g){m===void 0&&(m=f.length);var h=f[m-1],v=f[m-2];if(!h)return g;if(h.type==="ContentStatement")return(v||!g?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(h.original)}function l(f,m,g){m===void 0&&(m=-1);var h=f[m+1],v=f[m+2];if(!h)return g;if(h.type==="ContentStatement")return(v||!g?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(h.original)}function c(f,m,g){var h=f[m==null?0:m+1];if(!(!h||h.type!=="ContentStatement"||!g&&h.rightStripped)){var v=h.value;h.value=h.value.replace(g?/^\s+/:/^[ \t]*\r?\n?/,""),h.rightStripped=h.value!==v}}function u(f,m,g){var h=f[m==null?f.length-1:m-1];if(!(!h||h.type!=="ContentStatement"||!g&&h.leftStripped)){var v=h.value;return h.value=h.value.replace(g?/\s+$/:/[ \t]+$/,""),h.leftStripped=h.value!==v,h.leftStripped}}t.default=s,e.exports=t.default}(ma,ma.exports)),ma.exports}var kn={},$f;function kE(){if($f)return kn;$f=1,kn.__esModule=!0,kn.SourceLocation=r,kn.id=s,kn.stripFlags=a,kn.stripComment=l,kn.preparePath=c,kn.prepareMustache=u,kn.prepareRawBlock=f,kn.prepareBlock=m,kn.prepareProgram=g,kn.preparePartialBlock=h;function e(v){return v&&v.__esModule?v:{default:v}}var t=ri(),n=e(t);function i(v,y){if(y=y.path?y.path.original:y,v.path.original!==y){var E={loc:v.path.loc};throw new n.default(v.path.original+" doesn't match "+y,E)}}function r(v,y){this.source=v,this.start={line:y.first_line,column:y.first_column},this.end={line:y.last_line,column:y.last_column}}function s(v){return/^\[.*\]$/.test(v)?v.substring(1,v.length-1):v}function a(v,y){return{open:v.charAt(2)==="~",close:y.charAt(y.length-3)==="~"}}function l(v){return v.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function c(v,y,E){E=this.locInfo(E);for(var b=v?"@":"",w=[],T=0,x=0,D=y.length;x<D;x++){var O=y[x].part,R=y[x].original!==O;if(b+=(y[x].separator||"")+O,!R&&(O===".."||O==="."||O==="this")){if(w.length>0)throw new n.default("Invalid path: "+b,{loc:E});O===".."&&T++}else w.push(O)}return{type:"PathExpression",data:v,depth:T,parts:w,original:b,loc:E}}function u(v,y,E,b,w,T){var x=b.charAt(3)||b.charAt(2),D=x!=="{"&&x!=="&",O=/\*/.test(b);return{type:O?"Decorator":"MustacheStatement",path:v,params:y,hash:E,escaped:D,strip:w,loc:this.locInfo(T)}}function f(v,y,E,b){i(v,E),b=this.locInfo(b);var w={type:"Program",body:y,strip:{},loc:b};return{type:"BlockStatement",path:v.path,params:v.params,hash:v.hash,program:w,openStrip:{},inverseStrip:{},closeStrip:{},loc:b}}function m(v,y,E,b,w,T){b&&b.path&&i(v,b);var x=/\*/.test(v.open);y.blockParams=v.blockParams;var D=void 0,O=void 0;if(E){if(x)throw new n.default("Unexpected inverse block on decorator",E);E.chain&&(E.program.body[0].closeStrip=b.strip),O=E.strip,D=E.program}return w&&(w=D,D=y,y=w),{type:x?"DecoratorBlock":"BlockStatement",path:v.path,params:v.params,hash:v.hash,program:y,inverse:D,openStrip:v.strip,inverseStrip:O,closeStrip:b&&b.strip,loc:this.locInfo(T)}}function g(v,y){if(!y&&v.length){var E=v[0].loc,b=v[v.length-1].loc;E&&b&&(y={source:E.source,start:{line:E.start.line,column:E.start.column},end:{line:b.end.line,column:b.end.column}})}return{type:"Program",body:v,strip:{},loc:y}}function h(v,y,E,b){return i(v,E),{type:"PartialBlockStatement",name:v.path,params:v.params,hash:v.hash,program:y,openStrip:v.strip,closeStrip:E&&E.strip,loc:this.locInfo(b)}}return kn}var Vf;function OE(){if(Vf)return Jr;Vf=1,Jr.__esModule=!0,Jr.parseWithoutProcessing=f,Jr.parse=m;function e(g){if(g&&g.__esModule)return g;var h={};if(g!=null)for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(h[v]=g[v]);return h.default=g,h}function t(g){return g&&g.__esModule?g:{default:g}}var n=TE(),i=t(n),r=SE(),s=t(r),a=kE(),l=e(a),c=Tn();Jr.parser=i.default;var u={};c.extend(u,l);function f(g,h){if(g.type==="Program")return g;i.default.yy=u,u.locInfo=function(y){return new u.SourceLocation(h&&h.srcName,y)};var v=i.default.parse(g);return v}function m(g,h){var v=f(g,h),y=new s.default(h);return y.accept(v)}return Jr}var Xr={},Kf;function IE(){if(Kf)return Xr;Kf=1,Xr.__esModule=!0,Xr.Compiler=l,Xr.precompile=c,Xr.compile=u;function e(g){return g&&g.__esModule?g:{default:g}}var t=ri(),n=e(t),i=Tn(),r=cv(),s=e(r),a=[].slice;function l(){}l.prototype={compiler:l,equals:function(h){var v=this.opcodes.length;if(h.opcodes.length!==v)return!1;for(var y=0;y<v;y++){var E=this.opcodes[y],b=h.opcodes[y];if(E.opcode!==b.opcode||!f(E.args,b.args))return!1}v=this.children.length;for(var y=0;y<v;y++)if(!this.children[y].equals(h.children[y]))return!1;return!0},guid:0,compile:function(h,v){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=v,this.stringParams=v.stringParams,this.trackIds=v.trackIds,v.blockParams=v.blockParams||[],v.knownHelpers=i.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},v.knownHelpers),this.accept(h)},compileProgram:function(h){var v=new this.compiler,y=v.compile(h,this.options),E=this.guid++;return this.usePartial=this.usePartial||y.usePartial,this.children[E]=y,this.useDepths=this.useDepths||y.useDepths,E},accept:function(h){if(!this[h.type])throw new n.default("Unknown type: "+h.type,h);this.sourceNode.unshift(h);var v=this[h.type](h);return this.sourceNode.shift(),v},Program:function(h){this.options.blockParams.unshift(h.blockParams);for(var v=h.body,y=v.length,E=0;E<y;E++)this.accept(v[E]);return this.options.blockParams.shift(),this.isSimple=y===1,this.blockParams=h.blockParams?h.blockParams.length:0,this},BlockStatement:function(h){m(h);var v=h.program,y=h.inverse;v=v&&this.compileProgram(v),y=y&&this.compileProgram(y);var E=this.classifySexpr(h);E==="helper"?this.helperSexpr(h,v,y):E==="simple"?(this.simpleSexpr(h),this.opcode("pushProgram",v),this.opcode("pushProgram",y),this.opcode("emptyHash"),this.opcode("blockValue",h.path.original)):(this.ambiguousSexpr(h,v,y),this.opcode("pushProgram",v),this.opcode("pushProgram",y),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(h){var v=h.program&&this.compileProgram(h.program),y=this.setupFullMustacheParams(h,v,void 0),E=h.path;this.useDecorators=!0,this.opcode("registerDecorator",y.length,E.original)},PartialStatement:function(h){this.usePartial=!0;var v=h.program;v&&(v=this.compileProgram(h.program));var y=h.params;if(y.length>1)throw new n.default("Unsupported number of partial arguments: "+y.length,h);y.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):y.push({type:"PathExpression",parts:[],depth:0}));var E=h.name.original,b=h.name.type==="SubExpression";b&&this.accept(h.name),this.setupFullMustacheParams(h,v,void 0,!0);var w=h.indent||"";this.options.preventIndent&&w&&(this.opcode("appendContent",w),w=""),this.opcode("invokePartial",b,E,w),this.opcode("append")},PartialBlockStatement:function(h){this.PartialStatement(h)},MustacheStatement:function(h){this.SubExpression(h),h.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(h){this.DecoratorBlock(h)},ContentStatement:function(h){h.value&&this.opcode("appendContent",h.value)},CommentStatement:function(){},SubExpression:function(h){m(h);var v=this.classifySexpr(h);v==="simple"?this.simpleSexpr(h):v==="helper"?this.helperSexpr(h):this.ambiguousSexpr(h)},ambiguousSexpr:function(h,v,y){var E=h.path,b=E.parts[0],w=v!=null||y!=null;this.opcode("getContext",E.depth),this.opcode("pushProgram",v),this.opcode("pushProgram",y),E.strict=!0,this.accept(E),this.opcode("invokeAmbiguous",b,w)},simpleSexpr:function(h){var v=h.path;v.strict=!0,this.accept(v),this.opcode("resolvePossibleLambda")},helperSexpr:function(h,v,y){var E=this.setupFullMustacheParams(h,v,y),b=h.path,w=b.parts[0];if(this.options.knownHelpers[w])this.opcode("invokeKnownHelper",E.length,w);else{if(this.options.knownHelpersOnly)throw new n.default("You specified knownHelpersOnly, but used the unknown helper "+w,h);b.strict=!0,b.falsy=!0,this.accept(b),this.opcode("invokeHelper",E.length,b.original,s.default.helpers.simpleId(b))}},PathExpression:function(h){this.addDepth(h.depth),this.opcode("getContext",h.depth);var v=h.parts[0],y=s.default.helpers.scopedId(h),E=!h.depth&&!y&&this.blockParamIndex(v);E?this.opcode("lookupBlockParam",E,h.parts):v?h.data?(this.options.data=!0,this.opcode("lookupData",h.depth,h.parts,h.strict)):this.opcode("lookupOnContext",h.parts,h.falsy,h.strict,y):this.opcode("pushContext")},StringLiteral:function(h){this.opcode("pushString",h.value)},NumberLiteral:function(h){this.opcode("pushLiteral",h.value)},BooleanLiteral:function(h){this.opcode("pushLiteral",h.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(h){var v=h.pairs,y=0,E=v.length;for(this.opcode("pushHash");y<E;y++)this.pushParam(v[y].value);for(;y--;)this.opcode("assignToHash",v[y].key);this.opcode("popHash")},opcode:function(h){this.opcodes.push({opcode:h,args:a.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(h){h&&(this.useDepths=!0)},classifySexpr:function(h){var v=s.default.helpers.simpleId(h.path),y=v&&!!this.blockParamIndex(h.path.parts[0]),E=!y&&s.default.helpers.helperExpression(h),b=!y&&(E||v);if(b&&!E){var w=h.path.parts[0],T=this.options;T.knownHelpers[w]?E=!0:T.knownHelpersOnly&&(b=!1)}return E?"helper":b?"ambiguous":"simple"},pushParams:function(h){for(var v=0,y=h.length;v<y;v++)this.pushParam(h[v])},pushParam:function(h){var v=h.value!=null?h.value:h.original||"";if(this.stringParams)v.replace&&(v=v.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),h.depth&&this.addDepth(h.depth),this.opcode("getContext",h.depth||0),this.opcode("pushStringParam",v,h.type),h.type==="SubExpression"&&this.accept(h);else{if(this.trackIds){var y=void 0;if(h.parts&&!s.default.helpers.scopedId(h)&&!h.depth&&(y=this.blockParamIndex(h.parts[0])),y){var E=h.parts.slice(1).join(".");this.opcode("pushId","BlockParam",y,E)}else v=h.original||v,v.replace&&(v=v.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",h.type,v)}this.accept(h)}},setupFullMustacheParams:function(h,v,y,E){var b=h.params;return this.pushParams(b),this.opcode("pushProgram",v),this.opcode("pushProgram",y),h.hash?this.accept(h.hash):this.opcode("emptyHash",E),b},blockParamIndex:function(h){for(var v=0,y=this.options.blockParams.length;v<y;v++){var E=this.options.blockParams[v],b=E&&i.indexOf(E,h);if(E&&b>=0)return[v,b]}}};function c(g,h,v){if(g==null||typeof g!="string"&&g.type!=="Program")throw new n.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+g);h=h||{},"data"in h||(h.data=!0),h.compat&&(h.useDepths=!0);var y=v.parse(g,h),E=new v.Compiler().compile(y,h);return new v.JavaScriptCompiler().compile(E,h)}function u(g,h,v){if(h===void 0&&(h={}),g==null||typeof g!="string"&&g.type!=="Program")throw new n.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+g);h=i.extend({},h),"data"in h||(h.data=!0),h.compat&&(h.useDepths=!0);var y=void 0;function E(){var w=v.parse(g,h),T=new v.Compiler().compile(w,h),x=new v.JavaScriptCompiler().compile(T,h,void 0,!0);return v.template(x)}function b(w,T){return y||(y=E()),y.call(this,w,T)}return b._setup=function(w){return y||(y=E()),y._setup(w)},b._child=function(w,T,x,D){return y||(y=E()),y._child(w,T,x,D)},b}function f(g,h){if(g===h)return!0;if(i.isArray(g)&&i.isArray(h)&&g.length===h.length){for(var v=0;v<g.length;v++)if(!f(g[v],h[v]))return!1;return!0}}function m(g){if(!g.path.parts){var h=g.path;g.path={type:"PathExpression",data:!1,depth:0,parts:[h.original+""],original:h.original+"",loc:h.loc}}}return Xr}var ya={exports:{}},_a={exports:{}},Fs={},vu={},ba={},wa={},Jf;function RE(){if(Jf)return wa;Jf=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return wa.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},wa.decode=function(t){var n=65,i=90,r=97,s=122,a=48,l=57,c=43,u=47,f=26,m=52;return n<=t&&t<=i?t-n:r<=t&&t<=s?t-r+f:a<=t&&t<=l?t-a+m:t==c?62:t==u?63:-1},wa}var Xf;function fv(){if(Xf)return ba;Xf=1;var e=RE(),t=5,n=1<<t,i=n-1,r=n;function s(l){return l<0?(-l<<1)+1:(l<<1)+0}function a(l){var c=(l&1)===1,u=l>>1;return c?-u:u}return ba.encode=function(c){var u="",f,m=s(c);do f=m&i,m>>>=t,m>0&&(f|=r),u+=e.encode(f);while(m>0);return u},ba.decode=function(c,u,f){var m=c.length,g=0,h=0,v,y;do{if(u>=m)throw new Error("Expected more digits in base 64 VLQ value.");if(y=e.decode(c.charCodeAt(u++)),y===-1)throw new Error("Invalid base64 digit: "+c.charAt(u-1));v=!!(y&r),y&=i,g=g+(y<<h),h+=t}while(v);f.value=a(g),f.rest=u},ba}var yu={},Zf;function Go(){return Zf||(Zf=1,function(e){function t(x,D,O){if(D in x)return x[D];if(arguments.length===3)return O;throw new Error('"'+D+'" is a required argument.')}e.getArg=t;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,i=/^data:.+\,.+$/;function r(x){var D=x.match(n);return D?{scheme:D[1],auth:D[2],host:D[3],port:D[4],path:D[5]}:null}e.urlParse=r;function s(x){var D="";return x.scheme&&(D+=x.scheme+":"),D+="//",x.auth&&(D+=x.auth+"@"),x.host&&(D+=x.host),x.port&&(D+=":"+x.port),x.path&&(D+=x.path),D}e.urlGenerate=s;function a(x){var D=x,O=r(x);if(O){if(!O.path)return x;D=O.path}for(var R=e.isAbsolute(D),I=D.split(/\/+/),P,M=0,B=I.length-1;B>=0;B--)P=I[B],P==="."?I.splice(B,1):P===".."?M++:M>0&&(P===""?(I.splice(B+1,M),M=0):(I.splice(B,2),M--));return D=I.join("/"),D===""&&(D=R?"/":"."),O?(O.path=D,s(O)):D}e.normalize=a;function l(x,D){x===""&&(x="."),D===""&&(D=".");var O=r(D),R=r(x);if(R&&(x=R.path||"/"),O&&!O.scheme)return R&&(O.scheme=R.scheme),s(O);if(O||D.match(i))return D;if(R&&!R.host&&!R.path)return R.host=D,s(R);var I=D.charAt(0)==="/"?D:a(x.replace(/\/+$/,"")+"/"+D);return R?(R.path=I,s(R)):I}e.join=l,e.isAbsolute=function(x){return x.charAt(0)==="/"||n.test(x)};function c(x,D){x===""&&(x="."),x=x.replace(/\/$/,"");for(var O=0;D.indexOf(x+"/")!==0;){var R=x.lastIndexOf("/");if(R<0||(x=x.slice(0,R),x.match(/^([^\/]+:\/)?\/*$/)))return D;++O}return Array(O+1).join("../")+D.substr(x.length+1)}e.relative=c;var u=function(){var x=Object.create(null);return!("__proto__"in x)}();function f(x){return x}function m(x){return h(x)?"$"+x:x}e.toSetString=u?f:m;function g(x){return h(x)?x.slice(1):x}e.fromSetString=u?f:g;function h(x){if(!x)return!1;var D=x.length;if(D<9||x.charCodeAt(D-1)!==95||x.charCodeAt(D-2)!==95||x.charCodeAt(D-3)!==111||x.charCodeAt(D-4)!==116||x.charCodeAt(D-5)!==111||x.charCodeAt(D-6)!==114||x.charCodeAt(D-7)!==112||x.charCodeAt(D-8)!==95||x.charCodeAt(D-9)!==95)return!1;for(var O=D-10;O>=0;O--)if(x.charCodeAt(O)!==36)return!1;return!0}function v(x,D,O){var R=E(x.source,D.source);return R!==0||(R=x.originalLine-D.originalLine,R!==0)||(R=x.originalColumn-D.originalColumn,R!==0||O)||(R=x.generatedColumn-D.generatedColumn,R!==0)||(R=x.generatedLine-D.generatedLine,R!==0)?R:E(x.name,D.name)}e.compareByOriginalPositions=v;function y(x,D,O){var R=x.generatedLine-D.generatedLine;return R!==0||(R=x.generatedColumn-D.generatedColumn,R!==0||O)||(R=E(x.source,D.source),R!==0)||(R=x.originalLine-D.originalLine,R!==0)||(R=x.originalColumn-D.originalColumn,R!==0)?R:E(x.name,D.name)}e.compareByGeneratedPositionsDeflated=y;function E(x,D){return x===D?0:x===null?1:D===null?-1:x>D?1:-1}function b(x,D){var O=x.generatedLine-D.generatedLine;return O!==0||(O=x.generatedColumn-D.generatedColumn,O!==0)||(O=E(x.source,D.source),O!==0)||(O=x.originalLine-D.originalLine,O!==0)||(O=x.originalColumn-D.originalColumn,O!==0)?O:E(x.name,D.name)}e.compareByGeneratedPositionsInflated=b;function w(x){return JSON.parse(x.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=w;function T(x,D,O){if(D=D||"",x&&(x[x.length-1]!=="/"&&D[0]!=="/"&&(x+="/"),D=x+D),O){var R=r(O);if(!R)throw new Error("sourceMapURL could not be parsed");if(R.path){var I=R.path.lastIndexOf("/");I>=0&&(R.path=R.path.substring(0,I+1))}D=l(s(R),D)}return a(D)}e.computeSourceURL=T}(yu)),yu}var _u={},eh;function hv(){if(eh)return _u;eh=1;var e=Go(),t=Object.prototype.hasOwnProperty,n=typeof Map<"u";function i(){this._array=[],this._set=n?new Map:Object.create(null)}return i.fromArray=function(s,a){for(var l=new i,c=0,u=s.length;c<u;c++)l.add(s[c],a);return l},i.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},i.prototype.add=function(s,a){var l=n?s:e.toSetString(s),c=n?this.has(s):t.call(this._set,l),u=this._array.length;(!c||a)&&this._array.push(s),c||(n?this._set.set(s,u):this._set[l]=u)},i.prototype.has=function(s){if(n)return this._set.has(s);var a=e.toSetString(s);return t.call(this._set,a)},i.prototype.indexOf=function(s){if(n){var a=this._set.get(s);if(a>=0)return a}else{var l=e.toSetString(s);if(t.call(this._set,l))return this._set[l]}throw new Error('"'+s+'" is not in the set.')},i.prototype.at=function(s){if(s>=0&&s<this._array.length)return this._array[s];throw new Error("No element indexed by "+s)},i.prototype.toArray=function(){return this._array.slice()},_u.ArraySet=i,_u}var bu={},th;function AE(){if(th)return bu;th=1;var e=Go();function t(i,r){var s=i.generatedLine,a=r.generatedLine,l=i.generatedColumn,c=r.generatedColumn;return a>s||a==s&&c>=l||e.compareByGeneratedPositionsInflated(i,r)<=0}function n(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return n.prototype.unsortedForEach=function(r,s){this._array.forEach(r,s)},n.prototype.add=function(r){t(this._last,r)?(this._last=r,this._array.push(r)):(this._sorted=!1,this._array.push(r))},n.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},bu.MappingList=n,bu}var nh;function pv(){if(nh)return vu;nh=1;var e=fv(),t=Go(),n=hv().ArraySet,i=AE().MappingList;function r(s){s||(s={}),this._file=t.getArg(s,"file",null),this._sourceRoot=t.getArg(s,"sourceRoot",null),this._skipValidation=t.getArg(s,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new i,this._sourcesContents=null}return r.prototype._version=3,r.fromSourceMap=function(a){var l=a.sourceRoot,c=new r({file:a.file,sourceRoot:l});return a.eachMapping(function(u){var f={generated:{line:u.generatedLine,column:u.generatedColumn}};u.source!=null&&(f.source=u.source,l!=null&&(f.source=t.relative(l,f.source)),f.original={line:u.originalLine,column:u.originalColumn},u.name!=null&&(f.name=u.name)),c.addMapping(f)}),a.sources.forEach(function(u){var f=u;l!==null&&(f=t.relative(l,u)),c._sources.has(f)||c._sources.add(f);var m=a.sourceContentFor(u);m!=null&&c.setSourceContent(u,m)}),c},r.prototype.addMapping=function(a){var l=t.getArg(a,"generated"),c=t.getArg(a,"original",null),u=t.getArg(a,"source",null),f=t.getArg(a,"name",null);this._skipValidation||this._validateMapping(l,c,u,f),u!=null&&(u=String(u),this._sources.has(u)||this._sources.add(u)),f!=null&&(f=String(f),this._names.has(f)||this._names.add(f)),this._mappings.add({generatedLine:l.line,generatedColumn:l.column,originalLine:c!=null&&c.line,originalColumn:c!=null&&c.column,source:u,name:f})},r.prototype.setSourceContent=function(a,l){var c=a;this._sourceRoot!=null&&(c=t.relative(this._sourceRoot,c)),l!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(c)]=l):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(c)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},r.prototype.applySourceMap=function(a,l,c){var u=l;if(l==null){if(a.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);u=a.file}var f=this._sourceRoot;f!=null&&(u=t.relative(f,u));var m=new n,g=new n;this._mappings.unsortedForEach(function(h){if(h.source===u&&h.originalLine!=null){var v=a.originalPositionFor({line:h.originalLine,column:h.originalColumn});v.source!=null&&(h.source=v.source,c!=null&&(h.source=t.join(c,h.source)),f!=null&&(h.source=t.relative(f,h.source)),h.originalLine=v.line,h.originalColumn=v.column,v.name!=null&&(h.name=v.name))}var y=h.source;y!=null&&!m.has(y)&&m.add(y);var E=h.name;E!=null&&!g.has(E)&&g.add(E)},this),this._sources=m,this._names=g,a.sources.forEach(function(h){var v=a.sourceContentFor(h);v!=null&&(c!=null&&(h=t.join(c,h)),f!=null&&(h=t.relative(f,h)),this.setSourceContent(h,v))},this)},r.prototype._validateMapping=function(a,l,c,u){if(l&&typeof l.line!="number"&&typeof l.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(a&&"line"in a&&"column"in a&&a.line>0&&a.column>=0&&!l&&!c&&!u)){if(a&&"line"in a&&"column"in a&&l&&"line"in l&&"column"in l&&a.line>0&&a.column>=0&&l.line>0&&l.column>=0&&c)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:a,source:c,original:l,name:u}))}},r.prototype._serializeMappings=function(){for(var a=0,l=1,c=0,u=0,f=0,m=0,g="",h,v,y,E,b=this._mappings.toArray(),w=0,T=b.length;w<T;w++){if(v=b[w],h="",v.generatedLine!==l)for(a=0;v.generatedLine!==l;)h+=";",l++;else if(w>0){if(!t.compareByGeneratedPositionsInflated(v,b[w-1]))continue;h+=","}h+=e.encode(v.generatedColumn-a),a=v.generatedColumn,v.source!=null&&(E=this._sources.indexOf(v.source),h+=e.encode(E-m),m=E,h+=e.encode(v.originalLine-1-u),u=v.originalLine-1,h+=e.encode(v.originalColumn-c),c=v.originalColumn,v.name!=null&&(y=this._names.indexOf(v.name),h+=e.encode(y-f),f=y)),g+=h}return g},r.prototype._generateSourcesContent=function(a,l){return a.map(function(c){if(!this._sourcesContents)return null;l!=null&&(c=t.relative(l,c));var u=t.toSetString(c);return Object.prototype.hasOwnProperty.call(this._sourcesContents,u)?this._sourcesContents[u]:null},this)},r.prototype.toJSON=function(){var a={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(a.file=this._file),this._sourceRoot!=null&&(a.sourceRoot=this._sourceRoot),this._sourcesContents&&(a.sourcesContent=this._generateSourcesContent(a.sources,a.sourceRoot)),a},r.prototype.toString=function(){return JSON.stringify(this.toJSON())},vu.SourceMapGenerator=r,vu}var Gs={},wu={},ih;function PE(){return ih||(ih=1,function(e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function t(n,i,r,s,a,l){var c=Math.floor((i-n)/2)+n,u=a(r,s[c],!0);return u===0?c:u>0?i-c>1?t(c,i,r,s,a,l):l==e.LEAST_UPPER_BOUND?i<s.length?i:-1:c:c-n>1?t(n,c,r,s,a,l):l==e.LEAST_UPPER_BOUND?c:n<0?-1:n}e.search=function(i,r,s,a){if(r.length===0)return-1;var l=t(-1,r.length,i,r,s,a||e.GREATEST_LOWER_BOUND);if(l<0)return-1;for(;l-1>=0&&s(r[l],r[l-1],!0)===0;)--l;return l}}(wu)),wu}var Cu={},rh;function ME(){if(rh)return Cu;rh=1;function e(i,r,s){var a=i[r];i[r]=i[s],i[s]=a}function t(i,r){return Math.round(i+Math.random()*(r-i))}function n(i,r,s,a){if(s<a){var l=t(s,a),c=s-1;e(i,l,a);for(var u=i[a],f=s;f<a;f++)r(i[f],u)<=0&&(c+=1,e(i,c,f));e(i,c+1,f);var m=c+1;n(i,r,s,m-1),n(i,r,m+1,a)}}return Cu.quickSort=function(i,r){n(i,r,0,i.length-1)},Cu}var sh;function NE(){if(sh)return Gs;sh=1;var e=Go(),t=PE(),n=hv().ArraySet,i=fv(),r=ME().quickSort;function s(u,f){var m=u;return typeof u=="string"&&(m=e.parseSourceMapInput(u)),m.sections!=null?new c(m,f):new a(m,f)}s.fromSourceMap=function(u,f){return a.fromSourceMap(u,f)},s.prototype._version=3,s.prototype.__generatedMappings=null,Object.defineProperty(s.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),s.prototype.__originalMappings=null,Object.defineProperty(s.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),s.prototype._charIsMappingSeparator=function(f,m){var g=f.charAt(m);return g===";"||g===","},s.prototype._parseMappings=function(f,m){throw new Error("Subclasses must implement _parseMappings")},s.GENERATED_ORDER=1,s.ORIGINAL_ORDER=2,s.GREATEST_LOWER_BOUND=1,s.LEAST_UPPER_BOUND=2,s.prototype.eachMapping=function(f,m,g){var h=m||null,v=g||s.GENERATED_ORDER,y;switch(v){case s.GENERATED_ORDER:y=this._generatedMappings;break;case s.ORIGINAL_ORDER:y=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var E=this.sourceRoot;y.map(function(b){var w=b.source===null?null:this._sources.at(b.source);return w=e.computeSourceURL(E,w,this._sourceMapURL),{source:w,generatedLine:b.generatedLine,generatedColumn:b.generatedColumn,originalLine:b.originalLine,originalColumn:b.originalColumn,name:b.name===null?null:this._names.at(b.name)}},this).forEach(f,h)},s.prototype.allGeneratedPositionsFor=function(f){var m=e.getArg(f,"line"),g={source:e.getArg(f,"source"),originalLine:m,originalColumn:e.getArg(f,"column",0)};if(g.source=this._findSourceIndex(g.source),g.source<0)return[];var h=[],v=this._findMapping(g,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(v>=0){var y=this._originalMappings[v];if(f.column===void 0)for(var E=y.originalLine;y&&y.originalLine===E;)h.push({line:e.getArg(y,"generatedLine",null),column:e.getArg(y,"generatedColumn",null),lastColumn:e.getArg(y,"lastGeneratedColumn",null)}),y=this._originalMappings[++v];else for(var b=y.originalColumn;y&&y.originalLine===m&&y.originalColumn==b;)h.push({line:e.getArg(y,"generatedLine",null),column:e.getArg(y,"generatedColumn",null),lastColumn:e.getArg(y,"lastGeneratedColumn",null)}),y=this._originalMappings[++v]}return h},Gs.SourceMapConsumer=s;function a(u,f){var m=u;typeof u=="string"&&(m=e.parseSourceMapInput(u));var g=e.getArg(m,"version"),h=e.getArg(m,"sources"),v=e.getArg(m,"names",[]),y=e.getArg(m,"sourceRoot",null),E=e.getArg(m,"sourcesContent",null),b=e.getArg(m,"mappings"),w=e.getArg(m,"file",null);if(g!=this._version)throw new Error("Unsupported version: "+g);y&&(y=e.normalize(y)),h=h.map(String).map(e.normalize).map(function(T){return y&&e.isAbsolute(y)&&e.isAbsolute(T)?e.relative(y,T):T}),this._names=n.fromArray(v.map(String),!0),this._sources=n.fromArray(h,!0),this._absoluteSources=this._sources.toArray().map(function(T){return e.computeSourceURL(y,T,f)}),this.sourceRoot=y,this.sourcesContent=E,this._mappings=b,this._sourceMapURL=f,this.file=w}a.prototype=Object.create(s.prototype),a.prototype.consumer=s,a.prototype._findSourceIndex=function(u){var f=u;if(this.sourceRoot!=null&&(f=e.relative(this.sourceRoot,f)),this._sources.has(f))return this._sources.indexOf(f);var m;for(m=0;m<this._absoluteSources.length;++m)if(this._absoluteSources[m]==u)return m;return-1},a.fromSourceMap=function(f,m){var g=Object.create(a.prototype),h=g._names=n.fromArray(f._names.toArray(),!0),v=g._sources=n.fromArray(f._sources.toArray(),!0);g.sourceRoot=f._sourceRoot,g.sourcesContent=f._generateSourcesContent(g._sources.toArray(),g.sourceRoot),g.file=f._file,g._sourceMapURL=m,g._absoluteSources=g._sources.toArray().map(function(O){return e.computeSourceURL(g.sourceRoot,O,m)});for(var y=f._mappings.toArray().slice(),E=g.__generatedMappings=[],b=g.__originalMappings=[],w=0,T=y.length;w<T;w++){var x=y[w],D=new l;D.generatedLine=x.generatedLine,D.generatedColumn=x.generatedColumn,x.source&&(D.source=v.indexOf(x.source),D.originalLine=x.originalLine,D.originalColumn=x.originalColumn,x.name&&(D.name=h.indexOf(x.name)),b.push(D)),E.push(D)}return r(g.__originalMappings,e.compareByOriginalPositions),g},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}a.prototype._parseMappings=function(f,m){for(var g=1,h=0,v=0,y=0,E=0,b=0,w=f.length,T=0,x={},D={},O=[],R=[],I,P,M,B,z;T<w;)if(f.charAt(T)===";")g++,T++,h=0;else if(f.charAt(T)===",")T++;else{for(I=new l,I.generatedLine=g,B=T;B<w&&!this._charIsMappingSeparator(f,B);B++);if(P=f.slice(T,B),M=x[P],M)T+=P.length;else{for(M=[];T<B;)i.decode(f,T,D),z=D.value,T=D.rest,M.push(z);if(M.length===2)throw new Error("Found a source, but no line and column");if(M.length===3)throw new Error("Found a source and line, but no column");x[P]=M}I.generatedColumn=h+M[0],h=I.generatedColumn,M.length>1&&(I.source=E+M[1],E+=M[1],I.originalLine=v+M[2],v=I.originalLine,I.originalLine+=1,I.originalColumn=y+M[3],y=I.originalColumn,M.length>4&&(I.name=b+M[4],b+=M[4])),R.push(I),typeof I.originalLine=="number"&&O.push(I)}r(R,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=R,r(O,e.compareByOriginalPositions),this.__originalMappings=O},a.prototype._findMapping=function(f,m,g,h,v,y){if(f[g]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+f[g]);if(f[h]<0)throw new TypeError("Column must be greater than or equal to 0, got "+f[h]);return t.search(f,m,v,y)},a.prototype.computeColumnSpans=function(){for(var f=0;f<this._generatedMappings.length;++f){var m=this._generatedMappings[f];if(f+1<this._generatedMappings.length){var g=this._generatedMappings[f+1];if(m.generatedLine===g.generatedLine){m.lastGeneratedColumn=g.generatedColumn-1;continue}}m.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(f){var m={generatedLine:e.getArg(f,"line"),generatedColumn:e.getArg(f,"column")},g=this._findMapping(m,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(f,"bias",s.GREATEST_LOWER_BOUND));if(g>=0){var h=this._generatedMappings[g];if(h.generatedLine===m.generatedLine){var v=e.getArg(h,"source",null);v!==null&&(v=this._sources.at(v),v=e.computeSourceURL(this.sourceRoot,v,this._sourceMapURL));var y=e.getArg(h,"name",null);return y!==null&&(y=this._names.at(y)),{source:v,line:e.getArg(h,"originalLine",null),column:e.getArg(h,"originalColumn",null),name:y}}}return{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(f){return f==null}):!1},a.prototype.sourceContentFor=function(f,m){if(!this.sourcesContent)return null;var g=this._findSourceIndex(f);if(g>=0)return this.sourcesContent[g];var h=f;this.sourceRoot!=null&&(h=e.relative(this.sourceRoot,h));var v;if(this.sourceRoot!=null&&(v=e.urlParse(this.sourceRoot))){var y=h.replace(/^file:\/\//,"");if(v.scheme=="file"&&this._sources.has(y))return this.sourcesContent[this._sources.indexOf(y)];if((!v.path||v.path=="/")&&this._sources.has("/"+h))return this.sourcesContent[this._sources.indexOf("/"+h)]}if(m)return null;throw new Error('"'+h+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(f){var m=e.getArg(f,"source");if(m=this._findSourceIndex(m),m<0)return{line:null,column:null,lastColumn:null};var g={source:m,originalLine:e.getArg(f,"line"),originalColumn:e.getArg(f,"column")},h=this._findMapping(g,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(f,"bias",s.GREATEST_LOWER_BOUND));if(h>=0){var v=this._originalMappings[h];if(v.source===g.source)return{line:e.getArg(v,"generatedLine",null),column:e.getArg(v,"generatedColumn",null),lastColumn:e.getArg(v,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},Gs.BasicSourceMapConsumer=a;function c(u,f){var m=u;typeof u=="string"&&(m=e.parseSourceMapInput(u));var g=e.getArg(m,"version"),h=e.getArg(m,"sections");if(g!=this._version)throw new Error("Unsupported version: "+g);this._sources=new n,this._names=new n;var v={line:-1,column:0};this._sections=h.map(function(y){if(y.url)throw new Error("Support for url field in sections not implemented.");var E=e.getArg(y,"offset"),b=e.getArg(E,"line"),w=e.getArg(E,"column");if(b<v.line||b===v.line&&w<v.column)throw new Error("Section offsets must be ordered and non-overlapping.");return v=E,{generatedOffset:{generatedLine:b+1,generatedColumn:w+1},consumer:new s(e.getArg(y,"map"),f)}})}return c.prototype=Object.create(s.prototype),c.prototype.constructor=s,c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){for(var u=[],f=0;f<this._sections.length;f++)for(var m=0;m<this._sections[f].consumer.sources.length;m++)u.push(this._sections[f].consumer.sources[m]);return u}}),c.prototype.originalPositionFor=function(f){var m={generatedLine:e.getArg(f,"line"),generatedColumn:e.getArg(f,"column")},g=t.search(m,this._sections,function(v,y){var E=v.generatedLine-y.generatedOffset.generatedLine;return E||v.generatedColumn-y.generatedOffset.generatedColumn}),h=this._sections[g];return h?h.consumer.originalPositionFor({line:m.generatedLine-(h.generatedOffset.generatedLine-1),column:m.generatedColumn-(h.generatedOffset.generatedLine===m.generatedLine?h.generatedOffset.generatedColumn-1:0),bias:f.bias}):{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(f){return f.consumer.hasContentsOfAllSources()})},c.prototype.sourceContentFor=function(f,m){for(var g=0;g<this._sections.length;g++){var h=this._sections[g],v=h.consumer.sourceContentFor(f,!0);if(v)return v}if(m)return null;throw new Error('"'+f+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(f){for(var m=0;m<this._sections.length;m++){var g=this._sections[m];if(g.consumer._findSourceIndex(e.getArg(f,"source"))!==-1){var h=g.consumer.generatedPositionFor(f);if(h){var v={line:h.line+(g.generatedOffset.generatedLine-1),column:h.column+(g.generatedOffset.generatedLine===h.line?g.generatedOffset.generatedColumn-1:0)};return v}}}return{line:null,column:null}},c.prototype._parseMappings=function(f,m){this.__generatedMappings=[],this.__originalMappings=[];for(var g=0;g<this._sections.length;g++)for(var h=this._sections[g],v=h.consumer._generatedMappings,y=0;y<v.length;y++){var E=v[y],b=h.consumer._sources.at(E.source);b=e.computeSourceURL(h.consumer.sourceRoot,b,this._sourceMapURL),this._sources.add(b),b=this._sources.indexOf(b);var w=null;E.name&&(w=h.consumer._names.at(E.name),this._names.add(w),w=this._names.indexOf(w));var T={source:b,generatedLine:E.generatedLine+(h.generatedOffset.generatedLine-1),generatedColumn:E.generatedColumn+(h.generatedOffset.generatedLine===E.generatedLine?h.generatedOffset.generatedColumn-1:0),originalLine:E.originalLine,originalColumn:E.originalColumn,name:w};this.__generatedMappings.push(T),typeof T.originalLine=="number"&&this.__originalMappings.push(T)}r(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),r(this.__originalMappings,e.compareByOriginalPositions)},Gs.IndexedSourceMapConsumer=c,Gs}var Eu={},oh;function LE(){if(oh)return Eu;oh=1;var e=pv().SourceMapGenerator,t=Go(),n=/(\r?\n)/,i=10,r="$$$isSourceNode$$$";function s(a,l,c,u,f){this.children=[],this.sourceContents={},this.line=a??null,this.column=l??null,this.source=c??null,this.name=f??null,this[r]=!0,u!=null&&this.add(u)}return s.fromStringWithSourceMap=function(l,c,u){var f=new s,m=l.split(n),g=0,h=function(){var w=x(),T=x()||"";return w+T;function x(){return g<m.length?m[g++]:void 0}},v=1,y=0,E=null;return c.eachMapping(function(w){if(E!==null)if(v<w.generatedLine)b(E,h()),v++,y=0;else{var T=m[g]||"",x=T.substr(0,w.generatedColumn-y);m[g]=T.substr(w.generatedColumn-y),y=w.generatedColumn,b(E,x),E=w;return}for(;v<w.generatedLine;)f.add(h()),v++;if(y<w.generatedColumn){var T=m[g]||"";f.add(T.substr(0,w.generatedColumn)),m[g]=T.substr(w.generatedColumn),y=w.generatedColumn}E=w},this),g<m.length&&(E&&b(E,h()),f.add(m.splice(g).join(""))),c.sources.forEach(function(w){var T=c.sourceContentFor(w);T!=null&&(u!=null&&(w=t.join(u,w)),f.setSourceContent(w,T))}),f;function b(w,T){if(w===null||w.source===void 0)f.add(T);else{var x=u?t.join(u,w.source):w.source;f.add(new s(w.originalLine,w.originalColumn,x,T,w.name))}}},s.prototype.add=function(l){if(Array.isArray(l))l.forEach(function(c){this.add(c)},this);else if(l[r]||typeof l=="string")l&&this.children.push(l);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+l);return this},s.prototype.prepend=function(l){if(Array.isArray(l))for(var c=l.length-1;c>=0;c--)this.prepend(l[c]);else if(l[r]||typeof l=="string")this.children.unshift(l);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+l);return this},s.prototype.walk=function(l){for(var c,u=0,f=this.children.length;u<f;u++)c=this.children[u],c[r]?c.walk(l):c!==""&&l(c,{source:this.source,line:this.line,column:this.column,name:this.name})},s.prototype.join=function(l){var c,u,f=this.children.length;if(f>0){for(c=[],u=0;u<f-1;u++)c.push(this.children[u]),c.push(l);c.push(this.children[u]),this.children=c}return this},s.prototype.replaceRight=function(l,c){var u=this.children[this.children.length-1];return u[r]?u.replaceRight(l,c):typeof u=="string"?this.children[this.children.length-1]=u.replace(l,c):this.children.push("".replace(l,c)),this},s.prototype.setSourceContent=function(l,c){this.sourceContents[t.toSetString(l)]=c},s.prototype.walkSourceContents=function(l){for(var c=0,u=this.children.length;c<u;c++)this.children[c][r]&&this.children[c].walkSourceContents(l);for(var f=Object.keys(this.sourceContents),c=0,u=f.length;c<u;c++)l(t.fromSetString(f[c]),this.sourceContents[f[c]])},s.prototype.toString=function(){var l="";return this.walk(function(c){l+=c}),l},s.prototype.toStringWithSourceMap=function(l){var c={code:"",line:1,column:0},u=new e(l),f=!1,m=null,g=null,h=null,v=null;return this.walk(function(y,E){c.code+=y,E.source!==null&&E.line!==null&&E.column!==null?((m!==E.source||g!==E.line||h!==E.column||v!==E.name)&&u.addMapping({source:E.source,original:{line:E.line,column:E.column},generated:{line:c.line,column:c.column},name:E.name}),m=E.source,g=E.line,h=E.column,v=E.name,f=!0):f&&(u.addMapping({generated:{line:c.line,column:c.column}}),m=null,f=!1);for(var b=0,w=y.length;b<w;b++)y.charCodeAt(b)===i?(c.line++,c.column=0,b+1===w?(m=null,f=!1):f&&u.addMapping({source:E.source,original:{line:E.line,column:E.column},generated:{line:c.line,column:c.column},name:E.name})):c.column++}),this.walkSourceContents(function(y,E){u.setSourceContent(y,E)}),{code:c.code,map:u}},Eu.SourceNode=s,Eu}var ah;function FE(){return ah||(ah=1,Fs.SourceMapGenerator=pv().SourceMapGenerator,Fs.SourceMapConsumer=NE().SourceMapConsumer,Fs.SourceNode=LE().SourceNode),Fs}var lh;function GE(){return lh||(lh=1,function(e,t){t.__esModule=!0;var n=Tn(),i=void 0;try{var r=FE();i=r.SourceNode}catch{}i||(i=function(l,c,u,f){this.src="",f&&this.add(f)},i.prototype={add:function(c){n.isArray(c)&&(c=c.join("")),this.src+=c},prepend:function(c){n.isArray(c)&&(c=c.join("")),this.src=c+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});function s(l,c,u){if(n.isArray(l)){for(var f=[],m=0,g=l.length;m<g;m++)f.push(c.wrap(l[m],u));return f}else if(typeof l=="boolean"||typeof l=="number")return l+"";return l}function a(l){this.srcFile=l,this.source=[]}a.prototype={isEmpty:function(){return!this.source.length},prepend:function(c,u){this.source.unshift(this.wrap(c,u))},push:function(c,u){this.source.push(this.wrap(c,u))},merge:function(){var c=this.empty();return this.each(function(u){c.add(["  ",u,`
`])}),c},each:function(c){for(var u=0,f=this.source.length;u<f;u++)c(this.source[u])},empty:function(){var c=this.currentLocation||{start:{}};return new i(c.start.line,c.start.column,this.srcFile)},wrap:function(c){var u=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];return c instanceof i?c:(c=s(c,this,u),new i(u.start.line,u.start.column,this.srcFile,c))},functionCall:function(c,u,f){return f=this.generateList(f),this.wrap([c,u?"."+u+"(":"(",f,")"])},quotedString:function(c){return'"'+(c+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(c){var u=this,f=[];Object.keys(c).forEach(function(g){var h=s(c[g],u);h!=="undefined"&&f.push([u.quotedString(g),":",h])});var m=this.generateList(f);return m.prepend("{"),m.add("}"),m},generateList:function(c){for(var u=this.empty(),f=0,m=c.length;f<m;f++)f&&u.add(","),u.add(s(c[f],this));return u},generateArray:function(c){var u=this.generateList(c);return u.prepend("["),u.add("]"),u}},t.default=a,e.exports=t.default}(_a,_a.exports)),_a.exports}var uh;function HE(){return uh||(uh=1,function(e,t){t.__esModule=!0;function n(g){return g&&g.__esModule?g:{default:g}}var i=Sd(),r=ri(),s=n(r),a=Tn(),l=GE(),c=n(l);function u(g){this.value=g}function f(){}f.prototype={nameLookup:function(h,v){return this.internalNameLookup(h,v)},depthedLookup:function(h){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(h),")"]},compilerInfo:function(){var h=i.COMPILER_REVISION,v=i.REVISION_CHANGES[h];return[h,v]},appendToBuffer:function(h,v,y){return a.isArray(h)||(h=[h]),h=this.source.wrap(h,v),this.environment.isSimple?["return ",h,";"]:y?["buffer += ",h,";"]:(h.appendToBuffer=!0,h)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(h,v){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",h,",",JSON.stringify(v),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(h,v,y,E){this.environment=h,this.options=v,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!E,this.name=this.environment.name,this.isChild=!!y,this.context=y||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(h,v),this.useDepths=this.useDepths||h.useDepths||h.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||h.useBlockParams;var b=h.opcodes,w=void 0,T=void 0,x=void 0,D=void 0;for(x=0,D=b.length;x<D;x++)w=b[x],this.source.currentLocation=w.loc,T=T||w.loc,this[w.opcode].apply(this,w.args);if(this.source.currentLocation=T,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new s.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),E?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge()));var O=this.createFunctionContext(E);if(this.isChild)return O;var R={compiler:this.compilerInfo(),main:O};this.decorators&&(R.main_d=this.decorators,R.useDecorators=!0);var I=this.context,P=I.programs,M=I.decorators;for(x=0,D=P.length;x<D;x++)P[x]&&(R[x]=P[x],M[x]&&(R[x+"_d"]=M[x],R.useDecorators=!0));return this.environment.usePartial&&(R.usePartial=!0),this.options.data&&(R.useData=!0),this.useDepths&&(R.useDepths=!0),this.useBlockParams&&(R.useBlockParams=!0),this.options.compat&&(R.compat=!0),E?R.compilerOptions=this.options:(R.compiler=JSON.stringify(R.compiler),this.source.currentLocation={start:{line:1,column:0}},R=this.objectLiteral(R),v.srcName?(R=R.toStringWithSourceMap({file:v.destName}),R.map=R.map&&R.map.toString()):R=R.toString()),R},preamble:function(){this.lastContext=0,this.source=new c.default(this.options.srcName),this.decorators=new c.default(this.options.srcName)},createFunctionContext:function(h){var v=this,y="",E=this.stackVars.concat(this.registers.list);E.length>0&&(y+=", "+E.join(", "));var b=0;Object.keys(this.aliases).forEach(function(x){var D=v.aliases[x];D.children&&D.referenceCount>1&&(y+=", alias"+ ++b+"="+x,D.children[0]="alias"+b)}),this.lookupPropertyFunctionIsUsed&&(y+=", "+this.lookupPropertyFunctionVarDeclaration());var w=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&w.push("blockParams"),this.useDepths&&w.push("depths");var T=this.mergeSource(y);return h?(w.push(T),Function.apply(this,w)):this.source.wrap(["function(",w.join(","),`) {
  `,T,"}"])},mergeSource:function(h){var v=this.environment.isSimple,y=!this.forceBuffer,E=void 0,b=void 0,w=void 0,T=void 0;return this.source.each(function(x){x.appendToBuffer?(w?x.prepend("  + "):w=x,T=x):(w&&(b?w.prepend("buffer += "):E=!0,T.add(";"),w=T=void 0),b=!0,v||(y=!1))}),y?w?(w.prepend("return "),T.add(";")):b||this.source.push('return "";'):(h+=", buffer = "+(E?"":this.initializeBuffer()),w?(w.prepend("return buffer + "),T.add(";")):this.source.push("return buffer;")),h&&this.source.prepend("var "+h.substring(2)+(E?"":`;
`)),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function(h){var v=this.aliasable("container.hooks.blockHelperMissing"),y=[this.contextName(0)];this.setupHelperArgs(h,0,y);var E=this.popStack();y.splice(1,0,E),this.push(this.source.functionCall(v,"call",y))},ambiguousBlockValue:function(){var h=this.aliasable("container.hooks.blockHelperMissing"),v=[this.contextName(0)];this.setupHelperArgs("",0,v,!0),this.flushInline();var y=this.topStack();v.splice(1,0,y),this.pushSource(["if (!",this.lastHelper,") { ",y," = ",this.source.functionCall(h,"call",v),"}"])},appendContent:function(h){this.pendingContent?h=this.pendingContent+h:this.pendingLocation=this.source.currentLocation,this.pendingContent=h},append:function(){if(this.isInline())this.replaceStack(function(v){return[" != null ? ",v,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var h=this.popStack();this.pushSource(["if (",h," != null) { ",this.appendToBuffer(h,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(h){this.lastContext=h},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(h,v,y,E){var b=0;!E&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(h[b++])):this.pushContext(),this.resolvePath("context",h,b,v,y)},lookupBlockParam:function(h,v){this.useBlockParams=!0,this.push(["blockParams[",h[0],"][",h[1],"]"]),this.resolvePath("context",v,1)},lookupData:function(h,v,y){h?this.pushStackLiteral("container.data(data, "+h+")"):this.pushStackLiteral("data"),this.resolvePath("data",v,0,!0,y)},resolvePath:function(h,v,y,E,b){var w=this;if(this.options.strict||this.options.assumeObjects){this.push(m(this.options.strict&&b,this,v,y,h));return}for(var T=v.length;y<T;y++)this.replaceStack(function(x){var D=w.nameLookup(x,v[y],h);return E?[" && ",D]:[" != null ? ",D," : ",x]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(h,v){this.pushContext(),this.pushString(v),v!=="SubExpression"&&(typeof h=="string"?this.pushString(h):this.pushStackLiteral(h))},emptyHash:function(h){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(h?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var h=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(h.ids)),this.stringParams&&(this.push(this.objectLiteral(h.contexts)),this.push(this.objectLiteral(h.types))),this.push(this.objectLiteral(h.values))},pushString:function(h){this.pushStackLiteral(this.quotedString(h))},pushLiteral:function(h){this.pushStackLiteral(h)},pushProgram:function(h){h!=null?this.pushStackLiteral(this.programExpression(h)):this.pushStackLiteral(null)},registerDecorator:function(h,v){var y=this.nameLookup("decorators",v,"decorator"),E=this.setupHelperArgs(v,h);this.decorators.push(["fn = ",this.decorators.functionCall(y,"",["fn","props","container",E])," || fn;"])},invokeHelper:function(h,v,y){var E=this.popStack(),b=this.setupHelper(h,v),w=[];y&&w.push(b.name),w.push(E),this.options.strict||w.push(this.aliasable("container.hooks.helperMissing"));var T=["(",this.itemsSeparatedBy(w,"||"),")"],x=this.source.functionCall(T,"call",b.callParams);this.push(x)},itemsSeparatedBy:function(h,v){var y=[];y.push(h[0]);for(var E=1;E<h.length;E++)y.push(v,h[E]);return y},invokeKnownHelper:function(h,v){var y=this.setupHelper(h,v);this.push(this.source.functionCall(y.name,"call",y.callParams))},invokeAmbiguous:function(h,v){this.useRegister("helper");var y=this.popStack();this.emptyHash();var E=this.setupHelper(0,h,v),b=this.lastHelper=this.nameLookup("helpers",h,"helper"),w=["(","(helper = ",b," || ",y,")"];this.options.strict||(w[0]="(helper = ",w.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",w,E.paramsInit?["),(",E.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",E.callParams)," : helper))"])},invokePartial:function(h,v,y){var E=[],b=this.setupParams(v,1,E);h&&(v=this.popStack(),delete b.name),y&&(b.indent=JSON.stringify(y)),b.helpers="helpers",b.partials="partials",b.decorators="container.decorators",h?E.unshift(v):E.unshift(this.nameLookup("partials",v,"partial")),this.options.compat&&(b.depths="depths"),b=this.objectLiteral(b),E.push(b),this.push(this.source.functionCall("container.invokePartial","",E))},assignToHash:function(h){var v=this.popStack(),y=void 0,E=void 0,b=void 0;this.trackIds&&(b=this.popStack()),this.stringParams&&(E=this.popStack(),y=this.popStack());var w=this.hash;y&&(w.contexts[h]=y),E&&(w.types[h]=E),b&&(w.ids[h]=b),w.values[h]=v},pushId:function(h,v,y){h==="BlockParam"?this.pushStackLiteral("blockParams["+v[0]+"].path["+v[1]+"]"+(y?" + "+JSON.stringify("."+y):"")):h==="PathExpression"?this.pushString(v):h==="SubExpression"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:f,compileChildren:function(h,v){for(var y=h.children,E=void 0,b=void 0,w=0,T=y.length;w<T;w++){E=y[w],b=new this.compiler;var x=this.matchExistingProgram(E);if(x==null){this.context.programs.push("");var D=this.context.programs.length;E.index=D,E.name="program"+D,this.context.programs[D]=b.compile(E,v,this.context,!this.precompile),this.context.decorators[D]=b.decorators,this.context.environments[D]=E,this.useDepths=this.useDepths||b.useDepths,this.useBlockParams=this.useBlockParams||b.useBlockParams,E.useDepths=this.useDepths,E.useBlockParams=this.useBlockParams}else E.index=x.index,E.name="program"+x.index,this.useDepths=this.useDepths||x.useDepths,this.useBlockParams=this.useBlockParams||x.useBlockParams}},matchExistingProgram:function(h){for(var v=0,y=this.context.environments.length;v<y;v++){var E=this.context.environments[v];if(E&&E.equals(h))return E}},programExpression:function(h){var v=this.environment.children[h],y=[v.index,"data",v.blockParams];return(this.useBlockParams||this.useDepths)&&y.push("blockParams"),this.useDepths&&y.push("depths"),"container.program("+y.join(", ")+")"},useRegister:function(h){this.registers[h]||(this.registers[h]=!0,this.registers.list.push(h))},push:function(h){return h instanceof u||(h=this.source.wrap(h)),this.inlineStack.push(h),h},pushStackLiteral:function(h){this.push(new u(h))},pushSource:function(h){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),h&&this.source.push(h)},replaceStack:function(h){var v=["("],y=void 0,E=void 0,b=void 0;if(!this.isInline())throw new s.default("replaceStack on non-inline");var w=this.popStack(!0);if(w instanceof u)y=[w.value],v=["(",y],b=!0;else{E=!0;var T=this.incrStack();v=["((",this.push(T)," = ",w,")"],y=this.topStack()}var x=h.call(this,y);b||this.popStack(),E&&this.stackSlot--,this.push(v.concat(x,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var h=this.inlineStack;this.inlineStack=[];for(var v=0,y=h.length;v<y;v++){var E=h[v];if(E instanceof u)this.compileStack.push(E);else{var b=this.incrStack();this.pushSource([b," = ",E,";"]),this.compileStack.push(b)}}},isInline:function(){return this.inlineStack.length},popStack:function(h){var v=this.isInline(),y=(v?this.inlineStack:this.compileStack).pop();if(!h&&y instanceof u)return y.value;if(!v){if(!this.stackSlot)throw new s.default("Invalid stack pop");this.stackSlot--}return y},topStack:function(){var h=this.isInline()?this.inlineStack:this.compileStack,v=h[h.length-1];return v instanceof u?v.value:v},contextName:function(h){return this.useDepths&&h?"depths["+h+"]":"depth"+h},quotedString:function(h){return this.source.quotedString(h)},objectLiteral:function(h){return this.source.objectLiteral(h)},aliasable:function(h){var v=this.aliases[h];return v?(v.referenceCount++,v):(v=this.aliases[h]=this.source.wrap(h),v.aliasable=!0,v.referenceCount=1,v)},setupHelper:function(h,v,y){var E=[],b=this.setupHelperArgs(v,h,E,y),w=this.nameLookup("helpers",v,"helper"),T=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:E,paramsInit:b,name:w,callParams:[T].concat(E)}},setupParams:function(h,v,y){var E={},b=[],w=[],T=[],x=!y,D=void 0;x&&(y=[]),E.name=this.quotedString(h),E.hash=this.popStack(),this.trackIds&&(E.hashIds=this.popStack()),this.stringParams&&(E.hashTypes=this.popStack(),E.hashContexts=this.popStack());var O=this.popStack(),R=this.popStack();(R||O)&&(E.fn=R||"container.noop",E.inverse=O||"container.noop");for(var I=v;I--;)D=this.popStack(),y[I]=D,this.trackIds&&(T[I]=this.popStack()),this.stringParams&&(w[I]=this.popStack(),b[I]=this.popStack());return x&&(E.args=this.source.generateArray(y)),this.trackIds&&(E.ids=this.source.generateArray(T)),this.stringParams&&(E.types=this.source.generateArray(w),E.contexts=this.source.generateArray(b)),this.options.data&&(E.data="data"),this.useBlockParams&&(E.blockParams="blockParams"),E},setupHelperArgs:function(h,v,y,E){var b=this.setupParams(h,v,y);return b.loc=JSON.stringify(this.source.currentLocation),b=this.objectLiteral(b),E?(this.useRegister("options"),y.push("options"),["options=",b]):y?(y.push(b),""):b}},function(){for(var g="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),h=f.RESERVED_WORDS={},v=0,y=g.length;v<y;v++)h[g[v]]=!0}(),f.isValidJavaScriptVariableName=function(g){return!f.RESERVED_WORDS[g]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(g)};function m(g,h,v,y,E){var b=h.popStack(),w=v.length;for(g&&w--;y<w;y++)b=h.nameLookup(b,v[y],E);return g?[h.aliasable("container.strict"),"(",b,", ",h.quotedString(v[y]),", ",JSON.stringify(h.source.currentLocation)," )"]:b}t.default=f,e.exports=t.default}(ya,ya.exports)),ya.exports}var ch;function BE(){return ch||(ch=1,function(e,t){t.__esModule=!0;function n(w){return w&&w.__esModule?w:{default:w}}var i=DE(),r=n(i),s=cv(),a=n(s),l=OE(),c=IE(),u=HE(),f=n(u),m=dv(),g=n(m),h=uv(),v=n(h),y=r.default.create;function E(){var w=y();return w.compile=function(T,x){return c.compile(T,x,w)},w.precompile=function(T,x){return c.precompile(T,x,w)},w.AST=a.default,w.Compiler=c.Compiler,w.JavaScriptCompiler=f.default,w.Parser=l.parser,w.parse=l.parse,w.parseWithoutProcessing=l.parseWithoutProcessing,w}var b=E();b.create=E,v.default(b),b.Visitor=g.default,b.default=b,t.default=b,e.exports=t.default}(Jo,Jo.exports)),Jo.exports}var WE=BE();const UE=xo(WE);var At=function(){var e=0;return Ee("GridRenderer",Object,function(t,n,i,r,s,a,l,c){var u=this;u.UNIQUE_ID=e++,u.id=l,u.grid=t,u.defn=n,u.view=i,u.features=it(r),u.opts=s,u.timing=a,u.colConfig=c,u.hasRendered=!1,u._validateFeatures(),u.drawLock=new qt("GridRenderer/draw"),u.grid.on("colConfigUpdate",function(f){console.debug("[DataVis // GridRenderer // Handler(colConfigUpdate)] Received new colConfig: %O",f),u.colConfig=f,u.hasRendered&&(console.debug("[DataVis // GridRenderer // Handler(colConfigUpdate)] Redrawing with new colConfig"),u.draw(u.root,u.drawOpts))},{who:u})})}();vi(At,["columnResize","unableToRender","limited","unlimited","csvReady","generateCsvProgress","renderBegin","renderEnd","selectionChange"]);At.prototype.canRender=function(){throw new Error("ABSTRACT")};At.prototype.draw=function(e,t,n){var i=this,r=Array.prototype.slice.call(arguments);return console.debug("[DataVis // GridRenderer // Draw] Beginning draw operation; opts = %O",t),t=t||{},i.root=e,i.drawOpts=t,i.drawLock.isLocked()?i.drawLock.onUnlock(function(){At.prototype.draw.apply(i,r)}):(i.drawLock.lock(),i.clear(),i.view.getData(function(s,a){return s?(console.debug("[DataVis // GridRenderer // Draw] Data = %O",a),i.view.getTypeInfo(function(l,c){return l?a==null||c==null?(de.error("Provided data or typeInfo is null"),n(!1)):(console.debug("[DataVis // GridRenderer // Draw] TypeInfo = %O",c.asMap()),a.isPlain&&!i.canRender("plain")||a.isGroup&&!i.canRender("group")||a.isPivot&&!i.canRender("pivot")?(console.debug("[DataVis // GridRenderer // Draw] Unable to render data using current grid table: { isPlain = %s ; isGroup = %s ; isPivot = %s }",a.isPlain,a.isGroup,a.isPivot),i.fire("unableToRender")):(i.hasRendered=!0,i.fire("renderBegin"),i.data=a,i.typeInfo=c,i.timing.start(["Grid Renderer","Draw"]),n(!0,a,c,function(u){if(i.fire("renderEnd"),i.drawLock._lockCount>0&&i.drawLock.unlock(),typeof u=="function")return u()}))):n(!1)})):n(!1)}))};At.prototype.clear=function(){var e=this;e.root.children().remove()};At.prototype.destroy=function(){var e=this;e.clear(),e.grid.off("*",e)};At.prototype.toString=function(){var e=this;return"GridRenderer("+e.UNIQUE_ID+")"};At.prototype._validateFeatures=function(){return!0};At.prototype.hasOperations=function(e,t){var n=this;if(!n.features.operations)return!1;switch(e){case"all":return Ze(0,n.defn,"operations","all","length")>0;case"row":return Ze(0,n.defn,"operations","row","length")>0;case"cell":return Ze(0,n.defn,"operations","cell",t,"length")>0;default:return!1}};At.registry=new Ae;function jE(){return UE.create()}function YE(e,t){var n=Yn(["cell","group","pivot","all"],[[]]);n=k.mapObject(n,function(i,r){return k.filter(Ze([],t,"agg","info",r),function(s){return!s.isHidden})}),e.registerHelper("rowval",function(i){if(["number","string"].indexOf(typeof i)<0)throw new Error('In Handlebars "rowval" helper, `groupField` must be a number or string');var r;if(typeof i=="number"){if(r=i,r<0)throw new Error('In Handlebars "rowval" helper, group field index "'+i+'" out of range')}else if(r=t.groupFields.indexOf(i),r<0)throw new Error('In Handlebars "rowval" helper, specified field "'+i+'" is not part of group');return t.rowVals[this.rowValIdx][r]}),e.registerHelper("colval",function(i){if(["number","string"].indexOf(typeof i)<0)throw new Error('In Handlebars "rowval" helper, `pivotField` must be a number or string');var r;if(typeof i=="number"){if(r=i,r<0)throw new Error('In Handlebars "rowval" helper, pivot field index "'+i+'" out of range')}else if(r=t.pivotFields.indexOf(i),r<0)throw new Error('In Handlebars "rowval" helper, specified field "'+i+'" is not part of pivot');return t.colVals[this.colValIdx][r]}),e.registerHelper("aggregate",function(i,r){var s=this;if(t.isPlain)throw new Error('In Handlebars "aggregate" helper, data must be grouped to use this helper');if(t.isGroup&&["group","all"].indexOf(i)<0)throw new Error('In Handlebars "aggregate" helper, `type` must be one of: { group, all }');if(t.isPivot&&["cell","group","pivot","all"].indexOf(i)<0)throw new Error('In Handlebars "aggregate" helper, `type` must be one of: { cell, group, pivot, all }');if(t.isGroup&&s.rowValIdx==null)throw new Error("missing rowvalidx from context");if(t.isPivot&&(s.rowValIdx==null||s.colValIdx==null))throw new Error("missing rowValIdx or colValIdx from context");if(typeof r!="number"||parseInt(r)!=r)return"[HELPER/AGGREGATE: AGGNUM MUST BE AN INT]";if(n[i].length<=r)return"[HELPER/AGGREGATE: AGGNUM OUT OF RANGE]";var a=t.agg.info[i][r],l=t.isGroup?t.agg.results[i][r][s.rowValIdx]:t.isPivot?t.agg.results[i][r][s.rowValIdx][s.colValIdx]:null,c;return l instanceof jQuery&&(l=l.get(0)),l instanceof Element?l:a.instance.inheritFormatting?(c=ht(a.colConfig[0],a.typeInfo[0],l,{overrideType:a.instance.getType()}),c):(c=ht(null,null,l,{overrideType:a.instance.getType(),decode:!1}),c)})}const gl={makeEnv:jE,addHelpers:YE};var fr=Ee("GridRendererHandlebars",At,function(){var e=this;e.super.ctor.apply(e,arguments),e.hbEnv=gl.makeEnv()});fr.prototype._validateFeatures=function(){var e=this;e.features.limit=!1};fr.prototype.canRender=function(e){return!0};fr.prototype._draw_plain=function(e,t,n,i){var r=this,s="";t.data.length===0?r.empty!=null&&(s+=r.empty()):(r.before!=null&&(s+=r.before()),r.item!=null&&k.each(t.data,function(a){var l={};k.each(a.rowData,function(c,u){var f=r.colConfig.get(u)||{},m=ht(f,n.get(u),c);(m instanceof Element||m instanceof jQuery)&&(m=dd(m)),l[u]=m}),s+=r.item(l)}),r.after!=null&&(s+=r.after())),e.html(s)};fr.prototype._draw_group=function(e,t,n,i){var r=this,s="";t.data.length===0?r.empty!=null&&(s+=r.empty()):(r.before!=null&&(s+=r.before()),r.item!=null&&k.each(t.data,function(a,l){var c={rowValIdx:l};s+=r.item(c)}),r.after!=null&&(s+=r.after())),e.html(s)};fr.prototype._draw_pivot=function(e,t,n,i){var r=this,s="";t.data.length===0?r.empty!=null&&(s+=r.empty()):(r.before!=null&&(s+=r.before()),r.item!=null&&k.each(t.data,function(a,l){k.each(a,function(c,u){jQuery("<div>").appendTo(e);var f={rowValIdx:l,colValIdx:u};s+=r.item(f)})}),r.after!=null&&(s+=r.after())),e.html(s)};fr.prototype.draw=function(e,t,n){var i=this;if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");return i.super.draw(e,n,function(r,s,a){if(!r)return t();gl.addHelpers(i.hbEnv,s);var l=s.isPlain?"plain":s.isGroup?"group":s.isPivot?"pivot":null,c=s.isPlain?"whenPlain":s.isGroup?"whenGroup":s.isPivot?"whenPivot":null,u=i.opts[c]||{};if(u.empty!=null&&(i.empty=i.hbEnv.compile(u.empty)),u.before!=null&&(i.before=i.hbEnv.compile(u.before)),u.item!=null&&(i.item=i.hbEnv.compile(u.item)),u.after!=null&&(i.after=i.hbEnv.compile(u.after)),i["_draw_"+l](e,s,a,n),i.addWorkHandler(),i.fire("renderEnd"),i.drawLock.unlock(),typeof t=="function")return t()})};fr.prototype.addWorkHandler=function(){var e=this;e.view.on("workEnd",function(t,n){e.draw(e.root,null,e.drawOpts)},{who:e,limit:1})};At.registry.set("handlebars",fr);var zs={exports:{}},zE=zs.exports,dh;function qE(){return dh||(dh=1,function(e,t){(function(n,i){i(t)})(zE,function(n){function i(ne){var V,fe,ye=new Error(ne);return V=ye,fe=i.prototype,Object.setPrototypeOf?Object.setPrototypeOf(V,fe):V.__proto__=fe,ye}function r(ne,V,fe){var ye=V.slice(0,fe).split(/\n/),ue=ye.length,Ie=ye[ue-1].length+1;throw i(ne+=" at line "+ue+" col "+Ie+`:

  `+V.split(/\n/)[ue-1]+`
  `+Array(Ie).join(" ")+"^")}i.prototype=Object.create(Error.prototype,{name:{value:"Squirrelly Error",enumerable:!1}});var s=new Function("return this")().Promise,a=!1;try{a=new Function("return (async function(){}).constructor")()}catch(ne){if(!(ne instanceof SyntaxError))throw ne}function l(ne,V){return Object.prototype.hasOwnProperty.call(ne,V)}function c(ne,V,fe){for(var ye in V)l(V,ye)&&(V[ye]==null||typeof V[ye]!="object"||ye!=="storage"&&ye!=="prefixes"||fe?ne[ye]=V[ye]:ne[ye]=c({},V[ye]));return ne}var u=/^async +/,f=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,m=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,g=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g,h=/[.*+\-?^${}()|[\]\\]/g;function v(ne){return h.test(ne)?ne.replace(h,"\\$&"):ne}function y(ne,V){V.rmWhitespace&&(ne=ne.replace(/[\r\n]+/g,`
`).replace(/^\s+|\s+$/gm,"")),f.lastIndex=0,m.lastIndex=0,g.lastIndex=0;var fe=V.prefixes,ye=[fe.h,fe.b,fe.i,fe.r,fe.c,fe.e].reduce(function(F,H){return F&&H?F+"|"+v(H):H?v(H):F},""),ue=new RegExp("([|()]|=>)|('|\"|`|\\/\\*)|\\s*((\\/)?(-|_)?"+v(V.tags[1])+")","g"),Ie=new RegExp("([^]*?)"+v(V.tags[0])+"(-|_)?\\s*("+ye+")?\\s*","g"),ce=0,Le=!1;function He(F,H){var U,J={f:[]},K=0,q="c";function ie(qe){var Be=ne.slice(ce,qe),o=Be.trim();if(q==="f")o==="safe"?J.raw=!0:V.async&&u.test(o)?(o=o.replace(u,""),J.f.push([o,"",!0])):J.f.push([o,""]);else if(q==="fp")J.f[J.f.length-1][1]+=o;else if(q==="err"){if(o){var d=Be.search(/\S/);r("invalid syntax",ne,ce+d)}}else J[q]=o;ce=qe+1}for(H==="h"||H==="b"||H==="c"?q="n":H==="r"&&(J.raw=!0,H="i"),ue.lastIndex=ce;(U=ue.exec(ne))!==null;){var Q=U[1],ee=U[2],se=U[3],re=U[4],ge=U[5],_e=U.index;if(Q)Q==="("?(K===0&&(q==="n"?(ie(_e),q="p"):q==="f"&&(ie(_e),q="fp")),K++):Q===")"?--K===0&&q!=="c"&&(ie(_e),q="err"):K===0&&Q==="|"?(ie(_e),q="f"):Q==="=>"&&(ie(_e),ce+=1,q="res");else if(ee)if(ee==="/*"){var Se=ne.indexOf("*/",ue.lastIndex);Se===-1&&r("unclosed comment",ne,U.index),ue.lastIndex=Se+2}else ee==="'"?(m.lastIndex=U.index,m.exec(ne)?ue.lastIndex=m.lastIndex:r("unclosed string",ne,U.index)):ee==='"'?(g.lastIndex=U.index,g.exec(ne)?ue.lastIndex=g.lastIndex:r("unclosed string",ne,U.index)):ee==="`"&&(f.lastIndex=U.index,f.exec(ne)?ue.lastIndex=f.lastIndex:r("unclosed string",ne,U.index));else if(se)return ie(_e),ce=_e+U[0].length,Ie.lastIndex=ce,Le=ge,re&&H==="h"&&(H="s"),J.t=H,J}return r("unclosed tag",ne,F),J}var We=function F(H,U){H.b=[],H.d=[];var J,K=!1,q=[];function ie(d,p){d&&(d=function(_,C,S,A){var N,G;return typeof C.autoTrim=="string"?N=G=C.autoTrim:Array.isArray(C.autoTrim)&&(N=C.autoTrim[1],G=C.autoTrim[0]),(S||S===!1)&&(N=S),(A||A===!1)&&(G=A),N==="slurp"&&G==="slurp"?_.trim():(N==="_"||N==="slurp"?_=String.prototype.trimLeft?_.trimLeft():_.replace(/^[\s\uFEFF\xA0]+/,""):N!=="-"&&N!=="nl"||(_=_.replace(/^(?:\n|\r|\r\n)/,"")),G==="_"||G==="slurp"?_=String.prototype.trimRight?_.trimRight():_.replace(/[\s\uFEFF\xA0]+$/,""):G!=="-"&&G!=="nl"||(_=_.replace(/(?:\n|\r|\r\n)$/,"")),_)}(d,V,Le,p))&&(d=d.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),q.push(d))}for(;(J=Ie.exec(ne))!==null;){var Q,ee=J[1],se=J[2],re=J[3]||"";for(var ge in fe)if(fe[ge]===re){Q=ge;break}ie(ee,se),ce=J.index+J[0].length,Q||r("unrecognized tag type: "+re,ne,ce);var _e=He(J.index,Q),Se=_e.t;if(Se==="h"){var qe=_e.n||"";V.async&&u.test(qe)&&(_e.a=!0,_e.n=qe.replace(u,"")),_e=F(_e),q.push(_e)}else if(Se==="c"){if(H.n===_e.n)return K?(K.d=q,H.b.push(K)):H.d=q,H;r("Helper start and end don't match",ne,J.index+J[0].length)}else if(Se==="b"){K?(K.d=q,H.b.push(K)):H.d=q;var Be=_e.n||"";V.async&&u.test(Be)&&(_e.a=!0,_e.n=Be.replace(u,"")),K=_e,q=[]}else if(Se==="s"){var o=_e.n||"";V.async&&u.test(o)&&(_e.a=!0,_e.n=o.replace(u,"")),q.push(_e)}else q.push(_e)}if(!U)throw i('unclosed helper "'+H.n+'"');return ie(ne.slice(ce,ne.length),!1),H.d=q,H}({f:[]},!0);if(V.plugins)for(var Ye=0;Ye<V.plugins.length;Ye++){var Re=V.plugins[Ye];Re.processAST&&(We.d=Re.processAST(We.d,V))}return We.d}function E(ne,V){var fe=y(ne,V),ye="var tR='';"+(V.useWith?"with("+V.varName+"||{}){":"")+D(fe,V)+"if(cb){cb(null,tR)} return tR"+(V.useWith?"}":"");if(V.plugins)for(var ue=0;ue<V.plugins.length;ue++){var Ie=V.plugins[ue];Ie.processFnString&&(ye=Ie.processFnString(ye,V))}return ye}function b(ne,V){for(var fe=0;fe<V.length;fe++){var ye=V[fe][0],ue=V[fe][1];ne=(V[fe][2]?"await ":"")+"c.l('F','"+ye+"')("+ne,ue&&(ne+=","+ue),ne+=")"}return ne}function w(ne,V,fe,ye,ue,Ie){var ce="{exec:"+(ue?"async ":"")+x(fe,V,ne)+",params:["+ye+"]";return Ie&&(ce+=",name:'"+Ie+"'"),ue&&(ce+=",async:true"),ce+="}"}function T(ne,V){for(var fe="[",ye=0;ye<ne.length;ye++){var ue=ne[ye];fe+=w(V,ue.res||"",ue.d,ue.p||"",ue.a,ue.n),ye<ne.length&&(fe+=",")}return fe+="]"}function x(ne,V,fe){return"function("+V+"){var tR='';"+D(ne,fe)+"return tR}"}function D(ne,V){for(var fe=0,ye=ne.length,ue="";fe<ye;fe++){var Ie=ne[fe];if(typeof Ie=="string")ue+="tR+='"+Ie+"';";else{var ce=Ie.t,Le=Ie.c||"",He=Ie.f,We=Ie.n||"",Ye=Ie.p||"",Re=Ie.res||"",F=Ie.b,H=!!Ie.a;if(ce==="i"){V.defaultFilter&&(Le="c.l('F','"+V.defaultFilter+"')("+Le+")");var U=b(Le,He);!Ie.raw&&V.autoEscape&&(U="c.l('F','e')("+U+")"),ue+="tR+="+U+";"}else if(ce==="h")if(V.storage.nativeHelpers.get(We))ue+=V.storage.nativeHelpers.get(We)(Ie,V);else{var J=(H?"await ":"")+"c.l('H','"+We+"')("+w(V,Re,Ie.d,Ye,H);J+=F?","+T(F,V):",[]",ue+="tR+="+b(J+=",c)",He)+";"}else ce==="s"?ue+="tR+="+b((H?"await ":"")+"c.l('H','"+We+"')({params:["+Ye+"]},[],c)",He)+";":ce==="e"&&(ue+=Le+`
`)}}return ue}var O=function(){function ne(V){this.cache=V}return ne.prototype.define=function(V,fe){this.cache[V]=fe},ne.prototype.get=function(V){return this.cache[V]},ne.prototype.remove=function(V){delete this.cache[V]},ne.prototype.reset=function(){this.cache={}},ne.prototype.load=function(V){c(this.cache,V,!0)},ne}();function R(ne,V,fe,ye){if(V&&V.length>0)throw i((ye?"Native":"")+"Helper '"+ne+"' doesn't accept blocks");if(fe&&fe.length>0)throw i((ye?"Native":"")+"Helper '"+ne+"' doesn't accept filters")}var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function P(ne){return I[ne]}var M=new O({}),B=new O({each:function(ne,V){var fe="",ye=ne.params[0];if(R("each",V,!1),ne.async)return new Promise(function(Ie){(function ce(Le,He,We,Ye,Re){We(Le[He],He).then(function(F){Ye+=F,He===Le.length-1?Re(Ye):ce(Le,He+1,We,Ye,Re)})})(ye,0,ne.exec,fe,Ie)});for(var ue=0;ue<ye.length;ue++)fe+=ne.exec(ye[ue],ue);return fe},foreach:function(ne,V){var fe=ne.params[0];if(R("foreach",V,!1),ne.async)return new Promise(function(Ie){(function ce(Le,He,We,Ye,Re,F){Ye(He[We],Le[He[We]]).then(function(H){Re+=H,We===He.length-1?F(Re):ce(Le,He,We+1,Ye,Re,F)})})(fe,Object.keys(fe),0,ne.exec,"",Ie)});var ye="";for(var ue in fe)l(fe,ue)&&(ye+=ne.exec(ue,fe[ue]));return ye},include:function(ne,V,fe){R("include",V,!1);var ye=fe.storage.templates.get(ne.params[0]);if(!ye)throw i('Could not fetch template "'+ne.params[0]+'"');return ye(ne.params[1],fe)},extends:function(ne,V,fe){var ye=ne.params[1]||{};ye.content=ne.exec();for(var ue=0;ue<V.length;ue++){var Ie=V[ue];ye[Ie.name]=Ie.exec()}var ce=fe.storage.templates.get(ne.params[0]);if(!ce)throw i('Could not fetch template "'+ne.params[0]+'"');return ce(ye,fe)},useScope:function(ne,V){return R("useScope",V,!1),ne.exec(ne.params[0])}}),z=new O({if:function(ne,V){R("if",!1,ne.f,!0);var fe="if("+ne.p+"){"+D(ne.d,V)+"}";if(ne.b)for(var ye=0;ye<ne.b.length;ye++){var ue=ne.b[ye];ue.n==="else"?fe+="else{"+D(ue.d,V)+"}":ue.n==="elif"&&(fe+="else if("+ue.p+"){"+D(ue.d,V)+"}")}return fe},try:function(ne,V){if(R("try",!1,ne.f,!0),!ne.b||ne.b.length!==1||ne.b[0].n!=="catch")throw i("native helper 'try' only accepts 1 block, 'catch'");var fe="try{"+D(ne.d,V)+"}",ye=ne.b[0];return fe+="catch"+(ye.res?"("+ye.res+")":"")+"{"+D(ye.d,V)+"}"},block:function(ne,V){return R("block",ne.b,ne.f,!0),"if(!"+V.varName+"["+ne.p+"]){tR+=("+x(ne.d,"",V)+")()}else{tR+="+V.varName+"["+ne.p+"]}"}}),te=new O({e:function(ne){var V=String(ne);return/[&<>"']/.test(V)?V.replace(/[&<>"']/g,P):V}}),pe={varName:"it",autoTrim:[!1,"nl"],autoEscape:!0,defaultFilter:!1,tags:["{{","}}"],l:function(ne,V){if(ne==="H"){var fe=this.storage.helpers.get(V);if(fe)return fe;throw i("Can't find helper '"+V+"'")}if(ne==="F"){var ye=this.storage.filters.get(V);if(ye)return ye;throw i("Can't find filter '"+V+"'")}},async:!1,storage:{helpers:B,nativeHelpers:z,filters:te,templates:M},prefixes:{h:"@",b:"#",i:"",r:"*",c:"/",e:"!"},cache:!1,plugins:[],useWith:!1};function Ce(ne,V){var fe={};return c(fe,pe),V&&c(fe,V),ne&&c(fe,ne),fe.l.bind(fe),fe}function Oe(ne,V){var fe=Ce(V||{}),ye=Function;if(fe.async){if(!a)throw i("This environment doesn't support async/await");ye=a}try{return new ye(fe.varName,"c","cb",E(ne,fe))}catch(ue){throw ue instanceof SyntaxError?i(`Bad template syntax

`+ue.message+`
`+Array(ue.message.length+1).join("=")+`
`+E(ne,fe)):ue}}function ve(ne,V){var fe;return V.cache&&V.name&&V.storage.templates.get(V.name)?V.storage.templates.get(V.name):(fe=typeof ne=="function"?ne:Oe(ne,V),V.cache&&V.name&&V.storage.templates.define(V.name,fe),fe)}pe.l.bind(pe),n.compile=Oe,n.compileScope=D,n.compileScopeIntoFunction=x,n.compileToString=E,n.defaultConfig=pe,n.filters=te,n.getConfig=Ce,n.helpers=B,n.nativeHelpers=z,n.parse=y,n.render=function(ne,V,fe,ye){var ue=Ce(fe||{});if(!ue.async)return ve(ne,ue)(V,ue);if(!ye){if(typeof s=="function")return new s(function(Ie,ce){try{Ie(ve(ne,ue)(V,ue))}catch(Le){ce(Le)}});throw i("Please provide a callback function, this env doesn't support Promises")}try{ve(ne,ue)(V,ue,ye)}catch(Ie){return ye(Ie)}},n.templates=M,Object.defineProperty(n,"__esModule",{value:!0})})}(zs,zs.exports)),zs.exports}var Zu=qE();function QE(e,t){var n=Yn(["cell","group","pivot","all"],[[]]);n=k.mapObject(n,function(i,r){return k.filter(Ze([],t,"agg","info",r),function(s){return!s.isHidden})}),e.define("rowval",function(i){var[r,s]=i.params;if(["number","string"].indexOf(typeof s)<0)throw new Error('In Handlebars "rowval" helper, `groupField` must be a number or string');var a;if(typeof s=="number"){if(a=s,a<0)throw new Error('In Handlebars "rowval" helper, group field index "'+s+'" out of range')}else if(a=t.groupFields.indexOf(s),a<0)throw new Error('In Handlebars "rowval" helper, specified field "'+s+'" is not part of group');return t.rowVals[r.rowValIdx][a]}),e.define("colval",function(i){let[r,s]=i.params;if(["number","string"].indexOf(typeof s)<0)throw new Error('In Handlebars "rowval" helper, `pivotField` must be a number or string');var a;if(typeof s=="number"){if(a=s,a<0)throw new Error('In Handlebars "rowval" helper, pivot field index "'+s+'" out of range')}else if(a=t.pivotFields.indexOf(s),a<0)throw new Error('In Handlebars "rowval" helper, specified field "'+s+'" is not part of pivot');return t.colVals[r.colValIdx][a]}),e.define("aggregate",function(i){let[r,s,a]=i.params;if(t.isPlain)throw new Error('In Handlebars "aggregate" helper, data must be grouped to use this helper');if(t.isGroup&&["group","all"].indexOf(s)<0)throw new Error('In Handlebars "aggregate" helper, `type` must be one of: { group, all }');if(t.isPivot&&["cell","group","pivot","all"].indexOf(s)<0)throw new Error('In Handlebars "aggregate" helper, `type` must be one of: { cell, group, pivot, all }');if(t.isGroup&&r.rowValIdx==null)throw new Error("missing rowvalidx from context");if(t.isPivot&&(r.rowValIdx==null||r.colValIdx==null))throw new Error("missing rowValIdx or colValIdx from context");if(typeof a!="number"||parseInt(a)!=a)return"[HELPER/AGGREGATE: AGGNUM MUST BE AN INT]";if(n[s].length<=a)return"[HELPER/AGGREGATE: AGGNUM OUT OF RANGE]";var l=t.agg.info[s][a],c=t.isGroup?t.agg.results[s][a][r.rowValIdx]:t.isPivot?t.agg.results[s][a][r.rowValIdx][r.colValIdx]:null,u;return c instanceof j&&(c=c.get(0)),c instanceof Element?c:l.instance.inheritFormatting?(u=ht(l.colConfig[0],l.typeInfo[0],c,{overrideType:l.instance.getType()}),u):(u=ht(null,null,c,{overrideType:l.instance.getType(),decode:!1}),u)})}const $E={addHelpers:QE};var hr=Ee("GridRendererSquirrelly",At,function(){var e=this;e.super.ctor.apply(e,arguments),e.config=it(Zu.defaultConfig),e.config.useWith=!0});hr.prototype._validateFeatures=function(){var e=this;e.features.limit=!1};hr.prototype.canRender=function(e){return!0};hr.prototype._draw_plain=function(e,t,n,i){var r=this,s="";t.data.length===0?r.empty!=null&&(s+=r.empty({},r.config)):(r.before!=null&&(s+=r.before({},r.config)),r.item!=null&&k.each(t.data,function(a){var l={};k.each(a.rowData,function(c,u){var f=r.colConfig.get(u)||{},m=ht(f,n.get(u),c);(m instanceof Element||m instanceof j)&&(m=dd(m)),l[u]=m}),s+=r.item(l,r.config)}),r.after!=null&&(s+=r.after({},r.config))),e.html(s)};hr.prototype._draw_group=function(e,t,n,i){var r=this,s="";t.data.length===0?r.empty!=null&&(s+=r.empty()):(r.before!=null&&(s+=r.before()),r.item!=null&&k.each(t.data,function(a,l){var c={rowValIdx:l};s+=r.item(c,r.config)}),r.after!=null&&(s+=r.after())),e.html(s)};hr.prototype._draw_pivot=function(e,t,n,i){var r=this,s="";t.data.length===0?r.empty!=null&&(s+=r.empty()):(r.before!=null&&(s+=r.before()),r.item!=null&&k.each(t.data,function(a,l){r.beforeGroup!=null&&(s+=r.beforeGroup()),k.each(a,function(c,u){j("<div>").appendTo(e);var f={rowValIdx:l,colValIdx:u};s+=r.item(f,r.config)}),r.afterGroup!=null&&(s+=r.afterGroup())}),r.after!=null&&(s+=r.after())),e.html(s)};hr.prototype.draw=function(e,t,n){var i=this;if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");return i.super.draw(e,n,function(r,s,a){if(!r)return t();$E.addHelpers(Zu.helpers,s);var l=s.isPlain?"plain":s.isGroup?"group":s.isPivot?"pivot":null,c=s.isPlain?"whenPlain":s.isGroup?"whenGroup":s.isPivot?"whenPivot":null,u=i.opts[c]||{};if(k.each(["empty","before","beforeGroup","item","afterGroup","after"],function(f){u[f]!=null&&(i[f]=Zu.compile(u[f],i.config))}),i["_draw_"+l](e,s,a,n),i.addWorkHandler(),i.fire("renderEnd"),i.drawLock.unlock(),typeof t=="function")return t()})};hr.prototype.addWorkHandler=function(){var e=this;e.view.on("workEnd",function(t,n){e.draw(e.root,null,e.drawOpts)},{who:e,limit:1})};At.registry.set("squirrelly",hr);var gv=Ee("ColConfigWin",Object,function(e){var t=this;t.grid=e,e.on("colConfigUpdate",function(n,i){t.colConfig=n,t.initColConfig=i})});gv.prototype.show=function(e,t){var n=this,i=n.colConfig.clone(),r={effect:"fade",duration:100},s=jQuery("<div>",{title:ae("GRID.COLCONFIG_WIN.TITLE")}).dialog({autoOpen:!1,modal:!0,width:600,position:{my:"center",at:"center",of:window},classes:{"ui-dialog":"ui-corner-all wcdv_dialog","ui-dialog-titlebar":"ui-corner-all"},show:r,hide:r,close:function(){s.dialog("destroy")}}),a=0,l=jQuery("<table>").addClass("wcdv_colconfigwin_table").appendTo(jQuery("<div>").css({"max-height":"40ex","overflow-y":"scroll"}).appendTo(s));jQuery('<thead><th class="wcdv_bottom_border_teal wcdv_width_1em"></th><th class="wcdv_bottom_border_teal">'+ae("GRID.COLCONFIG_WIN.TBL.FIELD")+'</th><th class="wcdv_bottom_border_teal">'+ae("GRID.COLCONFIG_WIN.TBL.DISPLAY")+'</th><th colspan="6" class="wcdv_bottom_border_teal">'+ae("GRID.COLCONFIG_WIN.TBL.OPTIONS")+"</th></thead>").appendTo(l);var c=i.keys(),u=jQuery("<tbody>")._makeSortableTable(function(h,v){u.children("tr").eq(v).effect("highlight",750),ja(c,h,v)}).appendTo(l),f={};i.each(function(h,v){var y,E;y=jQuery("<tr>",{"data-field":v}),f[v]=y,E=jQuery("<td>").addClass("wcdv_width_1em").appendTo(y),jQuery("<button>",{type:"button",title:ae("GRID.COLCONFIG_WIN.REORDER_COLS")}).addClass("wcdv_icon_button drag-handle wcdv_button_right").append(Ne("fa-bars")).appendTo(E),E=jQuery("<td>").text(v).appendTo(y),E=jQuery("<td>").css("color",h.displayText?"#000000":"#C0C0C0").text(h.displayText||v).appendTo(y);var b=E;E=jQuery("<td>").addClass("wcdv_width_1em").appendTo(y),jQuery("<button>",{type:"button",title:ae("GRID.COLCONFIG_WIN.RENAME_COL")}).addClass("wcdv_icon_button").append(Ne("fa-pencil")).on("click",function(){var D=prompt(ae("GRID.COLCONFIG_WIN.RENAME_COL.PROMPT",v));D&&(h.displayText=D,b.css("color",h.displayText?"#000000":"#C0C0C0").text(D))}).appendTo(E),E=jQuery("<td>").addClass("wcdv_width_1em").appendTo(y);var w=jQuery("<input>",{type:"checkbox",title:ae("GRID.COLCONFIG_WIN.PIN_COL")}).prop("checked",Ze(!1,h,"isPinned")).on("change",function(){h.isPinned=w.prop("checked"),h.isPinned?a+=1:a-=1,a>0?m.show():m.hide()}).appendTo(E)._makeIconCheckbox("fa-thumb-tack");Ze(!1,h,"isPinned")&&(a+=1),E=jQuery("<td>").addClass("wcdv_width_1em").appendTo(y);var T=jQuery("<input>",{type:"checkbox",title:ae("GRID.COLCONFIG_WIN.HIDE_COL")}).prop("disabled",!Ze(!0,h,"canHide")).prop("checked",Ze(!1,h,"isHidden")).on("change",function(){h.isHidden=T.prop("checked")}).appendTo(E)._makeIconCheckbox("fa-ban");E=jQuery("<td>").addClass("wcdv_width_1em").appendTo(y);var x=jQuery("<input>",{type:"checkbox",title:ae("GRID.COLCONFIG_WIN.ALLOW_HTML")}).prop("checked",Ze(!1,h,"allowHtml")).on("change",function(){h.allowHtml=x.prop("checked")}).appendTo(E)._makeIconCheckbox("fa-code");E=jQuery("<td>").addClass("wcdv_width_1em").appendTo(y),jQuery("<button>",{type:"button",title:ae("GRID.COLCONFIG_WIN.MOVE_COL_TO_TOP")}).addClass("wcdv_icon_button wcdv_button_left").on("click",function(){var D=y.index();u.prepend(y);var O=y.index();u.children("tr").eq(D).effect("highlight",750),u.children("tr").eq(O).effect("highlight",750),ja(c,D,O)}).append(Ne("fa-angle-double-up")).appendTo(E),E=jQuery("<td>").addClass("wcdv_width_1em").appendTo(y),jQuery("<button>",{type:"button",title:ae("GRID.COLCONFIG_WIN.MOVE_COL_TO_BOTTOM")}).addClass("wcdv_icon_button wcdv_button_left").on("click",function(){var D=y.index();u.append(y);var O=y.index();u.children("tr").eq(D).effect("highlight",750),u.children("tr").eq(O).effect("highlight",750),ja(c,D,O)}).append(Ne("fa-angle-double-down")).appendTo(E),y.appendTo(u)});var m=jQuery("<div>").addClass("wcdv_info_banner").append(Ne("fa-info-circle")).append(" ").append(ae("GRID.COLCONFIG_WIN.PINNED_COL_WARNING")).hide().appendTo(s);a>0&&m.show(),jQuery("<hr>").appendTo(s);var g=jQuery("<div>").addClass("wcdv_button_bar").appendTo(s);n.initColConfig&&jQuery("<button>",{type:"button",class:"",title:ae("GRID.COLCONFIG_WIN.RESET_COL_ORDER")}).append(Ne("fa-undo")).append(ae("GRID.COLCONFIG_WIN.RESET_COL_ORDER")).on("click",function(h){c=n.initColConfig.keys(),k.each(c,function(v){f[v]!==null&&(u.append(f[v]),f[v].effect("highlight",750))})}).appendTo(g),jQuery("<button>",{type:"button",class:"",title:ae("DIALOG.OK"),"data-role":"ok"}).append(Ne("fa-check")).append(ae("DIALOG.OK")).on("click",function(){n.colConfig.clear(),k.each(c,function(h){n.colConfig.set(h,i.get(h))}),s.dialog("close"),t(n.colConfig)}).appendTo(g),jQuery("<button>",{type:"button",class:"",title:ae("DIALOG.CANCEL"),"data-role":"cancel"}).append(Ne("fa-ban")).append(ae("DIALOG.CANCEL")).on("click",function(){s.dialog("close")}).appendTo(g),s.dialog("open")};var mv=Ee("DebugWin",Object,function(){});mv.prototype.show=function(e,t,n){var i={effect:"fade",duration:100},r=jQuery("<div>",{id:"wcdv_debugwin",title:"Debug Info"}).css({display:"flex","flex-direction":"column"}).dialog({autoOpen:!1,modal:!0,width:600,maxHeight:600,position:{my:"center",at:"top",of:window},classes:{"ui-dialog":"ui-corner-all wcdv_dialog","ui-dialog-titlebar":"ui-corner-all"},show:i,hide:i,close:function(){r.dialog("destroy")}}),s=[{name:"Source",id:"sourceTab",items:[{name:"Configuration",elt:function(){var f=new Ae;return f.set("Source type",n.type),f.set("Source name",n.name),f.set("Source spec",n.origin.spec),jQuery("<div>").append(f.asHtmlDefnList())}()},{name:"Params",elt:jQuery("<div>").append(new ls(n.params,0).render())},{name:"Type Info",elt:jQuery("<div>").append(new ls(n.cache.typeInfo.asMap(),0).render())}]},{name:"View",id:"viewTab",items:[{name:"Current Config",elt:function(){var f=new Ae;return f.set("View name",t.name),f.set("Filter config",t.getFilter()),f.set("Group config",t.getGroup()),f.set("Pivot config",t.getPivot()),f.set("Aggregate config",t.getAggregate()),jQuery("<div>").append(f.asHtmlDefnList())}()}]},{name:"Grid",id:"gridTab",items:[{name:"Columns",elt:jQuery("<div>").append(new ls(e.colConfig.asMap(),0).render())}]},{name:"Prefs",id:"prefsTab",items:[{name:"Configuration",elt:function(){var f=new Ae;return f.set("Auto-Save",e.prefs.opts.autoSave),f.set("Backend Type",e.prefs.opts.backend.type),f.set("Current Perspective",jQuery("<span>"+e.prefs.currentPerspective.id+"<br/><i>"+e.prefs.currentPerspective.name+"</i></span>")),f.set("Bardo",e.prefs.bardo),jQuery("<div>").append(f.asHtmlDefnList())}()},{name:"Perspectives",elt:function(){var f=new Ae;return k.each(e.prefs.perspectives,function(m){f.set(m.id,{Name:m.name,Config:m.config,Status:m.isUnsaved?"Modified":"Saved"})}),jQuery("<div>").append(f.asHtmlDefnList())}()}]}],a=jQuery("<ul>").css({"flex-grow":"0","flex-shrink":"0","flex-basis":"auto"});k.each(s,function(f){var m=jQuery("<a>",{href:"#"+f.id}).text(f.name);a.append(jQuery("<li>").append(m))});var l=jQuery("<div>").css({flex:"auto",overflow:"hidden",display:"flex","flex-direction":"column"}).append(a);k.each(s,function(f){var m=jQuery("<div>",{id:f.id}).css({"flex-grow":"1","flex-shrink":"1","flex-basis":"auto",overflow:"scroll"});k.each(f.items,function(g){m.append(jQuery("<h3>").text(g.name)),m.append(g.elt)}),m.accordion({heightStyle:"content"}),l.append(m)}),l.appendTo(r).tabs();var c=jQuery("<div>").css({"flex-grow":"0","flex-shrink":"0","flex-basis":"auto","padding-top":"2ex"}).addClass("wcdv_button_bar").appendTo(r),u=["Very Cool","Thanks","Nice!","All Right","Whatever"];jQuery("<button>",{type:"button",class:"",title:"Very Cool"}).append(Ne("fa-thumbs-up")).append(u[Math.floor(Math.random()*u.length)]).on("click",function(){r.dialog("close")}).appendTo(c),r.dialog("open")};var vv=Ee("TemplatesEditor",Object,function(e,t,n){var i=this,r={effect:"fade",duration:100};i.grid=e,i.win=jQuery("<div>",{title:ae("GRID.TEMPLATE_EDITOR.TITLE")}).dialog({autoOpen:!1,modal:!0,width:"auto",position:{my:"center",at:"center",of:window},classes:{"ui-dialog":"ui-corner-all wcdv_dialog","ui-dialog-titlebar":"ui-corner-all"},buttons:[{text:ae("DIALOG.OK"),icon:"ui-icon-check",click:function(){i.tabData.each(function(c,u){k.each(["empty","before","beforeGroup","item","afterGroup","after"],function(f){c.inputs[f]!=null&&st(c.inputs[f].val(),i.grid.defn,"rendererOpts",u,f)})}),i.win.dialog("close"),typeof t=="function"&&t()}},{text:ae("DIALOG.CANCEL"),icon:"ui-icon-cancel",click:function(){i.win.dialog("close"),typeof n=="function"&&n()}}],show:r,hide:r});var s=function(c,u){var f={},m={},g=jQuery("<li>").append(jQuery("<a>",{href:"#wcdv_hbe_"+c}).text(u)),h=jQuery("<div>",{id:"wcdv_hbe_"+c});return k.each([{id:"empty",label:ae("GRID.TEMPLATE_EDITOR.CONFIG.EMPTY"),rows:2},{id:"before",label:ae("GRID.TEMPLATE_EDITOR.CONFIG.BEFORE"),rows:2},{id:"beforeGroup",label:ae("GRID.TEMPLATE_EDITOR.CONFIG.BEFORE_GROUP"),rows:2,modes:["whenPivot"]},{id:"item",label:ae("GRID.TEMPLATE_EDITOR.CONFIG.ITEM"),rows:c==="whenPlain"?8:4},{id:"afterGroup",label:ae("GRID.TEMPLATE_EDITOR.CONFIG.AFTER_GROUP"),rows:2,modes:["whenPivot"]},{id:"after",label:ae("GRID.TEMPLATE_EDITOR.CONFIG.AFTER"),rows:2}],function(v){v.modes!=null&&v.modes.indexOf(c)<0||(m[v.id]=jQuery("<label>",{for:"wcdv_hbe_"+c+"_"+v.id}).css("display","block").text(v.label+":"),f[v.id]=jQuery("<textarea>",{id:"wcdv_hbe_"+c+"_"+v.id,rows:v.rows,cols:80}).css("font-family","monospace"),h.append(m[v.id]),h.append(f[v.id]))}),{li:g,div:h,inputs:f}};i.tabData=new Ae,i.tabData.set("whenPlain",s("whenPlain",ae("GRID.TEMPLATE_EDITOR.PLAIN"))),i.tabData.set("whenGroup",s("whenGroup",ae("GRID.TEMPLATE_EDITOR.GROUPED"))),i.tabData.set("whenPivot",s("whenPivot",ae("GRID.TEMPLATE_EDITOR.PIVOTTED")));var a=jQuery("<div>").appendTo(i.win),l=jQuery("<ul>").appendTo(a);i.tabData.each(function(c){l.append(c.li),a.append(c.div)}),a.tabs()});vv.prototype.show=function(){var e=this;e.tabData.each(function(t,n){var i=me(e.grid.defn,"rendererOpts",n);i!=null&&k.each(["empty","before","beforeGroup","item","afterGroup","after"],function(r){t.inputs[r]&&i[r]&&t.inputs[r].val(i[r])})}),e.win.dialog("open")};var zn=Ee("ToolbarSection",Object,function(){var e=this;e.ui={},e.ui.root=jQuery("<div>")});zn.prototype.attach=function(e){var t=this;t.ui.root.appendTo(e)};zn.prototype.detach=function(){var e=this;e.ui.root.remove()};zn.prototype.show=function(){var e=this;e.update(),e.ui.root.show()};zn.prototype.hide=function(){var e=this;e.ui.root.hide()};zn.prototype.isVisible=function(){var e=this;return Wl(e.ui.root)};zn.prototype.update=function(){};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ho(e){return e+.5|0}const Zi=(e,t,n)=>Math.max(Math.min(e,n),t);function qs(e){return Zi(Ho(e*2.55),0,255)}function rr(e){return Zi(Ho(e*255),0,255)}function Si(e){return Zi(Ho(e/2.55)/100,0,1)}function fh(e){return Zi(Ho(e*100),0,100)}const Hn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ec=[..."0123456789ABCDEF"],VE=e=>ec[e&15],KE=e=>ec[(e&240)>>4]+ec[e&15],Ca=e=>(e&240)>>4===(e&15),JE=e=>Ca(e.r)&&Ca(e.g)&&Ca(e.b)&&Ca(e.a);function XE(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Hn[e[1]]*17,g:255&Hn[e[2]]*17,b:255&Hn[e[3]]*17,a:t===5?Hn[e[4]]*17:255}:(t===7||t===9)&&(n={r:Hn[e[1]]<<4|Hn[e[2]],g:Hn[e[3]]<<4|Hn[e[4]],b:Hn[e[5]]<<4|Hn[e[6]],a:t===9?Hn[e[7]]<<4|Hn[e[8]]:255})),n}const ZE=(e,t)=>e<255?t(e):"";function ex(e){var t=JE(e)?VE:KE;return e?"#"+t(e.r)+t(e.g)+t(e.b)+ZE(e.a,t):void 0}const tx=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yv(e,t,n){const i=t*Math.min(n,1-n),r=(s,a=(s+e/30)%12)=>n-i*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function nx(e,t,n){const i=(r,s=(r+e/60)%6)=>n-n*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function ix(e,t,n){const i=yv(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function rx(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}function kd(e){const n=e.r/255,i=e.g/255,r=e.b/255,s=Math.max(n,i,r),a=Math.min(n,i,r),l=(s+a)/2;let c,u,f;return s!==a&&(f=s-a,u=l>.5?f/(2-s-a):f/(s+a),c=rx(n,i,r,f,s),c=c*60+.5),[c|0,u||0,l]}function Od(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(rr)}function Id(e,t,n){return Od(yv,e,t,n)}function sx(e,t,n){return Od(ix,e,t,n)}function ox(e,t,n){return Od(nx,e,t,n)}function _v(e){return(e%360+360)%360}function ax(e){const t=tx.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?qs(+t[5]):rr(+t[5]));const r=_v(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?i=sx(r,s,a):t[1]==="hsv"?i=ox(r,s,a):i=Id(r,s,a),{r:i[0],g:i[1],b:i[2],a:n}}function lx(e,t){var n=kd(e);n[0]=_v(n[0]+t),n=Id(n),e.r=n[0],e.g=n[1],e.b=n[2]}function ux(e){if(!e)return;const t=kd(e),n=t[0],i=fh(t[1]),r=fh(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${r}%, ${Si(e.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const hh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ph={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cx(){const e={},t=Object.keys(ph),n=Object.keys(hh);let i,r,s,a,l;for(i=0;i<t.length;i++){for(a=l=t[i],r=0;r<n.length;r++)s=n[r],l=l.replace(s,hh[s]);s=parseInt(ph[a],16),e[l]=[s>>16&255,s>>8&255,s&255]}return e}let Ea;function dx(e){Ea||(Ea=cx(),Ea.transparent=[0,0,0,0]);const t=Ea[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const fx=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function hx(e){const t=fx.exec(e);let n=255,i,r,s;if(t){if(t[7]!==i){const a=+t[7];n=t[8]?qs(a):Zi(a*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?qs(i):Zi(i,0,255)),r=255&(t[4]?qs(r):Zi(r,0,255)),s=255&(t[6]?qs(s):Zi(s,0,255)),{r:i,g:r,b:s,a:n}}}function px(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Si(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const xu=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Zr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function gx(e,t,n){const i=Zr(Si(e.r)),r=Zr(Si(e.g)),s=Zr(Si(e.b));return{r:rr(xu(i+n*(Zr(Si(t.r))-i))),g:rr(xu(r+n*(Zr(Si(t.g))-r))),b:rr(xu(s+n*(Zr(Si(t.b))-s))),a:e.a+n*(t.a-e.a)}}function xa(e,t,n){if(e){let i=kd(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=Id(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function bv(e,t){return e&&Object.assign(t||{},e)}function gh(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=rr(e[3]))):(t=bv(e,{r:0,g:0,b:0,a:1}),t.a=rr(t.a)),t}function mx(e){return e.charAt(0)==="r"?hx(e):ax(e)}class go{constructor(t){if(t instanceof go)return t;const n=typeof t;let i;n==="object"?i=gh(t):n==="string"&&(i=XE(t)||dx(t)||mx(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=bv(this._rgb);return t&&(t.a=Si(t.a)),t}set rgb(t){this._rgb=gh(t)}rgbString(){return this._valid?px(this._rgb):void 0}hexString(){return this._valid?ex(this._rgb):void 0}hslString(){return this._valid?ux(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,r=t.rgb;let s;const a=n===s?.5:n,l=2*a-1,c=i.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=a*i.a+(1-a)*r.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=gx(this._rgb,t._rgb,n)),this}clone(){return new go(this.rgb)}alpha(t){return this._rgb.a=rr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ho(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return xa(this._rgb,2,t),this}darken(t){return xa(this._rgb,2,-t),this}saturate(t){return xa(this._rgb,1,t),this}desaturate(t){return xa(this._rgb,1,-t),this}rotate(t){return lx(this._rgb,t),this}}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Ei(){}const vx=(()=>{let e=0;return()=>e++})();function mt(e){return e===null||typeof e>"u"}function Pt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ct(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Lt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function In(e,t){return Lt(e)?e:t}function et(e,t){return typeof e>"u"?t:e}const yx=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,wv=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Tt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function xt(e,t,n,i){let r,s,a;if(Pt(e))for(s=e.length,r=0;r<s;r++)t.call(n,e[r],r);else if(ct(e))for(a=Object.keys(e),s=a.length,r=0;r<s;r++)t.call(n,e[a[r]],a[r])}function ml(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function vl(e){if(Pt(e))return e.map(vl);if(ct(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=vl(e[n[r]]);return t}return e}function Cv(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function _x(e,t,n,i){if(!Cv(e))return;const r=t[e],s=n[e];ct(r)&&ct(s)?mo(r,s,i):t[e]=vl(s)}function mo(e,t,n){const i=Pt(t)?t:[t],r=i.length;if(!ct(e))return e;n=n||{};const s=n.merger||_x;let a;for(let l=0;l<r;++l){if(a=i[l],!ct(a))continue;const c=Object.keys(a);for(let u=0,f=c.length;u<f;++u)s(c[u],e,a,n)}return e}function eo(e,t){return mo(e,t,{merger:bx})}function bx(e,t,n){if(!Cv(e))return;const i=t[e],r=n[e];ct(i)&&ct(r)?eo(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=vl(r))}const mh={"":e=>e,x:e=>e.x,y:e=>e.y};function wx(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Cx(e){const t=wx(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function sr(e,t){return(mh[t]||(mh[t]=Cx(t)))(e)}function Rd(e){return e.charAt(0).toUpperCase()+e.slice(1)}const vo=e=>typeof e<"u",or=e=>typeof e=="function",vh=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Ex(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const kt=Math.PI,St=2*kt,xx=St+kt,yl=Number.POSITIVE_INFINITY,Dx=kt/180,Wt=kt/2,_r=kt/4,yh=kt*2/3,er=Math.log10,hi=Math.sign;function to(e,t,n){return Math.abs(e-t)<n}function _h(e){const t=Math.round(e);e=to(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(er(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Tx(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((r,s)=>r-s).pop(),t}function ps(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Sx(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Ev(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Xn(e){return e*(kt/180)}function Ad(e){return e*(180/kt)}function bh(e){if(!Lt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function xv(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*kt&&(s+=St),{angle:s,distance:r}}function tc(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function kx(e,t){return(e-t+xx)%St-kt}function Rn(e){return(e%St+St)%St}function yo(e,t,n,i){const r=Rn(e),s=Rn(t),a=Rn(n),l=Rn(s-r),c=Rn(a-r),u=Rn(r-s),f=Rn(r-a);return r===s||r===a||i&&s===a||l>c&&u<f}function Jt(e,t,n){return Math.max(t,Math.min(n,e))}function Ox(e){return Jt(e,-32768,32767)}function Ri(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function Pd(e,t,n){n=n||(a=>e[a]<t);let i=e.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Ai=(e,t,n,i)=>Pd(e,n,i?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),Ix=(e,t,n)=>Pd(e,n,i=>e[i][t]>=n);function Rx(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}const Dv=["push","pop","shift","splice","unshift"];function Ax(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Dv.forEach(n=>{const i="_onData"+Rd(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...s){const a=r.apply(this,s);return e._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...s)}),a}})})}function wh(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(Dv.forEach(s=>{delete e[s]}),delete e._chartjs)}function Tv(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Sv=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function kv(e,t){let n=[],i=!1;return function(...r){n=r,i||(i=!0,Sv.call(window,()=>{i=!1,e.apply(t,n)}))}}function Px(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const Md=e=>e==="start"?"left":e==="end"?"right":"center",sn=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Mx=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function Ov(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:a,_parsed:l}=e,c=a.axis,{min:u,max:f,minDefined:m,maxDefined:g}=a.getUserBounds();m&&(r=Jt(Math.min(Ai(l,c,u).lo,n?i:Ai(t,c,a.getPixelForValue(u)).lo),0,i-1)),g?s=Jt(Math.max(Ai(l,a.axis,f,!0).hi+1,n?0:Ai(t,c,a.getPixelForValue(f),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function Iv(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Da=e=>e===0||e===1,Ch=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*St/n)),Eh=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*St/n)+1,no={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Wt)+1,easeOutSine:e=>Math.sin(e*Wt),easeInOutSine:e=>-.5*(Math.cos(kt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Da(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Da(e)?e:Ch(e,.075,.3),easeOutElastic:e=>Da(e)?e:Eh(e,.075,.3),easeInOutElastic(e){return Da(e)?e:e<.5?.5*Ch(e*2,.1125,.45):.5+.5*Eh(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-no.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?no.easeInBounce(e*2)*.5:no.easeOutBounce(e*2-1)*.5+.5};function Nd(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function xh(e){return Nd(e)?e:new go(e)}function Du(e){return Nd(e)?e:new go(e).saturate(.5).darken(.1).hexString()}const Nx=["x","y","borderWidth","radius","tension"],Lx=["color","borderColor","backgroundColor"];function Fx(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Lx},numbers:{type:"number",properties:Nx}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Gx(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Dh=new Map;function Hx(e,t){t=t||{};const n=e+JSON.stringify(t);let i=Dh.get(n);return i||(i=new Intl.NumberFormat(e,t),Dh.set(n,i)),i}function Bo(e,t,n){return Hx(t,n).format(e)}const Rv={values(e){return Pt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=Bx(e,n)}const a=er(Math.abs(s)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Bo(e,i,c)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(er(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?Rv.numeric.call(this,e,t,n):""}};function Bx(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var Ql={formatters:Rv};function Wx(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ql.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Lr=Object.create(null),nc=Object.create(null);function io(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];e=e[s]||(e[s]=Object.create(null))}return e}function Tu(e,t,n){return typeof t=="string"?mo(io(e,t),n):mo(io(e,""),t)}class Ux{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Du(r.backgroundColor),this.hoverBorderColor=(i,r)=>Du(r.borderColor),this.hoverColor=(i,r)=>Du(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Tu(this,t,n)}get(t){return io(this,t)}describe(t,n){return Tu(nc,t,n)}override(t,n){return Tu(Lr,t,n)}route(t,n,i,r){const s=io(this,t),a=io(this,i),l="_"+n;Object.defineProperties(s,{[l]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=a[r];return ct(c)?Object.assign({},u,c):et(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var Ft=new Ux({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Fx,Gx,Wx]);function jx(e){return!e||mt(e.size)||mt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function _l(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Yx(e,t,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let a=0;const l=n.length;let c,u,f,m,g;for(c=0;c<l;c++)if(m=n[c],m!=null&&!Pt(m))a=_l(e,r,s,a,m);else if(Pt(m))for(u=0,f=m.length;u<f;u++)g=m[u],g!=null&&!Pt(g)&&(a=_l(e,r,s,a,g));e.restore();const h=s.length/2;if(h>n.length){for(c=0;c<h;c++)delete r[s[c]];s.splice(0,h)}return a}function br(e,t,n){const i=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function Th(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function ic(e,t,n,i){Av(e,t,n,i,null)}function Av(e,t,n,i,r){let s,a,l,c,u,f,m,g;const h=t.pointStyle,v=t.rotation,y=t.radius;let E=(v||0)*Dx;if(h&&typeof h=="object"&&(s=h.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(E),e.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),e.restore();return}if(!(isNaN(y)||y<=0)){switch(e.beginPath(),h){default:r?e.ellipse(n,i,r/2,y,0,0,St):e.arc(n,i,y,0,St),e.closePath();break;case"triangle":f=r?r/2:y,e.moveTo(n+Math.sin(E)*f,i-Math.cos(E)*y),E+=yh,e.lineTo(n+Math.sin(E)*f,i-Math.cos(E)*y),E+=yh,e.lineTo(n+Math.sin(E)*f,i-Math.cos(E)*y),e.closePath();break;case"rectRounded":u=y*.516,c=y-u,a=Math.cos(E+_r)*c,m=Math.cos(E+_r)*(r?r/2-u:c),l=Math.sin(E+_r)*c,g=Math.sin(E+_r)*(r?r/2-u:c),e.arc(n-m,i-l,u,E-kt,E-Wt),e.arc(n+g,i-a,u,E-Wt,E),e.arc(n+m,i+l,u,E,E+Wt),e.arc(n-g,i+a,u,E+Wt,E+kt),e.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*y,f=r?r/2:c,e.rect(n-f,i-c,2*f,2*c);break}E+=_r;case"rectRot":m=Math.cos(E)*(r?r/2:y),a=Math.cos(E)*y,l=Math.sin(E)*y,g=Math.sin(E)*(r?r/2:y),e.moveTo(n-m,i-l),e.lineTo(n+g,i-a),e.lineTo(n+m,i+l),e.lineTo(n-g,i+a),e.closePath();break;case"crossRot":E+=_r;case"cross":m=Math.cos(E)*(r?r/2:y),a=Math.cos(E)*y,l=Math.sin(E)*y,g=Math.sin(E)*(r?r/2:y),e.moveTo(n-m,i-l),e.lineTo(n+m,i+l),e.moveTo(n+g,i-a),e.lineTo(n-g,i+a);break;case"star":m=Math.cos(E)*(r?r/2:y),a=Math.cos(E)*y,l=Math.sin(E)*y,g=Math.sin(E)*(r?r/2:y),e.moveTo(n-m,i-l),e.lineTo(n+m,i+l),e.moveTo(n+g,i-a),e.lineTo(n-g,i+a),E+=_r,m=Math.cos(E)*(r?r/2:y),a=Math.cos(E)*y,l=Math.sin(E)*y,g=Math.sin(E)*(r?r/2:y),e.moveTo(n-m,i-l),e.lineTo(n+m,i+l),e.moveTo(n+g,i-a),e.lineTo(n-g,i+a);break;case"line":a=r?r/2:Math.cos(E)*y,l=Math.sin(E)*y,e.moveTo(n-a,i-l),e.lineTo(n+a,i+l);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(E)*(r?r/2:y),i+Math.sin(E)*y);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Pi(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function $l(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Vl(e){e.restore()}function zx(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const s=(t.x+n.x)/2;e.lineTo(s,t.y),e.lineTo(s,n.y)}else r==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function qx(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Qx(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),mt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function $x(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),a=t-s.actualBoundingBoxLeft,l=t+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,f=r.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,f),e.lineTo(l,f),e.stroke()}}function Vx(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Fr(e,t,n,i,r,s={}){const a=Pt(t)?t:[t],l=s.strokeWidth>0&&s.strokeColor!=="";let c,u;for(e.save(),e.font=r.string,Qx(e,s),c=0;c<a.length;++c)u=a[c],s.backdrop&&Vx(e,s.backdrop),l&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),mt(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(u,n,i,s.maxWidth)),e.fillText(u,n,i,s.maxWidth),$x(e,n,i,u,s),i+=Number(r.lineHeight);e.restore()}function _o(e,t){const{x:n,y:i,w:r,h:s,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*kt,kt,!0),e.lineTo(n,i+s-a.bottomLeft),e.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,kt,Wt,!0),e.lineTo(n+r-a.bottomRight,i+s),e.arc(n+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,Wt,0,!0),e.lineTo(n+r,i+a.topRight),e.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-Wt,!0),e.lineTo(n+a.topLeft,i)}const Kx=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Jx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Xx(e,t){const n=(""+e).match(Kx);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Zx=e=>+e||0;function Ld(e,t){const n={},i=ct(t),r=i?Object.keys(t):t,s=ct(e)?i?a=>et(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of r)n[a]=Zx(s(a));return n}function Pv(e){return Ld(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Rr(e){return Ld(e,["topLeft","topRight","bottomLeft","bottomRight"])}function un(e){const t=Pv(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Kt(e,t){e=e||{},t=t||Ft.font;let n=et(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=et(e.style,t.style);i&&!(""+i).match(Jx)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:et(e.family,t.family),lineHeight:Xx(et(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:et(e.weight,t.weight),string:""};return r.string=jx(r),r}function Qs(e,t,n,i){let r,s,a;for(r=0,s=e.length;r<s;++r)if(a=e[r],a!==void 0&&a!==void 0)return a}function eD(e,t,n){const{min:i,max:r}=e,s=wv(t,(r-i)/2),a=(l,c)=>n&&l===0?0:l+c;return{min:a(i,-Math.abs(s)),max:a(r,s)}}function pr(e,t){return Object.assign(Object.create(e),t)}function Fd(e,t=[""],n,i,r=()=>e[0]){const s=n||e;typeof i>"u"&&(i=Fv("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:i,_getTarget:r,override:l=>Fd([l,...e],t,s,i)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return Nv(l,c,()=>lD(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return kh(l).includes(c)},ownKeys(l){return kh(l)},set(l,c,u){const f=l._storage||(l._storage=r());return l[c]=f[c]=u,delete l._keys,!0}})}function gs(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Mv(e,i),setContext:s=>gs(e,s,n,i),override:s=>gs(e.override(s),t,n,i)};return new Proxy(r,{deleteProperty(s,a){return delete s[a],delete e[a],!0},get(s,a,l){return Nv(s,a,()=>nD(s,a,l))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(s,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(s,a,l){return e[a]=l,delete s[a],!0}})}function Mv(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:or(n)?n:()=>n,isIndexable:or(i)?i:()=>i}}const tD=(e,t)=>e?e+Rd(t):t,Gd=(e,t)=>ct(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Nv(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const i=n();return e[t]=i,i}function nD(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=e;let l=i[t];return or(l)&&a.isScriptable(t)&&(l=iD(t,l,e,n)),Pt(l)&&l.length&&(l=rD(t,l,e,a.isIndexable)),Gd(t,l)&&(l=gs(l,r,s&&s[t],a)),l}function iD(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(s,a||i);return l.delete(e),Gd(e,c)&&(c=Hd(r._scopes,r,e,c)),c}function rD(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:l}=n;if(typeof s.index<"u"&&i(e))return t[s.index%t.length];if(ct(t[0])){const c=t,u=r._scopes.filter(f=>f!==c);t=[];for(const f of c){const m=Hd(u,r,e,f);t.push(gs(m,s,a&&a[e],l))}}return t}function Lv(e,t,n){return or(e)?e(t,n):e}const sD=(e,t)=>e===!0?t:typeof e=="string"?sr(t,e):void 0;function oD(e,t,n,i,r){for(const s of t){const a=sD(n,s);if(a){e.add(a);const l=Lv(a._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==i)return l}else if(a===!1&&typeof i<"u"&&n!==i)return null}return!1}function Hd(e,t,n,i){const r=t._rootScopes,s=Lv(t._fallback,n,i),a=[...e,...r],l=new Set;l.add(i);let c=Sh(l,a,n,s||n,i);return c===null||typeof s<"u"&&s!==n&&(c=Sh(l,a,s,c,i),c===null)?!1:Fd(Array.from(l),[""],r,s,()=>aD(t,n,i))}function Sh(e,t,n,i,r){for(;n;)n=oD(e,t,n,i,r);return n}function aD(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];return Pt(r)&&ct(n)?n:r||{}}function lD(e,t,n,i){let r;for(const s of t)if(r=Fv(tD(s,e),n),typeof r<"u")return Gd(e,r)?Hd(n,i,e,r):r}function Fv(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function kh(e){let t=e._keys;return t||(t=e._keys=uD(e._scopes)),t}function uD(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function Gv(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+n,f=t[u],a[l]={r:r.parse(sr(f,s),u)};return a}const cD=Number.EPSILON||1e-14,ms=(e,t)=>t<e.length&&!e[t].skip&&e[t],Hv=e=>e==="x"?"y":"x";function dD(e,t,n,i){const r=e.skip?t:e,s=t,a=n.skip?t:n,l=tc(s,r),c=tc(a,s);let u=l/(l+c),f=c/(l+c);u=isNaN(u)?0:u,f=isNaN(f)?0:f;const m=i*u,g=i*f;return{previous:{x:s.x-m*(a.x-r.x),y:s.y-m*(a.y-r.y)},next:{x:s.x+g*(a.x-r.x),y:s.y+g*(a.y-r.y)}}}function fD(e,t,n){const i=e.length;let r,s,a,l,c,u=ms(e,0);for(let f=0;f<i-1;++f)if(c=u,u=ms(e,f+1),!(!c||!u)){if(to(t[f],0,cD)){n[f]=n[f+1]=0;continue}r=n[f]/t[f],s=n[f+1]/t[f],l=Math.pow(r,2)+Math.pow(s,2),!(l<=9)&&(a=3/Math.sqrt(l),n[f]=r*a*t[f],n[f+1]=s*a*t[f])}}function hD(e,t,n="x"){const i=Hv(n),r=e.length;let s,a,l,c=ms(e,0);for(let u=0;u<r;++u){if(a=l,l=c,c=ms(e,u+1),!l)continue;const f=l[n],m=l[i];a&&(s=(f-a[n])/3,l[`cp1${n}`]=f-s,l[`cp1${i}`]=m-s*t[u]),c&&(s=(c[n]-f)/3,l[`cp2${n}`]=f+s,l[`cp2${i}`]=m+s*t[u])}}function pD(e,t="x"){const n=Hv(t),i=e.length,r=Array(i).fill(0),s=Array(i);let a,l,c,u=ms(e,0);for(a=0;a<i;++a)if(l=c,c=u,u=ms(e,a+1),!!c){if(u){const f=u[t]-c[t];r[a]=f!==0?(u[n]-c[n])/f:0}s[a]=l?u?hi(r[a-1])!==hi(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}fD(e,r,s),hD(e,s,t)}function Ta(e,t,n){return Math.max(Math.min(e,n),t)}function gD(e,t){let n,i,r,s,a,l=Pi(e[0],t);for(n=0,i=e.length;n<i;++n)a=s,s=l,l=n<i-1&&Pi(e[n+1],t),s&&(r=e[n],a&&(r.cp1x=Ta(r.cp1x,t.left,t.right),r.cp1y=Ta(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=Ta(r.cp2x,t.left,t.right),r.cp2y=Ta(r.cp2y,t.top,t.bottom)))}function mD(e,t,n,i,r){let s,a,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")pD(e,r);else{let u=i?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)l=e[s],c=dD(u,l,e[Math.min(s+1,a-(i?0:1))%a],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&gD(e,n)}function Bv(){return typeof window<"u"&&typeof document<"u"}function Bd(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function bl(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Kl=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function vD(e,t){return Kl(e).getPropertyValue(t)}const yD=["top","right","bottom","left"];function Ar(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=yD[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const _D=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function bD(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let a=!1,l,c;if(_D(r,s,e.target))l=r,c=s;else{const u=t.getBoundingClientRect();l=i.clientX-u.left,c=i.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function Er(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=Kl(n),s=r.boxSizing==="border-box",a=Ar(r,"padding"),l=Ar(r,"border","width"),{x:c,y:u,box:f}=bD(e,n),m=a.left+(f&&l.left),g=a.top+(f&&l.top);let{width:h,height:v}=t;return s&&(h-=a.width+l.width,v-=a.height+l.height),{x:Math.round((c-m)/h*n.width/i),y:Math.round((u-g)/v*n.height/i)}}function wD(e,t,n){let i,r;if(t===void 0||n===void 0){const s=Bd(e);if(!s)t=e.clientWidth,n=e.clientHeight;else{const a=s.getBoundingClientRect(),l=Kl(s),c=Ar(l,"border","width"),u=Ar(l,"padding");t=a.width-u.width-c.width,n=a.height-u.height-c.height,i=bl(l.maxWidth,s,"clientWidth"),r=bl(l.maxHeight,s,"clientHeight")}}return{width:t,height:n,maxWidth:i||yl,maxHeight:r||yl}}const Sa=e=>Math.round(e*10)/10;function CD(e,t,n,i){const r=Kl(e),s=Ar(r,"margin"),a=bl(r.maxWidth,e,"clientWidth")||yl,l=bl(r.maxHeight,e,"clientHeight")||yl,c=wD(e,t,n);let{width:u,height:f}=c;if(r.boxSizing==="content-box"){const g=Ar(r,"border","width"),h=Ar(r,"padding");u-=h.width+g.width,f-=h.height+g.height}return u=Math.max(0,u-s.width),f=Math.max(0,i?u/i:f-s.height),u=Sa(Math.min(u,a,c.maxWidth)),f=Sa(Math.min(f,l,c.maxHeight)),u&&!f&&(f=Sa(u/2)),(t!==void 0||n!==void 0)&&i&&c.height&&f>c.height&&(f=c.height,u=Sa(Math.floor(f*i))),{width:u,height:f}}function Oh(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||a.height!==r||a.width!==s?(e.currentDevicePixelRatio=i,a.height=r,a.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const ED=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function Ih(e,t){const n=vD(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function xr(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function xD(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function DD(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=xr(e,r,n),l=xr(r,s,n),c=xr(s,t,n),u=xr(a,l,n),f=xr(l,c,n);return xr(u,f,n)}const TD=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},SD=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function us(e,t,n){return e?TD(t,n):SD()}function Wv(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Uv(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function jv(e){return e==="angle"?{between:yo,compare:kx,normalize:Rn}:{between:Ri,compare:(t,n)=>t-n,normalize:t=>t}}function Rh({start:e,end:t,count:n,loop:i,style:r}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:r}}function kD(e,t,n){const{property:i,start:r,end:s}=n,{between:a,normalize:l}=jv(i),c=t.length;let{start:u,end:f,loop:m}=e,g,h;if(m){for(u+=c,f+=c,g=0,h=c;g<h&&a(l(t[u%c][i]),r,s);++g)u--,f--;u%=c,f%=c}return f<u&&(f+=c),{start:u,end:f,loop:m,style:e.style}}function Yv(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,a=t.length,{compare:l,between:c,normalize:u}=jv(i),{start:f,end:m,loop:g,style:h}=kD(e,t,n),v=[];let y=!1,E=null,b,w,T;const x=()=>c(r,T,b)&&l(r,T)!==0,D=()=>l(s,b)===0||c(s,T,b),O=()=>y||x(),R=()=>!y||D();for(let I=f,P=f;I<=m;++I)w=t[I%a],!w.skip&&(b=u(w[i]),b!==T&&(y=c(b,r,s),E===null&&O()&&(E=l(b,r)===0?I:P),E!==null&&R()&&(v.push(Rh({start:E,end:I,loop:g,count:a,style:h})),E=null),P=I,T=b));return E!==null&&v.push(Rh({start:E,end:m,loop:g,count:a,style:h})),v}function zv(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=Yv(i[r],e.points,t);s.length&&n.push(...s)}return n}function OD(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}function ID(e,t,n,i){const r=e.length,s=[];let a=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%r];u.skip||u.stop?l.skip||(i=!1,s.push({start:t%r,end:(c-1)%r,loop:i}),t=a=u.stop?c:null):(a=c,l.skip&&(t=c)),l=u}return a!==null&&s.push({start:t%r,end:a%r,loop:i}),s}function RD(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:a,end:l}=OD(n,r,s,i);if(i===!0)return Ah(e,[{start:a,end:l,loop:s}],n,t);const c=l<a?l+r:l,u=!!e._fullLoop&&a===0&&l===r-1;return Ah(e,ID(n,a,c,u),n,t)}function Ah(e,t,n,i){return!i||!i.setContext||!n?t:AD(e,t,n,i)}function AD(e,t,n,i){const r=e._chart.getContext(),s=Ph(e.options),{_datasetIndex:a,options:{spanGaps:l}}=e,c=n.length,u=[];let f=s,m=t[0].start,g=m;function h(v,y,E,b){const w=l?-1:1;if(v!==y){for(v+=c;n[v%c].skip;)v-=w;for(;n[y%c].skip;)y+=w;v%c!==y%c&&(u.push({start:v%c,end:y%c,loop:E,style:b}),f=b,m=y%c)}}for(const v of t){m=l?m:v.start;let y=n[m%c],E;for(g=m+1;g<=v.end;g++){const b=n[g%c];E=Ph(i.setContext(pr(r,{type:"segment",p0:y,p1:b,p0DataIndex:(g-1)%c,p1DataIndex:g%c,datasetIndex:a}))),PD(E,f)&&h(m,g-1,v.loop,f),y=b,f=E}m<g-1&&h(m,g-1,v.loop,f)}return u}function Ph(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function PD(e,t){if(!t)return!1;const n=[],i=function(r,s){return Nd(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(e,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class MD{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,r){const s=n.listeners[r],a=n.duration;s.forEach(l=>l({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(i-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Sv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let a=s.length-1,l=!1,c;for(;a>=0;--a)c=s[a],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(t),l=!0):(s[a]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),n+=s.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var xi=new MD;const Mh="transparent",ND={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=xh(e||Mh),r=i.valid&&xh(t||Mh);return r&&r.valid?r.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class LD{constructor(t,n,i,r){const s=n[i];r=Qs([t.to,r,s,t.from]);const a=Qs([t.from,s,r]);this._active=!0,this._fn=t.fn||ND[t.type||typeof a],this._easing=no[t.easing]||no.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,a=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Qs([t.to,n,r,t.from]),this._from=Qs([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,r=this._prop,s=this._from,a=this._loop,l=this._to;let c;if(this._active=s!==l&&(a||n<i),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=s;return}c=n/i%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class qv{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ct(t))return;const n=Object.keys(Ft.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!ct(s))return;const a={};for(const l of n)a[l]=s[l];(Pt(s.properties)&&s.properties||[r]).forEach(l=>{(l===r||!i.has(l))&&i.set(l,a)})})}_animateOptions(t,n){const i=n.options,r=GD(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&FD(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,n){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),a=Object.keys(n),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(t,n));continue}const f=n[u];let m=s[u];const g=i.get(u);if(m)if(g&&m.active()){m.update(g,f,l);continue}else m.cancel();if(!g||!g.duration){t[u]=f;continue}s[u]=m=new LD(g,t,u,f),r.push(m)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return xi.add(this._chart,i),!0}}function FD(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=e[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function GD(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Nh(e,t){const n=e&&e.options||{},i=n.reverse,r=n.min===void 0?t:0,s=n.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function HD(e,t,n){if(n===!1)return!1;const i=Nh(e,n),r=Nh(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function BD(e){let t,n,i,r;return ct(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:e===!1}}function Qv(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Lh(e,t,n,i={}){const r=e.keys,s=i.mode==="single";let a,l,c,u;if(t!==null){for(a=0,l=r.length;a<l;++a){if(c=+r[a],c===n){if(i.all)continue;break}u=e.values[c],Lt(u)&&(s||t===0||hi(t)===hi(u))&&(t+=u)}return t}}function WD(e){const t=Object.keys(e),n=new Array(t.length);let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],n[i]={x:s,y:e[s]};return n}function Fh(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function UD(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function jD(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function YD(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function Gh(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=e[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Hh(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:l}=i,c=s.axis,u=a.axis,f=UD(s,a,i),m=t.length;let g;for(let h=0;h<m;++h){const v=t[h],{[c]:y,[u]:E}=v,b=v._stacks||(v._stacks={});g=b[u]=YD(r,f,y),g[l]=E,g._top=Gh(g,a,!0,i.type),g._bottom=Gh(g,a,!1,i.type);const w=g._visualValues||(g._visualValues={});w[l]=E}}function Su(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function zD(e,t){return pr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function qD(e,t,n){return pr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Hs(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const r of t){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const ku=e=>e==="reset"||e==="none",Bh=(e,t)=>t?e:Object.assign({},e),QD=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Qv(n,!0),values:null};class Zn{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Fh(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Hs(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(m,g,h,v)=>m==="x"?g:m==="r"?v:h,s=n.xAxisID=et(i.xAxisID,Su(t,"x")),a=n.yAxisID=et(i.yAxisID,Su(t,"y")),l=n.rAxisID=et(i.rAxisID,Su(t,"r")),c=n.indexAxis,u=n.iAxisID=r(c,s,a,l),f=n.vAxisID=r(c,a,s,l);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&wh(this._data,this),t._stacked&&Hs(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(ct(n))this._data=WD(n);else if(i!==n){if(i){wh(i,this);const r=this._cachedMeta;Hs(r),r._parsed=[]}n&&Object.isExtensible(n)&&Ax(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Fh(n.vScale,n),n.stack!==i.stack&&(r=!0,Hs(n),n.stack=i.stack),this._resyncElements(t),(r||s!==n._stacked)&&Hh(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:a}=i,l=s.axis;let c=t===0&&n===r.length?!0:i._sorted,u=t>0&&i._parsed[t-1],f,m,g;if(this._parsing===!1)i._parsed=r,i._sorted=!0,g=r;else{Pt(r[t])?g=this.parseArrayData(i,r,t,n):ct(r[t])?g=this.parseObjectData(i,r,t,n):g=this.parsePrimitiveData(i,r,t,n);const h=()=>m[l]===null||u&&m[l]<u[l];for(f=0;f<n;++f)i._parsed[f+t]=m=g[f],c&&(h()&&(c=!1),u=m);i._sorted=c}a&&Hh(this,g)}parsePrimitiveData(t,n,i,r){const{iScale:s,vScale:a}=t,l=s.axis,c=a.axis,u=s.getLabels(),f=s===a,m=new Array(r);let g,h,v;for(g=0,h=r;g<h;++g)v=g+i,m[g]={[l]:f||s.parse(u[v],v),[c]:a.parse(n[v],v)};return m}parseArrayData(t,n,i,r){const{xScale:s,yScale:a}=t,l=new Array(r);let c,u,f,m;for(c=0,u=r;c<u;++c)f=c+i,m=n[f],l[c]={x:s.parse(m[0],f),y:a.parse(m[1],f)};return l}parseObjectData(t,n,i,r){const{xScale:s,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let f,m,g,h;for(f=0,m=r;f<m;++f)g=f+i,h=n[g],u[f]={x:s.parse(sr(h,l),g),y:a.parse(sr(h,c),g)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const r=this.chart,s=this._cachedMeta,a=n[t.axis],l={keys:Qv(r,!0),values:n._stacks[t.axis]._visualValues};return Lh(l,a,s.index,{mode:i})}updateRangeFromParsed(t,n,i,r){const s=i[n.axis];let a=s===null?NaN:s;const l=r&&i._stacks[n.axis];r&&l&&(r.values=l,a=Lh(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,a=r.length,l=this._getOtherScale(t),c=QD(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:m}=jD(l);let g,h;function v(){h=r[g];const y=h[l.axis];return!Lt(h[t.axis])||f>y||m<y}for(g=0;g<a&&!(!v()&&(this.updateRangeFromParsed(u,t,h,c),s));++g);if(s){for(g=a-1;g>=0;--g)if(!v()){this.updateRangeFromParsed(u,t,h,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let r,s,a;for(r=0,s=n.length;r<s;++r)a=n[r][t.axis],Lt(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=BD(et(this.options.clip,HD(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let f;for(i.dataset&&i.dataset.draw(t,s,l,c),f=l;f<l+c;++f){const m=r[f];m.hidden||(m.active&&u?a.push(m):m.draw(t,s))}for(f=0;f<a.length;++f)a[f].draw(t,s)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=qD(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=zD(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const r=n==="active",s=this._cachedDataOpts,a=t+"-"+n,l=s[a],c=this.enableOptionSharing&&vo(i);if(l)return Bh(l,c);const u=this.chart.config,f=u.datasetElementScopeKeys(this._type,t),m=r?[`${t}Hover`,"hover",t,""]:[t,""],g=u.getOptionScopes(this.getDataset(),f),h=Object.keys(Ft.elements[t]),v=()=>this.getContext(i,r,n),y=u.resolveNamedOptions(g,h,v,m);return y.$shared&&(y.$shared=c,s[a]=Object.freeze(Bh(y,c))),y}_resolveAnimations(t,n,i){const r=this.chart,s=this._cachedDataOpts,a=`animation-${n}`,l=s[a];if(l)return l;let c;if(r.options.animation!==!1){const f=this.chart.config,m=f.datasetAnimationScopeKeys(this._type,n),g=f.getOptionScopes(this.getDataset(),m);c=f.createResolver(g,this.getContext(t,i,n))}const u=new qv(r,c&&c.animations);return c&&c._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||ku(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),r=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:a}}updateElement(t,n,i,r){ku(r)?Object.assign(t,i):this._resolveAnimations(n,r).update(t,i)}updateSharedOptions(t,n,i){t&&!ku(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,r){t.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=i.length,s=n.length,a=Math.min(s,r);a&&this.parse(0,a),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,n,i=!0){const r=this._cachedMeta,s=r.data,a=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=a;l--)u[l]=u[l-n]};for(c(s),l=t;l<a;++l)s[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),i&&this.updateElements(s,t,n,"reset")}updateElements(t,n,i,r){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,n);i._stacked&&Hs(i,r)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,r]=t;this[n](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Pe(Zn,"defaults",{}),Pe(Zn,"datasetElementType",null),Pe(Zn,"dataElementType",null);function $D(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=Tv(i.sort((r,s)=>r-s))}return e._cache.$bar}function VD(e){const t=e.iScale,n=$D(t,e.type);let i=t._length,r,s,a,l;const c=()=>{a===32767||a===-32768||(vo(l)&&(i=Math.min(i,Math.abs(a-l)||i)),l=a)};for(r=0,s=n.length;r<s;++r)a=t.getPixelForValue(n[r]),c();for(l=void 0,r=0,s=t.ticks.length;r<s;++r)a=t.getPixelForTick(r),c();return i}function KD(e,t,n,i){const r=n.barThickness;let s,a;return mt(r)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:t.pixels[e]-s/2}}function JD(e,t,n,i){const r=t.pixels,s=r[e];let a=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;a===null&&(a=s-(l===null?t.end-t.start:l-s)),l===null&&(l=s+s-a);const u=s-(s-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/i,ratio:n.barPercentage,start:u}}function XD(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),a=Math.min(r,s),l=Math.max(r,s);let c=a,u=l;Math.abs(a)>Math.abs(l)&&(c=l,u=a),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:r,end:s,min:a,max:l}}function $v(e,t,n,i){return Pt(e)?XD(e,t,n,i):t[n.axis]=n.parse(e,i),t}function Wh(e,t,n,i){const r=e.iScale,s=e.vScale,a=r.getLabels(),l=r===s,c=[];let u,f,m,g;for(u=n,f=n+i;u<f;++u)g=t[u],m={},m[r.axis]=l||r.parse(a[u],u),c.push($v(g,m,s,u));return c}function Ou(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function ZD(e,t,n){return e!==0?hi(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function eT(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}function tT(e,t,n,i){let r=t.borderSkipped;const s={};if(!r){e.borderSkipped=s;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:u,bottom:f}=eT(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=u:(n._bottom||0)===i?r=f:(s[Uh(f,a,l,c)]=!0,r=u)),s[Uh(r,a,l,c)]=!0,e.borderSkipped=s}function Uh(e,t,n,i){return i?(e=nT(e,t,n),e=jh(e,n,t)):e=jh(e,t,n),e}function nT(e,t,n){return e===t?n:e===n?t:e}function jh(e,t,n){return e==="start"?t:e==="end"?n:e}function iT(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class qa extends Zn{parsePrimitiveData(t,n,i,r){return Wh(t,n,i,r)}parseArrayData(t,n,i,r){return Wh(t,n,i,r)}parseObjectData(t,n,i,r){const{iScale:s,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=s.axis==="x"?l:c,f=a.axis==="x"?l:c,m=[];let g,h,v,y;for(g=i,h=i+r;g<h;++g)y=n[g],v={},v[s.axis]=s.parse(sr(y,u),g),m.push($v(sr(y,f),v,a,g));return m}updateRangeFromParsed(t,n,i,r){super.updateRangeFromParsed(t,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(t),a=s._custom,l=Ou(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,r){const s=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),f=this._getRuler(),{sharedOptions:m,includeOptions:g}=this._getSharedOptions(n,r);for(let h=n;h<n+i;h++){const v=this.getParsed(h),y=s||mt(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(h),E=this._calculateBarIndexPixels(h,f),b=(v._stacks||{})[l.axis],w={horizontal:u,base:y.base,enableBorderRadius:!b||Ou(v._custom)||a===b._top||a===b._bottom,x:u?y.head:E.center,y:u?E.center:y.head,height:u?E.size:Math.abs(y.size),width:u?Math.abs(y.size):E.size};g&&(w.options=m||this.resolveDataElementOptions(h,t[h].active?"active":r));const T=w.options||t[h].options;tT(w,T,b,a),iT(w,T,f.ratio),this.updateElement(t[h],h,w,r)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),s=i.options.stacked,a=[],l=c=>{const u=c.controller.getParsed(n),f=u&&u[c.vScale.axis];if(mt(f)||isNaN(f))return!0};for(const c of r)if(!(n!==void 0&&l(c))&&((s===!1||a.indexOf(c.stack)===-1||s===void 0&&c.stack===void 0)&&a.push(c.stack),c.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,i){const r=this._getStacks(t,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,a;for(s=0,a=n.data.length;s<a;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const l=t.barThickness;return{min:l||VD(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:a}}=this,l=s||0,c=this.getParsed(t),u=c._custom,f=Ou(u);let m=c[n.axis],g=0,h=i?this.applyStack(n,c,i):m,v,y;h!==m&&(g=h-m,h=m),f&&(m=u.barStart,h=u.barEnd-u.barStart,m!==0&&hi(m)!==hi(u.barEnd)&&(g=0),g+=m);const E=!mt(s)&&!f?s:g;let b=n.getPixelForValue(E);if(this.chart.getDataVisibility(t)?v=n.getPixelForValue(g+h):v=b,y=v-b,Math.abs(y)<a){y=ZD(y,n,l)*a,m===l&&(b-=y/2);const w=n.getPixelForDecimal(0),T=n.getPixelForDecimal(1),x=Math.min(w,T),D=Math.max(w,T);b=Math.max(Math.min(b,D),x),v=b+y,i&&!f&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(v)-n.getValueForPixel(b))}if(b===n.getPixelForValue(l)){const w=hi(y)*n.getLineWidthForValue(l)/2;b+=w,y-=w}return{size:y,base:b,head:v,center:v+y/2}}_calculateBarIndexPixels(t,n){const i=n.scale,r=this.options,s=r.skipNull,a=et(r.maxBarThickness,1/0);let l,c;if(n.grouped){const u=s?this._getStackCount(t):n.stackCount,f=r.barThickness==="flex"?JD(t,n,r,u):KD(t,n,r,u),m=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);l=f.start+f.chunk*m+f.chunk/2,c=Math.min(a,f.chunk*f.ratio)}else l=i.getPixelForValue(this.getParsed(t)[i.axis],t),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&i[s].draw(this._ctx)}}Pe(qa,"id","bar"),Pe(qa,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Pe(qa,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Qa extends Zn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,r){const s=super.parsePrimitiveData(t,n,i,r);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+i).radius;return s}parseArrayData(t,n,i,r){const s=super.parseArrayData(t,n,i,r);for(let a=0;a<s.length;a++){const l=n[i+a];s[a]._custom=et(l[2],this.resolveDataElementOptions(a+i).radius)}return s}parseObjectData(t,n,i,r){const s=super.parseObjectData(t,n,i,r);for(let a=0;a<s.length;a++){const l=n[i+a];s[a]._custom=et(l&&l.r&&+l.r,this.resolveDataElementOptions(a+i).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,a=this.getParsed(t),l=r.getLabelForValue(a.x),c=s.getLabelForValue(a.y),u=a._custom;return{label:i[t]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,r){const s=r==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(n,r),f=a.axis,m=l.axis;for(let g=n;g<n+i;g++){const h=t[g],v=!s&&this.getParsed(g),y={},E=y[f]=s?a.getPixelForDecimal(.5):a.getPixelForValue(v[f]),b=y[m]=s?l.getBasePixel():l.getPixelForValue(v[m]);y.skip=isNaN(E)||isNaN(b),u&&(y.options=c||this.resolveDataElementOptions(g,h.active?"active":r),s&&(y.options.radius=0)),this.updateElement(h,g,y,r)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return n!=="active"&&(r.radius=0),r.radius+=et(i&&i._custom,s),r}}Pe(Qa,"id","bubble"),Pe(Qa,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Pe(Qa,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function rT(e,t,n){let i=1,r=1,s=0,a=0;if(t<St){const l=e,c=l+t,u=Math.cos(l),f=Math.sin(l),m=Math.cos(c),g=Math.sin(c),h=(T,x,D)=>yo(T,l,c,!0)?1:Math.max(x,x*n,D,D*n),v=(T,x,D)=>yo(T,l,c,!0)?-1:Math.min(x,x*n,D,D*n),y=h(0,u,m),E=h(Wt,f,g),b=v(kt,u,m),w=v(kt+Wt,f,g);i=(y-b)/2,r=(E-w)/2,s=-(y+b)/2,a=-(E+w)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}class Or extends Zn{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=c=>+i[c];if(ct(i[t])){const{key:c="value"}=this._parsing;s=u=>+sr(i[u],c)}let a,l;for(a=t,l=t+n;a<l;++a)r._parsed[a]=s(a)}}_getRotation(){return Xn(this.options.rotation-90)}_getCircumference(){return Xn(this.options.circumference)}_getRotationExtents(){let t=St,n=-St;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),a=r._getCircumference();t=Math.min(t,s),n=Math.max(n,s+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(i.width,i.height)-a)/2,0),c=Math.min(yx(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:f,rotation:m}=this._getRotationExtents(),{ratioX:g,ratioY:h,offsetX:v,offsetY:y}=rT(m,f,c),E=(i.width-a)/g,b=(i.height-a)/h,w=Math.max(Math.min(E,b)/2,0),T=wv(this.options.radius,w),x=Math.max(T*c,0),D=(T-x)/this._getVisibleDatasetWeightTotal();this.offsetX=v*T,this.offsetY=y*T,r.total=this.calculateTotal(),this.outerRadius=T-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*s/St)}updateElements(t,n,i,r){const s=r==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,f=(l.left+l.right)/2,m=(l.top+l.bottom)/2,g=s&&u.animateScale,h=g?0:this.innerRadius,v=g?0:this.outerRadius,{sharedOptions:y,includeOptions:E}=this._getSharedOptions(n,r);let b=this._getRotation(),w;for(w=0;w<n;++w)b+=this._circumference(w,s);for(w=n;w<n+i;++w){const T=this._circumference(w,s),x=t[w],D={x:f+this.offsetX,y:m+this.offsetY,startAngle:b,endAngle:b+T,circumference:T,outerRadius:v,innerRadius:h};E&&(D.options=y||this.resolveDataElementOptions(w,x.active?"active":r)),b+=T,this.updateElement(x,w,D,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,r;for(r=0;r<n.length;r++){const s=t._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?St*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=Bo(n._parsed[t],i.options.locale);return{label:r[t]||"",value:s}}getMaxBorderWidth(t){let n=0;const i=this.chart;let r,s,a,l,c;if(!t){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){a=i.getDatasetMeta(r),t=a.data,l=a.controller;break}}if(!t)return 0;for(r=0,s=t.length;r<s;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,r=t.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(et(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Pe(Or,"id","doughnut"),Pe(Or,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Pe(Or,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Pe(Or,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return n.labels.map((s,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class $a extends Zn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,a=this.chart._animationsDisabled;let{start:l,count:c}=Ov(n,r,a);this._drawStart=l,this._drawCount=c,Iv(n)&&(l=0,c=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},t),this.updateElements(r,l,c,t)}updateElements(t,n,i,r){const s=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(n,r),g=a.axis,h=l.axis,{spanGaps:v,segment:y}=this.options,E=ps(v)?v:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||r==="none",w=n+i,T=t.length;let x=n>0&&this.getParsed(n-1);for(let D=0;D<T;++D){const O=t[D],R=b?O:{};if(D<n||D>=w){R.skip=!0;continue}const I=this.getParsed(D),P=mt(I[h]),M=R[g]=a.getPixelForValue(I[g],D),B=R[h]=s||P?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,I,c):I[h],D);R.skip=isNaN(M)||isNaN(B)||P,R.stop=D>0&&Math.abs(I[g]-x[g])>E,y&&(R.parsed=I,R.raw=u.data[D]),m&&(R.options=f||this.resolveDataElementOptions(D,O.active?"active":r)),b||this.updateElement(O,D,R,r),x=I}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Pe($a,"id","line"),Pe($a,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Pe($a,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ro extends Zn{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=Bo(n._parsed[t].r,i.options.locale);return{label:r[t]||"",value:s}}parseObjectData(t,n,i,r){return Gv.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,r=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(r/2,0),a=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),l=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,n,i,r){const s=r==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,f=u.xCenter,m=u.yCenter,g=u.getIndexAngle(0)-.5*kt;let h=g,v;const y=360/this.countVisibleElements();for(v=0;v<n;++v)h+=this._computeAngle(v,r,y);for(v=n;v<n+i;v++){const E=t[v];let b=h,w=h+this._computeAngle(v,r,y),T=a.getDataVisibility(v)?u.getDistanceFromCenterForValue(this.getParsed(v).r):0;h=w,s&&(c.animateScale&&(T=0),c.animateRotate&&(b=w=g));const x={x:f,y:m,innerRadius:0,outerRadius:T,startAngle:b,endAngle:w,options:this.resolveDataElementOptions(v,E.active?"active":r)};this.updateElement(E,v,x,r)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?Xn(this.resolveDataElementOptions(t,n).angle||i):0}}Pe(ro,"id","polarArea"),Pe(ro,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Pe(ro,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return n.labels.map((s,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class rc extends Or{}Pe(rc,"id","pie"),Pe(rc,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Va extends Zn{getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,r){return Gv.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta,i=n.dataset,r=n.data||[],s=n.iScale.getLabels();if(i.points=r,t!=="resize"){const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);const l={_loop:!0,_fullLoop:s.length===r.length,options:a};this.updateElement(i,void 0,l,t)}this.updateElements(r,0,r.length,t)}updateElements(t,n,i,r){const s=this._cachedMeta.rScale,a=r==="reset";for(let l=n;l<n+i;l++){const c=t[l],u=this.resolveDataElementOptions(l,c.active?"active":r),f=s.getPointPositionForValue(l,this.getParsed(l).r),m=a?s.xCenter:f.x,g=a?s.yCenter:f.y,h={x:m,y:g,angle:f.angle,skip:isNaN(m)||isNaN(g),options:u};this.updateElement(c,l,h,r)}}}Pe(Va,"id","radar"),Pe(Va,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Pe(Va,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ka extends Zn{getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,a=this.getParsed(t),l=r.getLabelForValue(a.x),c=s.getLabelForValue(a.y);return{label:i[t]||"",value:"("+l+", "+c+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:s,count:a}=Ov(n,i,r);if(this._drawStart=s,this._drawCount=a,Iv(n)&&(s=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=n;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=i;const u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:u},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,s,a,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,r){const s=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,f=this.resolveDataElementOptions(n,r),m=this.getSharedOptions(f),g=this.includeOptions(r,m),h=a.axis,v=l.axis,{spanGaps:y,segment:E}=this.options,b=ps(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||r==="none";let T=n>0&&this.getParsed(n-1);for(let x=n;x<n+i;++x){const D=t[x],O=this.getParsed(x),R=w?D:{},I=mt(O[v]),P=R[h]=a.getPixelForValue(O[h],x),M=R[v]=s||I?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,O,c):O[v],x);R.skip=isNaN(P)||isNaN(M)||I,R.stop=x>0&&Math.abs(O[h]-T[h])>b,E&&(R.parsed=O,R.raw=u.data[x]),g&&(R.options=m||this.resolveDataElementOptions(x,D.active?"active":r)),w||this.updateElement(D,x,R,r),T=O}this.updateSharedOptions(m,r,f)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let l=0;for(let c=n.length-1;c>=0;--c)l=Math.max(l,n[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,a)/2}}Pe(Ka,"id","scatter"),Pe(Ka,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Pe(Ka,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var sT=Object.freeze({__proto__:null,BarController:qa,BubbleController:Qa,DoughnutController:Or,LineController:$a,PieController:rc,PolarAreaController:ro,RadarController:Va,ScatterController:Ka});function wr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Wd{constructor(t){Pe(this,"options");this.options=t||{}}static override(t){Object.assign(Wd.prototype,t)}init(){}formats(){return wr()}parse(){return wr()}format(){return wr()}add(){return wr()}diff(){return wr()}startOf(){return wr()}endOf(){return wr()}}var oT={_date:Wd};function aT(e,t,n,i){const{controller:r,data:s,_sorted:a}=e,l=r._cachedMeta.iScale;if(l&&t===l.axis&&t!=="r"&&a&&s.length){const c=l._reversePixels?Ix:Ai;if(i){if(r._sharedOptions){const u=s[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const m=c(s,t,n-f),g=c(s,t,n+f);return{lo:m.lo,hi:g.hi}}}}else return c(s,t,n)}return{lo:0,hi:s.length-1}}function Wo(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let l=0,c=s.length;l<c;++l){const{index:u,data:f}=s[l],{lo:m,hi:g}=aT(s[l],t,a,r);for(let h=m;h<=g;++h){const v=f[h];v.skip||i(v,u,h)}}}function lT(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,r){const s=t?Math.abs(i.x-r.x):0,a=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function Iu(e,t,n,i,r){const s=[];return!r&&!e.isPointInArea(t)||Wo(e,n,t,function(l,c,u){!r&&!Pi(l,e.chartArea,0)||l.inRange(t.x,t.y,i)&&s.push({element:l,datasetIndex:c,index:u})},!0),s}function uT(e,t,n,i){let r=[];function s(a,l,c){const{startAngle:u,endAngle:f}=a.getProps(["startAngle","endAngle"],i),{angle:m}=xv(a,{x:t.x,y:t.y});yo(m,u,f)&&r.push({element:a,datasetIndex:l,index:c})}return Wo(e,n,t,s),r}function cT(e,t,n,i,r,s){let a=[];const l=lT(n);let c=Number.POSITIVE_INFINITY;function u(f,m,g){const h=f.inRange(t.x,t.y,r);if(i&&!h)return;const v=f.getCenterPoint(r);if(!(!!s||e.isPointInArea(v))&&!h)return;const E=l(t,v);E<c?(a=[{element:f,datasetIndex:m,index:g}],c=E):E===c&&a.push({element:f,datasetIndex:m,index:g})}return Wo(e,n,t,u),a}function Ru(e,t,n,i,r,s){return!s&&!e.isPointInArea(t)?[]:n==="r"&&!i?uT(e,t,n,r):cT(e,t,n,i,r,s)}function Yh(e,t,n,i,r){const s=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return Wo(e,n,t,(c,u,f)=>{c[a](t[n],r)&&(s.push({element:c,datasetIndex:u,index:f}),l=l||c.inRange(t.x,t.y,r))}),i&&!l?[]:s}var dT={evaluateInteractionItems:Wo,modes:{index(e,t,n,i){const r=Er(t,e),s=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?Iu(e,r,s,i,a):Ru(e,r,s,!1,i,a),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const f=l[0].index,m=u.data[f];m&&!m.skip&&c.push({element:m,datasetIndex:u.index,index:f})}),c):[]},dataset(e,t,n,i){const r=Er(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?Iu(e,r,s,i,a):Ru(e,r,s,!1,i,a);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let f=0;f<u.length;++f)l.push({element:u[f],datasetIndex:c,index:f})}return l},point(e,t,n,i){const r=Er(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return Iu(e,r,s,i,a)},nearest(e,t,n,i){const r=Er(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return Ru(e,r,s,n.intersect,i,a)},x(e,t,n,i){const r=Er(t,e);return Yh(e,r,"x",n.intersect,i)},y(e,t,n,i){const r=Er(t,e);return Yh(e,r,"y",n.intersect,i)}}};const Vv=["left","top","right","bottom"];function Bs(e,t){return e.filter(n=>n.pos===t)}function zh(e,t){return e.filter(n=>Vv.indexOf(n.pos)===-1&&n.box.axis===t)}function Ws(e,t){return e.sort((n,i)=>{const r=t?i:n,s=t?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function fT(e){const t=[];let n,i,r,s,a,l;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],{position:s,options:{stack:a,stackWeight:l=1}}=r,t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:l});return t}function hT(e){const t={};for(const n of e){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!Vv.includes(r))continue;const a=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function pT(e,t){const n=hT(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,a,l;for(s=0,a=e.length;s<a;++s){l=e[s];const{fullSize:c}=l.box,u=n[l.stack],f=u&&l.stackWeight/u.weight;l.horizontal?(l.width=f?f*i:c&&t.availableWidth,l.height=r):(l.width=i,l.height=f?f*r:c&&t.availableHeight)}return n}function gT(e){const t=fT(e),n=Ws(t.filter(u=>u.box.fullSize),!0),i=Ws(Bs(t,"left"),!0),r=Ws(Bs(t,"right")),s=Ws(Bs(t,"top"),!0),a=Ws(Bs(t,"bottom")),l=zh(t,"x"),c=zh(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(a).concat(l),chartArea:Bs(t,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(a).concat(l)}}function qh(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Kv(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function mT(e,t,n,i){const{pos:r,box:s}=n,a=e.maxPadding;if(!ct(r)){n.size&&(e[r]-=n.size);const m=i[n.stack]||{size:0,count:1};m.size=Math.max(m.size,n.horizontal?s.height:s.width),n.size=m.size/m.count,e[r]+=n.size}s.getPadding&&Kv(a,s.getPadding());const l=Math.max(0,t.outerWidth-qh(a,e,"left","right")),c=Math.max(0,t.outerHeight-qh(a,e,"top","bottom")),u=l!==e.w,f=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:f}:{same:f,other:u}}function vT(e){const t=e.maxPadding;function n(i){const r=Math.max(t[i]-e[i],0);return e[i]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function yT(e,t){const n=t.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{s[a]=Math.max(t[a],n[a])}),s}return i(e?["left","right"]:["top","bottom"])}function $s(e,t,n,i){const r=[];let s,a,l,c,u,f;for(s=0,a=e.length,u=0;s<a;++s){l=e[s],c=l.box,c.update(l.width||t.w,l.height||t.h,yT(l.horizontal,t));const{same:m,other:g}=mT(t,n,l,i);u|=m&&r.length,f=f||g,c.fullSize||r.push(l)}return u&&$s(r,t,n,i)||f}function ka(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Qh(e,t,n,i){const r=n.padding;let{x:s,y:a}=t;for(const l of e){const c=l.box,u=i[l.stack]||{count:1,placed:0,weight:1},f=l.stackWeight/u.weight||1;if(l.horizontal){const m=t.w*f,g=u.size||c.height;vo(u.start)&&(a=u.start),c.fullSize?ka(c,r.left,a,n.outerWidth-r.right-r.left,g):ka(c,t.left+u.placed,a,m,g),u.start=a,u.placed+=m,a=c.bottom}else{const m=t.h*f,g=u.size||c.width;vo(u.start)&&(s=u.start),c.fullSize?ka(c,s,r.top,g,n.outerHeight-r.bottom-r.top):ka(c,s,t.top+u.placed,g,m),u.start=s,u.placed+=m,s=c.right}}t.x=s,t.y=a}var an={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=un(e.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(n-r.height,0),l=gT(e.boxes),c=l.vertical,u=l.horizontal;xt(e.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const f=c.reduce((y,E)=>E.box.options&&E.box.options.display===!1?y:y+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/f,hBoxMaxHeight:a/2}),g=Object.assign({},r);Kv(g,un(i));const h=Object.assign({maxPadding:g,w:s,h:a,x:r.left,y:r.top},r),v=pT(c.concat(u),m);$s(l.fullSize,h,m,v),$s(c,h,m,v),$s(u,h,m,v)&&$s(c,h,m,v),vT(h),Qh(l.leftAndTop,h,m,v),h.x+=h.w,h.y+=h.h,Qh(l.rightAndBottom,h,m,v),e.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},xt(l.chartArea,y=>{const E=y.box;Object.assign(E,e.chartArea),E.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class Jv{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,r){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(t){return!0}updateConfig(t){}}class _T extends Jv{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ja="$chartjs",bT={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$h=e=>e===null||e==="";function wT(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[Ja]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",$h(r)){const s=Ih(e,"width");s!==void 0&&(e.width=s)}if($h(i))if(e.style.height==="")e.height=e.width/(t||2);else{const s=Ih(e,"height");s!==void 0&&(e.height=s)}return e}const Xv=ED?{passive:!0}:!1;function CT(e,t,n){e.addEventListener(t,n,Xv)}function ET(e,t,n){e.canvas.removeEventListener(t,n,Xv)}function xT(e,t){const n=bT[e.type]||e.type,{x:i,y:r}=Er(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:r!==void 0?r:null}}function wl(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function DT(e,t,n){const i=e.canvas,r=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||wl(l.addedNodes,i),a=a&&!wl(l.removedNodes,i);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function TT(e,t,n){const i=e.canvas,r=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||wl(l.removedNodes,i),a=a&&!wl(l.addedNodes,i);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const bo=new Map;let Vh=0;function Zv(){const e=window.devicePixelRatio;e!==Vh&&(Vh=e,bo.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function ST(e,t){bo.size||window.addEventListener("resize",Zv),bo.set(e,t)}function kT(e){bo.delete(e),bo.size||window.removeEventListener("resize",Zv)}function OT(e,t,n){const i=e.canvas,r=i&&Bd(i);if(!r)return;const s=kv((l,c)=>{const u=r.clientWidth;n(l,c),u<r.clientWidth&&n()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,f=c.contentRect.height;u===0&&f===0||s(u,f)});return a.observe(r),ST(e,s),a}function Au(e,t,n){n&&n.disconnect(),t==="resize"&&kT(e)}function IT(e,t,n){const i=e.canvas,r=kv(s=>{e.ctx!==null&&n(xT(s,e))},e);return CT(i,t,r),r}class RT extends Jv{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(wT(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[Ja])return!1;const i=n[Ja].initial;["height","width"].forEach(s=>{const a=i[s];mt(a)?n.removeAttribute(s):n.setAttribute(s,a)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Ja],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),a={attach:DT,detach:TT,resize:OT}[n]||IT;r[n]=a(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),r=i[n];if(!r)return;({attach:Au,detach:Au,resize:Au}[n]||ET)(t,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,r){return CD(t,n,i,r)}isAttached(t){const n=Bd(t);return!!(n&&n.isConnected)}}function AT(e){return!Bv()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?_T:RT}var La;let Qi=(La=class{constructor(){Pe(this,"x");Pe(this,"y");Pe(this,"active",!1);Pe(this,"options");Pe(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return ps(this.x)&&ps(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}},Pe(La,"defaults",{}),Pe(La,"defaultRoutes"),La);function PT(e,t){const n=e.options.ticks,i=MT(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?LT(t):[],a=s.length,l=s[0],c=s[a-1],u=[];if(a>r)return FT(t,u,s,a/r),u;const f=NT(s,t,r);if(a>0){let m,g;const h=a>1?Math.round((c-l)/(a-1)):null;for(Oa(t,u,f,mt(h)?0:l-h,l),m=0,g=a-1;m<g;m++)Oa(t,u,f,s[m],s[m+1]);return Oa(t,u,f,c,mt(h)?t.length:c+h),u}return Oa(t,u,f),u}function MT(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}function NT(e,t,n){const i=GT(e),r=t.length/n;if(!i)return Math.max(r,1);const s=Tx(i);for(let a=0,l=s.length-1;a<l;a++){const c=s[a];if(c>r)return c}return Math.max(r,1)}function LT(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function FT(e,t,n,i){let r=0,s=n[0],a;for(i=Math.ceil(i),a=0;a<e.length;a++)a===s&&(t.push(e[a]),r++,s=n[r*i])}function Oa(e,t,n,i,r){const s=et(i,0),a=Math.min(et(r,e.length),e.length);let l=0,c,u,f;for(n=Math.ceil(n),r&&(c=r-i,n=c/Math.floor(c/n)),f=s;f<0;)l++,f=Math.round(s+l*n);for(u=Math.max(s,0);u<a;u++)u===f&&(t.push(e[u]),l++,f=Math.round(s+l*n))}function GT(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const HT=e=>e==="left"?"right":e==="right"?"left":e,Kh=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Jh=(e,t)=>Math.min(t||e,e);function Xh(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function BT(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,a=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),u;if(!(n&&(i===1?u=Math.max(c-s,a-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(r-1))/2,c+=r<t?u:-u,c<s-l||c>a+l)))return c}function WT(e,t){xt(e,n=>{const i=n.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Us(e){return e.drawTicks?e.tickLength:0}function Zh(e,t){if(!e.display)return 0;const n=Kt(e.font,t),i=un(e.padding);return(Pt(e.text)?e.text.length:1)*n.lineHeight+i.height}function UT(e,t){return pr(e,{scale:t,type:"scale"})}function jT(e,t,n){return pr(e,{tick:n,index:t,type:"tick"})}function YT(e,t,n){let i=Md(e);return(n&&t!=="right"||!n&&t==="right")&&(i=HT(i)),i}function zT(e,t,n,i){const{top:r,left:s,bottom:a,right:l,chart:c}=e,{chartArea:u,scales:f}=c;let m=0,g,h,v;const y=a-r,E=l-s;if(e.isHorizontal()){if(h=sn(i,s,l),ct(n)){const b=Object.keys(n)[0],w=n[b];v=f[b].getPixelForValue(w)+y-t}else n==="center"?v=(u.bottom+u.top)/2+y-t:v=Kh(e,n,t);g=l-s}else{if(ct(n)){const b=Object.keys(n)[0],w=n[b];h=f[b].getPixelForValue(w)-E+t}else n==="center"?h=(u.left+u.right)/2-E+t:h=Kh(e,n,t);v=sn(i,a,r),m=n==="left"?-Wt:Wt}return{titleX:h,titleY:v,maxWidth:g,rotation:m}}class Qr extends Qi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return t=In(t,Number.POSITIVE_INFINITY),n=In(n,Number.NEGATIVE_INFINITY),i=In(i,Number.POSITIVE_INFINITY),r=In(r,Number.NEGATIVE_INFINITY),{min:In(t,i),max:In(n,r),minDefined:Lt(t),maxDefined:Lt(n)}}getMinMax(t){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),a;if(r&&s)return{min:n,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,t),r||(n=Math.min(n,a.min)),s||(i=Math.max(i,a.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:In(n,In(i,n)),max:In(i,In(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Tt(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:r,grace:s,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=eD(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Xh(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=PT(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Tt(this.options.afterUpdate,[this])}beforeSetDimensions(){Tt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Tt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Tt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Tt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Tt(n.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Tt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Tt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=Jh(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let a=r,l,c,u;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const f=this._getLabelSizes(),m=f.widest.width,g=f.highest.height,h=Jt(this.chart.width-m,0,this.maxWidth);l=t.offset?this.maxWidth/i:h/(i-1),m+6>l&&(l=h/(i-(t.offset?.5:1)),c=this.maxHeight-Us(t.grid)-n.padding-Zh(t.title,this.chart.options.font),u=Math.sqrt(m*m+g*g),a=Ad(Math.min(Math.asin(Jt((f.highest.height+6)/l,-1,1)),Math.asin(Jt(c/u,-1,1))-Math.asin(Jt(g/u,-1,1)))),a=Math.max(r,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Tt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Tt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=Zh(r,n.options.font);if(l?(t.width=this.maxWidth,t.height=Us(s)+c):(t.height=this.maxHeight,t.width=Us(s)+c),i.display&&this.ticks.length){const{first:u,last:f,widest:m,highest:g}=this._getLabelSizes(),h=i.padding*2,v=Xn(this.labelRotation),y=Math.cos(v),E=Math.sin(v);if(l){const b=i.mirror?0:E*m.width+y*g.height;t.height=Math.min(this.maxHeight,t.height+b+h)}else{const b=i.mirror?0:y*m.width+E*g.height;t.width=Math.min(this.maxWidth,t.width+b+h)}this._calculatePadding(u,f,E,y)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,r){const{ticks:{align:s,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,h=0;c?u?(g=r*t.width,h=i*n.height):(g=i*t.height,h=r*n.width):s==="start"?h=n.width:s==="end"?g=t.width:s!=="inner"&&(g=t.width/2,h=n.width/2),this.paddingLeft=Math.max((g-f+a)*this.width/(this.width-f),0),this.paddingRight=Math.max((h-m+a)*this.width/(this.width-m),0)}else{let f=n.height/2,m=t.height/2;s==="start"?(f=0,m=t.height):s==="end"&&(f=n.height,m=0),this.paddingTop=f+a,this.paddingBottom=m+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Tt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)mt(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Xh(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:r,_longestTextCache:s}=this,a=[],l=[],c=Math.floor(n/Jh(n,i));let u=0,f=0,m,g,h,v,y,E,b,w,T,x,D;for(m=0;m<n;m+=c){if(v=t[m].label,y=this._resolveTickFontOptions(m),r.font=E=y.string,b=s[E]=s[E]||{data:{},gc:[]},w=y.lineHeight,T=x=0,!mt(v)&&!Pt(v))T=_l(r,b.data,b.gc,T,v),x=w;else if(Pt(v))for(g=0,h=v.length;g<h;++g)D=v[g],!mt(D)&&!Pt(D)&&(T=_l(r,b.data,b.gc,T,D),x+=w);a.push(T),l.push(x),u=Math.max(T,u),f=Math.max(x,f)}WT(s,n);const O=a.indexOf(u),R=l.indexOf(f),I=P=>({width:a[P]||0,height:l[P]||0});return{first:I(0),last:I(n-1),widest:I(O),highest:I(R),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return Ox(this._alignToPixels?br(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=jT(this.getContext(),t,i))}return this.$context||(this.$context=UT(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Xn(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,l=s?s.widest.width+a:0,c=s?s.highest.height+a:0;return this.isHorizontal()?c*i>l*r?l/i:c/r:c*r<l*i?c/i:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:a,border:l}=r,c=s.offset,u=this.isHorizontal(),m=this.ticks.length+(c?1:0),g=Us(s),h=[],v=l.setContext(this.getContext()),y=v.display?v.width:0,E=y/2,b=function(Oe){return br(i,Oe,y)};let w,T,x,D,O,R,I,P,M,B,z,te;if(a==="top")w=b(this.bottom),R=this.bottom-g,P=w-E,B=b(t.top)+E,te=t.bottom;else if(a==="bottom")w=b(this.top),B=t.top,te=b(t.bottom)-E,R=w+E,P=this.top+g;else if(a==="left")w=b(this.right),O=this.right-g,I=w-E,M=b(t.left)+E,z=t.right;else if(a==="right")w=b(this.left),M=t.left,z=b(t.right)-E,O=w+E,I=this.left+g;else if(n==="x"){if(a==="center")w=b((t.top+t.bottom)/2+.5);else if(ct(a)){const Oe=Object.keys(a)[0],ve=a[Oe];w=b(this.chart.scales[Oe].getPixelForValue(ve))}B=t.top,te=t.bottom,R=w+E,P=R+g}else if(n==="y"){if(a==="center")w=b((t.left+t.right)/2);else if(ct(a)){const Oe=Object.keys(a)[0],ve=a[Oe];w=b(this.chart.scales[Oe].getPixelForValue(ve))}O=w-E,I=O-g,M=t.left,z=t.right}const pe=et(r.ticks.maxTicksLimit,m),Ce=Math.max(1,Math.ceil(m/pe));for(T=0;T<m;T+=Ce){const Oe=this.getContext(T),ve=s.setContext(Oe),ne=l.setContext(Oe),V=ve.lineWidth,fe=ve.color,ye=ne.dash||[],ue=ne.dashOffset,Ie=ve.tickWidth,ce=ve.tickColor,Le=ve.tickBorderDash||[],He=ve.tickBorderDashOffset;x=BT(this,T,c),x!==void 0&&(D=br(i,x,V),u?O=I=M=z=D:R=P=B=te=D,h.push({tx1:O,ty1:R,tx2:I,ty2:P,x1:M,y1:B,x2:z,y2:te,width:V,color:fe,borderDash:ye,borderDashOffset:ue,tickWidth:Ie,tickColor:ce,tickBorderDash:Le,tickBorderDashOffset:He}))}return this._ticksLength=m,this._borderValue=w,h}_computeLabelItems(t){const n=this.axis,i=this.options,{position:r,ticks:s}=i,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:f,mirror:m}=s,g=Us(i.grid),h=g+f,v=m?-f:h,y=-Xn(this.labelRotation),E=[];let b,w,T,x,D,O,R,I,P,M,B,z,te="middle";if(r==="top")O=this.bottom-v,R=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+v,R=this._getXAxisLabelAlignment();else if(r==="left"){const Ce=this._getYAxisLabelAlignment(g);R=Ce.textAlign,D=Ce.x}else if(r==="right"){const Ce=this._getYAxisLabelAlignment(g);R=Ce.textAlign,D=Ce.x}else if(n==="x"){if(r==="center")O=(t.top+t.bottom)/2+h;else if(ct(r)){const Ce=Object.keys(r)[0],Oe=r[Ce];O=this.chart.scales[Ce].getPixelForValue(Oe)+h}R=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")D=(t.left+t.right)/2-h;else if(ct(r)){const Ce=Object.keys(r)[0],Oe=r[Ce];D=this.chart.scales[Ce].getPixelForValue(Oe)}R=this._getYAxisLabelAlignment(g).textAlign}n==="y"&&(c==="start"?te="top":c==="end"&&(te="bottom"));const pe=this._getLabelSizes();for(b=0,w=l.length;b<w;++b){T=l[b],x=T.label;const Ce=s.setContext(this.getContext(b));I=this.getPixelForTick(b)+s.labelOffset,P=this._resolveTickFontOptions(b),M=P.lineHeight,B=Pt(x)?x.length:1;const Oe=B/2,ve=Ce.color,ne=Ce.textStrokeColor,V=Ce.textStrokeWidth;let fe=R;a?(D=I,R==="inner"&&(b===w-1?fe=this.options.reverse?"left":"right":b===0?fe=this.options.reverse?"right":"left":fe="center"),r==="top"?u==="near"||y!==0?z=-B*M+M/2:u==="center"?z=-pe.highest.height/2-Oe*M+M:z=-pe.highest.height+M/2:u==="near"||y!==0?z=M/2:u==="center"?z=pe.highest.height/2-Oe*M:z=pe.highest.height-B*M,m&&(z*=-1),y!==0&&!Ce.showLabelBackdrop&&(D+=M/2*Math.sin(y))):(O=I,z=(1-B)*M/2);let ye;if(Ce.showLabelBackdrop){const ue=un(Ce.backdropPadding),Ie=pe.heights[b],ce=pe.widths[b];let Le=z-ue.top,He=0-ue.left;switch(te){case"middle":Le-=Ie/2;break;case"bottom":Le-=Ie;break}switch(R){case"center":He-=ce/2;break;case"right":He-=ce;break}ye={left:He,top:Le,width:ce+ue.width,height:Ie+ue.height,color:Ce.backdropColor}}E.push({label:x,font:P,textOffset:z,options:{rotation:y,color:ve,strokeColor:ne,strokeWidth:V,textAlign:fe,textBaseline:te,translation:[D,O],backdrop:ye}})}return E}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Xn(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,a=this._getLabelSizes(),l=t+s,c=a.widest.width;let u,f;return n==="left"?r?(f=this.right+s,i==="near"?u="left":i==="center"?(u="center",f+=c/2):(u="right",f+=c)):(f=this.right-l,i==="near"?u="right":i==="center"?(u="center",f-=c/2):(u="left",f=this.left)):n==="right"?r?(f=this.left+s,i==="near"?u="right":i==="center"?(u="center",f-=c/2):(u="left",f-=c)):(f=this.left+l,i==="near"?u="left":i==="center"?(u="center",f+=c/2):(u="right",f=this.right)):u="right",{textAlign:u,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:r,width:s,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,r,s,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const l=(c,u,f)=>{!f.width||!f.color||(i.save(),i.lineWidth=f.width,i.strokeStyle=f.color,i.setLineDash(f.borderDash||[]),i.lineDashOffset=f.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(s=0,a=r.length;s<a;++s){const c=r[s];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),a=i.display?s.width:0;if(!a)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,f,m,g;this.isHorizontal()?(u=br(t,this.left,a)-a/2,f=br(t,this.right,l)+l/2,m=g=c):(m=br(t,this.top,a)-a/2,g=br(t,this.bottom,l)+l/2,u=f=c),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,m),n.lineTo(f,g),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&$l(i,r);const s=this.getLabelItems(t);for(const a of s){const l=a.options,c=a.font,u=a.label,f=a.textOffset;Fr(i,u,0,f,c,l)}r&&Vl(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Kt(i.font),a=un(i.padding),l=i.align;let c=s.lineHeight/2;n==="bottom"||n==="center"||ct(n)?(c+=a.bottom,Pt(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=a.top;const{titleX:u,titleY:f,maxWidth:m,rotation:g}=zT(this,c,n,l);Fr(t,i.text,0,0,s,{color:i.color,maxWidth:m,rotation:g,textAlign:YT(l,n,r),textBaseline:"middle",translation:[u,f]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=et(t.grid&&t.grid.z,-1),r=et(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Qr.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,a;for(s=0,a=n.length;s<a;++s){const l=n[s];l[i]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Kt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Ia{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;$T(n)&&(i=this.register(n));const r=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,qT(t,a,i),this.override&&Ft.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,r=this.scope;i in n&&delete n[i],r&&i in Ft[r]&&(delete Ft[r][i],this.override&&delete Lr[i])}}function qT(e,t,n){const i=mo(Object.create(null),[n?Ft.get(n):{},Ft.get(t),e.defaults]);Ft.set(t,i),e.defaultRoutes&&QT(t,e.defaultRoutes),e.descriptors&&Ft.describe(t,e.descriptors)}function QT(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),a=t[n].split("."),l=a.pop(),c=a.join(".");Ft.route(s,r,c,l)})}function $T(e){return"id"in e&&"defaults"in e}class VT{constructor(){this.controllers=new Ia(Zn,"datasets",!0),this.elements=new Ia(Qi,"elements"),this.plugins=new Ia(Object,"plugins"),this.scales=new Ia(Qr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):xt(r,a=>{const l=i||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,n,i){const r=Rd(t);Tt(i["before"+r],[],i),n[t](i),Tt(i["after"+r],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var ui=new VT;class KT{constructor(){this._init=[]}notify(t,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(s,t,n,i);return n==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,i,r){r=r||{};for(const s of t){const a=s.plugin,l=a[i],c=[n,r,s.options];if(Tt(l,c,a)===!1&&r.cancelable)return!1}return!0}invalidate(){mt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,r=et(i.options&&i.options.plugins,{}),s=JT(i);return r===!1&&!n?[]:ZT(t,s,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,r=(s,a)=>s.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,i),t,"stop"),this._notify(r(i,n),t,"start")}}function JT(e){const t={},n=[],i=Object.keys(ui.plugins.items);for(let s=0;s<i.length;s++)n.push(ui.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const a=r[s];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function XT(e,t){return!t&&e===!1?null:e===!0?{}:e}function ZT(e,{plugins:t,localIds:n},i,r){const s=[],a=e.getContext();for(const l of t){const c=l.id,u=XT(i[c],r);u!==null&&s.push({plugin:l,options:eS(e.config,{plugin:l,local:n[c]},u,a)})}return s}function eS(e,{plugin:t,local:n},i,r){const s=e.pluginScopeKeys(t),a=e.getOptionScopes(i,s);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sc(e,t){const n=Ft.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function tS(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function nS(e,t){return e===t?"_index_":"_value_"}function ep(e){if(e==="x"||e==="y"||e==="r")return e}function iS(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function oc(e,...t){if(ep(e))return e;for(const n of t){const i=n.axis||iS(n.position)||e.length>1&&ep(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function tp(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function rS(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return tp(e,"x",n[0])||tp(e,"y",n[0])}return{}}function sS(e,t){const n=Lr[e.type]||{scales:{}},i=t.scales||{},r=sc(e.type,t),s=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!ct(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=oc(a,l,rS(a,e),Ft.scales[l.type]),u=nS(c,r),f=n.scales||{};s[a]=eo(Object.create(null),[{axis:c},l,f[c],f[u]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,c=a.indexAxis||sc(l,t),f=(Lr[l]||{}).scales||{};Object.keys(f).forEach(m=>{const g=tS(m,c),h=a[g+"AxisID"]||g;s[h]=s[h]||Object.create(null),eo(s[h],[{axis:g},i[h],f[m]])})}),Object.keys(s).forEach(a=>{const l=s[a];eo(l,[Ft.scales[l.type],Ft.scale])}),s}function ey(e){const t=e.options||(e.options={});t.plugins=et(t.plugins,{}),t.scales=sS(e,t)}function ty(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function oS(e){return e=e||{},e.data=ty(e.data),ey(e),e}const np=new Map,ny=new Set;function Ra(e,t){let n=np.get(e);return n||(n=t(),np.set(e,n),ny.add(n)),n}const js=(e,t,n)=>{const i=sr(t,n);i!==void 0&&e.add(i)};class aS{constructor(t){this._config=oS(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ty(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ey(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ra(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Ra(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Ra(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return Ra(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let r=i.get(t);return(!r||n)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,n,i){const{options:r,type:s}=this,a=this._cachedScopes(t,i),l=a.get(n);if(l)return l;const c=new Set;n.forEach(f=>{t&&(c.add(t),f.forEach(m=>js(c,t,m))),f.forEach(m=>js(c,r,m)),f.forEach(m=>js(c,Lr[s]||{},m)),f.forEach(m=>js(c,Ft,m)),f.forEach(m=>js(c,nc,m))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),ny.has(n)&&a.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Lr[n]||{},Ft.datasets[n]||{},{type:n},Ft,nc]}resolveNamedOptions(t,n,i,r=[""]){const s={$shared:!0},{resolver:a,subPrefixes:l}=ip(this._resolverCache,t,r);let c=a;if(uS(a,n)){s.$shared=!1,i=or(i)?i():i;const u=this.createResolver(t,i,l);c=gs(a,i,u)}for(const u of n)s[u]=c[u];return s}createResolver(t,n,i=[""],r){const{resolver:s}=ip(this._resolverCache,t,i);return ct(n)?gs(s,n,void 0,r):s}}function ip(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Fd(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},i.set(r,s)),s}const lS=e=>ct(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||or(e[n]),!1);function uS(e,t){const{isScriptable:n,isIndexable:i}=Mv(e);for(const r of t){const s=n(r),a=i(r),l=(a||s)&&e[r];if(s&&(or(l)||lS(l))||a&&Pt(l))return!0}return!1}var cS="4.4.0";const dS=["top","bottom","left","right","chartArea"];function rp(e,t){return e==="top"||e==="bottom"||dS.indexOf(e)===-1&&t==="x"}function sp(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function op(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Tt(n&&n.onComplete,[e],t)}function fS(e){const t=e.chart,n=t.options.animation;Tt(n&&n.onProgress,[e],t)}function iy(e){return Bv()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Xa={},ap=e=>{const t=iy(e);return Object.values(Xa).filter(n=>n.canvas===t).pop()};function hS(e,t,n){const i=Object.keys(e);for(const r of i){const s=+r;if(s>=t){const a=e[r];delete e[r],(n>0||s>t)&&(e[s+n]=a)}}}function pS(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}function Aa(e,t,n){return e.options.clip?e[n]:t[n]}function gS(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Aa(n,t,"left"),right:Aa(n,t,"right"),top:Aa(i,t,"top"),bottom:Aa(i,t,"bottom")}:t}class ki{static register(...t){ui.add(...t),lp()}static unregister(...t){ui.remove(...t),lp()}constructor(t,n){const i=this.config=new aS(n),r=iy(t),s=ap(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||AT(r)),this.platform.updateConfig(i);const l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,f=c&&c.width;if(this.id=vx(),this.ctx=l,this.canvas=c,this.width=f,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new KT,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Px(m=>this.update(m),a.resizeDelay||0),this._dataChanges=[],Xa[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}xi.listen(this,"complete",op),xi.listen(this,"progress",fS),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return mt(t)?n&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ui}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Oh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Th(this.canvas,this.ctx),this}stop(){return xi.stop(this),this}resize(t,n){xi.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,t,n,s),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Oh(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Tt(i.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};xt(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,r=Object.keys(i).reduce((a,l)=>(a[l]=!1,a),{});let s=[];n&&(s=s.concat(Object.keys(n).map(a=>{const l=n[a],c=oc(a,l),u=c==="r",f=c==="x";return{options:l,dposition:u?"chartArea":f?"bottom":"left",dtype:u?"radialLinear":f?"category":"linear"}}))),xt(s,a=>{const l=a.options,c=l.id,u=oc(c,l),f=et(l.type,a.dtype);(l.position===void 0||rp(l.position,u)!==rp(a.dposition))&&(l.position=a.dposition),r[c]=!0;let m=null;if(c in i&&i[c].type===f)m=i[c];else{const g=ui.getScale(f);m=new g({id:c,type:f,ctx:this.ctx,chart:this}),i[m.id]=m}m.init(l,t)}),xt(r,(a,l)=>{a||delete i[l]}),xt(i,a=>{an.configure(this,a,a.options),an.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(sp("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let a=this.getDatasetMeta(i);const l=s.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=l,a.indexAxis=s.indexAxis||sc(l,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const c=ui.getController(l),{datasetElementType:u,dataElementType:f}=Ft.datasets[l];Object.assign(c,{dataElementType:ui.getElement(f),datasetElementType:u&&ui.getElement(u)}),a.controller=new c(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){xt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,f=this.data.datasets.length;u<f;u++){const{controller:m}=this.getDatasetMeta(u),g=!r&&s.indexOf(m)===-1;m.buildOrUpdateElements(g),a=Math.max(+m.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),r||xt(s,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(sp("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){xt(this.scales,t=>{an.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!vh(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const a=i==="_removeElements"?-s:s;hS(t,r,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(t.filter(a=>a[0]===s).map((a,l)=>l+","+a.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!vh(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;an.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],xt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,or(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xi.has(this)?this.attached&&!xi.running(this)&&xi.start(this):(this.draw(),op({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const a=n[r];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i=t._clip,r=!i.disabled,s=gS(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(r&&$l(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),t.controller.draw(),r&&Vl(n),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Pi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,r){const s=dT.modes[n];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=pr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,r);vo(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(s,{visible:i}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),xi.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Th(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Xa[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(s,a)=>{n.addEventListener(this,s,a),t[s]=a},r=(s,a,l)=>{s.offsetX=a,s.offsetY=l,this._eventHandler(s)};xt(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},r=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},s=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{r("attach",l),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){xt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},xt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const r=i?"set":"remove";let s,a,l,c;for(n==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:s,index:a})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[a],index:a}});!ml(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const r=this.options.hover,s=(c,u)=>c.filter(f=>!u.some(m=>f.datasetIndex===m.datasetIndex&&f.index===m.index)),a=s(n,t),l=i?t:s(t,n);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:r=[],options:s}=this,a=n,l=this._getActiveElements(t,r,i,a),c=Ex(t),u=pS(t,this._lastEvent,i,c);i&&(this._lastEvent=null,Tt(s.onHover,[t,l,this],this),c&&Tt(s.onClick,[t,l,this],this));const f=!ml(l,r);return(f||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=u,f}_getActiveElements(t,n,i,r){if(t.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}Pe(ki,"defaults",Ft),Pe(ki,"instances",Xa),Pe(ki,"overrides",Lr),Pe(ki,"registry",ui),Pe(ki,"version",cS),Pe(ki,"getChart",ap);function lp(){return xt(ki.instances,e=>e._plugins.invalidate())}function mS(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:l,innerRadius:c}=t;let u=r/l;e.beginPath(),e.arc(s,a,l,i-u,n+u),c>r?(u=r/c,e.arc(s,a,c,n+u,i-u,!0)):e.arc(s,a,r,n+Wt,i-Wt),e.closePath(),e.clip()}function vS(e){return Ld(e,["outerStart","outerEnd","innerStart","innerEnd"])}function yS(e,t,n,i){const r=vS(e.options.borderRadius),s=(n-t)/2,a=Math.min(s,i*t/2),l=c=>{const u=(n-Math.min(s,c))*i/2;return Jt(c,0,Math.min(s,u))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Jt(r.innerStart,0,a),innerEnd:Jt(r.innerEnd,0,a)}}function es(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function Cl(e,t,n,i,r,s){const{x:a,y:l,startAngle:c,pixelMargin:u,innerRadius:f}=t,m=Math.max(t.outerRadius+i+n-u,0),g=f>0?f+i+n+u:0;let h=0;const v=r-c;if(i){const Ce=f>0?f-i:0,Oe=m>0?m-i:0,ve=(Ce+Oe)/2,ne=ve!==0?v*ve/(ve+i):v;h=(v-ne)/2}const y=Math.max(.001,v*m-n/kt)/m,E=(v-y)/2,b=c+E+h,w=r-E-h,{outerStart:T,outerEnd:x,innerStart:D,innerEnd:O}=yS(t,g,m,w-b),R=m-T,I=m-x,P=b+T/R,M=w-x/I,B=g+D,z=g+O,te=b+D/B,pe=w-O/z;if(e.beginPath(),s){const Ce=(P+M)/2;if(e.arc(a,l,m,P,Ce),e.arc(a,l,m,Ce,M),x>0){const V=es(I,M,a,l);e.arc(V.x,V.y,x,M,w+Wt)}const Oe=es(z,w,a,l);if(e.lineTo(Oe.x,Oe.y),O>0){const V=es(z,pe,a,l);e.arc(V.x,V.y,O,w+Wt,pe+Math.PI)}const ve=(w-O/g+(b+D/g))/2;if(e.arc(a,l,g,w-O/g,ve,!0),e.arc(a,l,g,ve,b+D/g,!0),D>0){const V=es(B,te,a,l);e.arc(V.x,V.y,D,te+Math.PI,b-Wt)}const ne=es(R,b,a,l);if(e.lineTo(ne.x,ne.y),T>0){const V=es(R,P,a,l);e.arc(V.x,V.y,T,b-Wt,P)}}else{e.moveTo(a,l);const Ce=Math.cos(P)*m+a,Oe=Math.sin(P)*m+l;e.lineTo(Ce,Oe);const ve=Math.cos(M)*m+a,ne=Math.sin(M)*m+l;e.lineTo(ve,ne)}e.closePath()}function _S(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:l}=t;let c=t.endAngle;if(s){Cl(e,t,n,i,c,r);for(let u=0;u<s;++u)e.fill();isNaN(l)||(c=a+(l%St||St))}return Cl(e,t,n,i,c,r),e.fill(),c}function bS(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:f,borderDash:m,borderDashOffset:g}=c,h=c.borderAlign==="inner";if(!u)return;e.setLineDash(m||[]),e.lineDashOffset=g,h?(e.lineWidth=u*2,e.lineJoin=f||"round"):(e.lineWidth=u,e.lineJoin=f||"bevel");let v=t.endAngle;if(s){Cl(e,t,n,i,v,r);for(let y=0;y<s;++y)e.stroke();isNaN(l)||(v=a+(l%St||St))}h&&mS(e,t,v),s||(Cl(e,t,n,i,v,r),e.stroke())}class Vs extends Qi{constructor(n){super();Pe(this,"circumference");Pe(this,"endAngle");Pe(this,"fullCircles");Pe(this,"innerRadius");Pe(this,"outerRadius");Pe(this,"pixelMargin");Pe(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:a,distance:l}=xv(s,{x:n,y:i}),{startAngle:c,endAngle:u,innerRadius:f,outerRadius:m,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),h=(this.options.spacing+this.options.borderWidth)/2,y=et(g,u-c)>=St||yo(a,c,u),E=Ri(l,f+h,m+h);return y&&E}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:f}=this.options,m=(s+a)/2,g=(l+c+f+u)/2;return{x:i+Math.cos(m)*g,y:r+Math.sin(m)*g}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,a=(i.spacing||0)/2,l=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>St?Math.floor(r/St):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*s,Math.sin(c)*s);const u=1-Math.sin(Math.min(kt,r||0)),f=s*u;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,_S(n,this,f,a,l),bS(n,this,f,a,l),n.restore()}}Pe(Vs,"id","arc"),Pe(Vs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Pe(Vs,"defaultRoutes",{backgroundColor:"backgroundColor"}),Pe(Vs,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function ry(e,t,n=t){e.lineCap=et(n.borderCapStyle,t.borderCapStyle),e.setLineDash(et(n.borderDash,t.borderDash)),e.lineDashOffset=et(n.borderDashOffset,t.borderDashOffset),e.lineJoin=et(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=et(n.borderWidth,t.borderWidth),e.strokeStyle=et(n.borderColor,t.borderColor)}function wS(e,t,n){e.lineTo(n.x,n.y)}function CS(e){return e.stepped?zx:e.tension||e.cubicInterpolationMode==="monotone"?qx:wS}function sy(e,t,n={}){const i=e.length,{start:r=0,end:s=i-1}=n,{start:a,end:l}=t,c=Math.max(r,a),u=Math.min(s,l),f=r<a&&s<a||r>l&&s>l;return{count:i,start:c,loop:t.loop,ilen:u<c&&!f?i+u-c:u-c}}function ES(e,t,n,i){const{points:r,options:s}=t,{count:a,start:l,loop:c,ilen:u}=sy(r,n,i),f=CS(s);let{move:m=!0,reverse:g}=i||{},h,v,y;for(h=0;h<=u;++h)v=r[(l+(g?u-h:h))%a],!v.skip&&(m?(e.moveTo(v.x,v.y),m=!1):f(e,y,v,g,s.stepped),y=v);return c&&(v=r[(l+(g?u:0))%a],f(e,y,v,g,s.stepped)),!!c}function xS(e,t,n,i){const r=t.points,{count:s,start:a,ilen:l}=sy(r,n,i),{move:c=!0,reverse:u}=i||{};let f=0,m=0,g,h,v,y,E,b;const w=x=>(a+(u?l-x:x))%s,T=()=>{y!==E&&(e.lineTo(f,E),e.lineTo(f,y),e.lineTo(f,b))};for(c&&(h=r[w(0)],e.moveTo(h.x,h.y)),g=0;g<=l;++g){if(h=r[w(g)],h.skip)continue;const x=h.x,D=h.y,O=x|0;O===v?(D<y?y=D:D>E&&(E=D),f=(m*f+x)/++m):(T(),e.lineTo(x,D),v=O,m=0,y=E=D),b=D}T()}function ac(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?xS:ES}function DS(e){return e.stepped?xD:e.tension||e.cubicInterpolationMode==="monotone"?DD:xr}function TS(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),ry(e,t.options),e.stroke(r)}function SS(e,t,n,i){const{segments:r,options:s}=t,a=ac(t);for(const l of r)ry(e,s,l.style),e.beginPath(),a(e,t,l,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const kS=typeof Path2D=="function";function OS(e,t,n,i){kS&&!t.options.segment?TS(e,t,n,i):SS(e,t,n,i)}class tr extends Qi{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;mD(this._points,i,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=RD(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,r=t[n],s=this.points,a=zv(this,{property:n,start:r,end:r});if(!a.length)return;const l=[],c=DS(i);let u,f;for(u=0,f=a.length;u<f;++u){const{start:m,end:g}=a[u],h=s[m],v=s[g];if(h===v){l.push(h);continue}const y=Math.abs((r-h[n])/(v[n]-h[n])),E=c(h,v,y,i.stepped);E[n]=t[n],l.push(E)}return l.length===1?l[0]:l}pathSegment(t,n,i){return ac(this)(t,this,n,i)}path(t,n,i){const r=this.segments,s=ac(this);let a=this._loop;n=n||0,i=i||this.points.length-n;for(const l of r)a&=s(t,this,l,{start:n,end:n+i-1});return!!a}draw(t,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),OS(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Pe(tr,"id","line"),Pe(tr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Pe(tr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Pe(tr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function up(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}class Za extends Qi{constructor(n){super();Pe(this,"parsed");Pe(this,"skip");Pe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:a,y:l}=this.getProps(["x","y"],r);return Math.pow(n-a,2)+Math.pow(i-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return up(this,n,"x",i)}inYRange(n,i){return up(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Pi(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,ic(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Pe(Za,"id","point"),Pe(Za,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Pe(Za,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function oy(e,t){const{x:n,y:i,base:r,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let l,c,u,f,m;return e.horizontal?(m=a/2,l=Math.min(n,r),c=Math.max(n,r),u=i-m,f=i+m):(m=s/2,l=n-m,c=n+m,u=Math.min(i,r),f=Math.max(i,r)),{left:l,top:u,right:c,bottom:f}}function nr(e,t,n,i){return e?0:Jt(t,n,i)}function IS(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=Pv(i);return{t:nr(r.top,s.top,0,n),r:nr(r.right,s.right,0,t),b:nr(r.bottom,s.bottom,0,n),l:nr(r.left,s.left,0,t)}}function RS(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=Rr(r),a=Math.min(t,n),l=e.borderSkipped,c=i||ct(r);return{topLeft:nr(!c||l.top||l.left,s.topLeft,0,a),topRight:nr(!c||l.top||l.right,s.topRight,0,a),bottomLeft:nr(!c||l.bottom||l.left,s.bottomLeft,0,a),bottomRight:nr(!c||l.bottom||l.right,s.bottomRight,0,a)}}function AS(e){const t=oy(e),n=t.right-t.left,i=t.bottom-t.top,r=IS(e,n/2,i/2),s=RS(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Pu(e,t,n,i){const r=t===null,s=n===null,l=e&&!(r&&s)&&oy(e,i);return l&&(r||Ri(t,l.left,l.right))&&(s||Ri(n,l.top,l.bottom))}function PS(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function MS(e,t){e.rect(t.x,t.y,t.w,t.h)}function Mu(e,t,n={}){const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+a,radius:e.radius}}class el extends Qi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:a}=AS(this),l=PS(a.radius)?_o:MS;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),l(t,Mu(a,n,s)),t.clip(),l(t,Mu(s,-n,a)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),l(t,Mu(s,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,i){return Pu(this,t,n,i)}inXRange(t,n){return Pu(this,t,null,n)}inYRange(t,n){return Pu(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Pe(el,"id","bar"),Pe(el,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Pe(el,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var NS=Object.freeze({__proto__:null,ArcElement:Vs,BarElement:el,LineElement:tr,PointElement:Za});const lc=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],cp=lc.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function ay(e){return lc[e%lc.length]}function ly(e){return cp[e%cp.length]}function LS(e,t){return e.borderColor=ay(t),e.backgroundColor=ly(t),++t}function FS(e,t){return e.backgroundColor=e.data.map(()=>ay(t++)),t}function GS(e,t){return e.backgroundColor=e.data.map(()=>ly(t++)),t}function HS(e){let t=0;return(n,i)=>{const r=e.getDatasetMeta(i).controller;r instanceof Or?t=FS(n,t):r instanceof ro?t=GS(n,t):r&&(t=LS(n,t))}}function dp(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function BS(e){return e&&(e.borderColor||e.backgroundColor)}var WS={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=e.config,{elements:s}=r;if(!n.forceOverride&&(dp(i)||BS(r)||s&&dp(s)))return;const a=HS(e);i.forEach(a)}};function US(e,t,n,i,r){const s=r.samples||i;if(s>=n)return e.slice(t,t+n);const a=[],l=(n-2)/(s-2);let c=0;const u=t+n-1;let f=t,m,g,h,v,y;for(a[c++]=e[f],m=0;m<s-2;m++){let E=0,b=0,w;const T=Math.floor((m+1)*l)+1+t,x=Math.min(Math.floor((m+2)*l)+1,n)+t,D=x-T;for(w=T;w<x;w++)E+=e[w].x,b+=e[w].y;E/=D,b/=D;const O=Math.floor(m*l)+1+t,R=Math.min(Math.floor((m+1)*l)+1,n)+t,{x:I,y:P}=e[f];for(h=v=-1,w=O;w<R;w++)v=.5*Math.abs((I-E)*(e[w].y-P)-(I-e[w].x)*(b-P)),v>h&&(h=v,g=e[w],y=w);a[c++]=g,f=y}return a[c++]=e[u],a}function jS(e,t,n,i){let r=0,s=0,a,l,c,u,f,m,g,h,v,y;const E=[],b=t+n-1,w=e[t].x,x=e[b].x-w;for(a=t;a<t+n;++a){l=e[a],c=(l.x-w)/x*i,u=l.y;const D=c|0;if(D===f)u<v?(v=u,m=a):u>y&&(y=u,g=a),r=(s*r+l.x)/++s;else{const O=a-1;if(!mt(m)&&!mt(g)){const R=Math.min(m,g),I=Math.max(m,g);R!==h&&R!==O&&E.push({...e[R],x:r}),I!==h&&I!==O&&E.push({...e[I],x:r})}a>0&&O!==h&&E.push(e[O]),E.push(l),f=D,s=0,v=y=u,m=g=h=a}}return E}function uy(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function fp(e){e.data.datasets.forEach(t=>{uy(t)})}function YS(e,t){const n=t.length;let i=0,r;const{iScale:s}=e,{min:a,max:l,minDefined:c,maxDefined:u}=s.getUserBounds();return c&&(i=Jt(Ai(t,s.axis,a).lo,0,n-1)),u?r=Jt(Ai(t,s.axis,l).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var zS={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){fp(e);return}const i=e.width;e.data.datasets.forEach((r,s)=>{const{_data:a,indexAxis:l}=r,c=e.getDatasetMeta(s),u=a||r.data;if(Qs([l,e.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const f=e.scales[c.xAxisID];if(f.type!=="linear"&&f.type!=="time"||e.options.parsing)return;let{start:m,count:g}=YS(c,u);const h=n.threshold||4*i;if(g<=h){uy(r);return}mt(a)&&(r._data=u,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let v;switch(n.algorithm){case"lttb":v=US(u,m,g,i,n);break;case"min-max":v=jS(u,m,g,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=v})},destroy(e){fp(e)}};function qS(e,t,n){const i=e.segments,r=e.points,s=t.points,a=[];for(const l of i){let{start:c,end:u}=l;u=Ud(c,u,r);const f=uc(n,r[c],r[u],l.loop);if(!t.segments){a.push({source:l,target:f,start:r[c],end:r[u]});continue}const m=zv(t,f);for(const g of m){const h=uc(n,s[g.start],s[g.end],g.loop),v=Yv(l,r,h);for(const y of v)a.push({source:y,target:g,start:{[n]:hp(f,h,"start",Math.max)},end:{[n]:hp(f,h,"end",Math.min)}})}}return a}function uc(e,t,n,i){if(i)return;let r=t[e],s=n[e];return e==="angle"&&(r=Rn(r),s=Rn(s)),{property:e,start:r,end:s}}function QS(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,s=[];return t.segments.forEach(({start:a,end:l})=>{l=Ud(a,l,r);const c=r[a],u=r[l];i!==null?(s.push({x:c.x,y:i}),s.push({x:u.x,y:i})):n!==null&&(s.push({x:n,y:c.y}),s.push({x:n,y:u.y}))}),s}function Ud(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function hp(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function cy(e,t){let n=[],i=!1;return Pt(e)?(i=!0,n=e):n=QS(e,t),n.length?new tr({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function pp(e){return e&&e.fill!==!1}function $S(e,t,n){let r=e[t].fill;const s=[t];let a;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Lt(r))return r;if(a=e[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function VS(e,t,n){const i=ZS(e);if(ct(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Lt(r)&&Math.floor(r)===r?KS(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function KS(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function JS(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:ct(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function XS(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:ct(e)?i=e.value:i=t.getBaseValue(),i}function ZS(e){const t=e.options,n=t.fill;let i=et(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function ek(e){const{scale:t,index:n,line:i}=e,r=[],s=i.segments,a=i.points,l=tk(t,n);l.push(cy({x:null,y:t.bottom},i));for(let c=0;c<s.length;c++){const u=s[c];for(let f=u.start;f<=u.end;f++)nk(r,a[f],l)}return new tr({points:r,options:{}})}function tk(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===t)break;s.hidden||n.unshift(s.dataset)}return n}function nk(e,t,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:a,last:l,point:c}=ik(s,t,"x");if(!(!c||a&&l)){if(a)i.unshift(c);else if(e.push(c),!l)break}}e.push(...i)}function ik(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],s=e.segments,a=e.points;let l=!1,c=!1;for(let u=0;u<s.length;u++){const f=s[u],m=a[f.start][n],g=a[f.end][n];if(Ri(r,m,g)){l=r===m,c=r===g;break}}return{first:l,last:c,point:i}}class dy{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:r,y:s,radius:a}=this;return n=n||{start:0,end:St},t.arc(r,s,a,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:r}=this,s=t.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function rk(e){const{chart:t,fill:n,line:i}=e;if(Lt(n))return sk(t,n);if(n==="stack")return ek(e);if(n==="shape")return!0;const r=ok(e);return r instanceof dy?r:cy(r,i)}function sk(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function ok(e){return(e.scale||{}).getPointPositionForValue?lk(e):ak(e)}function ak(e){const{scale:t={},fill:n}=e,i=JS(n,t);if(Lt(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function lk(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,a=XS(n,t,s),l=[];if(i.grid.circular){const c=t.getPointPositionForValue(0,s);return new dy({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(a)})}for(let c=0;c<r;++c)l.push(t.getPointPositionForValue(c,a));return l}function Nu(e,t,n){const i=rk(t),{line:r,scale:s,axis:a}=t,l=r.options,c=l.fill,u=l.backgroundColor,{above:f=u,below:m=u}=c||{};i&&r.points.length&&($l(e,n),uk(e,{line:r,target:i,above:f,below:m,area:n,scale:s,axis:a}),Vl(e))}function uk(e,t){const{line:n,target:i,above:r,below:s,area:a,scale:l}=t,c=n._loop?"angle":t.axis;e.save(),c==="x"&&s!==r&&(gp(e,i,a.top),mp(e,{line:n,target:i,color:r,scale:l,property:c}),e.restore(),e.save(),gp(e,i,a.bottom)),mp(e,{line:n,target:i,color:s,scale:l,property:c}),e.restore()}function gp(e,t,n){const{segments:i,points:r}=t;let s=!0,a=!1;e.beginPath();for(const l of i){const{start:c,end:u}=l,f=r[c],m=r[Ud(c,u,r)];s?(e.moveTo(f.x,f.y),s=!1):(e.lineTo(f.x,n),e.lineTo(f.x,f.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(m.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function mp(e,t){const{line:n,target:i,property:r,color:s,scale:a}=t,l=qS(n,i,r);for(const{source:c,target:u,start:f,end:m}of l){const{style:{backgroundColor:g=s}={}}=c,h=i!==!0;e.save(),e.fillStyle=g,ck(e,a,h&&uc(r,f,m)),e.beginPath();const v=!!n.pathSegment(e,c);let y;if(h){v?e.closePath():vp(e,i,m,r);const E=!!i.pathSegment(e,u,{move:v,reverse:!0});y=v&&E,y||vp(e,i,f,r)}e.closePath(),e.fill(y?"evenodd":"nonzero"),e.restore()}}function ck(e,t,n){const{top:i,bottom:r}=t.chart.chartArea,{property:s,start:a,end:l}=n||{};s==="x"&&(e.beginPath(),e.rect(a,i,l-a,r-i),e.clip())}function vp(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var dk={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let s,a,l,c;for(a=0;a<i;++a)s=e.getDatasetMeta(a),l=s.dataset,c=null,l&&l.options&&l instanceof tr&&(c={visible:e.isDatasetVisible(a),index:a,fill:VS(l,a,i),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=c,r.push(c);for(a=0;a<i;++a)c=r[a],!(!c||c.fill===!1)&&(c.fill=$S(r,a,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let a=r.length-1;a>=0;--a){const l=r[a].$filler;l&&(l.line.updateControlPoints(s,l.axis),i&&l.fill&&Nu(e.ctx,l,s))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;pp(s)&&Nu(e.ctx,s,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!pp(i)||n.drawTime!=="beforeDatasetDraw"||Nu(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const yp=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},fk=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class _p extends Qi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Tt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=Kt(i.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=yp(i,s);let u,f;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,f=this._fitRows(a,s,l,c)+10):(f=this.maxHeight,u=this._fitCols(a,r,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(f,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,r){const{ctx:s,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],f=r+l;let m=t;s.textAlign="left",s.textBaseline="middle";let g=-1,h=-f;return this.legendItems.forEach((v,y)=>{const E=i+n/2+s.measureText(v.text).width;(y===0||u[u.length-1]+E+2*l>a)&&(m+=f,u[u.length-(y>0?0:1)]=0,h+=f,g++),c[y]={left:0,top:h,row:g,width:E,height:r},u[u.length-1]+=E+l}),m}_fitCols(t,n,i,r){const{ctx:s,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],f=a-t;let m=l,g=0,h=0,v=0,y=0;return this.legendItems.forEach((E,b)=>{const{itemWidth:w,itemHeight:T}=hk(i,n,s,E,r);b>0&&h+T+2*l>f&&(m+=g+l,u.push({width:g,height:h}),v+=g+l,y++,g=h=0),c[b]={left:v,top:h,col:y,width:w,height:T},g=Math.max(g,w),h+=T+l}),m+=g,u.push({width:g,height:h}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,a=us(s,this.left,this.width);if(this.isHorizontal()){let l=0,c=sn(i,this.left+r,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=sn(i,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+t+r,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+r}else{let l=0,c=sn(i,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=sn(i,this.top+t+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;$l(t,this),this._draw(),Vl(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:a}=t,l=Ft.color,c=us(t.rtl,this.left,this.width),u=Kt(a.font),{padding:f}=a,m=u.size,g=m/2;let h;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:v,boxHeight:y,itemHeight:E}=yp(a,m),b=function(O,R,I){if(isNaN(v)||v<=0||isNaN(y)||y<0)return;r.save();const P=et(I.lineWidth,1);if(r.fillStyle=et(I.fillStyle,l),r.lineCap=et(I.lineCap,"butt"),r.lineDashOffset=et(I.lineDashOffset,0),r.lineJoin=et(I.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=et(I.strokeStyle,l),r.setLineDash(et(I.lineDash,[])),a.usePointStyle){const M={radius:y*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:P},B=c.xPlus(O,v/2),z=R+g;Av(r,M,B,z,a.pointStyleWidth&&v)}else{const M=R+Math.max((m-y)/2,0),B=c.leftForLtr(O,v),z=Rr(I.borderRadius);r.beginPath(),Object.values(z).some(te=>te!==0)?_o(r,{x:B,y:M,w:v,h:y,radius:z}):r.rect(B,M,v,y),r.fill(),P!==0&&r.stroke()}r.restore()},w=function(O,R,I){Fr(r,I.text,O,R+E/2,u,{strikethrough:I.hidden,textAlign:c.textAlign(I.textAlign)})},T=this.isHorizontal(),x=this._computeTitleHeight();T?h={x:sn(s,this.left+f,this.right-i[0]),y:this.top+f+x,line:0}:h={x:this.left+f,y:sn(s,this.top+x+f,this.bottom-n[0].height),line:0},Wv(this.ctx,t.textDirection);const D=E+f;this.legendItems.forEach((O,R)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;const I=r.measureText(O.text).width,P=c.textAlign(O.textAlign||(O.textAlign=a.textAlign)),M=v+g+I;let B=h.x,z=h.y;c.setWidth(this.width),T?R>0&&B+M+f>this.right&&(z=h.y+=D,h.line++,B=h.x=sn(s,this.left+f,this.right-i[h.line])):R>0&&z+D>this.bottom&&(B=h.x=B+n[h.line].width+f,h.line++,z=h.y=sn(s,this.top+x+f,this.bottom-n[h.line].height));const te=c.x(B);if(b(te,z,O),B=Mx(P,B+v+g,T?B+M:this.right,t.rtl),w(c.x(B),z,O),T)h.x+=M+f;else if(typeof O.text!="string"){const pe=u.lineHeight;h.y+=fy(O,pe)+f}else h.y+=D}),Uv(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=Kt(n.font),r=un(n.padding);if(!n.display)return;const s=us(t.rtl,this.left,this.width),a=this.ctx,l=n.position,c=i.size/2,u=r.top+c;let f,m=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),f=this.top+u,m=sn(t.align,m,this.right-g);else{const v=this.columnSizes.reduce((y,E)=>Math.max(y,E.height),0);f=u+sn(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const h=sn(l,m,m+g);a.textAlign=s.textAlign(Md(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=i.string,Fr(a,n.text,h,f,i)}_computeTitleHeight(){const t=this.options.title,n=Kt(t.font),i=un(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,r,s;if(Ri(t,this.left,this.right)&&Ri(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ri(t,r.left,r.left+r.width)&&Ri(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!mk(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,s=fk(r,i);r&&!s&&Tt(n.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Tt(n.onHover,[t,i,this],this)}else i&&Tt(n.onClick,[t,i,this],this)}}function hk(e,t,n,i,r){const s=pk(i,e,t,n),a=gk(r,i,t.lineHeight);return{itemWidth:s,itemHeight:a}}function pk(e,t,n,i){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((s,a)=>s.length>a.length?s:a)),t+n.size/2+i.measureText(r).width}function gk(e,t,n){let i=e;return typeof t.text!="string"&&(i=fy(t,n)),i}function fy(e,t){const n=e.text?e.text.length:0;return t*n}function mk(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var vk={id:"legend",_element:_p,start(e,t,n){const i=e.legend=new _p({ctx:e.ctx,options:n,chart:e});an.configure(e,i,n),an.addBox(e,i)},stop(e){an.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;an.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),f=un(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class jd extends Qi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=Pt(i.text)?i.text.length:1;this._padding=un(i.padding);const s=r*Kt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:r,right:s,options:a}=this,l=a.align;let c=0,u,f,m;return this.isHorizontal()?(f=sn(l,i,s),m=n+t,u=s-i):(a.position==="left"?(f=i+t,m=sn(l,r,n),c=kt*-.5):(f=s-t,m=sn(l,n,r),c=kt*.5),u=r-n),{titleX:f,titleY:m,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=Kt(n.font),s=i.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(s);Fr(t,n.text,0,0,i,{color:n.color,maxWidth:c,rotation:u,textAlign:Md(n.align),textBaseline:"middle",translation:[a,l]})}}function yk(e,t){const n=new jd({ctx:e.ctx,options:t,chart:e});an.configure(e,n,t),an.addBox(e,n),e.titleBlock=n}var _k={id:"title",_element:jd,start(e,t,n){yk(e,n)},stop(e){const t=e.titleBlock;an.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;an.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pa=new WeakMap;var bk={id:"subtitle",start(e,t,n){const i=new jd({ctx:e.ctx,options:n,chart:e});an.configure(e,i,n),an.addBox(e,i),Pa.set(e,i)},stop(e){an.removeBox(e,Pa.get(e)),Pa.delete(e)},beforeUpdate(e,t,n){const i=Pa.get(e);an.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ks={average(e){if(!e.length)return!1;let t,n,i=0,r=0,s=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i+=l.x,r+=l.y,++s}}return{x:i/s,y:r/s}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,a,l;for(s=0,a=e.length;s<a;++s){const c=e[s].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),f=tc(t,u);f<r&&(r=f,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,i=c.y}return{x:n,y:i}}};function li(e,t){return t&&(Pt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Di(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function wk(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:a,value:l}=s.getLabelAndValue(r);return{chart:e,label:a,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function bp(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:a,boxHeight:l}=t,c=Kt(t.bodyFont),u=Kt(t.titleFont),f=Kt(t.footerFont),m=s.length,g=r.length,h=i.length,v=un(t.padding);let y=v.height,E=0,b=i.reduce((x,D)=>x+D.before.length+D.lines.length+D.after.length,0);if(b+=e.beforeBody.length+e.afterBody.length,m&&(y+=m*u.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),b){const x=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;y+=h*x+(b-h)*c.lineHeight+(b-1)*t.bodySpacing}g&&(y+=t.footerMarginTop+g*f.lineHeight+(g-1)*t.footerSpacing);let w=0;const T=function(x){E=Math.max(E,n.measureText(x).width+w)};return n.save(),n.font=u.string,xt(e.title,T),n.font=c.string,xt(e.beforeBody.concat(e.afterBody),T),w=t.displayColors?a+2+t.boxPadding:0,xt(i,x=>{xt(x.before,T),xt(x.lines,T),xt(x.after,T)}),w=0,n.font=f.string,xt(e.footer,T),n.restore(),E+=v.width,{width:E,height:y}}function Ck(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function Ek(e,t,n,i){const{x:r,width:s}=i,a=n.caretSize+n.caretPadding;if(e==="left"&&r+s+a>t.width||e==="right"&&r-s-a<0)return!0}function xk(e,t,n,i){const{x:r,width:s}=n,{width:a,chartArea:{left:l,right:c}}=e;let u="center";return i==="center"?u=r<=(l+c)/2?"left":"right":r<=s/2?u="left":r>=a-s/2&&(u="right"),Ek(u,e,t,n)&&(u="center"),u}function wp(e,t,n){const i=n.yAlign||t.yAlign||Ck(e,n);return{xAlign:n.xAlign||t.xAlign||xk(e,t,n,i),yAlign:i}}function Dk(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function Tk(e,t,n){let{y:i,height:r}=e;return t==="top"?i+=n:t==="bottom"?i-=r+n:i-=r/2,i}function Cp(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=e,{xAlign:l,yAlign:c}=n,u=r+s,{topLeft:f,topRight:m,bottomLeft:g,bottomRight:h}=Rr(a);let v=Dk(t,l);const y=Tk(t,c,u);return c==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(f,g)+r:l==="right"&&(v+=Math.max(m,h)+r),{x:Jt(v,0,i.width-t.width),y:Jt(y,0,i.height-t.height)}}function Ma(e,t,n){const i=un(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function Ep(e){return li([],Di(e))}function Sk(e,t,n){return pr(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function xp(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const hy={beforeTitle:Ei,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Ei,beforeBody:Ei,beforeLabel:Ei,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return mt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ei,afterBody:Ei,beforeFooter:Ei,footer:Ei,afterFooter:Ei};function yn(e,t,n,i){const r=e[t].call(n,i);return typeof r>"u"?hy[t].call(n,i):r}class cc extends Qi{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new qv(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Sk(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,r=yn(i,"beforeTitle",this,t),s=yn(i,"title",this,t),a=yn(i,"afterTitle",this,t);let l=[];return l=li(l,Di(r)),l=li(l,Di(s)),l=li(l,Di(a)),l}getBeforeBody(t,n){return Ep(yn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,r=[];return xt(t,s=>{const a={before:[],lines:[],after:[]},l=xp(i,s);li(a.before,Di(yn(l,"beforeLabel",this,s))),li(a.lines,yn(l,"label",this,s)),li(a.after,Di(yn(l,"afterLabel",this,s))),r.push(a)}),r}getAfterBody(t,n){return Ep(yn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,r=yn(i,"beforeFooter",this,t),s=yn(i,"footer",this,t),a=yn(i,"afterFooter",this,t);let l=[];return l=li(l,Di(r)),l=li(l,Di(s)),l=li(l,Di(a)),l}_createItems(t){const n=this._active,i=this.chart.data,r=[],s=[],a=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(wk(this.chart,n[c]));return t.filter&&(l=l.filter((f,m,g)=>t.filter(f,m,g,i))),t.itemSort&&(l=l.sort((f,m)=>t.itemSort(f,m,i))),xt(l,f=>{const m=xp(t.callbacks,f);r.push(yn(m,"labelColor",this,f)),s.push(yn(m,"labelPointStyle",this,f)),a.push(yn(m,"labelTextColor",this,f))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,a=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const l=Ks[i.position].call(this,r,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const c=this._size=bp(this,i),u=Object.assign({},l,c),f=wp(this.chart,i,u),m=Cp(i,u,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,s={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,r){const s=this.getCaretPosition(t,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(t,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:a,cornerRadius:l}=i,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:m}=Rr(l),{x:g,y:h}=t,{width:v,height:y}=n;let E,b,w,T,x,D;return s==="center"?(x=h+y/2,r==="left"?(E=g,b=E-a,T=x+a,D=x-a):(E=g+v,b=E+a,T=x-a,D=x+a),w=E):(r==="left"?b=g+Math.max(c,f)+a:r==="right"?b=g+v-Math.max(u,m)-a:b=this.caretX,s==="top"?(T=h,x=T-a,E=b-a,w=b+a):(T=h+y,x=T+a,E=b+a,w=b-a),D=T),{x1:E,x2:b,x3:w,y1:T,y2:x,y3:D}}drawTitle(t,n,i){const r=this.title,s=r.length;let a,l,c;if(s){const u=us(i.rtl,this.x,this.width);for(t.x=Ma(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",a=Kt(i.titleFont),l=i.titleSpacing,n.fillStyle=i.titleColor,n.font=a.string,c=0;c<s;++c)n.fillText(r[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===s&&(t.y+=i.titleMarginBottom-l)}}_drawColorBox(t,n,i,r,s){const a=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:u}=s,f=Kt(s.bodyFont),m=Ma(this,"left",s),g=r.x(m),h=c<f.lineHeight?(f.lineHeight-c)/2:0,v=n.y+h;if(s.usePointStyle){const y={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},E=r.leftForLtr(g,u)+u/2,b=v+c/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,ic(t,y,E,b),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,ic(t,y,E,b)}else{t.lineWidth=ct(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const y=r.leftForLtr(g,u),E=r.leftForLtr(r.xPlus(g,1),u-2),b=Rr(a.borderRadius);Object.values(b).some(w=>w!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,_o(t,{x:y,y:v,w:u,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),_o(t,{x:E,y:v+1,w:u-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(y,v,u,c),t.strokeRect(y,v,u,c),t.fillStyle=a.backgroundColor,t.fillRect(E,v+1,u-2,c-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:f}=i,m=Kt(i.bodyFont);let g=m.lineHeight,h=0;const v=us(i.rtl,this.x,this.width),y=function(I){n.fillText(I,v.x(t.x+h),t.y+g/2),t.y+=g+s},E=v.textAlign(a);let b,w,T,x,D,O,R;for(n.textAlign=a,n.textBaseline="middle",n.font=m.string,t.x=Ma(this,E,i),n.fillStyle=i.bodyColor,xt(this.beforeBody,y),h=l&&E!=="right"?a==="center"?u/2+f:u+2+f:0,x=0,O=r.length;x<O;++x){for(b=r[x],w=this.labelTextColors[x],n.fillStyle=w,xt(b.before,y),T=b.lines,l&&T.length&&(this._drawColorBox(n,t,x,v,i),g=Math.max(m.lineHeight,c)),D=0,R=T.length;D<R;++D)y(T[D]),g=m.lineHeight;xt(b.after,y)}h=0,g=m.lineHeight,xt(this.afterBody,y),t.y-=s}drawFooter(t,n,i){const r=this.footer,s=r.length;let a,l;if(s){const c=us(i.rtl,this.x,this.width);for(t.x=Ma(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=c.textAlign(i.footerAlign),n.textBaseline="middle",a=Kt(i.footerFont),n.fillStyle=i.footerColor,n.font=a.string,l=0;l<s;++l)n.fillText(r[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,n,i,r){const{xAlign:s,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:f}=i,{topLeft:m,topRight:g,bottomLeft:h,bottomRight:v}=Rr(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+m,c),a==="top"&&this.drawCaret(t,n,i,r),n.lineTo(l+u-g,c),n.quadraticCurveTo(l+u,c,l+u,c+g),a==="center"&&s==="right"&&this.drawCaret(t,n,i,r),n.lineTo(l+u,c+f-v),n.quadraticCurveTo(l+u,c+f,l+u-v,c+f),a==="bottom"&&this.drawCaret(t,n,i,r),n.lineTo(l+h,c+f),n.quadraticCurveTo(l,c+f,l,c+f-h),a==="center"&&s==="left"&&this.drawCaret(t,n,i,r),n.lineTo(l,c+m),n.quadraticCurveTo(l,c,l+m,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const a=Ks[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=bp(this,t),c=Object.assign({},a,this._size),u=wp(n,t,c),f=Cp(t,c,u,n);(r._to!==f.x||s._to!==f.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=un(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,r,n),Wv(t,n.textDirection),s.y+=a.top,this.drawTitle(s,t,n),this.drawBody(s,t,n),this.drawFooter(s,t,n),Uv(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,r=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),s=!ml(i,r),a=this._positionChanged(r,n);(s||a)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],a=this._getActiveElements(t,s,n,i),l=this._positionChanged(a,t),c=n||!ml(a,s)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,i,r){const s=this.options;if(t.type==="mouseout")return[];if(!r)return n;const a=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:i,caretY:r,options:s}=this,a=Ks[s.position].call(this,t,n);return a!==!1&&(i!==a.x||r!==a.y)}}Pe(cc,"positioners",Ks);var kk={id:"tooltip",_element:cc,positioners:Ks,afterInit(e,t,n){n&&(e.tooltip=new cc({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Ok=Object.freeze({__proto__:null,Colors:WS,Decimation:zS,Filler:dk,Legend:vk,SubTitle:bk,Title:_k,Tooltip:kk});const Ik=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function Rk(e,t,n,i){const r=e.indexOf(t);if(r===-1)return Ik(e,t,n,i);const s=e.lastIndexOf(t);return r!==s?n:r}const Ak=(e,t)=>e===null?null:Jt(Math.round(e),0,t);function Dp(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class dc extends Qr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(mt(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:Rk(i,t,et(n,t),this._addedLabels),Ak(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=t===0&&n===s.length-1?s:s.slice(t,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=n;a++)r.push({value:a});return r}getLabelForValue(t){return Dp.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Pe(dc,"id","category"),Pe(dc,"defaults",{ticks:{callback:Dp}});function Pk(e,t){const n=[],{bounds:r,step:s,min:a,max:l,precision:c,count:u,maxTicks:f,maxDigits:m,includeBounds:g}=e,h=s||1,v=f-1,{min:y,max:E}=t,b=!mt(a),w=!mt(l),T=!mt(u),x=(E-y)/(m+1);let D=_h((E-y)/v/h)*h,O,R,I,P;if(D<1e-14&&!b&&!w)return[{value:y},{value:E}];P=Math.ceil(E/D)-Math.floor(y/D),P>v&&(D=_h(P*D/v/h)*h),mt(c)||(O=Math.pow(10,c),D=Math.ceil(D*O)/O),r==="ticks"?(R=Math.floor(y/D)*D,I=Math.ceil(E/D)*D):(R=y,I=E),b&&w&&s&&Sx((l-a)/s,D/1e3)?(P=Math.round(Math.min((l-a)/D,f)),D=(l-a)/P,R=a,I=l):T?(R=b?a:R,I=w?l:I,P=u-1,D=(I-R)/P):(P=(I-R)/D,to(P,Math.round(P),D/1e3)?P=Math.round(P):P=Math.ceil(P));const M=Math.max(bh(D),bh(R));O=Math.pow(10,mt(c)?M:c),R=Math.round(R*O)/O,I=Math.round(I*O)/O;let B=0;for(b&&(g&&R!==a?(n.push({value:a}),R<a&&B++,to(Math.round((R+B*D)*O)/O,a,Tp(a,x,e))&&B++):R<a&&B++);B<P;++B){const z=Math.round((R+B*D)*O)/O;if(w&&z>l)break;n.push({value:z})}return w&&g&&I!==l?n.length&&to(n[n.length-1].value,l,Tp(l,x,e))?n[n.length-1].value=l:n.push({value:l}):(!w||I===l)&&n.push({value:I}),n}function Tp(e,t,{horizontal:n,minRotation:i}){const r=Xn(i),s=(n?Math.sin(r):Math.cos(r))||.001,a=.75*t*(""+e).length;return Math.min(t/s,a)}class El extends Qr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return mt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const a=c=>r=n?r:c,l=c=>s=i?s:c;if(t){const c=hi(r),u=hi(s);c<0&&u<0?l(0):c>0&&u>0&&a(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);l(s+c),t||a(r-c)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,a=Pk(r,s);return t.bounds==="ticks"&&Ev(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-n)/Math.max(t.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return Bo(t,this.chart.options.locale,this.options.ticks.format)}}class fc extends El{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Lt(t)?t:0,this.max=Lt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=Xn(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Pe(fc,"id","linear"),Pe(fc,"defaults",{ticks:{callback:Ql.formatters.numeric}});const wo=e=>Math.floor(er(e)),Cr=(e,t)=>Math.pow(10,wo(e)+t);function Sp(e){return e/Math.pow(10,wo(e))===1}function kp(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function Mk(e,t){const n=t-e;let i=wo(n);for(;kp(e,t,i)>10;)i++;for(;kp(e,t,i)<10;)i--;return Math.min(i,wo(e))}function Nk(e,{min:t,max:n}){t=In(e.min,t);const i=[],r=wo(t);let s=Mk(t,n),a=s<0?Math.pow(10,Math.abs(s)):1;const l=Math.pow(10,s),c=r>s?Math.pow(10,r):0,u=Math.round((t-c)*a)/a,f=Math.floor((t-c)/l/10)*l*10;let m=Math.floor((u-f)/Math.pow(10,s)),g=In(e.min,Math.round((c+f+m*Math.pow(10,s))*a)/a);for(;g<n;)i.push({value:g,major:Sp(g),significand:m}),m>=10?m=m<15?15:20:m++,m>=20&&(s++,m=2,a=s>=0?1:a),g=Math.round((c+f+m*Math.pow(10,s))*a)/a;const h=In(e.max,g);return i.push({value:h,major:Sp(h),significand:m}),i}class hc extends Qr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=El.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return Lt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Lt(t)?Math.max(0,t):null,this.max=Lt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Lt(this._userMin)&&(this.min=t===Cr(this.min,0)?Cr(this.min,-1):Cr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=l=>i=t?i:l,a=l=>r=n?r:l;i===r&&(i<=0?(s(1),a(10)):(s(Cr(i,-1)),a(Cr(r,1)))),i<=0&&s(Cr(r,-1)),r<=0&&a(Cr(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=Nk(n,this);return t.bounds==="ticks"&&Ev(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Bo(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=er(t),this._valueRange=er(this.max)-er(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(er(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}Pe(hc,"id","logarithmic"),Pe(hc,"defaults",{ticks:{callback:Ql.formatters.logarithmic,major:{enabled:!0}}});function pc(e){const t=e.ticks;if(t.display&&e.display){const n=un(t.backdropPadding);return et(t.font&&t.font.size,Ft.font.size)+n.height}return 0}function Lk(e,t,n){return n=Pt(n)?n:[n],{w:Yx(e,t.string,n),h:n.length*t.lineHeight}}function Op(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function Fk(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,a=e.options.pointLabels,l=a.centerPointLabels?kt/s:0;for(let c=0;c<s;c++){const u=a.setContext(e.getPointLabelContext(c));r[c]=u.padding;const f=e.getPointPosition(c,e.drawingArea+r[c],l),m=Kt(u.font),g=Lk(e.ctx,m,e._pointLabels[c]);i[c]=g;const h=Rn(e.getIndexAngle(c)+l),v=Math.round(Ad(h)),y=Op(v,f.x,g.w,0,180),E=Op(v,f.y,g.h,90,270);Gk(n,t,h,y,E)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=Wk(e,i,r)}function Gk(e,t,n,i,r){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let l=0,c=0;i.start<t.l?(l=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-l)):i.end>t.r&&(l=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+l)),r.start<t.t?(c=(t.t-r.start)/a,e.t=Math.min(e.t,t.t-c)):r.end>t.b&&(c=(r.end-t.b)/a,e.b=Math.max(e.b,t.b+c))}function Hk(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:a,size:l}=n,c=e.getPointPosition(t,i+r+a,s),u=Math.round(Ad(Rn(c.angle+Wt))),f=Yk(c.y,l.h,u),m=Uk(u),g=jk(c.x,l.w,m);return{visible:!0,x:c.x,y:f,textAlign:m,left:g,top:f,right:g+l.w,bottom:f+l.h}}function Bk(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(Pi({x:n,y:i},t)||Pi({x:n,y:s},t)||Pi({x:r,y:i},t)||Pi({x:r,y:s},t))}function Wk(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:l}=s.pointLabels,c={extra:pc(s)/2,additionalAngle:a?kt/r:0};let u;for(let f=0;f<r;f++){c.padding=n[f],c.size=t[f];const m=Hk(e,f,c);i.push(m),l==="auto"&&(m.visible=Bk(m,u),m.visible&&(u=m))}return i}function Uk(e){return e===0||e===180?"center":e<180?"left":"right"}function jk(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function Yk(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function zk(e,t,n){const{left:i,top:r,right:s,bottom:a}=n,{backdropColor:l}=t;if(!mt(l)){const c=Rr(t.borderRadius),u=un(t.backdropPadding);e.fillStyle=l;const f=i-u.left,m=r-u.top,g=s-i+u.width,h=a-r+u.height;Object.values(c).some(v=>v!==0)?(e.beginPath(),_o(e,{x:f,y:m,w:g,h,radius:c}),e.fill()):e.fillRect(f,m,g,h)}}function qk(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const s=e._pointLabelItems[r];if(!s.visible)continue;const a=i.setContext(e.getPointLabelContext(r));zk(n,a,s);const l=Kt(a.font),{x:c,y:u,textAlign:f}=s;Fr(n,e._pointLabels[r],c,u+l.lineHeight/2,l,{color:a.color,textAlign:f,textBaseline:"middle"})}}function py(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,St);else{let s=e.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let a=1;a<i;a++)s=e.getPointPosition(a,t),r.lineTo(s.x,s.y)}}function Qk(e,t,n,i,r){const s=e.ctx,a=t.circular,{color:l,lineWidth:c}=t;!a&&!i||!l||!c||n<0||(s.save(),s.strokeStyle=l,s.lineWidth=c,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),py(e,n,a,i),s.closePath(),s.stroke(),s.restore())}function $k(e,t,n){return pr(e,{label:n,index:t,type:"pointLabel"})}class Js extends El{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=un(pc(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Lt(t)&&!isNaN(t)?t:0,this.max=Lt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/pc(this.options))}generateTickLabels(t){El.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const r=Tt(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?Fk(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,r){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,r))}getIndexAngle(t){const n=St/(this._pointLabels.length||1),i=this.options.startAngle||0;return Rn(t*n+Xn(i))}getDistanceFromCenterForValue(t){if(mt(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(mt(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return $k(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const r=this.getIndexAngle(t)-Wt+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),py(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,a=this._pointLabels.length;let l,c,u;if(n.pointLabels.display&&qk(this,a),r.display&&this.ticks.forEach((f,m)=>{if(m!==0){c=this.getDistanceFromCenterForValue(f.value);const g=this.getContext(m),h=r.setContext(g),v=s.setContext(g);Qk(this,h,c,a,v)}}),i.display){for(t.save(),l=a-1;l>=0;l--){const f=i.setContext(this.getPointLabelContext(l)),{color:m,lineWidth:g}=f;!g||!m||(t.lineWidth=g,t.strokeStyle=m,t.setLineDash(f.borderDash),t.lineDashOffset=f.borderDashOffset,c=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),u=this.getPointPosition(l,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&!n.reverse)return;const u=i.setContext(this.getContext(c)),f=Kt(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),u.showLabelBackdrop){t.font=f.string,a=t.measureText(l.label).width,t.fillStyle=u.backdropColor;const m=un(u.backdropPadding);t.fillRect(-a/2-m.left,-s-f.size/2-m.top,a+m.width,f.size+m.height)}Fr(t,l.label,0,-s,f,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),t.restore()}drawTitle(){}}Pe(Js,"id","radialLinear"),Pe(Js,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ql.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),Pe(Js,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Pe(Js,"descriptors",{angleLines:{_fallback:"grid"}});const Jl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Cn=Object.keys(Jl);function Ip(e,t){return e-t}function Rp(e,t){if(mt(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let a=t;return typeof i=="function"&&(a=i(a)),Lt(a)||(a=typeof i=="string"?n.parse(a,i):n.parse(a)),a===null?null:(r&&(a=r==="week"&&(ps(s)||s===!0)?n.startOf(a,"isoWeek",s):n.startOf(a,r)),+a)}function Ap(e,t,n,i){const r=Cn.length;for(let s=Cn.indexOf(e);s<r-1;++s){const a=Jl[Cn[s]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(l*a.size))<=i)return Cn[s]}return Cn[r-1]}function Vk(e,t,n,i,r){for(let s=Cn.length-1;s>=Cn.indexOf(n);s--){const a=Cn[s];if(Jl[a].common&&e._adapter.diff(r,i,a)>=t-1)return a}return Cn[n?Cn.indexOf(n):0]}function Kk(e){for(let t=Cn.indexOf(e)+1,n=Cn.length;t<n;++t)if(Jl[Cn[t]].common)return Cn[t]}function Pp(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:r}=Pd(n,t),s=n[i]>=t?n[i]:n[r];e[s]=!0}}function Jk(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),a=t[t.length-1].value;let l,c;for(l=s;l<=a;l=+r.add(l,1,i))c=n[l],c>=0&&(t[c].major=!0);return t}function Mp(e,t,n){const i=[],r={},s=t.length;let a,l;for(a=0;a<s;++a)l=t[a],r[l]=a,i.push({value:l,major:!1});return s===0||!n?i:Jk(e,i,r,n)}class Co extends Qr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),r=this._adapter=new oT._date(t.adapters.date);r.init(n),eo(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Rp(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:r,max:s,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Lt(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Lt(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,a=this.max,l=Rx(r,s,a);return this._unit=n.unit||(i.autoSkip?Ap(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Vk(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Kk(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),Mp(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=Jt(n,0,a),i=Jt(i,0,a),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,a=s.unit||Ap(s.minUnit,n,i,this._getLabelCapacity(n)),l=et(r.ticks.stepSize,1),c=a==="week"?s.isoWeekday:!1,u=ps(c)||c===!0,f={};let m=n,g,h;if(u&&(m=+t.startOf(m,"isoWeek",c)),m=+t.startOf(m,u?"day":a),t.diff(i,n,a)>1e5*l)throw new Error(n+" and "+i+" are too far apart with stepSize of "+l+" "+a);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(g=m,h=0;g<i;g=+t.add(g,l,a),h++)Pp(f,g,v);return(g===i||r.bounds==="ticks"||h===1)&&Pp(f,g,v),Object.keys(f).sort(Ip).map(y=>+y)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,s=this._unit,a=n||r[s];return this._adapter.format(t,a)}_tickFormatFunction(t,n,i,r){const s=this.options,a=s.ticks.callback;if(a)return Tt(a,[t,n,i],this);const l=s.time.displayFormats,c=this._unit,u=this._majorUnit,f=c&&l[c],m=u&&l[u],g=i[n],h=u&&m&&g&&g.major;return this._adapter.format(t,r||(h?m:f))}generateTickLabels(t){let n,i,r;for(n=0,i=t.length;n<i;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,r=Xn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:i*s+l*a,h:i*a+l*s}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(t,0,Mp(this,[t],this._majorUnit),r),a=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)t.push(Rp(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Tv(t.sort(Ip))}}Pe(Co,"id","time"),Pe(Co,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Na(e,t,n){let i=0,r=e.length-1,s,a,l,c;n?(t>=e[i].pos&&t<=e[r].pos&&({lo:i,hi:r}=Ai(e,"pos",t)),{pos:s,time:l}=e[i],{pos:a,time:c}=e[r]):(t>=e[i].time&&t<=e[r].time&&({lo:i,hi:r}=Ai(e,"time",t)),{time:s,pos:l}=e[i],{time:a,pos:c}=e[r]);const u=a-s;return u?l+(c-l)*(t-s)/u:l}class gc extends Co{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Na(n,this.min),this._tableRange=Na(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,r=[],s=[];let a,l,c,u,f;for(a=0,l=t.length;a<l;++a)u=t[a],u>=n&&u<=i&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(a=0,l=r.length;a<l;++a)f=r[a+1],c=r[a-1],u=r[a],Math.round((f+c)/2)!==u&&s.push({time:u,pos:a/(l-1)});return s}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Na(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return Na(this._table,i*this._tableRange+this._minPos,!0)}}Pe(gc,"id","timeseries"),Pe(gc,"defaults",Co.defaults);var Xk=Object.freeze({__proto__:null,CategoryScale:dc,LinearScale:fc,LogarithmicScale:hc,RadialLinearScale:Js,TimeScale:Co,TimeSeriesScale:gc});const Zk=[sT,NS,Ok,Xk];ki.register(...Zk);var ks=Ee("GraphRenderer",Object,function(e,t,n,i){var r=this;r.graph=e,r.elt=t,r.view=n,r.opts=i});ks.prototype.toString=function(){var e=this;return'#<GraphRenderer "'+e.graph.id+'">'};ks.prototype._validateConfig=function(){k.each(["Plain","Group","Pivot"],function(e){var t="when"+e;if(n[t]!=null){var n=n[t];if(typeof n!="function"&&typeof n!="object"){n[t]=null;return}}})};ks.prototype.addRedrawHandlers=function(){var e=this;en.info("GRAPH // RENDER","Adding redraw handlers"),e.view.off("workEnd",e),e.view.on("workEnd",function(){en.info("GRAPH RENDERER // HANDLER (View.dataUpdated)","Redrawing graph because the view has finished doing work"),e.draw()},{who:e})};var Uo=Ee("GraphRendererChartJs",ks,null,{graphTypes:Ae.fromArray([{value:"bar",name:"Bar Chart",modes:["plain","group","pivot"]},{value:"column",name:"Column Chart",modes:["plain","group","pivot"]}])});Uo.prototype.draw_plain=function(e,t,n,i){if(i==null)return null;var r=function(c){switch(c){case"currency":return"number";default:return c}},s=function(c,u){return t.get(c).type==="date"&&le.isMoment(u.value)?{v:u.value.toDate(),f:u.orig}:["number","currency"].indexOf(t.get(c).type)>=0&&bt.isNumeral(u.value)?{v:u.value._value,f:u.orig}:u.value};switch(i.graphType){case"gantt":if(i.nameField==null)throw new Error("Configuration option `nameField` must exist");var a=""+ +i.startField+ +i.endField+ +i.durationField;if(a==="100"||a==="010"||a==="000")throw new Error("Time configuration is insufficient to determine offsets");n.addColumn("string","ID"),n.addColumn("string","Name"),n.addColumn("string","Resource"),n.addColumn("date","Start"),n.addColumn("date","End"),n.addColumn("number","Duration"),n.addColumn("number","Completion"),n.addColumn("string","Dependencies");var l=[{name:"id",default:function(){var c=0;return function(){return c++}}},{name:"name"},{name:"resource",default:null},{name:"start",default:null},{name:"end",default:null},{name:"duration",default:null},{name:"completion",default:0},{name:"dependencies",default:null}];k.each(l,function(c){i[c.name+"Field"]!=null&&Source.decodeAll(e.dataByRowId,i[c.name+"Field"])}),k.each(e.data,function(c){var u=[];k.each(l,function(f){if(i[f.name+"Field"]!=null)u.push(s(i[f.name+"Field"],c.rowData[i[f.name+"Field"]]));else{if(f.default===void 0)throw new Error;typeof f.default=="function"?u.push(f.default()):u.push(f.default)}}),n.addRow(u)});break;default:n.addColumn(r(t.get(i.categoryField).type),i.categoryField),k.each(i.valueFields,function(c){n.addColumn(r(t.get(c).type),c)}),k.each(i.valueFields,function(c){Source.decodeAll(e.dataByRowId,c)}),k.each(e.data,function(c){var u;u=k.map([i.categoryField].concat(i.valueFields),function(f){return s(f,c.rowData[f])}),n.addRow(u)})}return i};Uo.prototype.draw_group=function(e,t,s,i){var r=this,s={data:{datasets:[],labels:[]}};if(typeof i=="function"&&(i=i(e.groupFields)),i=Qe(i,{graphType:"bar",categoryField:e.groupFields[0],valueFields:[{name:"Count",fun:"count"}]}),i.aggType!=null&&i.aggNum!=null){s.data.datasets[0]={},s.data.datasets[0].label=i.categoryField;var a=me(e,"agg","info",i.aggType,i.aggNum);if(a==null)return de.error("The specified aggregate does not exist: "+i.aggType+"["+i.aggNum+"]"),null;if(e.agg.results[i.aggType][i.aggNum]==null)return de.error("No results exist for the specified aggregate: "+i.aggType+"["+i.aggNum+"]"),null;a.name||a.instance.getFullName();var l=a.instance.getType();l==="currency"&&(l="number",st("currency",i,"options",valueAxis,"format")),s.data.datasets[0].data=[],k.each(e.rowVals,function(u,f){s.data.labels.push(u.join(", "));var m=e.agg.results[i.aggType][i.aggNum][f];l==="number"&&(m=+m),s.data.datasets[0].data.push(m)})}else{var c=[];k.each(i.valueFields,function(u){var f=new Yi("group",u,0,null,r.typeInfo,null);c.push(f),s.data.datasets.push({label:(f.instance.getType(),u.name||f.instance.getFullName()),data:[]})}),k.each(e.rowVals,function(u,f){s.data.labels.push(u.join(", ")),k.each(c,function(m,g){var h=m.instance.calculate(k.flatten(e.data[f]));s.data.datasets[g].data.push(h),m.debug&&console.debug("[DataVis Graph // Group // Aggregate] Group aggregate (%s) : Group [%s] = %s",m.instance.name+(m.name?" -> "+m.name:""),u.join(", "),JSON.stringify(h))})})}return s};Uo.prototype.draw_pivot=function(e,t,n,i){var r=this;typeof i=="function"&&(i=i(e.groupFields,e.pivotFields)),i=Qe(i,{graphType:"column",categoryField:e.groupFields[0],valueFields:[{fun:"count"}],options:{isStacked:!0}});var s=i.graphType==="bar"?"hAxis":"vAxis";if(n.addColumn("string",i.categoryField),i.aggType!=null&&i.aggNum!=null){var a=me(e,"agg","info",i.aggType,i.aggNum);if(a==null)return de.error("The specified aggregate does not exist: "+i.aggType+"["+i.aggNum+"]"),null;if(e.agg.results[i.aggType][i.aggNum]==null)return de.error("No results exist for the specified aggregate: "+i.aggType+"["+i.aggNum+"]"),null;var l=a.name||a.instance.getFullName(),c=a.instance.getType();switch(c==="currency"&&(c="number",st("currency",i,"options",s,"format")),i.aggType){case"cell":k.each(e.colVals,function(f){n.addColumn(c,f.join(", "))}),st(l,i,"options",s,"title"),k.each(e.rowVals,function(f,m){var g=[f.join(", ")];k.each(e.colVals,function(h,v){var y=e.agg.results[i.aggType][i.aggNum][m][v];c==="number"&&(y=+y),g.push(y)}),n.addRow(g)});break;case"group":n.addColumn(c,l),st(l,i,"options",s,"title"),k.each(e.rowVals,function(f,m){var g=[f.join(", ")],h=e.agg.results[i.aggType][i.aggNum][m];c==="number"&&(h=+h),g.push(h),n.addRow(g)});break;case"pivot":n.addColumn(c,l),st(l,i,"options",s,"title"),k.each(e.colVals,function(f,m){var g=[f.join(", ")],h=e.agg.results[i.aggType][i.aggNum][m];c==="number"&&(h=+h),g.push(h),n.addRow(g)});break}}else{var u=[];k.each(i.valueFields,function(f){var m=new Yi("cell",f,0,null,r.typeInfo,null);k.each(e.colVals,function(g){n.addColumn(m.instance.getType(),g.join(", "))}),u.push(m)}),k.each(e.rowVals,function(f,m){var g=[f.join(", ")];k.each(e.colVals,function(h,v){k.each(u,function(y){var E=y.instance.calculate(e.data[m][v]);g.push(E),y.debug&&console.debug("[DataVis // Graph // Group // Aggregate] Group aggregate (%s) : RowVal [%s] x ColVal [%s] = %s",y.instance.name+(y.name?" -> "+y.name:""),f.join(", "),h.join(", "),JSON.stringify(E))})}),n.addRow(g)})}return i};Uo.prototype.draw=function(e,t){var n=this;n.super.addRedrawHandlers(),e=e||{},t=t||{},n.view.getData(function(i,r){n.view.getTypeInfo(function(s,a){n.elt.children().remove();var l=Bt();n.elt.append(j("<canvas>",{id:l}));var c=function(g){j("<div>").addClass("wcdv_graph_message_container").css({height:n.opts.height+"px"}).append(j("<div>").addClass("wcdv_graph_message").text(g)).appendTo(n.elt)};if(r.data.length===0){c("No Data");return}var u=null;if(r.isPlain?u=n.draw_plain(r,a,me(t,"plain","graphs",me(t,"plain","current"))||e.whenPlain):r.isGroup?u=n.draw_group(r,a,me(t,"group","graphs",me(t,"group","current"))||e.whenGroup):r.isPivot&&(u=n.draw_pivot(r,a,me(t,"pivot","graphs",me(t,"pivot","current"))||e.whenPivot)),u==null){c("Nothing to Graph");return}var f={bar:{type:"bar",options:{indexAxis:"y"}},column:{type:"bar"}},m=Qe({},f.bar,u);console.debug("[DataVis // Graph // Chartjs // Draw] Starting draw: [%O]",m),new ki(document.getElementById(l),m)})},"Drawing Chart.js graph")};var Os=Ee("GraphRendererGoogle",ks,null,{graphTypes:Ae.fromArray([{value:"area",name:"Area Chart",modes:["plain"]},{value:"line",name:"Line Chart",modes:["plain"]},{value:"bar",name:"Bar Chart",modes:["plain","group","pivot"]},{value:"column",name:"Column Chart",modes:["plain","group","pivot"]},{value:"pie",name:"Pie Chart",modes:["plain","group","pivot"]},{value:"gantt",name:"Gantt Chart",modes:["plain"]}])});Os.prototype.draw_plain=function(e,t,n,i){var r=this;if(i==null)return null;var s=function(u){switch(u){case"currency":return"number";default:return u}},a=function(u,f){return t.get(u).type==="date"&&le.isMoment(f.value)?{v:f.value.toDate(),f:f.orig}:["number","currency"].indexOf(t.get(u).type)>=0&&bt.isNumeral(f.value)?{v:f.value._value,f:f.orig}:f.value};switch(i.graphType){case"gantt":if(i.nameField==null)throw new Error("Configuration option `nameField` must exist");var l=""+ +i.startField+ +i.endField+ +i.durationField;if(l==="100"||l==="010"||l==="000")throw new Error("Time configuration is insufficient to determine offsets");n.addColumn("string","ID"),n.addColumn("string","Name"),n.addColumn("string","Resource"),n.addColumn("date","Start"),n.addColumn("date","End"),n.addColumn("number","Duration"),n.addColumn("number","Completion"),n.addColumn("string","Dependencies");var c=[{name:"id",default:function(){var u=0;return function(){return u++}}},{name:"name"},{name:"resource",default:null},{name:"start",default:null},{name:"end",default:null},{name:"duration",default:null},{name:"completion",default:0},{name:"dependencies",default:null}];k.each(c,function(u){i[u.name+"Field"]!=null&&r.view.source.convertAll(e.dataByRowId,i[u.name+"Field"])}),k.each(e.data,function(u){var f=[];k.each(c,function(m){if(i[m.name+"Field"]!=null)f.push(a(i[m.name+"Field"],u.rowData[i[m.name+"Field"]]));else{if(m.default===void 0)throw new Error;typeof m.default=="function"?f.push(m.default()):f.push(m.default)}}),n.addRow(f)});break;default:n.addColumn(s(t.get(i.categoryField).type),i.categoryField),k.each(i.valueFields,function(u){n.addColumn(s(t.get(u).type),u)}),k.each(i.valueFields,function(u){r.view.source.convertAll(e.dataByRowId,u)}),k.each(e.data,function(u){var f;f=k.map([i.categoryField].concat(i.valueFields),function(m){return a(m,u.rowData[m])}),n.addRow(f)})}return i};Os.prototype.draw_group=function(e,t,n,i){var r=this;typeof i=="function"&&(i=i(e.groupFields)),i=Qe(i,{graphType:"column",categoryField:e.groupFields[0],valueFields:[{name:"Count",fun:"count"}]});var s=i.graphType==="bar"?"hAxis":"vAxis";if(n.addColumn("string",i.categoryField),i.aggType!=null&&i.aggNum!=null){var a=me(e,"agg","info",i.aggType,i.aggNum);if(a==null)return de.error("The specified aggregate does not exist: "+i.aggType+"["+i.aggNum+"]"),null;if(e.agg.results[i.aggType][i.aggNum]==null)return de.error("No results exist for the specified aggregate: "+i.aggType+"["+i.aggNum+"]"),null;var l=a.name||a.instance.getFullName(),c=a.instance.getType();c==="currency"&&(c="number",st("currency",i,"options",s,"format")),n.addColumn(c,l),st(l,i,"options",s,"title"),k.each(e.rowVals,function(f,m){var g=[f.join(", ")],h=e.agg.results[i.aggType][i.aggNum][m];c==="number"&&(h=+h),g.push(h),n.addRow(g)})}else{var u=[];k.each(i.valueFields,function(f){var m=new Yi("group",f,0,null,r.typeInfo,null);n.addColumn(m.instance.getType(),f.name||m.instance.getFullName()),u.push(m)}),k.each(e.rowVals,function(f,m){var g=[f.join(", ")];k.each(u,function(h){var v=h.instance.calculate(k.flatten(e.data[m]));g.push(v),h.debug&&en.info("GRAPH // GROUP // AGGREGATE","Group aggregate (%s) : Group [%s] = %s",h.instance.name+(h.name?" -> "+h.name:""),f.join(", "),JSON.stringify(v))}),n.addRow(g)})}return i};Os.prototype.draw_pivot=function(e,t,n,i){var r=this;typeof i=="function"&&(i=i(e.groupFields,e.pivotFields)),i=Qe(i,{graphType:"column",categoryField:e.groupFields[0],valueFields:[{fun:"count"}],options:{isStacked:!0}});var s=i.graphType==="bar"?"hAxis":"vAxis";if(n.addColumn("string",i.categoryField),i.aggType!=null&&i.aggNum!=null){var a=me(e,"agg","info",i.aggType,i.aggNum);if(a==null)return de.error("The specified aggregate does not exist: "+i.aggType+"["+i.aggNum+"]"),null;if(e.agg.results[i.aggType][i.aggNum]==null)return de.error("No results exist for the specified aggregate: "+i.aggType+"["+i.aggNum+"]"),null;var l=a.name||a.instance.getFullName(),c=a.instance.getType();switch(c==="currency"&&(c="number",st("currency",i,"options",s,"format")),i.aggType){case"cell":k.each(e.colVals,function(f){n.addColumn(c,f.join(", "))}),st(l,i,"options",s,"title"),k.each(e.rowVals,function(f,m){var g=[f.join(", ")];k.each(e.colVals,function(h,v){var y=e.agg.results[i.aggType][i.aggNum][m][v];c==="number"&&(y=+y),g.push(y)}),n.addRow(g)});break;case"group":n.addColumn(c,l),st(l,i,"options",s,"title"),k.each(e.rowVals,function(f,m){var g=[f.join(", ")],h=e.agg.results[i.aggType][i.aggNum][m];c==="number"&&(h=+h),g.push(h),n.addRow(g)});break;case"pivot":n.addColumn(c,l),st(l,i,"options",s,"title"),k.each(e.colVals,function(f,m){var g=[f.join(", ")],h=e.agg.results[i.aggType][i.aggNum][m];c==="number"&&(h=+h),g.push(h),n.addRow(g)});break}}else{var u=[];k.each(i.valueFields,function(f){var m=new Yi("cell",f,0,null,r.typeInfo,null);k.each(e.colVals,function(g){n.addColumn(m.instance.getType(),g.join(", "))}),u.push(m)}),k.each(e.rowVals,function(f,m){var g=[f.join(", ")];k.each(e.colVals,function(h,v){k.each(u,function(y){var E=y.instance.calculate(e.data[m][v]);g.push(E),y.debug&&en.info("GRAPH // GROUP // AGGREGATE","Group aggregate (%s) : RowVal [%s] x ColVal [%s] = %s",y.instance.name+(y.name?" -> "+y.name:""),f.join(", "),h.join(", "),JSON.stringify(E))})}),n.addRow(g)})}return i};Os.prototype._ensureGoogleChartsLoaded=function(e){return Hm("https://www.gstatic.com/charts/loader.js",function(t,n){var i=function(){n(),e()};t?i():(en.info("GRAPH // GOOGLE // DRAW","Loading support for Google Charts"),window.google.charts.load("current",{packages:["corechart","gantt"]}),window.google.charts.setOnLoadCallback(i))},{needAsyncSetup:!0})};Os.prototype.draw=function(e,t){var n=this;n.super.addRedrawHandlers(),e=e||{},t=t||{},n._ensureGoogleChartsLoaded(function(){n.view.getData(function(i,r){n.view.getTypeInfo(function(s,a){n.elt.children().remove();var l=function(v){j("<div>").addClass("wcdv_graph_message_container").css({height:n.opts.height+"px"}).append(j("<div>").addClass("wcdv_graph_message").text(v)).appendTo(n.elt)};if(r.data.length===0){l("No Data");return}var c=null,u=new google.visualization.DataTable;if(r.isPlain?c=n.draw_plain(r,a,u,me(t,"plain","graphs",me(t,"plain","current"))||e.whenPlain):r.isGroup?c=n.draw_group(r,a,u,me(t,"group","graphs",me(t,"group","current"))||e.whenGroup):r.isPivot&&(c=n.draw_pivot(r,a,u,me(t,"pivot","graphs",me(t,"pivot","current"))||e.whenPivot)),c==null){l("Nothing to Graph");return}var f={area:"AreaChart",bar:"BarChart",column:"ColumnChart",line:"LineChart",pie:"PieChart",gantt:"Gantt"},m={title:n.opts.title,width:n.opts.width,height:n.opts.height,isStacked:c.stacked},g=c.graphType==="bar"?"vAxis":"hAxis";c.graphType==="pie"&&(m.chartArea={top:"5%",left:"5%",width:"90%",height:"90%"}),st(c.categoryField,m,g,"title"),j.extend(!0,m,c.options);var h=new google.visualization[f[c.graphType]](n.elt.get(0));google.visualization.events.addListener(h,"ready",function(){var v=null;typeof h.getImageURI=="function"&&(v=$m(h.getImageURI())),n.graph._setExportBlob(v)}),google.visualization.events.addListener(h,"select",function(){var v=h.getSelection();k.each(v,function(y){en.info("GRAPH // DRILL DOWN","User selected element in graph: row = %s, column = %s, value = %s, formattedValue = %s",y.row,y.column,u.getValue(y.row,y.column),u.getFormattedValue(y.row,y.column));var E=it(n.view.getFilter());k.each(r.rowVals[y.row],function(b,w){var T=r.groupSpec[w];E[r.groupFields[w]]=T.fun!=null?dt.get(T.fun).valueToFilter(b):{$eq:b}}),r.isPivot&&k.each(r.colVals[y.column-1],function(b,w){var T=r.pivotSpec[w];E[r.pivotFields[w]]=T.fun!=null?dt.get(T.fun).valueToFilter(b):{$eq:b}}),en.info("GRAPH // DRILL DOWN","Creating new perspective: filter = %O",E),window.setTimeout(function(){n.view.prefs.addPerspective(null,"Drill Down",{view:{filter:E}},{isTemporary:!0},null,{onDuplicate:"replace"})})})}),en.info("GRAPH // GOOGLE // DRAW","Starting draw: [config = %O ; options = %O]",c,m),h.draw(u,m)})},"Drawing Google graph")})};var gy=Ee("GraphRendererJit",ks);gy.prototype.draw=function(){var e=this;elt.children().remove(),e.view.getData(function(t,n){e.view.getTypeInfo(function(){var i={area:"AreaChart",bar:"BarChart",line:"LineChart"},r={label:[],values:[]};k.each(e.opts.valueFields,function(l){r.label.push(l)}),k.each(n.data,function(l){var c={};c.label=l.rowData[e.opts.categoryField].value,c.values=k.map(e.opts.valueFields,function(u){return l.rowData[u].value}),r.values.push(c)});var s={injectInto:elt.attr("id")};j.extend(!0,s,e.opts.options);var a=new $jit[i[e.opts.type]](s);a.loadJSON(r)})},"Drawing JIT graph")};var cs=new Ae;cs.set("chartjs",Uo);cs.set("google",Os);cs.set("jit",gy);var Mt=Ee("Graph",Object,function(e,t,n,i){var r=this;if(r.id=e,r.view=t,r.devConfig=n||{},r.userConfig={plain:{},group:{},pivot:{}},r.opts=Qe(i,{title:"Graph",runImmediately:!0,showToolbar:!0,showOnDataChange:!1}),r.hasRun=!1,typeof e!="string")throw new Error("Call Error: `id` must be a string");if(!(t instanceof je))throw new Error("Call Error: `view` must be an instance of MIE.WC_DataVis.ComputedView");if(r.opts.prefs!=null&&!(r.opts.prefs instanceof tt))throw new Error("Call Error: `opts.prefs` must be an instance of MIE.WC_DataVis.Prefs");r.opts.prefs!=null?r.prefs=r.opts.prefs:r.view.prefs!=null?r.prefs=r.view.prefs:r.prefs=new tt(r.id),r.prefs.bind("graph",r),r._makeUserInterface(),r.view.addClient(r,"graph"),r.view.on("fetchDataBegin",function(){r._setSpinner("loading"),r._showSpinner()}),r.view.on("fetchDataEnd",function(){r._hideSpinner()}),r.view.on("workBegin",function(){r._setSpinner("working"),r._showSpinner()}),r.view.on("workEnd",function(){r._hideSpinner()}),r.view.on("workEnd",function(s,a){var l;if(a.pivot?l=me(r.userConfig,"pivot","graphs",me(r.userConfig,"pivot","current"))||r.devConfig.whenPivot:a.group?l=me(r.userConfig,"group","graphs",me(r.userConfig,"group","current"))||r.devConfig.whenGroup:l=me(r.userConfig,"plain","graphs",me(r.userConfig,"plain","current"))||r.devConfig.whenPlain,l!=null){console.debug("[DataVis // Graph // Handler(ComputedView.workEnd)] Matching configuration: %O",l);var c=l.graphType,u=c==="bar"?"hAxis":"vAxis";r.ui.graphTypeDropdown.val(l.graphType)}a.group?(r.ui.toolbar_aggregates.show(),l!=null&&(r.ui.aggDropdown.val(l.aggNum),r.ui.zeroAxisCheckbox.prop("checked",me(l,"options",u,"minValue")==0))):r.ui.toolbar_aggregates.hide(),a.pivot?(r.ui.toolbar_pivot.show(),l!=null&&r.ui.stackCheckbox.prop("checked",!!me(l,"options","isStacked"))):r.ui.toolbar_pivot.hide()},{who:r}),r.view.on("dataUpdated",function(){r.opts.showOnDataChange&&!r.isVisible()&&r.show({redraw:!1}),r.redraw()}),r.opts.runImmediately?r.show():(r.hasRun=!1,r.hide())});Mt.prototype.toString=function(){return'Graph(id="'+this.id+'")'};Mt.prototype._makeUserInterface=function(){var e=this;e.ui={},e.ui.root=jQuery(document.getElementById(e.id)),e.ui.root.addClass("wcdv_graph"),e.ui.root.children().remove(),e.ui.titlebar=jQuery("<div>").addClass("wcdv_grid_titlebar").on("click",function(t){t.stopPropagation(),e.toggle()}).appendTo(e.ui.root),e._addTitleWidgets(e.ui.titlebar),e.ui.content=jQuery("<div>",{class:"wcdv_grid_content"}).appendTo(e.ui.root),e.ui.toolbar=jQuery("<div>").addClass("wcdv_grid_toolbar").appendTo(e.ui.content),e.opts.showToolbar||e.ui.toolbar.hide(),e.ui.toolbar_pivot=jQuery("<div>").addClass("wcdv_toolbar_section").hide().appendTo(e.ui.toolbar),e._addPivotButtons(e.ui.toolbar_pivot),e.ui.toolbar_aggregates=jQuery("<div>").addClass("wcdv_toolbar_section pull-right").hide().appendTo(e.ui.toolbar),e._addAggregateButtons(e.ui.toolbar_aggregates),e.ui.graph=jQuery("<div>",{id:e.id,class:"wcdv_graph_render"}),e.ui.root.append(e.ui.titlebar).append(e.ui.content.append(e.ui.toolbar).append(e.ui.graph))};Mt.prototype._addTitleWidgets=function(e){var t=this;t.ui.spinner=jQuery("<span>",{style:"font-size: 18px",class:"wcdv_icon_button wcdv_spinner"}).appendTo(e),t._setSpinner(t.opts.runImmediately?"loading":"not-loaded"),jQuery("<strong>").text(t.opts.title).appendTo(e),t.ui.titlebar_controls=jQuery("<div>").addClass("wcdv_titlebar_controls pull-right").appendTo(e),t.ui.exportBtn=jQuery("<button>",{type:"button",style:"font-size: 18px",class:"wcdv_icon_button wcdv_text-primary"}).on("click",function(n){n.stopPropagation(),t.export()}).append(Ne("f019")).appendTo(t.ui.titlebar_controls),t.ui.refreshBtn=jQuery("<button>",{type:"button",style:"font-size: 18px",class:"wcdv_icon_button wcdv_text-primary"}).attr("title","Refresh").on("click",function(n){n.stopPropagation(),t.refresh()}).append(Ne("f021")).appendTo(t.ui.titlebar_controls),jQuery("<button>",{type:"button",style:"font-size: 18px",class:"wcdv_icon_button wcdv_text-primary"}).attr("title",ae("GRAPH.TITLEBAR.SHOW_HIDE_CONTROLS")).click(function(n){n.stopPropagation(),t.ui.toolbar.toggle()}).append(jQuery(Ne("fa-cog"))).appendTo(t.ui.titlebar_controls),t.ui.showHideButton=jQuery("<button>",{type:"button",style:"font-size: 18px",class:"wcdv_icon_button wcdv_text-primary showhide"}).attr("title",ae("GRAPH.TITLEBAR.SHOW_HIDE")).click(function(n){n.stopPropagation(),t.toggle()}).append(jQuery(Ne("f078"))).appendTo(t.ui.titlebar_controls)};Mt.prototype._addAggregateButtons=function(e){var t=this,n=Bt();jQuery("<label>",{for:n}).text("Graph Type: ").appendTo(e),t.ui.graphTypeDropdown=jQuery("<select>",{id:n}).on("change",function(){t.drawInteractive()}).appendTo(e),me(t.renderer,"prototype","graphTypes")&&t.renderer.prototype.graphTypes.each(function(r){t.ui.graphTypeDropdown.append(jQuery("<option>",{value:r.value}).text(r.name))});var i=Bt();jQuery("<label>",{for:i}).text("Aggregate: ").appendTo(e),t.ui.aggDropdown=jQuery("<select>",{id:i}).on("change",function(){t.drawInteractive()}).appendTo(e),t.ui.zeroAxisCheckbox=Fi(null,null,!1,"Y-Axis Starts at Zero",e,function(){t.drawInteractive()}),t.view.on("workEnd",function(){t._updateAggDropdown()})};Mt.prototype._addPivotButtons=function(e){var t=this;t.ui.stackCheckbox=Fi(null,null,!0,"Stack",e,function(){t.drawInteractive()})};Mt.prototype._updateAggDropdown=function(){var e=this,t=[],n=function(i,r){var s=i.name||i.instance.getFullName();r!=null&&(s+=r),t.push({name:s,type:i.aggType,num:i.aggNum})};e.view.getData(function(i,r){e.ui.aggDropdown.children().remove(),r.isGroup?k.each(Ze([],r,"agg","info","group"),function(s){n(s)}):r.isPivot&&(k.each(Ze([],r,"agg","info","group"),function(s){n(s," by "+r.groupFields.join(", "))}),k.each(Ze([],r,"agg","info","pivot"),function(s){n(s," by "+r.pivotFields.join(", "))}),k.each(Ze([],r,"agg","info","cell"),function(s){n(s)})),k.each(k.sortBy(k.sortBy(t,"type"),"num"),function(s){var a=jQuery("<option>",{value:s.name,"data-wcdv-agg-type":s.type,"data-wcdv-agg-num":s.num}).text(s.name);e.ui.aggDropdown.append(a)})},"Updating graph aggregate dropdown")};Mt.prototype.export=function(){var e=this;if(e.exportBlob!=null){var t=(e.opts.title||e.id)+".png";pd(e.exportBlob,t)}};Mt.prototype._setExportBlob=function(e){var t=this;t.exportBlob=e,t.ui.exportBtn.prop("disabled",e==null)};Mt.prototype._clearExportBlob=function(){var e=this;e.exportBlob=null,e.ui.exportBtn.prop("disabled",!0)};Mt.prototype.drawFromConfig=function(){var e=this;e.lastDrawnFrom="config",e.renderer.draw(e.devConfig,e.userConfig)};Mt.prototype.drawInteractive=function(){var e=this,t=e.ui.graphTypeDropdown.val(),n=e.ui.zeroAxisCheckbox.prop("checked")?0:null,i={group:{graphs:{},current:t},pivot:{graphs:{},current:t}},r=e.ui.aggDropdown.get(0).selectedIndex,s=e.ui.aggDropdown.get(0).options[r];switch(i.group.graphs[t]={graphType:t,aggType:s.getAttribute("data-wcdv-agg-type"),aggNum:Mr(s.getAttribute("data-wcdv-agg-num")),options:{}},t){case"bar":i.group.graphs[t].options={vAxis:{minValue:n}};break;default:i.group.graphs[t].options={vAxis:{minValue:n}}}i.pivot=it(i.group),i.pivot.graphs[t].options.isStacked=e.ui.stackCheckbox.prop("checked"),k.extend(e.userConfig,i),e.prefs!=null&&e.prefs.save(),console.debug("[DataVis // Graph] Drawing graph based on interactive config [userConfig = %O]",e.userConfig),e.lastDrawnFrom="interactive",e.renderer.draw(e.devConfig,e.userConfig)};Mt.prototype.checkGraphConfig=function(){self.devConfig!=null&&k.each(["whenPlain","whenGroup","whenPivot"],function(e){if(self.devConfig[e]!==void 0){var t=self.devConfig[e];if(t.graphType!=null){if(!k.isString(t.graphType))throw new Error('Graph config error: data format "'+e+'": `graphType` must be a string');if(["area","bar","column","line","pie"].indexOf(t.graphType)===-1)throw new Error('Graph config error: data format "'+e+'": invalid `graphType`: '+t.graphType)}switch(t.graphType){case"area":case"bar":case"column":case"line":case"pie":if(t.valueField!=null&&t.valueFields!=null)throw new Error('Graph config error: data format "'+e+"\": can't define both `valueField` and `valueFields`");if(t.valueField!=null){if(!k.isString(t.valueField))throw new Error('Graph config error: data format "'+e+'": `valueField` must be a string');t.valueFields=[t.valueField],delete t.valueField}if(t.valueFields!=null){if(!k.isArray(t.valueFields))throw new Error('Graph config error: data format "'+e+'": `valueFields` must be an array');k.each(t.valueFields,function(n,i){if(!k.isString(n))throw new Error('Graph config error: data format "'+e+'": `valueFields['+i+"]` must be a string")})}}}})};Mt.prototype.refresh=function(){var e=this;e.view.clearSourceData()};Mt.prototype.redraw=function(){var e=this;e.prefs.prime(function(){e.checkGraphConfig();var t=me(e.opts,"renderer")&&cs.isSet(e.opts.renderer)?cs.get(e.opts.renderer):cs.get("google");e.renderer=new t(e,e.ui.graph,e.view,e.opts),e.drawFromConfig()},{who:e})};Mt.prototype.hide=function(){var e=this;e.ui.content.hide({duration:0,done:function(){e.opts.title&&e.ui.showHideButton.removeClass("open fa-rotate-180")}})};Mt.prototype.show=function(e){var t=this;e=Qe(e,{redraw:!0}),t.ui.content.show({duration:0,done:function(){t.opts.title&&t.ui.showHideButton.addClass("open fa-rotate-180"),!t.hasRun&&e.redraw&&(t.hasRun=!0,t.redraw())}})};Mt.prototype.toggle=function(){var e=this;e.ui.content.css("display")==="none"?e.show():e.hide()};Mt.prototype.isVisible=function(){var e=this;return e.ui.content.css("display")!=="none"};Mt.prototype._setSpinner=function(e){var t=this;switch(e){case"loading":t.ui.spinner.html(Ne("F021","fa-spin","Loading..."));break;case"not-loaded":t.ui.spinner.html(Ne("F05E",null,"Not Loaded"));break;case"working":t.ui.spinner.html(Ne("F1CE","fa-spin","Working..."));break}};Mt.prototype._showSpinner=function(){var e=this;e.ui.spinner.show()};Mt.prototype._hideSpinner=function(){var e=this;e.ui.spinner.hide()};Mt.prototype.setUserConfig=function(e){var t=this;t.userConfig=e,t.renderer!=null&&t.renderer.draw(t.devConfig,t.userConfig)};var eO=Ee("GraphControl",Object,function(){var e=this;e.ui={}});eO.prototype.draw=function(){var e=this;e.view.on("getTypeInfo",function(t){var n=[];k.each(jr(null,null,t),function(i){var r=me(e.colConfig,i,"displayText")||i;n.push({fieldName:i,displayText:r})}),e.ui.graphType=jQuery("<select>"),me(e.renderer,"prototype","graphTypes")&&e.renderer.prototype.graphTypes.each(function(i){e.ui.graphType.append(jQuery("<option>",{value:i.value}).text(i.name))}),e.ui.root.append(jQuery("<div>").append(e.ui.graphType)),e.ui.plainCheckbox=jQuery("<input>",{type:"checkbox",checked:"checked"}).on("change",function(){e.ui.plainCheckbox.prop("checked")?e.ui.plainConfig.show():e.ui.plainConfig.hide()}),e.ui.root.append(jQuery("<span>",{class:"wcdv_title"}).append(e.ui.plainCheckbox).append("Plain Data")),e.ui.plainCategoryField=jQuery("<select>").on("change",function(){e.defn.whenPlain.categoryField=e.ui.plainCategoryField.val()}),e.ui.plainValueField=jQuery("<select>").on("change",function(){e.defn.whenPlain.valueField=e.ui.plainValueField.val()}),k.each(n,function(i){e.ui.plainCategoryField.append(jQuery("<option>",{value:i.fieldName}).text(i.displayText)),e.ui.plainValueField.append(jQuery("<option>",{value:i.fieldName}).text(i.displayText))}),e.ui.plainConfig=jQuery("<div>").append(jQuery("<div>").append("Category Field: ").append(e.ui.plainCategoryField)).append(jQuery("<div>").append("Value Field: ").append(e.ui.plainValueField)).appendTo(e.ui.root)},{limit:1})};var gr=Ee("PrefsModule",Object,function(e,t){var n=this;n.prefs=e,n.target=t});gr.prototype.load=function(e){throw new Error("Abstract method load() not implemented by subclass "+this.constructor.name)};gr.prototype.save=function(){throw new Error("Abstract method save() not implemented by subclass "+this.constructor.name)};var Xl=Ee("PrefsModuleComputedView",gr,function(){var e=this,t=Array.prototype.slice.call(arguments);if(e.super.ctor.apply(e,t),!(e.target instanceof je))throw new Error("Call Error: `target` must be an instance of ComputedView")},{defaultConfig:{}});Xl.prototype.load=function(e){var t=this;e.filter!=null&&t.target.setFilter(e.filter,null,{updateData:!1,savePrefs:!1}),e.group!=null&&t.target.setGroup(e.group,{updateData:!1,savePrefs:!1}),e.pivot!=null&&t.target.setPivot(e.pivot,{updateData:!1,savePrefs:!1}),e.aggregate!=null&&t.target.setAggregate(e.aggregate,{updateData:!1,savePrefs:!1}),e.sort!=null&&t.target.setSort(e.sort,{updateData:!1,savePrefs:!1}),e.sort==null&&t.target.clearSort({updateData:!1,savePrefs:!1}),e.aggregate==null&&t.target.clearAggregate({updateData:!1,savePrefs:!1}),e.pivot==null&&t.target.clearPivot({updateData:!1,savePrefs:!1}),e.group==null&&t.target.clearGroup({updateData:!1,savePrefs:!1}),e.filter==null&&t.target.clearFilter({updateData:!1,savePrefs:!1})};Xl.prototype.save=function(){var e=this,t={},n=e.target.getSort();n&&(t.sort=n);var i=e.target.getFilter();i&&(t.filter=it(i),cd(t.filter,function(l){return window.numeral&&bt.isNumeral(l)?l._value:l},{callOnNodes:!0,replace:!0}));var r=e.target.getGroup();r&&(t.group=r);var s=e.target.getPivot();s&&(t.pivot=s);var a=e.target.getAggregate();return a&&(t.aggregate=a),t};Xl.prototype.reset=function(){var e=this;e.target.reset({updateData:!1,savePrefs:!1})};var Zl=Ee("PrefsModuleMirageView",gr,function(){var e=this,t=Array.prototype.slice.call(arguments);if(e.super.ctor.apply(e,t),!(e.target instanceof gn))throw new Error("Call Error: `target` must be an instance of MirageView")},{defaultConfig:{}});Zl.prototype.load=function(e){var t=this;e.filter==null?t.target.clearFilter({updateData:!1,savePrefs:!1}):t.target.setFilter(e.filter,null,{updateData:!1,savePrefs:!1}),e.sort==null?t.target.clearSort({updateData:!1,savePrefs:!1}):t.target.setSort(e.sort,{updateData:!1,savePrefs:!1}),e.group==null?t.target.clearGroup({updateData:!1,savePrefs:!1}):t.target.setGroup(e.group,{updateData:!1,savePrefs:!1}),e.pivot==null?t.target.clearPivot({updateData:!1,savePrefs:!1}):t.target.setPivot(e.pivot,{updateData:!1,savePrefs:!1}),e.aggregate==null?t.target.clearAggregate({updateData:!1,savePrefs:!1}):t.target.setAggregate(e.aggregate,{updateData:!1,savePrefs:!1}),t.target.initFromPrefs(t.prefs)};Zl.prototype.save=function(){var e=this,t={},n=e.target.getSort();n&&(t.sort=n);var i=e.target.getFilter();i&&(t.filter=it(i),cd(t.filter,function(l){return window.numeral&&bt.isNumeral(l)?l._value:l},{callOnNodes:!0,replace:!0}));var r=e.target.getGroup();r&&(t.group=r);var s=e.target.getPivot();s&&(t.pivot=s);var a=e.target.getAggregate();return a&&(t.aggregate=a),t};Zl.prototype.reset=function(){var e=this;e.target.reset({updateData:!1,savePrefs:!1})};var jo=Ee("PrefsModuleGrid",gr,function(){var e=this,t=Array.prototype.slice.call(arguments);if(e.super.ctor.apply(e,t),!(e.target instanceof rt))throw new Error("Call Error: `target` must be an instance of Grid")});jo.prototype.load=function(e){var t=this;e!=null&&e.colConfig!=null&&t.target.setColConfig(Ae.deserialize(e.colConfig),{from:"prefs",redraw:!1,savePrefs:!1})};jo.prototype.save=function(){var e=this,t={},n=e.target.getColConfig();return n!=null&&(t.colConfig=n.serialize()),t};jo.prototype.reset=function(){var e=this;e.target.resetColConfig()};var eu=Ee("PrefsModuleGraph",gr,function(){var e=this,t=Array.prototype.slice.call(arguments);if(e.super.ctor.apply(e,t),!(e.target instanceof Mt))throw new Error("Call Error: `target` must be an instance of Graph")});eu.prototype.load=function(e){var t=this;e!=null&&t.target.setUserConfig(e)};eu.prototype.save=function(){var e=this,t=Qe(e.target.userConfig,{plain:{},group:{},pivot:{}});return t};eu.prototype.reset=function(){};var tu=Ee("PrefsModuleMeta",gr,function(){var e=this,t=Array.prototype.slice.call(arguments);if(e.super.ctor.apply(e,t),!(e.target instanceof si))throw new Error("Call Error: `target` must be an instance of Perspective")});tu.prototype.load=function(e){var t=this;e!=null&&(t.target.meta=e)};tu.prototype.save=function(){var e=this;return e.target.meta};tu.prototype.reset=function(){};var ar=new Ae;ar.set("view",Xl);ar.set("mirage",Zl);ar.set("grid",jo);ar.set("graph",eu);ar.set("meta",tu);var si=Ee("Perspective",Object,function(e,t,n,i,r){var s=this;if(e!=null&&typeof e!="string")throw new Error("Call Error: `id` must be null or a string");if(t!=null&&typeof t!="string")throw new Error("Call Error: `name` must be null or a string");e==null&&(e=Vm()),t==null&&(t=e),s.id=e,s.name=t,s.config=n,s.modules=i,s.isUnsaved=!1,s.opts=Qe(r,{isEssential:!1,isTemporary:!1,isConstant:!1})},{CURRENT_VERSION:2});Ui(si,function(){return $t.sprintf("PREFS // PERSPECTIVE (%s)",this.id)});ji(si);si.prototype.load=function(e,t){var n=this;if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");return t=t||Ct,e==null&&(e=k.keys(n.modules)),n.debug(null,"Loading perspective using these modules: %s",JSON.stringify(e)),k.each(e,function(i){var r=n.modules[i],s=n.config[i];s==null&&r.defaultConfig!=null&&(n.debug(null,"Using default config for module: moduleName = %s ; config = %O",i,r.defaultConfig),s=r.defaultConfig),n.debug(null,"Loading module: moduleName = %s ; config = %O",i,s),r.load(s)}),t(!0)};si.prototype.save=function(e){var t=this;if(e!=null&&typeof e!="function")throw new Error("Call Error: `cont` must be null or a function");return e=e||Ct,t.debug(null,"Saving perspective"),k.each(t.modules,function(n,i){t.config[i]=n.save(),t.debug(null,"Saving module: moduleName = %s ; config = %O",i,t.config[i])}),e(t.config)};si.prototype.isMirage=function(){var e=this;return e.config.isMirage};si.prototype.getVersion=function(){var e=this;return e.config.version};var qn=Ee("PrefsBackend",Object,function(e,t,n){var i=this;i.id=e,i.prefs=t,i.opts=n});qn.prototype.load=function(e,t){throw new Error("Abstract method load() not implemented by subclass "+this.constructor.name)};qn.prototype.loadAll=function(e){throw new Error("Abstract method loadAll() not implemented by subclass "+this.constructor.name)};qn.prototype.save=function(e,t){throw new Error("Abstract method save() not implemented by subclass "+this.constructor.name)};qn.prototype.getPerspectives=function(e){throw new Error("Abstract method getPerspectives() not implemented by subclass "+this.constructor.name)};qn.prototype.getCurrent=function(e){throw new Error("Abstract method getCurrent() not implemented by subclass "+this.constructor.name)};qn.prototype.setCurrent=function(e,t){throw new Error("Abstract method setCurrent() not implemented by subclass "+this.constructor.name)};qn.prototype.rename=function(e,t,n){throw new Error("Abstract method rename() not implemented by subclass "+this.constructor.name)};qn.prototype.deletePerspective=function(e,t){throw new Error("Abstract method deletePerspective() not implemented by subclass "+this.constructor.name)};qn.prototype.reset=function(e){throw new Error("Abstract method reset() not implemented by subclass "+this.constructor.name)};var Qn=Ee("PrefsBackendLocalStorage",qn,function(){var e=this,t=Array.prototype.slice.call(arguments);try{var n=window.localStorage}catch(i){throw de.error("Access to localStorage is denied; prefs disabled"),i}e.super.ctor.apply(e,t),e.opts=Qe(e.opts,{key:"WC_DataVis_Prefs"}),e.localStorageKey=e.opts.key},{version:3});Ui(Qn,function(){return"PREFS ("+this.id+") // BACKEND - LOCAL"});Qn.prototype.load=function(e,t){var n=this,i,r,s;if(typeof e!="string")throw new Error("Call Error: `id` must be a string");if(typeof t!="function")throw new Error("Call Error: `cont` must be a function");if(i=localStorage.getItem(n.localStorageKey),i!=null){if(r=JSON.parse(i),s=Ze(0,r,n.id,"version"),s<n.version)return n.migrate(s,function(){return n.loadAll(t)})}else r={};var a=me(r,n.id,"perspectives",e);return a==null?(n.debug(null,'Perspective does not exist: id = "%s"',e),t(null)):(n.debug(null,'Loaded perspective: id = "%s" ; name = "%s" ; config = %O',a.id,a.name,a.config),t(a))};Qn.prototype.loadAll=function(e){var t=this,n,i,r;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");if(n=localStorage.getItem(t.localStorageKey),n!=null){if(i=JSON.parse(n),r=Ze(0,i,t.id,"version"),r<t.version)return t.migrate(r,function(){return t.loadAll(e)})}else i={};var s=Ze({},i,t.id,"perspectives");return t.debug(null,"Loaded all perspectives: %O",s),e(s)};Qn.prototype.migrate=function(e,t){var n=this;n.debug(null,"Migrating prefs: v%d -> v%d",e,n.version);for(var i=function(){var f=localStorage.getItem(n.localStorageKey);if(f==null)throw new Error("Found no prefs to migrate");try{var m=JSON.parse(f)}catch{throw new Error("Prefs stored are not valid JSON")}if(m[n.id]==null)throw new Error('No prefs registered for this system ("'+n.id+'")');return m[n.id].perspectives==null&&(m[n.id].perspectives={}),m},r=function(f){f[n.id].version+=1,localStorage.setItem(n.localStorageKey,JSON.stringify(f))},s=e;s<n.version;s+=1)switch(s){case 0:var a=JSON.parse(localStorage.getItem("WC_DataVis_Prefs")||"{}"),l=JSON.parse(localStorage.getItem("WC_DataVis_Prefs_Current")||"{}"),c=JSON.parse(localStorage.getItem(n.localStorageKey)||"{}");c[n.id]={version:s+1,current:l[n.id],perspectives:k.mapObject(a[n.id],function(f,m){return{view:f}})},delete l[n.id],k.isEmpty(l)?localStorage.removeItem("WC_DataVis_Prefs_Current"):localStorage.setItem("WC_DataVis_Prefs_Current",JSON.stringify(l)),delete a[n.id],n.localStorageKey!=="WC_DataVis_Prefs"&&(k.isEmpty(a)?localStorage.removeItem("WC_DataVis_Prefs"):localStorage.setItem("WC_DataVis_Prefs",JSON.stringify(a))),localStorage.setItem(n.localStorageKey,JSON.stringify(c));break;case 1:var u=i();k.each(u[n.id].perspectives,function(f,m){var g={};k.each(f,function(h,v){g[v]=h,f[v]=null}),f.config=g,f.id=m,f.name=m}),r(u);break;case 2:var u=i();k.each(u[n.id].perspectives,function(f){me(f,"config","view")!=null&&(f.config.computedView=f.config.view,delete f.config.view)}),r(u);break}return typeof t=="function"?t(!0):!0};Qn.prototype.save=function(e,t){var n=this;if(!(e instanceof si))throw new Error("Call Error: `perspective` must be a Perspective");if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");t=t||Ct,n.debug(null,'Saving perspective: id = "%s" ; name = "%s" ; config = %O',e.id,e.name,e.config);var i=JSON.parse(localStorage.getItem(n.localStorageKey)||"{}");return st(n.version,i,n.id,"version"),st({id:e.id,name:e.name,config:e.config},i,n.id,"perspectives",e.id),localStorage.setItem(n.localStorageKey,JSON.stringify(i)),t(!0)};Qn.prototype.getPerspectives=function(e){var t=this;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");var n=JSON.parse(localStorage.getItem(t.localStorageKey)||"{}"),i=k.keys(Ze({},n,t.id,"perspectives"));return t.debug(null,"Found %d perspectives: %s",i.length,JSON.stringify(i)),e(i)};Qn.prototype.getCurrent=function(e){var t=this;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");var n=JSON.parse(localStorage.getItem(t.localStorageKey)||"{}"),i=me(n,t.id,"current");return t.debug(null,'Current perspective is "%s"',i),e(i)};Qn.prototype.setCurrent=function(e,t){var n=this;if(typeof e!="string")throw new Error("Call Error: `id` must be a string");if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");t=t||Ct,n.debug(null,'Setting current perspective to "%s"',e);var i=JSON.parse(localStorage.getItem(n.localStorageKey)||"{}");return st(n.version,i,n.id,"version"),st(e,i,n.id,"current"),localStorage.setItem(n.localStorageKey,JSON.stringify(i)),t(!0)};Qn.prototype.rename=function(e,t,n){var i=this;if(typeof e!="string")throw new Error("Call Error: `oldName` must be a string");if(typeof t!="string")throw new Error("Call Error: `newName` must be a string");if(n!=null&&typeof n!="function")throw new Error("Call Error: `cont` must be null or a function");n=n||Ct,i.debug(null,'Renaming perspective: "%s" -> "%s"',e,t);var r=JSON.parse(localStorage.getItem(i.localStorageKey)||"{}");return r[i.id].perspectives[t]=r[i.id].perspectives[e],delete r[i.id].perspectives[e],localStorage.setItem(i.localStorageKey,JSON.stringify(r)),n(!0)};Qn.prototype.deletePerspective=function(e,t){var n=this;if(typeof e!="string")throw new Error("Call Error: `id` must be a string");if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");t=t||Ct,n.debug(null,'Deleting perspective: "%s"',e);var i=JSON.parse(localStorage.getItem(n.localStorageKey)||"{}");return delete i[n.id].perspectives[e],localStorage.setItem(n.localStorageKey,JSON.stringify(i)),t(!0)};Qn.prototype.reset=function(e){var t=this;if(e!=null&&typeof e!="function")throw new Error("Call Error: `cont` must be null or a function");e=e||Ct,t.debug(null,"Resetting perspectives");var n=JSON.parse(localStorage.getItem(t.localStorageKey)||"{}");return delete n[t.id],localStorage.setItem(t.localStorageKey,JSON.stringify(n)),e(!0)};var $n=Ee("PrefsBackendTemporary",qn,function(){var e=this,t=Array.prototype.slice.call(arguments);e.super.ctor.apply(e,t),e.storage={perspectives:{}}});Ui($n,function(){return"PREFS ("+this.id+") // BACKEND - TEMPORARY"});$n.prototype.load=function(e,t){var n=this;if(typeof e!="string")throw new Error("Call Error: `id` must be a string");if(typeof t!="function")throw new Error("Call Error: `cont` must be a function");var i=n.storage.perspectives[e];return i==null?(n.debug(null,'Perspective does not exist: id = "%s"',e),t(null)):(n.debug(null,'Loaded perspective: id = "%s" ; name = "%s" ; config = %O',i.id,i.name,i.config),t(i))};$n.prototype.loadAll=function(e){var t=this;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");var n=t.storage.perspectives;return t.debug(null,"Loaded all perspectives: %O",n),e(n)};$n.prototype.save=function(e,t){var n=this;if(!(e instanceof si))throw new Error("Call Error: `perspective` must be a Perspective");if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");return t=t||Ct,n.debug(null,'Saving perspective: id = "%s" ; name = "%s" ; config = %O',e.id,e.name,e.config),n.storage.perspectives[e.id]={id:e.id,name:e.name,config:e.config},t(!0)};$n.prototype.getPerspectives=function(e){var t=this;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");var n=k.keys(t.storage.perspectives);return t.debug(null,"Found %d perspectives: %s",n.length,JSON.stringify(n)),e(n)};$n.prototype.getCurrent=function(e){var t=this;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");var n=t.storage.current;return t.debug(null,'Current perspective is "%s"',n),e(n)};$n.prototype.setCurrent=function(e,t){var n=this;if(typeof e!="string")throw new Error("Call Error: `id` must be a string");if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");return t=t||Ct,n.debug(null,'Setting current perspective to "%s"',e),n.storage.current=e,t(!0)};$n.prototype.rename=function(e,t,n){var i=this;if(typeof e!="string")throw new Error("Call Error: `oldName` must be a string");if(typeof t!="string")throw new Error("Call Error: `newName` must be a string");if(n!=null&&typeof n!="function")throw new Error("Call Error: `cont` must be null or a function");return n=n||Ct,i.debug(null,'Renaming perspective: "%s" -> "%s"',e,t),i.storage.perspectives[t]=i.storage.perspectives[e],delete i.storage.perspectives[e],n(!0)};$n.prototype.deletePerspective=function(e,t){var n=this;if(typeof e!="string")throw new Error("Call Error: `id` must be a string");if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");return t=t||Ct,n.debug(null,'Deleting perspective: "%s"',e),delete n.storage.perspectives[e],t(!0)};$n.prototype.reset=function(e){var t=this;if(e!=null&&typeof e!="function")throw new Error("Call Error: `cont` must be null or a function");return e=e||Ct,t.debug(null,"Resetting perspectives"),t.storage={perspectives:{}},e(!0)};var Eo=new Ae;Eo.set("localStorage",Qn);Eo.set("temporary",$n);var Is=Ee("TableExport",Object,function(e){});Is.prototype.start=function(){};Is.prototype.addRow=function(){};Is.prototype.addCol=function(){};Is.prototype.finish=function(){};var $i=Ee("Csv",Is,function(e){var t=this;t.lastRowId=-2,t.opts=e||{},k.defaults(t.opts,{separator:","}),t.start()});$i.prototype.start=function(){var e=this;e.lastRowId=-2,e.data=[],e.lastRow=null,e.order=null};$i.prototype.addRow=function(e){var t=this;e==null&&(e=++t.lastRowId),t.lastRow={rowId:e,rowData:[],hidden:!1},t.data.push(t.lastRow)};$i.prototype.addCol=function(e,t){var n=this;t=t||{},t=k.defaults(t,{prepend:!1}),e==null?e="":typeof e!="string"&&(e=e.toString()),n.lastRow==null&&n.addRow(),t.prepend?n.lastRow.rowData.unshift(e):n.lastRow.rowData.push(e)};$i.prototype.toString=function(){var e=this,t,n,i="",r='"'+e.opts.separator+'"',s=e.order!=null?e.order.length:e.data.length,a=/"/g;for(t=0;t<s;t+=1)n=e.order!=null?e.getRowById(e.order[t]):e.data[t],t>0&&(i+=`\r
`),i+='"'+n.rowData.map(function(l){return l.replace(a,'""')}).join(r)+'"';return i};$i.prototype.getRowById=function(e){var t=this;return t.data[e].rowId===e?t.data[e]:k.findWhere(t.data,{rowId:e})};$i.prototype.updateVisibility=function(e,t){var n=this,i=n.getRowById(e);i!=null&&(i.hidden=t)};$i.prototype.setOrder=function(e,t){var n=this;n.order==null&&(n.order=[]),n.order[t]=e};$i.prototype.finish=function(e){return e()};var lt=Ee("GridTable",At,function(){var e=this;e.super.ctor.apply(e,arguments),e.selection=[],e.needsRedraw=!1,e.contextMenuSelectors=[],e.csvLock=new qt("GridTable/csv"),k.defaults(e.opts,{drawInternalBorders:!0,zebraStriping:!0,generateCsv:!0,stealGridFooter:!0})});vi(lt,["columnResize","unableToRender","limited","unlimited","csvReady","generateCsvProgress","renderBegin","renderEnd","selectionChange"]);lt.prototype._validateFeatures=function(){var e=this;e.features.block&&!j.blockUI&&(de.error("GRID TABLE // CONFIG",'Feature "block" requires BlockUI library, which is not present'),e.features.block=!1),e.features.limit&&(e._validateLimit(),e.scrollEvents=["DOMContentLoaded","load","resize","scroll"].map(function(t){return t+".wcdv_gt_"+e.UNIQUE_ID}).join(" ")),e.features.floatingHeader&&e._validateFloatTableHeader()};lt.prototype._validateLimit=function(){var e=this;e.features.limit&&e.defn.table.limit.threshold===void 0&&(en.warn("GRID TABLE - PLAIN // DRAW","Disabling limit feature because no limit threshold was provided"),e.features.limit=!1)};lt.prototype._validateFloatTableHeader=function(){var e=this;if(e.features.floatingHeader){var t=Ze({},e.defn,"table","floatingHeader");if(t.method!=null)switch(t.method){case"floatThead":j.prototype.floatThead==null&&(de.error("GRID TABLE // CONFIG",'Requested floating header method "floatThead" is not available'),e.features.floatingHeader=!1);break;case"fixedHeaderTable":j.prototype.fixedHeaderTable==null&&(de.error("GRID TABLE // CONFIG",'Requested floating header method "fixedHeaderTable" is not available'),e.features.floatingHeader=!1);break;case"tabletool":window.TableTool==null&&(de.error("GRID TABLE // CONFIG",'Requested floating header method "tabletool" is not available'),e.features.floatingHeader=!1);break;case"css":break;default:de.error("GRID TABLE // CONFIG","Unrecognized floating header method: "+t.method),e.features.floatingHeader=!1}else j.prototype.floatThead?t.method="floatThead":j.prototype.fixedHeaderTable?t.method="fixedHeaderTable":window.TableTool?t.method="tabletool":t.method="css";e.defn.table.floatingHeader=t}};lt.prototype.toString=function(){var e=this;return"GridTable("+e.UNIQUE_ID+")"};lt.prototype.setCss=function(e,t){var n=this,i=n.colConfig.get(t);if(i!=null)for(var r=[{configName:"width",cssName:"width"},{configName:"minWidth",cssName:"min-width"},{configName:"maxWidth",cssName:"max-width"},{configName:"cellAlignment",cssName:"text-align"}],s=0;s<r.length;s+=1)i[r[s].configName]!==void 0&&e.css(r[s].cssName,i[r[s].configName])};lt.prototype.setAlignment=function(e,t,n,i,r){if(t=t||{},n=n||{},e instanceof j&&(e=e.get(0)),!(e instanceof Element))throw new Error("Call Error: `elt` must be an instance of Element");var s=i||n.type,a=t.cellAlignment||r;switch(a==null&&(s==="number"||s==="currency")&&(a="right"),a){case"left":e.classList.add("wcdvgrid_textLeft");break;case"right":e.classList.add("wcdvgrid_textRight");break;case"center":e.classList.add("wcdvgrid_textCenter");break;case"justify":e.classList.add("wcdvgrid_textJustify");break;default:e.style.setProperty("text-align",a)}};lt.prototype._addSortingToHeader=function(e,t,n,i,r){var s=this;if(s.features.sort){if(["horizontal","vertical"].indexOf(t)<0)throw new Error('Call Error: `orientation` must be "horizontal" or "vertical"');if(!(i instanceof Element))throw new Error("Call Error: `container` must be an Element");var a="wcdv_sort_icon_"+t,l=function(w,T){var x;if(!(w instanceof Element))throw new Error("Call Error: `span` must be an Element");if(T!=null)if(k.isString(T)){if(T.toUpperCase()!=="ASC"&&T.toUpperCase()!=="DESC")throw new Error('Call Error: `dir` must be either "ASC" or "DESC"')}else throw new Error("Call Error: `dir` must be null or a string");var D=i.closest("th");for(x=0;x<w.children.length;x+=1)w.children[x].classList.remove("wcdv_sort_arrow_active");if(D.classList.remove("wcdv_sort_column_active"),D.classList.remove("wcdv_bg-primary"),T!=null)for(D.classList.add("wcdv_sort_column_active"),D.classList.add("wcdv_bg-primary"),x=0;x<w.children.length;x+=1){var O=w.children[x];O.classList.remove("wcdv_sort_arrow_active"),O.classList.contains("fa-sort-desc")&&O.classList.add("wcdv_sort_arrow_"+(T.toUpperCase()==="ASC"?"active":"inactive")),O.classList.contains("fa-sort-asc")&&O.classList.add("wcdv_sort_arrow_"+(T.toUpperCase()==="DESC"?"active":"inactive"))}},c=function(w,T){if(k.isString(w)){if(w.toUpperCase()!=="ASC"&&w.toUpperCase()!=="DESC")throw new Error('Call Error: `dir` must be either "ASC" or "DESC"')}else throw new Error("Call Error: `dir` must be a string");if(T!=null&&!k.isNumber(T))throw new Error("Call Error: `aggNum` must be a number");j("span."+a+".fa-stack").each(function(D,O){l(O)}),j("span."+m).each(function(D,O){l(O,w)}),n.aggNum=T,n.dir=w;var x=s.view.getSort()||{};x[t]=it(n),s.view.setSort(x,s.makeProgress("Sort"))},u=document.createElement("span");u.classList.add("fa"),u.classList.add("fa-sort-asc"),u.classList.add("fa-stack-1x");var f=document.createElement("span");f.classList.add("fa"),f.classList.add("fa-sort-desc"),f.classList.add("fa-stack-1x");var m=Bt(),g=Ne("fa-stack",t==="horizontal"?"fa-rotate-270":null).get(0);g.classList.add(m),g.classList.add(a),g.classList.add("wcdv_sort_icon"),g.appendChild(u),g.appendChild(f);var h={};if(n.field!=null||n.groupFieldIndex!=null||n.pivotFieldIndex!=null){var v=n.field!=null?n.field:n.groupFieldIndex!=null?e.groupFields[n.groupFieldIndex]:n.pivotFieldIndex!=null?e.pivotFields[n.pivotFieldIndex]:"Unknown";h[Bt()]={name:ae("GRID.TABLE.SORT_MENU.ASCENDING",v),icon:"fa-sort-amount-asc",callback:function(){window.setTimeout(function(){c("asc")})}},h[Bt()]={name:ae("GRID.TABLE.SORT_MENU.DESCENDING",v),icon:"fa-sort-amount-desc",callback:function(){window.setTimeout(function(){c("desc")})}},h[Bt()]="----"}else k.each(r,function(w,T){n.aggType!=null&&n.aggNum!==T||(h[Bt()]={name:ae("GRID.TABLE.SORT_MENU.ASCENDING",w.instance.getFullName()),icon:"fa-sort-amount-asc",callback:function(){window.setTimeout(function(){c("asc",T)})}},h[Bt()]={name:ae("GRID.TABLE.SORT_MENU.DESCENDING",w.instance.getFullName()),icon:"fa-sort-amount-desc",callback:function(){window.setTimeout(function(){c("desc",T)})}},h[Bt()]="----")});h.reset={name:ae("GRID.TABLE.SORT_MENU.RESET_SORT"),icon:"fa-ban",callback:function(){window.setTimeout(function(){s.view.clearSort()})}},j.contextMenu({selector:"."+m,appendTo:s.ui.contextMenus,trigger:"left",callback:function(w,T){console.log(w)},items:h}),s.contextMenuSelectors.push("."+m),i.appendChild(g);var y=it(s.view.getSort()),E=it(n);if(y[t]){var b=y[t].dir;delete y[t].dir,n.aggType==null&&(delete y[t].aggNum,delete E.aggNum),console.debug("[DataVis // %s // Add Sorting] orientation = %s ; spec = %O ; current = %O ; dir = %s",s.toString(),t,E,y[t],b),k.isEqual(y[t],E)&&l(g,b)}}};lt.prototype._addFilterToHeader=function(e,t,n){var i=this;i.grid.filterControl!=null&&j(Ne("fa-filter","wcdv_filter_icon",ae("GRID.TABLE.ADD_FILTER_HELP",t))).on("click",function(){i.grid.filterControl.addField(t,n,{openControls:!0})}).tooltip({classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow wcdv_info_tooltip wcdv_border-primary"},show:{delay:1e3}}).appendTo(e)};lt.prototype._addDrillDownHandler=function(e,t){var n=this;e.on("mousedown",function(i){i.detail>1&&i.preventDefault()}),e.on("dblclick","td.wcdv_drill_down",function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty();var i=j(this),r=it(n.view.getFilter()),s=i.dvAttr("rvi"),a=i.dvAttr("cvi");s!=null&&k.each(t.rowVals[s],function(l,c){var u=t.groupSpec[c];r[t.groupFields[c]]=u.fun!=null?dt.get(u.fun).valueToFilter(l):{$eq:l}}),a!=null&&k.each(t.colVals[a],function(l,c){var u=t.pivotSpec[c];r[t.pivotFields[c]]=u.fun!=null?dt.get(u.fun).valueToFilter(l):{$eq:l}}),console.debug("[DataVis // %s // Drill Down] Creating new perspective: filter = %O",n.toString(),r),window.setTimeout(function(){n.view.prefs.addPerspective(null,"Drill Down",{view:{filter:r}},{isTemporary:!0},null,{onDuplicate:"replace"})})})};lt.prototype._addDrillDownClass=function(e){e.classList.add("wcdv_drill_down")};lt.prototype.addSortHandler=function(){var e=this;e.view.off("sort"),e.features.sort&&e.view.on("sortEnd",function(){console.debug("[DataVis // %s // Handler(ComputedView.sortEnd)] Marking table to be redrawn",e.toString()),e.needsRedraw=!0},{who:e})};lt.prototype.addFilterHandler=function(){var e=this;e.view.off("filter"),e.view.on(je.events.filterEnd,function(){console.debug("[DataVis // %s // Handler(ComputedView.filterEnd)] Marking table to be redrawn",e.toString()),e.needsRedraw=!0},{who:e})};lt.prototype._addRowReorderHandler=function(){var e=this;e.ui.tbody._makeSortableTable(k.bind(e.view.source.swapRows,e.view.source))};lt.prototype._addRowSelectHandler=function(){var e=this;e.ui.tbody.on("change",'td.wcdv-row-select-col > input[type="checkbox"]',function(){this.checked?e.select(+j(this).attr("data-row-num")):e.unselect(+j(this).attr("data-row-num"))})};lt.prototype._getAggInfo=function(e){var t=Yn(["cell","group","pivot","all"],[[]]);return t=k.mapObject(t,function(n,i){return k.filter(Ze([],e,"agg","info",i),function(r){return!r.isHidden})}),t};lt.prototype._getDisplayFormat=function(){var e=this,t=Yn(["cell","group","pivot","all"],[[]]);return t=k.mapObject(t,function(n,i){return Ze([],e.opts,"displayFormat",i)}),t};lt.prototype._setupFullValueWin=function(e){var t=this,n=document.createElement("div"),i={effect:"fade",duration:100},r=j("<div>",{title:"Full Value"}).dialog({autoOpen:!1,modal:!0,width:800,maxHeight:600,classes:{"ui-dialog":"ui-corner-all wcdv_dialog","ui-dialog-titlebar":"ui-corner-all"},show:i,hide:i});r.append(n),t.ui.tbody.on("click","button.wcdv_show_full_value",function(s){s.stopPropagation();var a=j(this),l=a.parents("td"),c=l.parents("tr"),u,f,m,g,h,v,y,E,b;if(e.isPlain)u=l.attr("data-wcdv-field"),f=+c.attr("data-row-num"),b=me(e,"data",f,"rowData",u,"cachedRender"),kr(n,b);else if(e.isGroup||e.isPivot){switch(h=l.attr("data-wcdv-agg-scope"),v=+l.attr("data-wcdv-agg-num"),h){case"cell":m=+c.dvAttr("rvi"),g=+l.dvAttr("cvi"),E=e.agg.results[h][v][m][g];break;case"group":m=+c.dvAttr("rvi"),E=e.agg.results[h][v][m];break;case"pivot":g=+l.dvAttr("cvi"),E=e.agg.results[h][v][g];break;case"all":E=e.agg.results[h][v];break}y=e.agg.info[h][v],u=me(y,"fields",0),Xt(E)?kr(n,E):y.instance.inheritFormatting?(b=ht(y.colConfig[0],y.typeInfo[0],E,{overrideType:y.instance.getType()}),kr(n,b,{field:y.fields[0],colConfig:y.colConfig[0],typeInfo:y.typeInfo[0]})):(b=ht(null,null,E,{overrideType:y.instance.getType(),decode:!1}),kr(n,b))}r.dialog("open")})};lt.prototype.draw=function(e,t,n){var i=this,r=Array.prototype.slice.call(arguments);if(i.opts.generateCsv){if(i.csvLock.isLocked())return i.csvLock.onUnlock(function(){console.debug("[DataVis // %s // CSV] Retrying table draw due to CSV lock: %O %O",i.toString(),e,t),i.draw.apply(i,r)});console.debug("[DataVis // %s // CSV] Creating new CSV buffer",i.toString()),i.csvLock.lock(),i.csv=new $i}else i.csv=new Is;return i.super.draw(e,t,function(s,a,l,c){if(!s)return n();if(i.timing.start(["Grid Table","Draw"]),(!i.features.floatingHeader||i.defn.table.floatingHeader.method!=="tabletool")&&e.css({"overflow-x":"auto"}),i.features.limit&&i.defn.table.limit.method==="more"&&(i.scrollEventElement=i.opts.fixedHeight?i.root:window,j(i.scrollEventElement).on(i.scrollEvents,function(){typeof i.moreVisibleHandler=="function"&&i.moreVisibleHandler()})),i.features.operations&&j(i.root).on("click.wcdv_operation","button.wcdv_operation",function(){var m=this,g=m.getAttribute("data-operation-type"),h=m.getAttribute("data-operation-index"),v,y,E,b,w;switch(g){case"row":y=j(m).parents("tr"),E=+y.attr("data-row-num"),w=i.defn.operations.row[h],w.callback({rowId:E,rowElt:y,row:i.data.dataByRowId[E],opBtn:j(m)});break;case"cell":v=j(m).parents("td"),b=j(m).parents("td").attr("data-wcdv-field"),y=j(m).parents("tr"),E=+j(m).parents("tr").attr("data-row-num"),w=i.defn.operations.cell[b][h],w.callback({rowId:E,rowElt:y,row:i.data.dataByRowId[E],cellElt:v,cell:i.data.dataByRowId[E][b].value,opBtn:j(m)});break}}),i.ui={tbl:j("<table>"),thead:j("<thead>"),tbody:j("<tbody>"),tfoot:j("<tfoot>"),thMap:{},tr:{},progress:j("<div>"),contextMenus:j("<div>")},i._addDrillDownHandler(i.ui.tbl,a),i.features.block){var u={overlayCSS:{opacity:.9,backgroundColor:"#FFF"}};i.features.progress&&me(i.defn,"table","progress","method")==="jQueryUI"&&(u.message=j("<div>").append(j("<h1>").text("Working...")).append(i.ui.progress))}i.ui.contextMenus.appendTo(document.body),i.view.on(je.events.workBegin,function(){if(i.features.block&&(console.debug("[DataVis // %s // Handler(ComputedView.workBegin)] Blocking table body",i.toString()),me(i.defn,"table","block","wholePage")?j.blockUI(u):i.ui.tbl.block(u)),i.features.floatingHeader)switch(me(i.defn,"table","floatingHeader","method")){case"tabletool":window.TableTool.update();break}},{who:i}),i.view.on(je.events.workEnd,function(){if(i.features.block&&(console.debug("[DataVis // %s // Handler(ComputedView.workEnd)] Unblocking table body",i.toString()),me(i.defn,"table","block","wholePage")?j.unblockUI():i.ui.tbl.unblock()),i.features.floatingHeader)switch(me(i.defn,"table","floatingHeader","method")){case"tabletool":window.TableTool.update();break}},{who:i});var f=jr(i.colConfig,a,l);i.drawHeader(f,a,l,t),i.features.footer&&i.drawFooter(f,a,l),i.addSortHandler(),i.features.rowSelect&&(typeof i._addRowSelectHandler!="function"?de.warn('Requested feature "rowSelect" is not available: `_addRowSelectHandler` method does not exist'):i._addRowSelectHandler()),i.features.rowReorder&&i._addRowReorderHandler(),i.opts.zebraStriping&&i.ui.tbl.addClass("zebra"),me(i.opts,"addClass","table")&&i.ui.tbl.addClass(me(i.opts,"addClass","table")),i.ui.tbl.append(i.ui.thead),i.features.incremental&&!me(i.defn,"table","incremental","appendBodyLast")&&(i.ui.tbl.append(i.ui.tbody),i.features.footer&&i.ui.tbl.append(i.ui.tfoot)),i.root.get(0).appendChild(i.ui.tbl.get(0)),i.drawBody(a,l,f,function(){if((!i.features.incremental||me(i.defn,"table","incremental","appendBodyLast"))&&(i.ui.tbl.append(i.ui.tbody),i.features.footer&&i.ui.tbl.append(i.ui.tfoot)),i.features.floatingHeader)switch(console.debug('[DataVis // %s // Draw] Enabling floating header using method "%s"',i.toString(),me(i.defn,"table","floatingHeader","method")),me(i.defn,"table","floatingHeader","method")){case"floatThead":var m={zIndex:1};i.opts.fixedHeight?(m.position="fixed",m.scrollContainer=!0):m.responsiveContainer=function(){return i.root},i.grid.on("showControls",function(){i.ui.tbl.floatThead("reflow")},{who:i}),i.grid.on("hideControls",function(){i.ui.tbl.floatThead("reflow")},{who:i}),i.grid.filterControl.on(["fieldAdded","fieldRemoved"],function(){i.ui.tbl.floatThead("reflow")},{who:i}),i.grid.aggregateControl.on(["fieldAdded","fieldRemoved"],function(){i.ui.tbl.floatThead("reflow")},{who:i}),i.ui.tbl.floatThead(m);break;case"tabletool":if(i.opts.fixedHeight?(i.ui.tbl.attr("data-tttype","fixed"),i.ui.tbl.attr("data-ttheight",i.grid.rootHeight)):i.ui.tbl.attr("data-tttype","sticky"),a.isPlain){var g=0;k.each(f,function(h){var v=i.colConfig.get(h);v!=null&&v.isPinned&&(g+=1)}),g>0&&(i.features.rowSelect&&(g+=1),i.hasOperations("row")&&(g+=1),i.ui.tbl.attr("data-tttype","sidescroll"),i.ui.tbl.attr("data-ttsidecells",g))}else(a.isGroup||a.isPivot)&&me(i.defn,"table","whenGroup","pinRowvals")&&(i.ui.tbl.attr("data-tttype","sidescroll"),i.ui.tbl.attr("data-ttsidecells",a.groupFields.length));break;case"css":i.ui.thead.addClass("sticky"),i.ui.tfoot.addClass("sticky");break}i.addWorkHandler(),i.timing.stop(["Grid Table","Draw"]),c(n)},t)})};lt.prototype.drawHeader_aggregates=function(e,t,n,i){var r=this,s=r._getAggInfo(e);k.each(s.group,function(a,l){var c=a.aggNum,u=a.instance.getFullName(),f=j("<span>").addClass("wcdv_heading_title").text(u),m=j("<div>"),g=j("<div>").addClass("wcdv_heading_container").append(f,m),h=j("<th>").append(g).appendTo(t);(r.opts.drawInternalBorders||e.agg.info.group.length>1)&&(n>0&&l===0&&h.addClass("wcdv_bld"),n<i-1&&l===s.group.length-1&&h.addClass("wcdv_brd"),l>0&&h.addClass("wcdv_pivot_colval_boundary")),r.csv.addCol(u),r._addSortingToHeader(e,"vertical",{aggType:"group",aggNum:c},m.get(0),s.group),r.setAlignment(h,a.colConfig[0],a.typeInfo[0],a.instance.getType())})};lt.prototype.drawHeader_addCols=function(e,t,n){var i=this,r,s;i.opts.addCols&&k.each(i.opts.addCols,function(a){r=j("<span>").text(a.name),s=j("<th>").append(r).appendTo(e),i.csv.addCol(a.name),me(n,"pivotConfig","aggField")&&i.setAlignment(s,i.colConfig.get(n.pivotConfig.aggField),t.get(n.pivotConfig.aggField))})};lt.prototype.drawBody_rowVals=function(e,t,n){var i=this;if(!(t instanceof Element))throw new Error("Call Error: `tr` must be an instance of Element");if(typeof n!="number")throw new Error("Call Error: `rowValIndex` must be a number");var r=e.groupMetadata.lookup.byRowValIndex[n],s=r,a=[],l;for(l=e.groupFields.length-1;l>=0;l-=1){var c=e.groupFields[l],u=e.groupSpec[l],f=i.colConfig.get(c)||{},m=i.typeInfo.get(c),g=s.rowValCell||s.rowValElt;u.fun!=null&&(m={type:dt.get(u.fun).resultType},g=s.rowValElt),g=ht(f,m,g);var h=document.createElement("span");h.classList.add("wcdv_heading_title");var v=document.createElement("div"),y=document.createElement("div");y.classList.add("wcdv_heading_container"),y.appendChild(h),y.appendChild(v),a[l]=document.createElement("th"),a[l].appendChild(y),g instanceof j&&(g=g.get(0)),g instanceof Element?h.appendChild(g):f.allowHtml?h.innerHTML=g:h.innerText=g,i.csv.addCol(h.innerText,{prepend:!0}),e.isPivot&&l===e.groupFields.length-1&&i._addSortingToHeader(e,"horizontal",{rowVal:e.rowVals[n],aggNum:0},v,Ze([],e,"agg","info","cell")),s=s.parent}for(l=0;l<e.groupFields.length;l+=1)t.appendChild(a[l])};lt.prototype.drawBody_groupAggregates=function(e,t,n,i,r){var s=this,a=s._getAggInfo(e);k.each(a.group,function(l,c){var u=l.aggNum,f=l.instance.getType(),m=e.agg.results.group[u][n],g,h=document.createElement("td");h.setAttribute("data-wcdv-rvi",n),h.setAttribute("data-wcdv-agg-scope","group"),h.setAttribute("data-wcdv-agg-num",u),m instanceof j&&(m=m.get(0)),m instanceof Element?(h.appendChild(m),s.csv.addCol(fi(m).innerText)):(l.instance.inheritFormatting?(g=ht(l.colConfig[0],l.typeInfo[0],m,{overrideType:f}),An(h,g,{field:l.fields[0],colConfig:l.colConfig[0],typeInfo:l.typeInfo[0]}),h.setAttribute("data-wcdv-field",l.fields[0])):(g=ht(null,null,m,{overrideType:f,decode:!1}),An(h,g)),s.csv.addCol(h.innerText)),k.every(e.groupSpec,function(v){return v.fun==null||dt.get(v.fun).canFilter})&&s._addDrillDownClass(h),(s.opts.drawInternalBorders||e.agg.info.group.length>1)&&(i>0&&c===0&&h.classList.add("wcdv_bld"),i<r-1&&c===a.group.length-1&&h.classList.add("wcdv_brd"),c>0&&h.classList.add("wcdv_pivot_colval_boundary")),s.setAlignment(h,l.colConfig[0],l.typeInfo[0],l.instance.getType()),t.appendChild(h)})};lt.prototype.clear=function(){var e=this;me(e,"ui","contextMenus")!=null&&e.ui.contextMenus.remove(),console.debug("[DataVis // %s // Clear] Removing %d context menus",e.toString(),e.contextMenuSelectors.length),k.each(e.contextMenuSelectors,function(t){j.contextMenu("destroy",t)}),e.contextMenuSelectors=[],e.features.limit&&e.defn.table.limit.method==="more"&&j(e.scrollEventElement).off(e.scrollEvents),e.features.operations&&j(e.root).off("click.wcdv_operation","button.wcdv_operation"),me(e,"ui","tbody")!=null&&e.ui.tbody.off("click","button.wcdv_show_full_value"),e.view.off("*",e,{silent:!0}),e.opts.footer!=null&&e.opts.stealGridFooter&&e.grid.ui.content.get(0).appendChild(e.opts.footer.get(0)),e.root.children().remove()};lt.prototype.makeProgress=function(e){var t=this;if(t.features.progress){if(me(t.defn,"table","progress","method")==="NProgress")return{begin:function(){console.debug("[DataVis // %s // Progress(%s)] Begin",t.toString(),e),window.NProgress!==void 0&&window.NProgress.start()},update:function(n,i){console.debug("[DataVis // %s // Progress(%s)] %s",t.toString(),e,$t.sprintf("Update: %d / %d = %.0f%%",n,i,n/i*100)),window.NProgress!==void 0&&window.NProgress.set(n/i)},end:function(){console.debug("[DataVis // %s // Progress(%s)] End",t.toString(),e),window.NProgress!==void 0&&(window.NProgress.done(),j(".nprogress-custom-parent").removeClass("nprogress-custom-parent"))}};if(me(t.defn,"table","progress","method")==="jQueryUI")return{begin:function(){console.debug("[DataVis // %s // Progress(%s)] Begin",t.toString(),e),t.ui.progress.progressbar({classes:{"ui-progressbar":"wcdvgrid_progressbar","ui-progressbar-value":"wcdvgrid_progressbar"}})},update:function(n,i){console.debug("[DataVis // %s // Progress(%s)] %s",t.toString(),e,$t.sprintf("Update: %d / %d = %.0f%%",n,i,n/i*100)),t.ui.progress.progressbar("value",n/i*100)},end:function(){console.debug("[DataVis // %s // Progress(%s)] End",t.toString(),e),t.ui.progress.progressbar("destroy")}}}};lt.prototype.getCsv=function(){var e=this;return e.csv.toString()};lt.prototype.getSelection=function(){var e=this;return{rowIds:e.selection,rows:k.map(e.selection,function(t){return e.data.dataByRowId[t]})}};lt.prototype.setSelection=function(e){var t=this,n=t.data.data;if(t.data.isGroup)n=k.flatten(n);else if(t.data.isPivot){de.error("Selection is not supported for pivotted data, because there is no way to see or change the selection in the user interface");return}if(e==null)t.selection=[];else if(k.isArray(e))t.selection=e;else return de.error("GridTable#setSelection(): parameter `what` must be null/undef or an array"),!1;typeof t._updateSelectionGui=="function"&&t._updateSelectionGui(),t.fire("selectionChange",null,t.getSelection().rows)};lt.prototype.select=function(e){var t=this,n=t.data.data;if(t.data.isGroup)n=k.flatten(n);else if(t.data.isPivot){de.error("Selection is not supported for pivotted data, because there is no way to see or change the selection in the user interface");return}if(e==null)t.selection=k.pluck(n,"rowNum");else if(k.isArray(e))t.selection=k.union(t.selection,e);else if(typeof e=="function"){var i=k.filter(n,function(r){return e(r.rowData)});t.selection=k.union(t.selection,k.pluck(i,"rowNum"))}else k.contains(t.selection,e)||t.selection.push(e);typeof t._updateSelectionGui=="function"&&t._updateSelectionGui(),t.fire("selectionChange",null,t.getSelection().rows)};lt.prototype.unselect=function(e){var t=this,n=t.data.data;if(t.data.isGroup)n=k.flatten(n);else if(t.data.isPivot){de.error("Selection is not supported for pivotted data, because there is no way to see or change the selection in the user interface");return}e==null?t.selection=[]:k.isArray(e)?t.selection=k.difference(t.selection,e):typeof e=="function"?t.selection=k.reject(t.selection,function(i){return e(t.data.dataByRowId[i])}):t.selection=k.without(t.selection,e),typeof t._updateSelectionGui=="function"&&t._updateSelectionGui(),t.fire("selectionChange",null,t.getSelection().rows)};lt.prototype.isSelected=function(e){var t=this;return t.selection.indexOf(e)>=0};lt.prototype._updateSelectionGui=function(){de.error("GridTable#_updateSelectionGui(): Must be implemented by subclass")};var my=Ee("GridTableOptsWin",Object,function(e){var t=this;if(!(e instanceof lt))throw new Error("Call Error: `renderer` must be an instance of GridTable");t.renderer=e});my.prototype.show=function(e){var t=this,n=it(t.renderer.opts);t.renderer.canRender("group");var i=t.renderer.canRender("pivot"),r={effect:"fade",duration:100},s={},a=jQuery("<div>",{title:"Columns"}).dialog({autoOpen:!1,modal:!0,width:600,position:{my:"center",at:"center",of:window},classes:{"ui-dialog":"ui-corner-all wcdv_dialog","ui-dialog-titlebar":"ui-corner-all"},buttons:[{text:"OK",icon:"ui-icon-check",click:function(){n=Qe(n,{displayFormat:{}}),i&&s.cellChk.prop("checked")&&(n.displayFormat.cell=[s.cellText.val()]),a.dialog("close"),e(n)}},{text:"Cancel",icon:"ui-icon-cancel",click:function(){a.dialog("close")}}],show:r,hide:r,close:function(){a.dialog("destroy")}});s.root=jQuery("<div>");var l=[{field:"cell",available:i,label:"Customize cell display"}];k.each(l,function(c){if(c.available){var u=Ze("",n,"displayFormat",c.field),f=jQuery("<input>",{type:"checkbox",checked:!!u}),m=jQuery("<textarea>",{cols:60}).css({display:"block",fontFamily:"monospace",marginTop:"1ex"}).val(u),g=jQuery("<label>").css({display:"block",marginTop:"1ex"}).append(f).append(c.label);f.on("change",function(){m.toggle()}),s[c.field+"Chk"]=f,s[c.field+"Text"]=m,s.root.append(g),s.root.append(m),u||m.hide()}}),a.append(s.root),a.dialog("open")};var vy=Ee("PlainToolbar",zn,function(e){var t=this;t.super.ctor.apply(t,[]),t.ui.root.addClass("wcdv_toolbar_section"),t.grid=e,e.ui.limit_div=jQuery("<div>").css({display:"inline-block"}).appendTo(t.ui.root),t.ui.autoShowMore=Fi(e.defn,["table","limit","autoShowMore"],!0,ae("GRID_TOOLBAR.PLAIN.SHOW_MORE_ON_SCROLL"),e.ui.limit_div),jQuery("<button>",{type:"button"}).on("click",function(n){e.renderer.updateFeatures({block:!0,progress:!0,limit:!1})}).text(ae("GRID_TOOLBAR.PLAIN.SHOW_ALL_ROWS")).appendTo(e.ui.limit_div),t.ui.columnConfig=jQuery("<button>",{type:"button"}).append(Ne("fa-columns")).append(ae("GRID_TOOLBAR.PLAIN.COLUMNS")).on("click",function(n){e.colConfigWin.show(e.ui.controls,function(i){e.setColConfig(i,{from:"ui"})})}).appendTo(t.ui.root),t.ui.TemplatesEditor=jQuery("<button>",{type:"button"}).append(Ne("fa-pencil")).append(ae("GRID_TOOLBAR.PLAIN.TEMPLATES_EDITOR")).on("click",function(n){e.TemplatesEditor.show()}).appendTo(t.ui.root)});vy.prototype.update=function(){var e=this;switch(e.grid.renderer.features.limit?(e.grid.ui.limit_div.show(),e.ui.autoShowMore.show()):(e.grid.ui.limit_div.hide(),e.ui.autoShowMore.hide()),e.grid.rendererName){case"table":e.ui.columnConfig.show(),e.ui.TemplatesEditor.hide();break;case"handlebars":e.ui.columnConfig.hide(),e.ui.TemplatesEditor.show();break}};var yy=Ee("GroupToolbar",zn,function(e){var t=this;t.super.ctor.apply(t,[]),t.ui.root.addClass("wcdv_toolbar_section"),t.grid=e;var n;e.view.on("aggregateSet",function(r){n=it(r)});var i=function(r){switch(r){case"summary":t.ui.showTotalRow.prop("disabled",!1),t.ui.pinRowVals.prop("disabled",!1),t.ui.columnConfig.prop("disabled",!0);break;case"detail":t.ui.showTotalRow.prop("disabled",!0),t.ui.pinRowVals.prop("disabled",!0),t.ui.columnConfig.prop("disabled",!1);break}};t.ui.groupMode=Wm(e.defn,["table","groupMode"],"detail",null,"groupOutput",[{label:ae("GRID_TOOLBAR.GROUP.MODE.SUMMARY"),value:"summary"},{label:ae("GRID_TOOLBAR.GROUP.MODE.DETAIL"),value:"detail"}],null,function(r){i(r),e.redraw()},t.ui.root),t.ui.showTotalRow=Fi(e.defn,["table","whenGroup","showTotalRow"],!0,ae("GRID_TOOLBAR.GROUP.TOTAL_ROW"),t.ui.root,function(r){var s=e.view.getAggregate();r?s.all=n.all:(n=it(s),delete s.all),e.view.setAggregate(s,{sendEvent:!1})}),t.ui.pinRowVals=Fi(e.defn,["table","whenGroup","pinRowvals"],!1,ae("GRID_TOOLBAR.GROUP.PIN_GROUPS"),t.ui.root,function(r){e.redraw()}),t.ui.columnConfig=jQuery("<button>",{type:"button"}).append(Ne("fa-columns")).append(ae("GRID_TOOLBAR.PLAIN.COLUMNS")).on("click",function(r){e.colConfigWin.show(e.ui.controls,function(s){e.setColConfig(s,{from:"ui"})})}).appendTo(t.ui.root),t.ui.TemplatesEditor=jQuery("<button>",{type:"button"}).append(Ne("fa-pencil")).append(ae("GRID_TOOLBAR.PLAIN.TEMPLATES_EDITOR")).on("click",function(r){e.TemplatesEditor.show()}).appendTo(t.ui.root),i(e.defn.table.groupMode)});yy.prototype.update=function(){var e=this;switch(e.grid.rendererName){case"table":e.ui.groupMode.show(),e.ui.showTotalRow.show(),e.ui.pinRowVals.show(),e.ui.columnConfig.show(),e.ui.TemplatesEditor.hide();break;case"handlebars":e.ui.groupMode.hide(),e.ui.showTotalRow.hide(),e.ui.pinRowVals.hide(),e.ui.columnConfig.hide(),e.ui.TemplatesEditor.show();break}};var _y=Ee("PivotToolbar",zn,function(e){var t=this;t.super.ctor.apply(t,[]),t.ui.root.addClass("wcdv_toolbar_section"),t.grid=e;var n;e.view.on("aggregateSet",function(i){n=it(i)}),t.ui.showTotals=Fi(e.defn,["table","whenPivot","showTotalCol"],!0,ae("GRID_TOOLBAR.PIVOT.TOTAL_ROW_COLUMN"),t.ui.root,function(i){var r=e.view.getAggregate();i?(r.group=n.group,r.pivot=n.pivot,r.all=n.all):(n=it(r),delete r.group,delete r.pivot,delete r.all),e.view.setAggregate(r,{sendEvent:!1})}),t.ui.pinRowVals=Fi(e.defn,["table","whenGroup","pinRowvals"],!1,ae("GRID_TOOLBAR.GROUP.PIN_GROUPS"),t.ui.root,function(i){e.redraw()}),t.ui.hideBottomValueAggResults=Fi(e.defn,["table","whenPivot","hideBottomValueAggResults"],!1,ae("GRID_TOOLBAR.PIVOT.HIDE_ZERO_VALUES"),t.ui.root,function(i){e.redraw()}),t.ui.TemplatesEditor=jQuery("<button>",{type:"button"}).append(Ne("fa-pencil")).append(ae("GRID_TOOLBAR.PLAIN.TEMPLATES_EDITOR")).on("click",function(i){e.TemplatesEditor.show()}).appendTo(t.ui.root)});_y.prototype.update=function(){var e=this;switch(e.grid.rendererName){case"table":e.ui.showTotals.show(),e.ui.pinRowVals.show(),e.ui.TemplatesEditor.hide();break;case"handlebars":e.ui.showTotals.hide(),e.ui.pinRowVals.hide(),e.ui.TemplatesEditor.show();break}};var tO=Ee("PrefsToolbar",zn,function(e){var t=this;t.super.ctor.apply(t,[]),t.ui.root.addClass("wcdv_toolbar_section"),t.grid=e;var n=jQuery("<div>").addClass("wcdv_toolbar_view").css({display:"inline-block"}).appendTo(t.ui.root),i={},r=function(){var E=e.prefs.getPerspective({id:l.val()});if(E==null)throw new Error("No such perspective: "+l.val());E.opts.isTemporary?g.show():g.hide(),E.opts.isEssential?(v.hide(),y.hide()):(v.show(),y.show())};jQuery("<button>",{type:"button",title:ae("GRID_TOOLBAR.PREFS.RESET.TOOLTIP")}).addClass("wcdv_icon_button wcdv_text-primary").append(Ne("fa-undo")).on("click",function(){confirm(ae("GRID_TOOLBAR.PREFS.RESET.CONFIRM"))&&e.prefs.reset()}).appendTo(n);var s=jQuery("<button>",{type:"button"}).append(Ne("fa-chevron-circle-left")).attr("title",ae("GRID_TOOLBAR.PREFS.BACK.TOOLTIP")).attr("disabled",!0).addClass("wcdv_icon_button wcdv_text-primary").on("click",function(){e.prefs.back()}).appendTo(n),a=jQuery("<button>",{type:"button"}).append(Ne("fa-chevron-circle-right")).attr("title",ae("GRID_TOOLBAR.PREFS.FORWARD.TOOLTIP")).attr("disabled",!0).addClass("wcdv_icon_button wcdv_text-primary").on("click",function(){e.prefs.forward()}).appendTo(n),l=jQuery("<select>").append(jQuery("<option>",{value:"NEW"}).text(ae("GRID_TOOLBAR.PREFS.NEW_PERSPECTIVE"))).on("change",function(E){if(l.val()==="NEW"){var b=prompt(ae("GRID_TOOLBAR.PREFS.NEW_PERSPECTIVE.PROMPT"),e.prefs.currentPerspective.name);b?(e.prefs.addPerspective(null,b),e.prefs.save()):l.val(e.prefs.currentPerspective.id);return}e.prefs.setCurrentPerspective(l.val()),r()}).appendTo(n),c=jQuery("<span>"),u=jQuery("<div>").append(Ne("fa-info-circle").css("padding-right","0.25em").addClass("wcdv_text-primary")).append(c),f=Ne("fa-info-circle","wcdv_info_icon").attr({title:ae("GRID_TOOLBAR.PREFS.INFO.TOOLTIP")}).hide().tooltip({classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow wcdv_info_tooltip wcdv_border-primary"},show:{delay:1e3},content:u}).appendTo(n);e.prefs.backend instanceof $n&&(c.text(ae("GRID_TOOLBAR.PREFS.BACKEND_DOES_NOT_SAVE")),f.show());var m=jQuery("<div>").append(Ne("fa-info-circle").css("padding-right","0.25em").addClass("wcdv_text-primary")).append(ae("GRID_TOOLBAR.PREFS.SAVE_AS.HELP")),g=jQuery("<button>",{type:"button",title:ae("GRID_TOOLBAR.PREFS.SAVE_AS.TOOLTIP")}).append(Ne("fa-save")).addClass("wcdv_icon_button wcdv_text-primary").tooltip({classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow wcdv_info_tooltip wcdv_border-primary"},show:{delay:1e3},content:m}).on("click",function(){e.prefs.clonePerspective()}).appendTo(n);jQuery("<div>").append(Ne("fa-info-circle").css("padding-right","0.25em").addClass("wcdv_text-primary")).append(ae("GRID_TOOLBAR.PREFS.SAVE.HELP"));var h=jQuery("<button>",{type:"button",title:ae("GRID_TOOLBAR.PREFS.SAVE.TOOLTIP")}).append(Ne("fa-save")).addClass("wcdv_icon_button wcdv_text-primary").hide().on("click",function(){e.prefs.reallySave()}).appendTo(n),v=jQuery("<button>",{type:"button",title:ae("GRID_TOOLBAR.PREFS.RENAME.TOOLTIP")}).addClass("wcdv_icon_button wcdv_text-primary").append(Ne("fa-pencil")).on("click",function(){var E=l.val(),b=e.prefs.getPerspective({id:E});if(b.opts.isEssential)alert("Cannot rename essential perspective!");else{var w=prompt(ae("GRID_TOOLBAR.PREFS.RENAME_PERSPECTIVE.PROMPT",b.name));w&&e.prefs.renamePerspective(E,w)}}).appendTo(n),y=jQuery("<button>",{type:"button",title:ae("GRID_TOOLBAR.PREFS.DELETE.TOOLTIP")}).addClass("wcdv_icon_button wcdv_text-primary").append(Ne("fa-trash")).on("click",function(){confirm(ae("GRID_TOOLBAR.PREFS.DELETE_PERSPECTIVE.CONFIRM"))&&e.prefs.deletePerspective(l.val())}).appendTo(n);setTimeout(function(){e.prefs.prime(function(){e.prefs.getPerspectives(function(E){k.each(k.sortBy(k.map(E,function(b){return e.prefs.getPerspective({id:b})}),"name"),function(b){i[b.id]==null&&(i[b.id]=jQuery("<option>",{value:b.id}).text(b.name).appendTo(l))}),l.val(e.prefs.currentPerspective.id),r()}),e.prefs.on("perspectiveAdded",function(E){if(i[E]==null){var b=e.prefs.getPerspective({id:E});i[E]=jQuery("<option>",{value:E}).text(b.name).appendTo(l)}},{info:"Adding new perspective to dropdown"}),e.prefs.on("perspectiveDeleted",function(E){if(i[E]==null)throw new Error($t.sprintf('Received `perspectiveDeleted` event that references unknown perspective: id = "%s"',E));i[E].remove(),delete i[E]},{info:"Removing perspective from dropdown"}),e.prefs.on("perspectiveRenamed",function(E,b){if(i[E]==null)throw new Error($t.sprintf('Received `perspectiveRenamed` event that references unknown perspective: id = "%s"',E));i[E].text(b)},{info:"Changing perspective name in dropdown"}),e.prefs.on("perspectiveChanged",function(E,b){if(i[E]==null)throw new Error($t.sprintf('Received `perspectiveChanged` event that references unknown perspective: id = "%s"',E));b.isUnsaved?h.show():h.hide(),l.val(E),r()},{info:"Changing dropdown to reflect new current perspective"}),e.prefs.on("prefsReset",function(){k.each(i,function(E){E.remove()}),i={}},{info:"Deleting all perspectives from the dropdown"}),e.prefs.on("prefsChanged",function(){var E=e.prefs.currentPerspective,b=i[E.id];b.text("[*] "+E.name),h.show()}),e.prefs.on("prefsSaved",function(){var E=e.prefs.currentPerspective,b=i[E.id];b.text(E.name),h.hide()}),e.prefs.on("prefsHistoryStatus",function(E,b){s.attr("disabled",!E),a.attr("disabled",!b)})})})}),nO=Ee("RendererToolbar",zn,function(e){var t=this;t.super.ctor.apply(t,[]),t.ui.root.addClass("wcdv_toolbar_section"),t.grid=e;var n=jQuery("<div>").addClass("wcdv_toolbar_view").css({display:"inline-block"}).appendTo(t.ui.root),i=jQuery("<button>",{type:"button",title:ae("GRID_TOOLBAR.RENDERER.DISPLAY_OPTIONS")}).append(Ne("fa-table")).append(ae("GRID_TOOLBAR.RENDERER.DISPLAY_OPTIONS")).on("click",function(){var r=new my(e.renderer);r.show(function(s){e.renderer.canRender("plain")?e.defn.table.whenPlain=s:e.renderer.canRender("group")?e.defn.table.whenGroup=s:e.renderer.canRender("pivot")&&(e.defn.table.whenPivot=s),e.redraw()})}).appendTo(n);e.on("renderEnd",function(){i.prop("disabled",e.renderer.canRender("plain"))})}),iO=Ee("ComputedViewToolbar",zn,function(e){var t=this;t.super.ctor.apply(t,[]),t.ui.root.addClass("wcdv_toolbar_section"),t.grid=e;var n=jQuery("<div>").addClass("wcdv_toolbar_view").css({display:"inline-block"}).appendTo(t.ui.root);jQuery("<button>",{type:"button",title:ae("GRID_TOOLBAR.MIRAGE.STORE_DISPLAYED_DATA")}).append(Ne("fa-save")).append(ae("GRID_TOOLBAR.MIRAGE.STORE_DISPLAYED_DATA")).on("click",function(){var i=prompt(ae("GRID_TOOLBAR.PREFS.NEW_PERSPECTIVE.PROMPT"),e.prefs.currentPerspective.name);i!=null&&e.mirageView.initFromView(e.view.prefs,e.view,e.view.source,function(){e.mirageView.setPerspectiveName(i),e.mirageView.save(function(){e.prefs.clonePerspective(null,i,function(r){return r.mirageView=it(r.computedView),r.isMirage=!0,r},function(){},function(r){r!=null&&alert(r)})},function(r){de.error("Failed to save mirage view: "+r)})},function(r){de.error("Failed to initialize mirage view: "+r)})}).appendTo(n),t.grid.on("renderEnd",function(){t.grid.view instanceof je?t.show():t.hide()})}),Yo=Ee("OperationsPalette",Object,function(e){var t=this;if(t.ui={root:null,title:null,palette:null},t.operations=[],!(e instanceof rt))throw new Error("Call Error: `grid` must be a Grid");t.grid=e});Yo.prototype.draw=function(e){var t=this;t.ui.root=j("<div>",{class:"wcdv_control_pane"}).css({display:"block"}).appendTo(e),t.ui.title=j("<div>").addClass("wcdv_control_title_bar").appendTo(t.ui.root),j("<span>",{class:"wcdv_control_title"}).text(ae("GRID_CONTROL.OPERATIONS.TITLE")).appendTo(t.ui.title),t.ui.palette=j("<div>").css({"overflow-x":"auto","white-space":"nowrap"}).appendTo(t.ui.root),t.operations.length>0?(t.drawPalette(),e.show()):e.hide(),t.ui.palette.on("click.wcdv_operation","button.wcdv_operation",function(){var n=this,i=n.getAttribute("data-operation-index"),r=t.operations[i];typeof r.callback=="function"&&r.callback({rows:t.grid.getSelection().rows,opBtn:j(n)})})};Yo.prototype.drawPalette=function(){var e=this;e.ui.palette.children().remove(),k.each(k.groupBy(e.operations,"category"),function(t,n){var i=j("<div>",{class:"wcdv_operations_category"}).appendTo(e.ui.palette);n!=="undefined"&&j("<span>").text(n).appendTo(i),k.each(t,function(r){var s=j("<button>",{type:"button",class:"wcdv_operation","data-operation-index":r.idx}).appendTo(i);r.label==null&&s.addClass("no_label"),r.icon&&s.append(Ne(r.icon)),r.label&&s.append(r.label)})})};Yo.prototype.destroy=function(){var e=this;e.ui.palette.off("click.wcdv_operation"),e.ui.root.remove()};Yo.prototype.setOperations=function(e){var t=this;if(!(e==null||e.all==null)){var n=0;k.each(e.all,function(i){i.idx=n,n+=1}),t.operations=e.all,t.ui.palette!=null&&t.drawPalette()}};var Ln=Ee("GridTablePlain",lt,function(e,t,n,i,r,s,a){var l=this;l.super.ctor.apply(l,arguments),l.features.filter=!1,console.debug("DataVis // %s // Constructing grid table; features = %O",l.toString(),i),l.addFilterHandler()});Ln.prototype.canRender=function(e){return["plain"].indexOf(e)>=0};Ln.prototype.drawHeader=function(e,t,n,i){var r=this,s,a,l,c={"white-space":"nowrap"},u={"white-space":"nowrap","padding-top":4,"vertical-align":"top"};s=j("<tr>"),l=j("<tr>",{class:"wcdv_grid_filterrow"}),r.features.rowSelect&&(r.ui.checkAll_thead=j("<input>",{name:"checkAll",type:"checkbox"}).on("change",function(m){r.checkAll(m)}),a=j("<th>").addClass("wcdv_group_col_spacer").append(r.ui.checkAll_thead).appendTo(s),r.opts.drawInternalBorders&&a.addClass("wcdv_pivot_colval_boundary"),r.features.filter&&l.append(j("<th>").css(u))),r.hasOperations("row")&&(a=j("<th>",{class:"wcdv_group_col_spacer"}),s.append(a));var f=r.makeProgress("Filter");r.features.filter&&(r.defn.gridFilterSet=new Pn(r.view,null,r,f)),k.each(e,function(m,g){var h=r.colConfig.get(m)||{};r.features.rowSelect&&(g+=1),r.hasOperations("row")&&(g+=1);var v=h.displayText||m,y=j("<span>",{class:"wcdv_heading_title","data-wcdv-field":m,"data-wcdv-draggable-origin":"GRID_TABLE_HEADER"}).text(v)._makeDraggableField(),E=j("<div>"),b=j("<div>").addClass("wcdv_heading_container").append(y,E),w=j("<th>",{id:Bt()}).css(c).append(b);if(r._addSortingToHeader(t,"vertical",{field:m},E.get(0)),r._addFilterToHeader(E,m,v),r.opts.drawInternalBorders&&w.addClass("wcdv_pivot_colval_boundary"),r.features.filter){var T=Bt(),x=j("<th>",{id:T}).addClass("wcdv_grid_filtercol filter_col_"+g).css(u);r.setCss(x,m),l.append(x),j(Ne("F0B0",null,"Click to add a filter on this column")).css({cursor:"pointer","margin-left":"0.5ex"}).on("click",function(){var D=j(this).closest("thead"),O=D.children("tr:eq(1)"),R=O.children("th.filter_col_"+g),I=function(){if(r.features.floatingHeader){var M=O.innerHeight();console.debug("[DataVis // %s // Add Filter] Adjusting original table header height to "+M+"px to match floating header height",r.toString()),l.innerHeight(M)}},P=I;r.defn.gridFilterSet.add(m,R,{filterType:h.filter,filterButton:j(this),makeRemoveButton:!0,onRemove:P,autoUpdateInputWidth:!0,sizingElement:x}),I()}).appendTo(w)}r.setCss(w,m),r.setAlignment(w,h,n.get(m)),r.ui.thMap[m]=w,s.append(w)}),r.opts.addCols&&r.drawHeader_addCols(s,n,i),r.features.rowReorder&&(a=j("<th>").text("Options").appendTo(s),r.opts.drawInternalBorders&&a.addClass("wcdv_pivot_colval_boundary"),r.features.filter&&(a=j("<th>").css(u).appendTo(l),r.opts.drawInternalBorders&&a.addClass("wcdv_pivot_colval_boundary"))),r.ui.thead.append(s),r.features.filter&&r.ui.thead.append(l)};Ln.prototype.drawBody=function(e,t,n,i,r){var s=this,a=s.features.limit,l=Ze({},s.defn,"table","limit");s.features.limit&&l&&e.data.length>l.threshold&&console.debug("[DataVis // %s // Draw] Limiting output to first "+l.threshold+" rows",s.toString()),s.opts.generateCsv&&s.addDataToCsv(e),s.ui.tbody.children().remove(),s._setupFullValueWin(e);var c=function(h){var v,y;if(v=document.createElement("tr"),v.setAttribute("id",s.defn.table.id+"_"+h.rowNum),v.setAttribute("data-row-num",h.rowNum),s.features.rowSelect){var E=j("<input>",{type:"checkbox","data-row-num":h.rowNum});y=j("<td>").addClass("wcdv_group_col_spacer").append(E).appendTo(v),s.opts.drawInternalBorders&&y.addClass("wcdv_pivot_colval_boundary")}s.hasOperations("row")&&(y=document.createElement("td"),y.classList.add("wcdv_group_col_spacer"),y.classList.add("wcdv_pivot_colval_boundary"),y.classList.add("wcdv_nowrap"),y.classList.add("wcdv_row_operations"),k.each(s.defn.operations.row,function(b,w){y.appendChild(pl("row",b,w))}),v.appendChild(y)),k.each(n,function(b,w){var T=s.colConfig.get(b)||{},x=h.rowData[b],D=document.createElement("td"),O=ht(T,t.get(b),x);An(D,O,{field:b,colConfig:s.colConfig,typeInfo:t,operations:me(s.defn,"operations","cell",b)}),(T.maxHeight!=null||s.hasOperations("cell",b))&&D.setAttribute("data-wcdv-field",b),s.setCss(j(D),b),s.setAlignment(D,T,t.get(b)),s.opts.drawInternalBorders&&D.classList.add("wcdv_pivot_colval_boundary"),v.appendChild(D)}),s.opts.addCols&&k.each(s.opts.addCols,function(b){var w=b.value(h.rowData,h.rowNum),T=document.createElement("td");w instanceof j||w instanceof Element||(w=ht(null,null,w)),An(T,w),s.opts.drawInternalBorders&&T.classList.add("wcdv_pivot_colval_boundary"),v.appendChild(T)}),s.features.rowReorder&&j("<td>").append(s.makeRowReorderBtn()).appendTo(v),s.ui.tr[h.rowNum]=j(v),s.ui.tbody.append(v)},u=function(h){var v;v=document.createElement("tr"),v.classList.add("wcdvgrid_more");var y=n.length+(s.features.rowSelect?1:0)+(s.hasOperations("row")?1:0)+Ze(0,s.opts,"addCols","length")+(s.features.rowReorder?1:0),E=function(){v.parentNode.removeChild(v),f(h+1,l.chunkSize,m)},b=j("<td>",{colspan:y}).on("click",E).append(Ne("F13A")).append(j("<span>Showing rows 1"+(h+1)+" of "+e.data.length+".</span>").css({"padding-left":"0.5em"})).append(j("<span>Click to load "+l.chunkSize+" more rows.</span>").css({"padding-left":"0.5em","padding-right":"0.5em"})).append(Ne("F13A"));s.moreVisibleHandler=Gm(s.scrollEventElement,b,function(w){w&&me(s.defn,"table","limit","autoShowMore")&&(console.debug('[DataVis // %s // More] "Show More Rows" button scrolled into view',s.toString()),E())}),v.appendChild(b.get(0)),s.ui.tbody.append(v)},f=function(h,v,y){var E=!1;h==null&&(h=0),v==null&&(v=e.data.length),console.debug("[DataVis // %s // Draw] Rendering rows "+h+" - "+Math.min(a&&h===0?l.threshold-1:Number.POSITIVE_INFINITY,h+v-1,e.data.length-1)+" "+(e.data.length-1<=h+v-1?"[END]":"/ "+e.data.length-1),s.toString());for(var b=h;b<e.data.length&&b<h+v&&!E;b+=1)c(e.data[b]),!s.features.incremental&&a&&l.method==="more"&&b!==e.data.length-1&&(h===0&&b===l.threshold-1||h>0&&b===h+l.chunkSize-1)&&(u(b),E=!0);if(E?s.fire("limited"):s.fire("unlimited"),s._updateSelectionGui(),s.features.floatingHeader)switch(me(s.defn,"table","floatingHeader","method")){case"tabletool":window.TableTool.update();break}if(b===e.data.length)return delete s.moreVisibleHandler,typeof i=="function"?i():void 0;if(typeof y=="function")return y(h,v);if(typeof i=="function")return i()},m;if(s.features.incremental){var g=s.defn.table.incremental;if(g.method==="setTimeout")m=function(h,v){window.setTimeout(function(){f(h+v,v,m)},g.delay)},window.setTimeout(function(){f(0,g.chunkSize,m)},g.delay);else if(g.method==="requestAnimationFrame")m=function(h,v){window.requestAnimationFrame(function(){f(h+v,v,m)})},window.requestAnimationFrame(function(){f(0,g.chunkSize,m)});else throw new Error("Invalid value for `table.incremental.method` ("+g.method+') - must be either "setTimeout" or "requestAnimationFrame"')}else f()};Ln.prototype.drawFooter=function(e,t,n){var i=this,r=function(l){i.ui.checkAll_tfoot=j("<input>",{name:"checkAll",type:"checkbox"}).on("change",function(c){i.checkAll(c)}),j("<td>",{class:"wcdv_group_col_spacer"}).append(i.ui.checkAll_tfoot).appendTo(l)},s=function(){var l=j("<tr>");i.features.rowSelect&&r(l);var c=!1;l.append(k.map(e,function(u,f){var m=i.colConfig.get(u)||{};n.get(u);var g=j("<td>"),h=me(i.defn,"table","footer",u),v,y;if(i.setCss(g,u),i.setAlignment(g,m,n.get(u)),h==null)c&&g.addClass("wcdv_divider"),c=!1;else{f>0&&g.addClass("wcdv_divider"),c=!0,h.fields==null&&(h.fields=[u]),console.debug("[DataVis // %s // Footer(%s)] Creating footer using config: %O",i.toString(),u,h);var E=new Yi("all",h,0,i.colConfig,n,function(w,T){T.needsDecoding&&(console.debug('[DataVis // %s // Footer(%s) // %s] Converting data: { field = "%s", type = "%s" }',i.toString(),u,w,T.field,T.type),Source.decodeAll(t.dataByRowId,T.field)),T.deferDecoding=!1,T.needsDecoding=!1});v=E.instance.calculate(t.data);var b;if(Xt(v))y=v;else switch(E.instance.inheritFormatting?b=ht(E.colConfig[0],E.typeInfo[0],v,{overrideType:E.instance.getType()}):b=ht(null,null,v,{overrideType:E.instance.getType(),decode:!1}),E.debug&&console.debug("[DataVis // %s // Footer(%s)] Aggregate result: %s",i.toString(),u,JSON.stringify(v)),typeof h.format){case"function":y=h.format(b);break;case"string":y=$t.sprintf(h.format,b);break;default:throw new Error('Footer config for field "'+u+'": `format` must be a function or a string')}Xt(y)?g.append(y):g.text(y)}return g})),i.features.rowReorder&&l.append(j("<td>").text("Options")),i.ui.tfoot.append(l)},a=function(){if(!(i.opts.footer==null||!i.opts.stealGridFooter)){var l=j("<tr>");Wl(i.opts.footer)||l.hide(),i.features.rowSelect&&j("<td>",{class:"wcdv_group_col_spacer"}).appendTo(l),l.append(j("<td>",{colspan:e.length}).append(i.opts.footer)),i.features.rowReorder&&l.append(j("<td>")),i.ui.tfoot.append(l)}};s(),a()};Ln.prototype.makeRowReorderBtn=function(){return j('<button type="button" class="drag-handle fa">').html(Ne("f07d",null,"Drag or press up/down arrows to move"))};Ln.prototype.updateFeatures=function(e){var t=this;k.each(e,function(n,i){t.features[i]=n}),t.draw(t.root)};Ln.prototype.addWorkHandler=function(){var e=this;e.view.on(je.events.workEnd,function(t,n){if(console.debug("[DataVis // %s // Handler(ComputedView.workEnd)] ComputedView has finished doing work",e.toString()),n.group||n.pivot){console.debug("[DataVis // %s // Handler(ComputedView.workEnd)] Unable to render this data: %O",e.toString(),n),e.fire("unableToRender",null,n);return}console.debug("[DataVis // %s // Handler(ComputedView.workEnd)] Redrawing because the view has done work",e.toString()),e.draw(e.root)},{who:e})};Ln.prototype.addDataToCsv=function(e){var t=this,n=jr(t.colConfig,e,t.typeInfo);console.debug("[DataVis // %s // Generate CSV] Started generating CSV file",t.toString()),t.fire("generateCsvProgress",null,0),t.csv.start(),t.csv.addRow(),k.each(n,function(s,a){var l=t.colConfig.get(s)||{};t.csv.addCol(l.displayText||s)});var i=e.data.length/10,r=function(s){for(var a=Math.min(e.data.length,s+i),l=s;l<a;l+=1){var c=e.data[l];t.csv.addRow(),k.each(n,function(u,f){var m=t.colConfig.get(u)||{},g=c.rowData[u],h=ht(m,t.typeInfo.get(u),g);h instanceof Element?t.csv.addCol(j(h).text()):h instanceof j?t.csv.addCol(h.text()):m.allowHtml&&t.typeInfo.get(u).type==="string"&&h.charAt(0)==="<"?t.csv.addCol(j(h).text()):t.csv.addCol(h)})}l===e.data.length?t.csv.finish(function(){console.debug("[DataVis // %s // Generate CSV] Finished generating CSV file",t.toString()),t.csvLock.unlock(),t.fire("generateCsvProgress",null,100),t.fire("csvReady")}):(t.fire("generateCsvProgress",null,Math.floor(l/e.data.length*100)),setTimeout(function(){return r(l)},100))};return r(0)};Ln.prototype._updateSelectionGui=function(){var e=this,t=e.data.data.length===0,n=!t&&e.selection.length===e.data.data.length,i=!t&&!n&&e.selection.length>0,r=function(a){a.prop("disabled",t),a.prop("checked",n),a.prop("indeterminate",i)};e.root.find("tbody td.wcdv_selected_row").removeClass("wcdv_selected_row"),e.root.find('tbody td:first-child input[type="checkbox"]').prop("checked",!1);var s=e.root.find("tbody tr").filter(function(a,l){return e.selection.indexOf(+j(l).attr("data-row-num"))>=0});e.ui.checkAll_thead&&(r(e.ui.checkAll_thead),r(e.ui.checkAll_thead.parents("div.tabletool").find('input[name="checkAll"]'))),e.ui.checkAll_tfoot&&(r(e.ui.checkAll_tfoot),r(e.ui.checkAll_tfoot.parents("div.tabletool").find('input[name="checkAll"]'))),s.children("td").addClass("wcdv_selected_row"),s.find('td:first-child input[type="checkbox"]').prop("checked",!0)};Ln.prototype.checkAll=function(e){var t=this;j(e.target).parents("div.tabletool").find('input[name="checkAll"]').prop("checked",e.target.checked),e.target.checked?t.select():t.unselect()};Ln.prototype._addRowReorderHandler=function(){};Ln.prototype._addRowSelectHandler=function(){var e=this;e.ui.tbody.on("change",'.wcdv_group_col_spacer > input[type="checkbox"]',function(){this.checked?e.select(+j(this).attr("data-row-num")):e.unselect(+j(this).attr("data-row-num"))})};At.registry.set("table_plain",Ln);var yi=Ee("GridTableGroupDetail",lt,function(e,t,n,i,r,s,a){var l=this;l.super.ctor.apply(l,arguments),l.features.sort=!1,console.debug("DataVis // %s // Constructing grid table; features = %O",l.toString(),i)});yi.prototype.canRender=function(e){return["group"].indexOf(e)>=0};yi.prototype.drawHeader=function(e,t,n,i){var r=this,s,a,l,c,u,f={"white-space":"nowrap"};k.each(t.groupFields,function(g,h){var v=r.colConfig.get(g)||{};s=j("<tr>"),r.features.rowSelect&&(h===0?(r.ui.checkAll_thead=j("<input>",{name:"checkAll",type:"checkbox",class:"wcdv_select_group","data-group-id":"0"}).on("change",function(E){r.checkAll(E)}),l=j("<th>").addClass("wcdv_group_col_spacer").append(r.ui.checkAll_thead).appendTo(s)):j("<th>").addClass("wcdv_group_col_spacer").appendTo(s));for(var y=0;y<h+1;y+=1)j("<th>").addClass("wcdv_group_col_spacer").appendTo(s);a=j("<span>").attr({"data-wcdv-field":g,"data-wcdv-draggable-origin":"GRID_TABLE_HEADER"}).addClass("wcdv_heading_title").text(v.displayText||g)._makeDraggableField(),u=j("<div>"),c=j("<div>").addClass("wcdv_heading_container").append(a,u),l=j("<th>").attr("colspan",e.length-h).css(f).append(c),r._addSortingToHeader(t,"vertical",{groupFieldIndex:h},u.get(0)),r.setCss(l,g),r.ui.thMap[g]=l,s.append(l),r.ui.thead.append(s)}),s=j("<tr>"),r.features.rowSelect&&j("<th>").addClass("wcdv_group_col_spacer").appendTo(s);for(var m=0;m<t.groupFields.length+1;m+=1)j("<th>").addClass("wcdv_group_col_spacer").appendTo(s);k.each(e,function(g,h){var v=r.colConfig.get(g)||{};t.groupFields.indexOf(g)>=0||(a=j("<span>").attr({"data-wcdv-field":g,"data-wcdv-draggable-origin":"GRID_TABLE_HEADER"}).addClass("wcdv_heading_title").text(v.displayText||g)._makeDraggableField(),u=j("<div>"),c=j("<div>").addClass("wcdv_heading_container").append(a,u),l=j("<th>").css(f).append(c),h>0&&l.addClass("wcdv_pivot_colval_boundary"),r._addSortingToHeader(t,"vertical",{field:g},u.get(0)),r.setCss(l,g),r.setAlignment(l,v,n.get(g)),r.ui.thMap[g]=l,s.append(l))}),r.ui.thead.append(s)};yi.prototype.drawBody=function(e,t,n,i,r){var s=this;if(!e.isGroup)return typeof i=="function"?i():void 0;s.opts.generateCsv&&s.addDataToCsv(e);var a={},l={};s.groupInfo=function(){var m={};function g(h){m[h.id]={metadata:h,numSelected:0},h.children!=null&&k.each(h.children,g)}return g(e.groupMetadata),m[0].checkbox=s.ui.checkAll_thead,m}();function c(){function m(y,E,b){var w=s.data.groupMetadata.lookup.byId[y].rowValIndex;console.debug("[DataVis // %s // Toggle] show = %s, id = %s, rowValIndex = %s",s.toString(),E,y,w),E&&!a[y]&&(console.debug("[DataVis // %s // Toggle] Rendering: group metadata ID = %s",s.toString(),y),u(y,0,b)),s.ui.tbody.find("tr").filter(function(T,x){return j(x).attr("data-wcdv-in-group")===""+y}).each(function(T,x){x=j(x),x.attr("data-wcdv-toggles-group")&&m(+x.attr("data-wcdv-toggles-group"),E&&x.attr("data-wcdv-expanded")==="1",x),E?x.show():x.hide()}),s.ui.tbl.floatThead&&s.ui.tbl.floatThead("reflow")}var g=j(this),h=g.closest("tr"),v=h.attr("data-wcdv-expanded")==="0"?"show":"hide";v==="show"&&h.find(".spinner").show(),window.setTimeout(function(){m(+h.attr("data-wcdv-toggles-group"),v==="show",h),v==="show"&&h.find(".spinner").hide(),h.attr("data-wcdv-expanded",v==="show"?"1":"0"),g.attr("data-wcdv-expanded",v==="show"?"1":"0"),g.html(Ne(v==="show"?"fa-minus-square-o":"fa-plus-square-o"))})}function u(m,g,h,v){if(m!=null&&typeof m!="number")throw new Error("Call Error: `metadataId` must be null or a number");if(g!=null&&typeof g!="number")throw new Error("Call Error: `startIndex` must be null or a number");if(h!=null&&!(h instanceof j))throw new Error("Call Error: `afterElement` must be null or an instance of jQuery");if(m==null&&(m=0),g==null&&(g=0),g>0&&h==null)throw new Error("Call Error: `afterElement` required when `startIndex` > 0");var y=e.groupMetadata.lookup.byId[m];if(y==null)throw new Error("No group metadata for specified ID: "+m);var E=s.defn.table.limit,b;if(h!=null&&g>0&&(b=h.nextAll('tr.wcdvgrid_more[data-wcdv-in-group="'+m+'"]'),h=b.prev(),b.remove()),y.children){var w,T,x,D,O,R,I,P,M,B,z,te,pe,Ce,Oe={"group:singular":"group","group:plural":"groups","row:singular":"row","row:plural":"rows"},ve=hl(k.pluck(y.children,"rowValElt")),ne=ve.length,V=!s.features.limit||v?ne:g===0?E.threshold:E.chunkSize;for(w=g;w<ne&&w<g+V;w+=1){for(x=y.children[ve[w]],D=j("<tr>").attr("data-wcdv-in-group",y.id).attr("data-wcdv-toggles-group",x.id).attr("data-wcdv-expanded","0"),T=0;T<x.groupFieldIndex;T+=1)j("<th>",{class:"wcdv_group_col_spacer"}).appendTo(D);var fe=x.children==null&&x.rows.length===0;R=j("<button>",{type:"button",class:"wcdv_icon_button wcdv_expand_button","data-wcdv-expanded":"0",disabled:fe}).html(Ne(fe?"fa-square-o":"fa-plus-square-o")),j("<th>",{class:"wcdv_group_col_spacer"}).append(R).appendTo(D),s.features.rowSelect&&(O=j("<input>",{type:"checkbox",class:"wcdv_select_group","data-group-id":x.id}),s.groupInfo[x.id].checkbox=O,j("<th>",{class:"wcdv_group_col_spacer"}).append(O).appendTo(D)),M=s.colConfig.get(x.groupField)||{},B=s.typeInfo.get(x.groupField),z=x.rowValCell||x.rowValElt,x.groupSpec.fun!=null&&(B={type:dt.get(x.groupSpec.fun).resultType},z=x.rowValElt),te=ht(M,B,z),pe=j("<span>"),te instanceof Element||te instanceof j?pe.append(te):M.allowHtml?pe.html(te):pe.text(te),I="(",x.children!=null&&(I+=x.numChildren+" ",I+=(x.numChildren===1?Oe["group:singular"]:Oe["group:plural"])+", "),I+=x.numRows+" ",I+=x.numRows===1?Oe["row:singular"]:Oe["row:plural"],I+=")",P=j("<span>").css({"margin-left":"0.5em"}).text(I);var ye=j("<div>",{class:"spinner"}).append(j("<div>",{class:"bounce1"})).append(j("<div>",{class:"bounce2"})).append(j("<div>",{class:"bounce3"})).hide();j("<th>",{class:"wcdv_group_value","data-wcdv-field":x.groupField,colspan:n.length-x.groupFieldIndex}).append(pe).append(P).append(ye).appendTo(D),h!=null?h.after(D):s.ui.tbody.append(D),h=D;var ue=me(s.opts,"events","rowRender");typeof ue=="function"&&ue(D,{isGroup:!0,groupMode:"detail",groupField:x.groupField,rowValElt:x.rowValCell.value,groupMetadata:x})}if(a[y.id]=!0,w<ne){l[y.id]=D;for(var Ie=y.parent;Ie!=null;Ie=Ie.parent)l[Ie.id]=D;for(b=j("<tr>",{class:"wcdvgrid_more","data-wcdv-in-group":y.id}),T=0;T<x.groupFieldIndex;T+=1)j("<th>",{class:"wcdv_group_col_spacer"}).appendTo(b);Ce=n.length+1+(s.features.rowSelect?1:0)+(s.features.rowReorder?1:0)-(y.groupFieldIndex||0),ye=j("<div>",{class:"spinner"}).append(j("<div>",{class:"bounce1"})).append(j("<div>",{class:"bounce2"})).append(j("<div>",{class:"bounce3"})).hide(),j("<td>",{class:"wcdv_show_more","data-wcdv-in-group":y.id,"data-wcdv-show-more-start":w,colspan:Ce}).append(Ne("F13A")).append(j("<span>Showing rows 1"+w+" of "+ne+".</span>").css({"padding-left":"0.5em"})).append(j('<button type="button">Load '+E.chunkSize+" more rows.</button>").css({"margin-left":"0.5em"})).append(j('<button type="button" class="wcdv_show_all">Load all rows.</button>').css({"margin-left":"0.5em"})).append(ye).appendTo(b),D.after(b)}}else if(y.rows){var ce,O,Le,He,Ce,V=!s.features.limit||v?y.rows.length-g:g===0?E.threshold:E.chunkSize;for(w=g;w<y.rows.length&&w<g+V;w+=1){Le=y.rows[w],He=j("<tr>",{id:s.defn.table.id+"_"+w,"data-row-num":Le.rowNum,"data-wcdv-in-group":y.id,"data-wcdv-rowValIndex":y.rowValIndex});for(var We=0;We<e.groupFields.length+1;We+=1)j("<td>",{class:"wcdv_group_col_spacer"}).appendTo(He);s.features.rowSelect&&(ce=s.isSelected(Le.rowNum),O=j("<input>",{type:"checkbox","data-row-num":Le.rowNum,class:"wcdv_select_row",checked:ce}),j("<td>",{class:"wcdv_group_col_spacer"}).append(O).appendTo(He)),k.each(n,function(U,J){if(!(e.groupFields.indexOf(U)>=0)){var K=s.colConfig.get(U)||{},q=Le.rowData[U],ie=j("<td>",{"data-wcdv-field":U});J>0&&ie.addClass("wcdv_pivot_colval_boundary");var Q=ht(K,t.get(U),q);Q instanceof Element||Q instanceof j?ie.append(Q):K.allowHtml&&t.get(U).type==="string"?ie.html(Q):Q===""?ie.html("&nbsp;"):ie.text(Q),s.setCss(ie,U),s.setAlignment(ie,K,t.get(U)),He.append(ie)}}),s.features.rowSelect&&ce&&He.children("td").addClass("wcdv_selected_row"),s.ui.tr[w]=He,h.after(He),h=He;var ue=me(s.opts,"events","rowRender");typeof ue=="function"&&ue(He,{isGroup:!0,groupMode:"details",rowData:Le.rowData,rowNum:Le.rowNum})}if(a[y.id]=!0,w<y.rows.length){l[y.id]=He;for(var Ie=y.parent;Ie!=null;Ie=Ie.parent)l[Ie.id]=He;for(b=j("<tr>",{class:"wcdvgrid_more","data-wcdv-in-group":y.id}),T=0;T<y.groupFieldIndex+1;T+=1)j("<th>",{class:"wcdv_group_col_spacer"}).appendTo(b);Ce=n.length+1+(s.features.rowSelect?1:0)+(s.features.rowReorder?1:0)-(y.groupFieldIndex+1),ye=j("<div>",{class:"spinner"}).append(j("<div>",{class:"bounce1"})).append(j("<div>",{class:"bounce2"})).append(j("<div>",{class:"bounce3"})).hide(),j("<td>",{class:"wcdv_show_more","data-wcdv-in-group":y.id,"data-wcdv-show-more-start":w,colspan:Ce}).append(Ne("F13A")).append(j("<span>Showing rows 1"+w+" of "+y.rows.length+".</span>").css({"padding-left":"0.5em"})).append(j('<button type="button">Load '+E.chunkSize+" more rows.</button>").css({"margin-left":"0.5em"})).append(j('<button type="button" class="wcdv_show_all">Load all rows.</button>').css({"margin-left":"0.5em"})).append(ye).appendTo(b),He.after(b)}}if(s._updateSelectionGui(),s.features.floatingHeader)switch(me(s.defn,"table","floatingHeader","method")){case"tabletool":window.TableTool.update();break}}function f(m){var g=j(this).closest("td"),h=+g.attr("data-wcdv-in-group"),v=+g.attr("data-wcdv-show-more-start"),y=l[h];y.nextAll('tr.wcdvgrid_more[data-wcdv-in-group="'+h+'"]').find(".spinner").show(),window.setTimeout(function(){u(h,v,y,m)})}if(u(),s.ui.tbody.on("click","button.wcdv_expand_button",c),s.ui.tbody.on("click","td.wcdv_show_more button.wcdv_show_all",function(m){m.stopPropagation(),f.call(this,!0)}),s.ui.tbody.on("click","td.wcdv_show_more",function(m){f.call(this,!1)}),s._updateSelectionGui(),s.features.floatingHeader)switch(me(s.defn,"table","floatingHeader","method")){case"tabletool":window.TableTool.update();break}if(typeof i=="function")return i()};yi.prototype.drawFooter=function(e,t,n){var i=this,r=function(l){i.ui.checkAll_tfoot=j("<input>",{name:"checkAll",type:"checkbox",class:"wcdv_select_group","data-group-id":"0"}).on("change",function(c){i.checkAll(c)}),j("<td>",{class:"wcdv_group_col_spacer"}).append(i.ui.checkAll_tfoot).appendTo(l)},s=function(){var l=j("<tr>");i.features.rowSelect&&r(l);for(var c=0;c<t.groupFields.length+1;c+=1)j("<td>",{class:"wcdv_group_col_spacer"}).appendTo(l);var u=!1;l.append(k.map(e,function(f,m){if(!(t.groupFields.indexOf(f)>=0)){var g=i.colConfig.get(f)||{};n.get(f);var h=j("<td>"),v=me(i.defn,"table","footer",f),y,E;if(i.setCss(h,f),i.setAlignment(h,g,n.get(f)),v==null)u&&h.addClass("wcdv_divider"),u=!1;else{m>0&&h.addClass("wcdv_divider"),u=!0,v.fields==null&&(v.fields=[f]),console.debug("[DataVis // %s // Footer(%s)] Creating footer using config: %O",i.toString(),f,v);var b=new Yi("all",v,0,i.colConfig,n,function(T,x){x.needsDecoding&&(console.debug('[DataVis // %s // Footer(%s) // %s] Converting data: { field = "%s", type = "%s" }',i.toString(),f,T,x.field,x.type),Source.decodeAll(t.dataByRowId,x.field)),x.deferDecoding=!1,x.needsDecoding=!1});y=b.instance.calculate(t.groupMetadata.rows);var w;if(Xt(y))E=y;else switch(b.instance.inheritFormatting?w=ht(b.colConfig[0],b.typeInfo[0],y,{overrideType:b.instance.getType()}):w=ht(null,null,y,{overrideType:b.instance.getType(),decode:!1}),b.debug&&console.debug("[DataVis // %s // Footer(%s)] Aggregate result: %s",i.toString(),f,JSON.stringify(y)),typeof v.format){case"function":E=v.format(w);break;case"string":E=$t.sprintf(v.format,w);break;default:throw new Error('Footer config for field "'+f+'": `format` must be a function or a string')}E instanceof Element||E instanceof j?h.append(E):h.text(E)}return h}})),i.ui.tfoot.append(l)},a=function(){if(!(i.opts.footer==null||!i.opts.stealGridFooter)){var l=j("<tr>");Wl(i.opts.footer)||l.hide(),i.features.rowSelect&&j("<td>",{class:"wcdv_group_col_spacer"}).appendTo(l),j("<td>",{colspan:e.length+1}).append(i.opts.footer).appendTo(l),i.ui.tfoot.append(l)}};s(),a()};yi.prototype.addWorkHandler=function(){var e=this;e.view.on(je.events.workEnd,function(t,n){if(console.debug("DataVis // GRID TABLE - GROUP - DETAIL // HANDLER (ComputedView.workEnd)","ComputedView has finished doing work"),!n.group||n.pivot){e.fire("unableToRender",null,n);return}console.debug("DataVis // GRID TABLE - GROUP - DETAIL // HANDLER (ComputedView.workEnd)","Redrawing because the view has done work"),e.draw(e.root)},{who:e})};yi.prototype._addRowSelectHandler=function(){var e=this;e.ui.tbody.on("change",'input[type="checkbox"].wcdv_select_row',function(){var t=j(this),n=+t.attr("data-row-num"),i=t.prop("checked");i?e.select(n):e.unselect(n)}),e.ui.tbody.on("change",'input[type="checkbox"].wcdv_select_group',function(){var t=j(this),n=t.prop("checked"),i=+t.attr("data-group-id"),r=[];function s(a){a.children==null?r=r.concat(k.pluck(e.data.data[a.rowValIndex],"rowNum")):k.each(a.children,s)}s(e.data.groupMetadata.lookup.byId[i]),n?e.select(r):e.unselect(r)})};yi.prototype._updateSelectionGui=function(){var e=this;e.root.find("tbody td.wcdv_selected_row").removeClass("wcdv_selected_row"),e.root.find('tbody input[type="checkbox"].wcdv_select_row').prop("checked",!1),e.root.find('tbody input[type="checkbox"].wcdv_select_group').prop("checked",!1);var t=e.root.find("tbody tr").filter(function(a,l){return e.selection.indexOf(+j(l).attr("data-row-num"))>=0});t.children("td").addClass("wcdv_selected_row"),t.find('input[type="checkbox"].wcdv_select_row').prop("checked",!0);var n={};k.each(k.keys(e.data.groupMetadata.lookup.byId),function(a){n[a]=0});for(var i=0;i<e.selection.length;i+=1){var r=e.selection[i],s=me(e.data,"groupMetadata","lookup","byRowNum",r,"id");s!=null&&(n[s]==null&&(n[s]=0),n[s]+=1)}(function(){function a(l){l.children!=null&&(n[l.id]=0,k.each(l.children,function(c){a(c),n[l.id]+=n[c.id]}))}a(e.data.groupMetadata)})(),k.each(n,function(a,l){var c=e.data.groupMetadata.lookup.byId[l].numRows,u=e.root.find('input[type="checkbox"][data-group-id="'+l+'"].wcdv_select_group');u.length!==0&&(c===0?u.prop({disabled:!0,indeterminate:!1,checked:!1}):a===0?u.prop({disabled:!1,indeterminate:!1,checked:!1}):c===a?u.prop({disabled:!1,indeterminate:!1,checked:!0}):u.prop({disabled:!1,indeterminate:!0,checked:!1}))})};yi.prototype.checkAll=function(e){var t=this;j(e.target).parents("div.tabletool").find('input[name="checkAll"]').prop("checked",e.target.checked),e.target.checked?t.select():t.unselect()};yi.prototype.addDataToCsv=function(e){var t=this,n=jr(t.colConfig,e,t.typeInfo);console.debug("[DataVis // %s // Generate CSV] Started generating CSV file",t.toString()),t.fire("generateCsvProgress",null,0),t.csv.start(),t.csv.addRow(),k.each(e.groupFields,function(r){var s=t.colConfig.get(r)||{};t.csv.addCol(s.displayText||r)}),k.each(k.difference(n,e.groupFields),function(r){var s=t.colConfig.get(r)||{};t.csv.addCol(s.displayText||r)});function i(r,s){s.children!=null?k.each(k.keys(s.children).sort(),function(a){t.csv.addRow();for(var l=0;l<r;l+=1)t.csv.addCol();t.csv.addCol(a);for(var l=r+1;l<n.length;l+=1)t.csv.addCol();i(r+1,s.children[a])}):k.each(s.rows,function(a){t.csv.addRow();for(var l=0;l<r;l+=1)t.csv.addCol();k.each(k.difference(n,e.groupFields),function(c,u){var f=t.colConfig.get(c)||{},m=a.rowData[c],g=ht(f,t.typeInfo.get(c),m);g instanceof Element?t.csv.addCol(j(g).text()):g instanceof j?t.csv.addCol(g.text()):f.allowHtml&&t.typeInfo.get(c).type==="string"&&g.charAt(0)==="<"?t.csv.addCol(j(g).text()):t.csv.addCol(g)})})}i(0,e.groupMetadata),t.csv.finish(function(){console.debug("[DataVis // %s // Generate CSV] Finished generating CSV file",t.toString()),t.csvLock.unlock(),t.fire("generateCsvProgress",null,100),t.fire("csvReady")})};At.registry.set("table_group_detail",yi);var Rs=Ee("GridTableGroupSummary",lt,function(e,t,n,i,r,s,a){var l=this;l.super.ctor.apply(l,arguments),l.features.limit=!1,l.features.rowSelect=!1,l.features.footer=!1,console.debug("DataVis // GRID TABLE - GROUP - SUMMARY","Constructing grid table; features = %O",i),di(["rowVals","groupAggregates"],l.opts,"displayOrder")});Rs.prototype.canRender=function(e){return["group"].indexOf(e)>=0};Rs.prototype.drawHeader=function(e,t,n,i){var r=this,s=j("<tr>"),a,l,c,u;r.csv.addRow(),k.each(r.opts.displayOrder,function(f,m){typeof f=="string"&&(f==="rowVals"?k.each(t.groupFields,function(g,h){var v=r.colConfig.get(g)||{},y=v.displayText||g;a=j("<span>",{class:"wcdv_heading_title","data-wcdv-field":g,"data-wcdv-draggable-origin":"GRID_TABLE_HEADER"}).text(y)._makeDraggableField(),c=j("<div>"),u=j("<div>").addClass("wcdv_heading_container").append(a,c),l=j("<th>").append(u),r.csv.addCol(v.displayText||g),r._addSortingToHeader(t,"vertical",{groupFieldIndex:h},c.get(0),me(t,"agg","info","group")),r.setCss(l,g),r.ui.thMap[g]=l,s.append(l)}):f==="groupAggregates"?r.drawHeader_aggregates(t,s,m,r.opts.displayOrder.length):f==="addCols"&&r.drawHeader_addCols(s,n,i))}),r.ui.thead.append(s)};Rs.prototype.drawBody=function(e,t,n,i,r){var s=this,a=s._getAggInfo(e),l,c,u;s._setupFullValueWin(e),k.each(e.data,function(m,g){var h=document.createElement("tr");h.setAttribute("data-wcdv-rvi",g),s.csv.addRow(),k.each(s.opts.displayOrder,function(v,y){typeof v=="string"&&(v==="rowVals"?s.drawBody_rowVals(e,h,g):v==="groupAggregates"?s.drawBody_groupAggregates(e,h,g,y,s.opts.displayOrder.length):v==="addCols"&&k.each(s.opts.addCols,function(E){var b=document.createElement("td"),w=E.value(e.data,g,u,l),T;w instanceof j&&(w=w.get(0)),w instanceof Element?(b.appendChild(w),s.csv.addCol(w.innerText)):(c.instance.inheritFormatting||(T=ht(null,null,w,{alwaysFormat:!0,decode:!1})),b.innerText=T,s.csv.addCol(T)),me(r,"pivotConfig","aggField")&&s.setAlignment(b,s.colConfig.get(r.pivotConfig.aggField),t.get(r.pivotConfig.aggField)),h.appendChild(b)}))}),s.ui.tbody.append(h)});var f=function(){var m;m=j("<tr>",{class:"wcdv_btd"}),s.csv.addRow(),k.each(s.opts.displayOrder,function(g){switch(g){case"rowVals":for(var h=0;h<e.groupFields.length-1;h+=1)s.csv.addCol("");s.csv.addCol("Total");var v=j("<span>",{class:"wcdv_heading_title"}).text("Total"),y=j("<div>"),E=j("<div>").addClass("wcdv_heading_container").append(v,y);j("<th>").attr({colspan:e.groupFields.length}).append(E).appendTo(m);break;case"groupAggregates":k.each(a.all,function(b,w){var T=e.agg.results.all[b.aggNum],x=document.createElement("td");x.setAttribute("data-wcdv-agg-scope","all"),x.setAttribute("data-wcdv-agg-num",b.aggNum);var D;T instanceof j&&(T=T.get(0)),T instanceof Element?(x.appendChild(T),s.csv.addCol(T.innerText)):(b.instance.inheritFormatting?(D=ht(b.colConfig[0],b.typeInfo[0],T,{overrideType:b.instance.getType()}),An(x,D,{field:b.fields[0],colConfig:b.colConfig[0],typeInfo:b.typeInfo[0]})):(D=ht(null,null,T,{overrideType:b.instance.getType(),decode:!1}),An(x,D)),s.csv.addCol(x.innerText)),(s.opts.drawInternalBorders||a.all.length>1)&&x.classList.add(w===0?"wcdv_pivot_aggregate_boundary":"wcdv_pivot_colval_boundary"),s.setAlignment(x,b.colConfig[0],b.typeInfo[0],b.instance.getType()),m.append(x)});break}}),m.appendTo(s.ui.tbody)};if(a.all.length>0&&f(),s.features.floatingHeader)switch(me(s.defn,"table","floatingHeader","method")){case"tabletool":window.TableTool.update();break}if(s.csv.finish(function(){console.debug("[DataVis // %s // Generate CSV] Finished generating CSV file",s.toString()),s.csvLock.unlock(),s.fire("generateCsvProgress",null,100),s.fire("csvReady")}),typeof i=="function")return i()};Rs.prototype.drawFooter=function(e,t,n){var i=this,r;r=j("<tr>"),i.features.rowSelect&&(i.ui.checkAll_tfoot=j("<input>",{name:"checkAll",type:"checkbox"}).on("change",function(s){i.checkAll(s)}),j("<td>",{class:"wcdv_group_col_spacer"}).append(i.ui.checkAll_tfoot).appendTo(r)),i.opts.footer!=null&&i.opts.stealGridFooter&&r.append(j("<td>",{colspan:t.groupFields.length+i._getAggInfo(t).group.length}).append(i.opts.footer)),r.children().length>0&&i.ui.tfoot.append(r)};Rs.prototype.addWorkHandler=function(){var e=this;e.view.on(je.events.workEnd,function(t,n){if(console.debug("DataVis // GRID TABLE - GROUP - SUMMARY // HANDLER (ComputedView.workEnd)","ComputedView has finished doing work"),!n.group||n.pivot){e.fire("unableToRender",null,n);return}console.debug("DataVis // GRID TABLE - GROUP - SUMMARY // HANDLER (ComputedView.workEnd)","Redrawing because the view has done work"),e.draw(e.root)},{who:e})};At.registry.set("table_group_summary",Rs);var zo=Ee("GridTablePivot",lt,function(e,t,n,i,r,s,a){var l=this;l.super.ctor.apply(l,arguments),l.features.limit=!1,l.features.footer=!1,console.debug("DataVis // GRID TABLE - PIVOT","Constructing grid table; features = %O",i),di(["rowVals","cells","groupAggregates","addCols"],l.opts,"displayOrder")});zo.prototype.canRender=function(e){return["pivot"].indexOf(e)>=0};zo.prototype.drawHeader=function(e,t,n,i){for(var r=this,s,a,l,c,u,f,m=function(w){k.each(t.groupFields,function(T,x){var D=r.colConfig.get(T)||{};l=j("<span>").addClass("wcdv_heading_title").text(D.displayText||T),r.csv.addCol(D.displayText||T),c=j("<div>"),u=j("<div>").addClass("wcdv_heading_container").append(l,c),f=j("<th>").dvAttr({gfi:x,field:T,"draggable-origin":"GRID_TABLE_HEADER"}).append(u)._makeDraggableField(),r._addSortingToHeader(t,"vertical",{groupFieldIndex:x},c.get(0),Ze([],t,"agg","info","cell")),r.setCss(f,T),r.ui.thMap[T]=f,w.append(f)})},g=function(w){if(t.groupFields.length>1){w.append(j("<th>",{colspan:t.groupFields.length-1}));for(var T=0;T<t.groupFields.length-1;T+=1)r.csv.addCol("")}},h=function(w,T,x){var D,O,R=r._getAggInfo(t),I=r._getDisplayFormat(),P=T===t.pivotFields.length-1,M=t.pivotFields[T],B=r.colConfig.get(M)||{},z=t.pivotSpec[T],te=r.typeInfo.get(M);z.fun!=null&&(te={type:dt.get(z.fun).resultType});var pe=j("<span>").addClass("wcdv_heading_title").text(B.displayText||M);r.csv.addCol(B.displayText||M);var Ce=j("<div>"),Oe=j("<div>").addClass("wcdv_heading_container").append(pe,Ce),ve=j("<th>").dvAttr({field:M,"draggable-origin":"GRID_TABLE_HEADER"}).append(Oe)._makeDraggableField();r._addSortingToHeader(t,"horizontal",{pivotFieldIndex:T},Ce.get(0),Ze([],t,"agg","info","cell")),r.setCss(ve,M),r.ui.thMap[M]=ve,w.append(ve);var ne=null,V=0;for(O=0;O<t.colVals.length;O+=1)if(D=t.colVals[O][T],D=ht(r.colConfig.get(M),te,D),D!==ne||P){if(ne!==null){var ye=V;(I.cell.length||R.cell.length)>=2&&(ye*=R.cell.length),ve.attr("colspan",ye),w.append(ve);for(var fe=0;fe<ye-1;fe+=1)r.csv.addCol("")}ne=D,V=1,pe=j("<span>").addClass("wcdv_heading_title"),kr(pe,D,{field:M,colConfig:B,typeInfo:te}),r.csv.addCol(pe.text()),Ce=j("<div>"),Oe=j("<div>").addClass("wcdv_heading_container").append(pe,Ce),ve=j("<th>").dvAttr("cvi",O).append(Oe),r.setCss(ve,D),P&&r._addSortingToHeader(t,"vertical",{colVal:t.colVals[O],aggNum:0},Ce.get(0),Ze([],t,"agg","info","cell")),(I.cell.length||R.cell.length)===1?(s=t.agg.info.cell[0],r.setAlignment(ve,s.colConfig[0],s.typeInfo[0],s.instance.getType())):(I.cell.length||R.cell.length)>1&&r.setAlignment(ve,null,null,null,"center"),(r.opts.drawInternalBorders||(I.cell.length||R.cell.length)>1)&&ve.addClass("wcdv_pivot_colval_boundary")}else V+=1;var ye=V;for((I.cell.length||R.cell.length)>=2&&(ye*=I.cell.length||R.cell.length),ve!=null&&(ve.attr("colspan",ye),w.append(ve)),fe=0;fe<ye-1;fe+=1)r.csv.addCol("")},v=function(w){var T=r._getAggInfo(t),x=r._getDisplayFormat(),D=x.cell.length||T.cell.length;j("<hr>",{class:"wcdv_hr_gradient"});var O=j("<div>&nbsp;</div>"),R=j("<th>",{class:"wcdv_pivot_colval_boundary wcdv_cell_empty",colspan:t.colVals.length*Math.max(D,1)});O.appendTo(R),R.appendTo(w);for(var I=0;I<t.colVals.length*Math.max(D,1);I+=1)r.csv.addCol("")},y=function(w,T,x){var D=r._getAggInfo(t),O=D.group.length+Ze(0,r.opts,"addCols","length");if(O>0){var R=j("<th>",{colspan:O});T>0&&R.addClass("wcdv_bld"),T<x-1&&R.addClass("wcdv_brd"),w.append(R)}},E=function(w,T,x){r.drawHeader_aggregates(t,w,T,x),r.drawHeader_addCols(w,n,i)},b=0;b<t.pivotFields.length;b+=1)r.csv.addRow(),a=j("<tr>").dvAttr("pfi",b),k.each(r.opts.displayOrder,function(w,T){if(typeof w=="string")switch(w){case"rowVals":g(a);break;case"cells":h(a,b);break;case"groupAggregates":y(a,T,r.opts.displayOrder.length);break}}),a.appendTo(r.ui.thead);r.csv.addRow(),a=j("<tr>"),k.each(r.opts.displayOrder,function(w,T){if(typeof w=="string")switch(w){case"rowVals":m(a);break;case"cells":v(a);break;case"groupAggregates":E(a,T,r.opts.displayOrder.length);break}}),a.appendTo(r.ui.thead)};zo.prototype.drawBody=function(e,t,n,i,r){var s=this,a;r=r||{},r.pivotConfig=r.pivotConfig||{};var l=s._getAggInfo(e),c=s._getDisplayFormat();if(e.groupFields.length===0)return typeof i=="function"?i():void 0;s._setupFullValueWin(e);var u=gl.makeEnv();gl.addHelpers(u,s.data);var f={};if(k.each(c,function(m,g){f[g]=k.map(m,function(h){var v;try{v=u.compile(h)}catch(y){v=function(){return y.message}}return v})}),k.each(e.data,function(m,g){s.csv.addRow();var h=document.createElement("tr");h.setAttribute("data-wcdv-rvi",g),k.each(s.opts.displayOrder,function(v,y){if(typeof v=="string")switch(v){case"rowVals":s.drawBody_rowVals(e,h,g);break;case"cells":var E=[];k.each(m,function(b,w){c.cell.length>0?k.each(c.cell,function(T,x){var D=document.createElement("td");D.classList.add("wcdv_pivot_cell"),D.setAttribute("data-wcdv-rvi",g),D.setAttribute("data-wcdv-cvi",w),D.innerHTML=f.cell[x]({rowValIdx:g,colValIdx:w}),k.every(e.groupSpec,function(O){return O.fun==null})&&k.every(e.pivotSpec,function(O){return O.fun==null})&&s._addDrillDownClass(D),s.opts.drawInternalBorders&&D.classList.add("wcdv_pivot_colval_boundary"),h.appendChild(D)}):l.cell.length>0?k.each(l.cell,function(T,x){var D=T.aggNum,O=T.instance.getType(),R=e.agg.results.cell[D],I=R[g][w],P=document.createElement("td");P.classList.add("wcdv_pivot_cell"),P.setAttribute("data-wcdv-rvi",g),P.setAttribute("data-wcdv-cvi",w),P.setAttribute("data-wcdv-agg-scope","cell"),P.setAttribute("data-wcdv-agg-num",T.aggNum),E.push(I);var M;I instanceof j&&(I=I.get(0)),I instanceof Element?(P.appendChild(I),s.csv.addCol(I.innerText)):s.opts.hideBottomValueAggResults&&I===T.instance.bottomValue?(P.innerHTML="&nbsp;",s.csv.addCol("")):(T.instance.inheritFormatting?(M=ht(T.colConfig[0],T.typeInfo[0],I,{overrideType:O}),An(P,M,{field:T.fields[0],colConfig:T.colConfig[0],typeInfo:T.typeInfo[0]})):(M=ht(null,null,I,{overrideType:O,decode:!1}),An(P,M)),s.csv.addCol(P.innerText)),k.every(e.groupSpec,function(B){return B.fun==null})&&k.every(e.pivotSpec,function(B){return B.fun==null})&&s._addDrillDownClass(P),(s.opts.drawInternalBorders||l.cell.length>1)&&x===0&&P.classList.add("wcdv_pivot_colval_boundary"),s.setAlignment(P,T.colConfig[0],T.typeInfo[0],O),h.appendChild(P)}):h.appendChild(document.createElement("td"))});break;case"groupAggregates":s.drawBody_groupAggregates(e,h,g,y,s.opts.displayOrder.length);break;case"addCols":k.each(s.opts.addCols,function(b){var w=b.value(e.data,g,E,a),T=document.createElement("td"),x;w instanceof j&&(w=w.get(0)),w instanceof Element?(T.appendChild(w),s.csv.addCol(w.innerText)):(x=ht(null,null,w,{alwaysFormat:!0,decode:!1}),T.innerText=x,s.csv.addCol(x)),me(r,"pivotConfig","aggField")&&s.setAlignment(T,s.colConfig.get(r.pivotConfig.aggField),t.get(r.pivotConfig.aggField)),h.appendChild(T)});break}}),s.ui.tbody.append(h)}),k.each(l.pivot,function(m,g){var h,v,y=m.aggNum,E,b,w,T,x;T=j("<tr>"),s.csv.addRow(),g===0&&T.addClass("wcdv_btd"),k.each(s.opts.displayOrder,function(D){if(typeof D=="string")switch(D){case"rowVals":if(e.groupFields.length>1)for(O=0;O<e.groupFields.length-1;O+=1)s.csv.addCol("");s.csv.addCol(m.instance.getFullName()),h=j("<span>").addClass("wcdv_heading_title").text(m.instance.getFullName()),b=j("<div>"),w=j("<div>").addClass("wcdv_heading_container").append(h,b),j("<th>").attr({colspan:e.groupFields.length}).append(w).appendTo(T),s._addSortingToHeader(e,"horizontal",{aggType:"pivot",aggNum:y},b.get(0),Ze([],e,"agg","info","cell"));break;case"cells":k.each(e.colVals,function(R,I){for(var P=0;P<g;P+=1)s.csv.addCol("");var M=j("<td>").dvAttr({cvi:I,"agg-scope":"pivot","agg-num":m.aggNum}),B=e.agg.results.pivot[y][I];for(Xt(B)?(M.append(B),s.csv.addCol(fi(B).innerText)):(m.instance.inheritFormatting?(v=ht(m.colConfig[0],m.typeInfo[0],B,{overrideType:m.instance.getType()}),An(M,v,{field:m.fields[0],colConfig:m.colConfig[0],typeInfo:m.typeInfo[0]})):(v=ht(null,null,B,{overrideType:m.instance.getType(),decode:!1}),An(M,v)),s.csv.addCol(M.text())),k.every(e.pivotSpec,function(z){return z.fun==null})&&s._addDrillDownClass(M.get(0)),(c.cell.length||l.cell.length)>1&&M.attr("colspan",c.cell.length||l.cell.length),(s.opts.drawInternalBorders||l.cell.length>1)&&M.addClass("wcdv_pivot_colval_boundary"),s.setAlignment(M,m.colConfig[0],m.typeInfo[0],m.instance.getType()),M.appendTo(T),P=g+1;P<l.pivot.length;P+=1)s.csv.addCol("")});break;case"groupAggregates":if(me(e,"agg","info","all",y)){for(O=0;O<g;O+=1)x=j("<td><div>&nbsp;</div></td>"),(s.opts.drawInternalBorders||l.cell.length>1)&&x.addClass(O===0?"wcdv_pivot_aggregate_boundary":"wcdv_pivot_colval_boundary"),x.addClass("wcdv_cell_empty"),s.csv.addCol(""),x.appendTo(T);m=e.agg.info.all[y],E=e.agg.results.all[y],x=j("<td>"),x.attr("data-wcdv-agg-scope","all"),x.attr("data-wcdv-agg-num",m.aggNum),Xt(E)?(x.append(E),s.csv.addCol(fi(E).innerText)):(m.instance.inheritFormatting?(v=ht(m.colConfig[0],m.typeInfo[0],E,{overrideType:m.instance.getType()}),An(x,v,{field:m.fields[0],colConfig:m.colConfig[0],typeInfo:m.typeInfo[0]})):(v=ht(null,null,E,{overrideType:m.instance.getType(),decode:!1}),An(x,v)),s.csv.addCol(x.text())),(s.opts.drawInternalBorders||l.cell.length>1)&&x.addClass(g===0?"wcdv_pivot_aggregate_boundary":"wcdv_pivot_colval_boundary"),s.setAlignment(x,m.colConfig[0],m.typeInfo[0],m.instance.getType()),x.appendTo(T);for(var O=g+1;O<l.cell.length;O+=1)x=j("<td><div>&nbsp;</div></td>"),(s.opts.drawInternalBorders||l.cell.length>1)&&x.addClass("wcdv_pivot_colval_boundary"),x.addClass("wcdv_cell_empty"),s.csv.addCol(""),x.appendTo(T)}break}}),T.appendTo(s.ui.tbody)}),s.csv.finish(function(){console.debug("[DataVis // %s // Generate CSV] Finished generating CSV file",s.toString()),s.csvLock.unlock(),s.fire("generateCsvProgress",null,100),s.fire("csvReady")}),typeof i=="function")return i()};zo.prototype.addWorkHandler=function(){var e=this;e.view.on(je.events.workEnd,function(t,n){if(console.debug("DataVis // "+e.toString()+" // HANDLER (ComputedView.workEnd)","ComputedView has finished doing work"),!n.pivot){console.debug("DataVis // "+e.toString()+" // HANDLER (ComputedView.workEnd)","Unable to render this data: %O",n),e.fire("unableToRender",null,n);return}console.debug("DataVis // "+e.toString()+" // HANDLER (ComputedView.workEnd)","Redrawing because the view has done work"),e.draw(e.root)},{who:e})};At.registry.set("table_pivot",zo);var rt=Ee("Grid",Object,function(e,t,n){var i=this;t=Qe(t,{runImmediately:!0,showOnDataChange:!0,showToolbar:!0,showControls:!1}),i.setName(t.name);var r=me(e,"server","filter")&&me(e,"server","limit")!==-1;if(i._isIdle=!1,i.generateCsv=!1,i.csvReady=!1,i.exportLock=new qt("Export"),i.colConfigLock=new qt("colConfig"),i.rootHasFixedHeight=!1,i.timing=new cr,i.colConfigWin=new gv(i),i.debugWin=new mv,i.defn=i._normalize(e),i.opts=t,i.grid=null,i.ui={},i.selected={},i._validateFeatures(),i._validateId(i.defn.id),i.debug(null,"Definition: %O",e),i.debug(null,"Options: %O",t),e.computedView!=null&&!(e.computedView instanceof je))throw new Error("Call Error: `defn.computedView` must be null or an instance of ComputedView");if(e.mirageView!=null&&!(e.mirageView instanceof gn))throw new Error("Call Error: `defn.mirageView` must be null or an instance of MirageView");if(e.prefs!=null&&!(e.prefs instanceof tt))throw new Error("Call Error: `defn.prefs` must be null or an instance of Prefs");i.computedView=e.computedView,i.mirageView=e.mirageView,i.prefs=e.prefs,i.computedView==null&&(i.debug("COMPUTED VIEW","No computed view specified, creating our own."),i.computedView=new je),i.mirageView==null&&(i.debug("MIRAGE VIEW","No mirage view specified, creating our own."),i.mirageView=new gn),i.prefs==null&&(i.debug("PREFS","No prefs specified, creating our own."),i.prefs=new tt(i.id)),i.computedView.setPrefs(i.prefs),i.mirageView.setPrefs(i.prefs),i.view=i.defn.computedView||i.defn.mirageView||i.computedView,i.colConfig!=null&&i.view.setColConfig(i.colConfig),i.view.addClient(i,"grid"),i.defn.grid=i,i.TemplatesEditor=new vv(i,function(){i.redraw()}),i.ui.root=jQuery(document.getElementById(i.id)).addClass("wcdv_grid").attr("data-title",i.id+"_title"),i.ui.root.children().remove(),i.ui.root.height()!==0&&(i.rootHasFixedHeight=!0,i.rootHeight=i.ui.root.height(),i.features.floatingHeader&&me(i.defn,"table","floatingHeader","method")==="tabletool"&&window.TableTool!=null&&i.ui.root.css("height","")),i.view.source.origin instanceof Ds&&i.ui.root._onFileDrop(function(a){i.view.source.origin.setFiles(a)}),i.ui.titlebar=jQuery('<div class="wcdv_grid_titlebar">').attr("title",ae("GRID.TITLEBAR.SHOW_HIDE")).on("click",function(a){a.stopPropagation(),i.toggle()}).droppable({accept:".wcdv_drag_handle",over:function(a,l){i.showControls(),l.draggable.draggable("option","refreshPositions",!0)}}).appendTo(i.ui.root),i._addTitleWidgets(i.ui.titlebar,r,i.id),i.ui.content=jQuery("<div>",{class:"wcdv_grid_content"}).appendTo(i.ui.root),i.ui.toolbar=jQuery("<div>").addClass("wcdv_grid_toolbar").droppable({accept:".wcdv_drag_handle",over:function(a,l){i.showControls(),l.draggable.draggable("option","refreshPositions",!0)}}).appendTo(i.ui.content),i.ui.toolbar_prefs=new tO(i),i.ui.toolbar_prefs.attach(i.ui.toolbar),i.prefs.bind("grid",i,{toolbar:i.ui.toolbar_prefs.ui.root}),i.ui.toolbar_computedView=new iO(i),i.ui.toolbar_computedView.attach(i.ui.toolbar),i.ui.toolbar_plain=new vy(i),i.ui.toolbar_plain.attach(i.ui.toolbar),i.ui.toolbar_plain.hide(),i.ui.toolbar_group=new yy(i),i.ui.toolbar_group.attach(i.ui.toolbar),i.ui.toolbar_group.hide(),i.ui.toolbar_pivot=new _y(i),i.ui.toolbar_pivot.attach(i.ui.toolbar),i.ui.toolbar_pivot.hide(),i.ui.toolbar_renderer=new nO(i),i.ui.toolbar_renderer.attach(i.ui.toolbar),i.ui.controls=jQuery("<div>",{class:"wcdv_grid_control"}),i.ui.filterControl=jQuery("<div>",{class:"wcdv_control_pane wcdv_filter_control"}),i.ui.groupControl=jQuery("<div>",{class:"wcdv_control_pane wcdv_group_control"}),i.ui.pivotControl=jQuery("<div>",{class:"wcdv_control_pane wcdv_pivot_control"}),i.ui.aggregateControl=jQuery("<div>",{class:"wcdv_control_pane wcdv_aggregate_control"}),i.ui.operationsPalette=jQuery("<div>",{class:"wcdv_grid_control"}).css({display:"block"}),i.ui.grid=jQuery("<div>",{id:e.table.id,class:"wcdv_grid_table"}),i.rootHasFixedHeight&&(!i.features.floatingHeader||me(i.defn,"table","floatingHeader","method")!=="tabletool")&&i.ui.grid.css("height","0px"),i.opts.showToolbar||i.ui.toolbar.hide(),i.opts.showControls||i.ui.controls.hide(),i.filterControl=new zr(i,i.colConfig,i.view,i.features,i.timing),i.ui.filterControl.children().remove(),i.filterControl.draw(i.ui.filterControl),i.ui.filterControl.show(),i.groupControl=new Ts(i,i.colConfig,i.view,i.features,i.timing),i.groupControl.draw(i.ui.groupControl),i.groupControl.on("fieldAdded",function(a,l){i.ui.pivotControl.show(),i.ui.aggregateControl.show()}),i.groupControl.on("fieldRemoved",function(a,l){l.length===0&&(i.ui.pivotControl.hide(),i.ui.aggregateControl.hide())}),i.groupControl.on("cleared",function(){i.ui.pivotControl.hide(),i.ui.aggregateControl.hide()}),i.pivotControl=new Ss(i,i.colConfig,i.view,i.features,i.timing),i.pivotControl.draw(i.ui.pivotControl),i.groupControl.getListElement().sortable({connectWith:"#"+i.pivotControl.getListElement().attr("id")}).on("sortupdate",function(){i.groupControl.sortableSync()}),i.pivotControl.getListElement().sortable({connectWith:"#"+i.groupControl.getListElement().attr("id")}).on("sortupdate",function(){i.pivotControl.sortableSync()}),i.operationsPalette=new Yo(i),me(i.defn,"operations","all")!=null&&(i.operationsPalette.setOperations(i.defn.operations),i.operationsPalette.draw(i.ui.operationsPalette),i.ui.operationsPalette.show()),i.aggregateControl=new qi(i,i.colConfig,i.view,i.features,i.timing),i.aggregateControl.draw(i.ui.aggregateControl),i.rootHasFixedHeight&&i.ui.grid.css({overflow:"auto"}),document.getElementById(i.id+"_footer")&&(i.ui.footer=jQuery(document.getElementById(i.id+"_footer"))),i.ui.root.append(i.ui.titlebar).append(i.ui.content.append(i.ui.toolbar).append(i.ui.controls.append(i.ui.filterControl).append(i.ui.groupControl).append(i.ui.pivotControl).append(i.ui.aggregateControl)).append(i.ui.operationsPalette).append(i.ui.grid).append(i.ui.footer));var s=!0;i.tableDoneCont=function(a,l){i.debug(null,"Finished drawing grid table!"),s&&(s=!1),typeof n=="function"&&n()},i.view.on("fetchDataBegin",function(){i._setSpinner("loading"),i._showSpinner(),i.opts.title&&(i.ui.title._addTrailing(","),i.ui.statusSpan.show().text(ae("GRID.TITLEBAR.LOADING")),i.ui.rowCount.hide()),i.view.source.isCancellable()&&i.ui.cancelFetchBtn.show()}),i.view.on("fetchDataEnd",function(){i._hideSpinner(),i.ui.cancelFetchBtn.hide(),i.ui.statusSpan.show().text(ae("GRID.TITLEBAR.LOADED"))}),i.view.source.on("fetchDataCancel",function(){i.ui.cancelFetchBtn.hide(),s?(i.opts.title&&(i.ui.title._addTrailing(","),i.ui.statusSpan.show().text(ae("GRID.TITLEBAR.NOT_LOADED")),i.ui.rowCount.hide()),i._setSpinner("not-loaded"),i.hasRun=!1,i.hide()):(i.opts.title&&(i.ui.title._addTrailing(","),i.ui.statusSpan.hide(),i.ui.rowCount.show()),i._hideSpinner())}),i.view.on("workBegin",function(){i._isIdle=!1,i._setSpinner("working"),i._showSpinner(),i.opts.title&&(i.ui.title._addTrailing(","),i.ui.statusSpan.show().text(ae("GRID.TITLEBAR.WORKING")),i.ui.rowCount.hide())}),i.view.on("workEnd",function(a,l){i._isIdle=!0,i._hideSpinner(),i.ui.title._stripTrailing(","),i.ui.statusSpan.hide(),i.ui.rowCount.show(),i._updateRowCount(a,l)}),i.view.on("dataUpdated",function(){i.opts.showOnDataChange&&!i.isVisible()&&i.show({redraw:!1}),i.redraw()}),i.view.on("getTypeInfo",function(a){i.colConfigFromTypeInfo(a)}),i.prefs.prime(function(){i.prefs.on("perspectiveChanged",function(a,l){i.setView(),i.redraw()},{info:"Changing view type to match new perspective"}),i.opts.runImmediately?(i.setView(),i.redraw()):(i.hasRun=!1,i.hide())}),st(i,window,"MIE","WC_DataVis","grids",i.id)});vi(rt,["showControls","hideControls","renderBegin","renderEnd","colConfigUpdate","selectionChange"]);Mo(rt,"renderer",["setSelection","getSelection","select","unselect","isSelected"]);Ui(rt);ji(rt);Cs(rt);rt.prototype.toString=function(){var e=this;return"Grid("+e.id+")"};rt.prototype._validateFeatures=function(){var e=this;e.features={};var t=["footer","sort","filter","group","pivot","rowSelect","rowReorder","add","edit","delete","limit","floatingHeader","block","progress","incremental","operations"];me(e.defn,"table","footer")!==void 0&&di(!0,e.defn,"table","features","footer"),k.each(t,function(n){e.features[n]=Ze(!1,e.defn,"table","features",n)}),e.debug(null,"Features =",e.features)};rt.prototype._validateId=function(e){var t=this;if(k.isArray(e)&&e[0]instanceof jQuery&&(e=e[0]),e instanceof jQuery&&(e=e.attr("id")),typeof e!="string")throw'<grid> "id" is not a string';if(document.getElementById(e)===null)throw"No element exists with given ID: "+e;t.id=e,st(e+"_gridContainer",t.defn,"table","id")};rt.prototype.setView=function(){var e=this,t=e.prefs.currentPerspective;t.isMirage()?(e.debug("SET VIEW",'Switching to Mirage View for pre-computed data for perspective "%s"',t.name),e.view=e.prefs.modules.mirage.target,e.view.setPerspectiveName(t.name)):(e.debug("SET VIEW",'Switching to Computed View for live data for perspective "%s"',t.name),e.view=e.prefs.modules.view.target)};rt.prototype._addTitleWidgets=function(e,t,n){var i=this;i.ui.spinner=jQuery("<span>",{style:"font-size: 18px",class:"wcdv_icon_button wcdv_spinner"}).appendTo(e),i._setSpinner(i.opts.runImmediately?"loading":"not-loaded"),i.ui.title=jQuery("<strong>",{id:n+"_title","data-parent":n}).addClass("wcdv_title").text(i.opts.title).appendTo(e);var r=jQuery("<span>",{class:"headingInfo"}).on("click",function(u){u.stopPropagation()}).appendTo(e);r.append(" "),i.ui.statusSpan=jQuery("<span>").appendTo(r),i.ui.rowCount=jQuery("<span>").appendTo(r),i.ui.selectionInfo=jQuery("<span>").appendTo(r),i.ui.clearFilter=jQuery("<span>").hide().append(" (").append(jQuery("<span>",{class:"link"}).text(ae("GRID.TITLEBAR.CLEAR_FILTER")).on("click",function(u){u.stopPropagation(),i.ui.clearFilter.hide(),i.view.clearFilter({notify:!0})})).append(")").appendTo(r),i.ui.cancelFetchBtn=jQuery("<button>",{type:"button"}).css({"margin-left":"0.5em"}).text(ae("GRID.TITLEBAR.CANCEL")).on("click",function(u){u.stopPropagation(),i.view.source.cancel()}).hide().appendTo(r),typeof i.opts.helpText=="string"&&i.opts.helpText!==""&&(r.append(" "),Ne("F059").tooltip({classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow wcdv_info_tooltip wcdv_border-primary"},show:{delay:1e3},content:i.opts.helpText}).appendTo(r)),i.ui.titlebar_controls=jQuery("<div>").addClass("wcdv_titlebar_controls pull-right").appendTo(e),window.MIE&&window.MIE.DEBUGGING&&jQuery("<button>",{type:"button",style:"font-size: 18px",class:"wcdv_icon_button wcdv_text-primary"}).attr("title",ae("GRID.TITLEBAR.SHOW_DEBUG_INFO")).click(function(u){u.stopPropagation(),i.debugWin.show(i,i.view,i.view.source)}).append(Ne("fa-bug")).appendTo(i.ui.titlebar_controls),i.ui.exportBtn=jQuery("<button>",{type:"button",style:"font-size: 18px",class:"wcdv_icon_button wcdv_text-primary"}).on("click",function(u){u.stopPropagation(),i.export()}).appendTo(i.ui.titlebar_controls),i._setExportStatus("notReady"),i.ui.refreshBtn=jQuery("<button>",{type:"button",style:"font-size: 18px",class:"wcdv_icon_button wcdv_text-primary"}).attr("title",ae("GRID.TITLEBAR.REFRESH")).on("click",function(u){u.stopPropagation(),i.refresh()}).append(Ne("f021")).appendTo(i.ui.titlebar_controls);var s={effect:"fade",duration:100},a=jQuery("<div>",{title:ae("GRID.PERSPECTIVE_WIN.TITLE")}).dialog({autoOpen:!1,modal:!0,width:500,position:{my:"top",at:"bottom",of:e},show:s,hide:s}),l=jQuery("<div>").addClass("wcdv_warning_banner").appendTo(a),c=jQuery("<textarea>",{style:"font-family: monospace; font-size: 10pt; width: 100%",rows:"20",readonly:!0}).appendTo(a);jQuery("<button>",{type:"button",style:"font-size: 18px",class:"wcdv_icon_button wcdv_text-primary"}).attr("title",ae("GRID.TITLEBAR.SHOW_HIDE_CONTROLS")).click(function(u){u.stopPropagation(),u.shiftKey?(i.prefs.currentPerspective.opts.isTemporary?(l.text(ae("GRID.PERSPECTIVE_WIN.TEMP_PERSPECTIVE_WARNING")),l.show()):l.hide(),c.val(JSON.stringify(i.prefs.currentPerspective.config,null,2)),a.dialog("open")):i.toggleControls()}).append(jQuery(Ne("fa-cog"))).appendTo(i.ui.titlebar_controls),i.ui.showHideButton=jQuery("<button>",{type:"button",style:"font-size: 18px",class:"wcdv_icon_button wcdv_text-primary showhide"}).attr("title",ae("GRID.TITLEBAR.SHOW_HIDE")).click(function(u){u.stopPropagation(),i.toggle()}).append(jQuery(Ne("f078"))).appendTo(i.ui.titlebar_controls)};rt.prototype.clear=function(){var e=this;e.ui.root.children().remove()};rt.prototype.redraw=function(e,t){var n=this;if(e!=null&&typeof e!="function")throw new Error("Call Error: `contOk` must be null or a function");if(t!=null&&typeof t!="function")throw new Error("Call Error: `contFail` must be null or a function");e=e||Ct,t=t||Ct;var i=function(){var r,s;n.colConfigLock.lock("redrawing grid; prevent colConfig changes from notifying existing renderer"),n.view.getData(function(a,l){if(!a)return t();if(n.defn.renderer!=null)n.rendererName=n.defn.renderer,r=At.registry.get(n.defn.renderer),s=it(n.defn.rendererOpts);else if(n.rendererName="table",l.isPlain)r=At.registry.get(Ze("table_plain",n.defn,"whenPlain","renderer")),s=it(n.defn.table.whenPlain),n.ui.footer&&(s.footer=n.ui.footer),n.debug(null,"Creating plain grid table");else if(l.isGroup){switch(n.defn.table.groupMode){case"summary":r=At.registry.get(Ze("table_group_summary",n.defn,"whenGroup","renderer"));break;case"detail":r=At.registry.get(Ze("table_group_detail",n.defn,"whenGroup","renderer"));break}s=it(n.defn.table.whenGroup),n.ui.footer&&(s.footer=n.ui.footer),n.debug(null,"Creating group grid table")}else l.isPivot&&(r=At.registry.get(Ze("table_pivot",n.defn,"whenPivot","renderer")),s=it(n.defn.table.whenPivot),n.debug(null,"Creating pivot grid table"));n.renderer&&n.renderer.destroy(),s.generateCsv=n.generateCsv,s.fixedHeight=n.rootHasFixedHeight,n.ui.exportBtn.attr("disabled",!0),n.renderer=new r(n,n.defn,n.view,n.features,s,n.timing,n.id,n.colConfig),l.isPlain?(n.ui.toolbar_plain.show(),n.ui.toolbar_group.hide(),n.ui.toolbar_pivot.hide()):l.isGroup?(n.ui.toolbar_plain.hide(),n.ui.toolbar_group.show(),n.ui.toolbar_pivot.hide()):l.isPivot&&(n.ui.toolbar_plain.hide(),n.ui.toolbar_group.hide(),n.ui.toolbar_pivot.show()),n.renderer.on("renderBegin",function(){n._isIdle=!1,n.fire("renderBegin")}),n.renderer.on("renderEnd",function(){n.fire("renderEnd"),n._isIdle=!0}),n.renderer.on("unableToRender",function(){n._setExportStatus("notReady"),i()}),n.renderer.on("csvReady",function(){n.exportLock.isLocked()&&n.exportLock.unlock(),n._setExportStatus("ready")}),n.renderer.on("generateCsvProgress",function(c){c===0&&(n.ui.exportBtn.children("span.fa").remove(),n.ui.exportBtn.append(Ne("fa-spinner","fa-pulse")))}),n.features.limit&&(n.renderer.on("limited",function(){n.ui.limit_div.show()}),n.renderer.on("unlimited",function(){n.ui.limit_div.hide()})),n.features.rowSelect&&n.renderer.on("selectionChange",function(c){if(c.length===0)n.ui.selectionInfo.text("");else{var u=n.ui.rowCount.text().length>0,f=u?", ":"";f+=ae(c.length===1?"GRID.TITLEBAR.SELECTED_COUNT_SINGULAR":"GRID.TITLEBAR.SELECTED_COUNT_PLURAL",c.length),n.ui.selectionInfo.text(f)}n.fire("selectionChange",null,c)}),n.renderer.draw(n.ui.grid,null,function(){n.colConfigLock.isLocked()&&n.colConfigLock.unlock("renderer finished drawing"),n.setSelection(),n.ui.exportBtn.attr("disabled",!1),n.tableDoneCont()})})};n.debug(null,"Redrawing..."),i()};rt.prototype.refresh=function(){var e=this;e.isVisible()&&(e.debug(null,"Refreshing..."),e._isIdle=!1,e.view.refresh())};rt.prototype._updateRowCount=function(e,t){var n=this;me(n.defn,"server","filter")&&me(n.defn,"server","limit");var i=[];n.debug(null,"Updating row count"),n.opts.title&&(n._hideSpinner(),e.numRows!=null&&(e.totalRows!=null?i.push(e.numRows+" / "+ae(e.totalRows===1?"GRID.TITLEBAR.RECORD_COUNT_SINGULAR":"GRID.TITLEBAR.RECORD_COUNT_PLURAL",e.totalRows)):i.push(ae(e.numRows===1?"GRID.TITLEBAR.RECORD_COUNT_SINGULAR":"GRID.TITLEBAR.RECORD_COUNT_PLURAL",e.numRows))),(e.isGroup||e.isPivot)&&i.push(ae(e.numGroups===1?"GRID.TITLEBAR.GROUP_COUNT_SINGULAR":"GRID.TITLEBAR.GROUP_COUNT_PLURAL",e.numGroups)),n.ui.rowCount.text(i.join(", ")),n.view.source.origin.isLimited&&!document.getElementById(n.id+"_isLimitedNotice")&&(e.totalRows||e.numRows)==n.view.source.origin.opts.autoLimit&&(n.ui.groupControl.hide(),jQuery("<span>",{id:n.id+"_isLimitedNotice",style:"color:red; font-weight:bold; margin-left:50px",text:ae("GRID.TITLEBAR.DATA_LIMITED_WARNING")}).on("click",function(){n.view.unlimit(),n.refresh(),n.ui.groupControl.show()}).appendTo(n.ui.rowCount)),n.ui.clearFilter&&(e.totalRows?n.ui.clearFilter.show():n.ui.clearFilter.hide()),n.ui.title._addTrailing(","))};rt.prototype.hide=function(){var e=this;e.debug(null,"Hiding..."),e.ui.content.hide({duration:0,done:function(){e.opts.title&&e.ui.showHideButton.removeClass("open fa-rotate-180")}})};rt.prototype.show=function(e){var t=this;e=Qe(e,{redraw:!0}),t.debug(null,"Showing..."),t.ui.content.show({duration:0,done:function(){t.opts.title&&t.ui.showHideButton.addClass("open fa-rotate-180"),!t.hasRun&&e.redraw&&(t.hasRun=!0,t.redraw())}})};rt.prototype.toggle=function(){var e=this;e.ui.content.css("display")==="none"?e.show():e.hide()};rt.prototype.isVisible=function(){var e=this;return e.ui.content.css("display")!=="none"};rt.prototype.hideControls=function(){var e=this;e.ui.controls._isHidden()||(e.ui.controls.hide({duration:0,complete:function(){e.fire(rt.events.hideControls)}}),e.ui.toolbar.hide({duration:0,complete:function(){}}))};rt.prototype.showControls=function(){var e=this;e.ui.controls._isHidden()&&(e.ui.controls.show({duration:0,complete:function(){e.fire(rt.events.showControls)}}),e.ui.toolbar.show({duration:0,complete:function(){}}))};rt.prototype.toggleControls=function(){var e=this;e.ui.controls._isHidden()?e.showControls():e.hideControls()};rt.prototype._setSpinner=function(e){var t=this;switch(e){case"loading":t.ui.spinner.html(Ne("F021","fa-spin",ae("GRID.TITLEBAR.LOADING")));break;case"not-loaded":t.ui.spinner.html(Ne("F05E",null,ae("GRID.TITLEBAR.NOT_LOADED")));break;case"working":t.ui.spinner.html(Ne("F1CE","fa-spin",ae("GRID.TITLEBAR.WORKING")));break}};rt.prototype._showSpinner=function(){var e=this;e.opts.title&&e.ui.spinner.show()};rt.prototype._hideSpinner=function(){var e=this;e.opts.title&&e.ui.spinner.hide()};rt.prototype._normalize=function(e){var t=this;if(e==null&&(e={}),!e.normalized)return e.normalized=!0,Qe(!0,e,{prefs:null,table:{groupMode:"detail",features:{sort:!0,filter:!0,group:!0,pivot:!0,rowSelect:!1,rowReorder:!1,add:!1,edit:!1,delete:!1,limit:!0,floatingHeader:!0,block:!1,progress:!1},limit:{appendBodyLast:!1,method:"more",threshold:100,chunkSize:50},floatingHeader:{method:"tabletool"},incremental:{method:"setTimeout",delay:10,chunkSize:100}}}),t._normalizeColumns(e),e};rt.prototype._normalizeColumns=function(e){var t=this;if(me(e,"table","columns")==null){t.initColConfig=null,t.colConfig=null;return}for(var n=new Ae,i=0;i<e.table.columns.length;i+=1){var r=e.table.columns[i];if(k.isString(r)&&(r={field:r}),typeof r.field!="string"){de.warn("Column Configuration: `field` must be a string");continue}r=Qe(r,{hideMidnight:!1,format_dateOnly:"LL",allowHtml:!1,canHide:!0}),n.set(r.field,r)}t.initColConfig=n.clone(),k.each(Ze([],e,"table","columnConfig"),function(s,a){s.widget==="checkbox"&&(s.filter!==void 0&&s.filter!=="checkbox"&&de.warn('Overriding configuration to use filter type "'+s.filter+'" for checkbox widgets.'),s.filter="checkbox")}),t.setColConfig(n,{from:"defn",savePrefs:!1})};rt.prototype.export=function(){var e=this;if(!e.exportLock.isLocked())if(e.csvReady){var t=(e.opts.title||e.id)+".csv",n=e.renderer.getCsv(),i="text/csv",r=new Blob([n],{type:i});pd(r,t)}else e.exportLock.lock(),e.generateCsv=!0,e.redraw()};rt.prototype._setExportStatus=function(e){var t=this;switch(e){case"notReady":t.csvReady=!1,t.ui.exportBtn.attr("title",ae("GRID.TITLEBAR.GENERATE_CSV")),t.ui.exportBtn.children("span.fa").remove(),t.ui.exportBtn.append(Ne("fa-file-o"));break;case"ready":t.csvReady=!0,t.ui.exportBtn.attr("title",ae("GRID.TITLEBAR.DOWNLOAD_CSV")),t.ui.exportBtn.children("span.fa").remove(),t.ui.exportBtn.append(Ne("fa-download"));break;default:throw new Error('Call Error: invalid status "'+e+'"')}};rt.prototype.setColConfig=function(e,t){var n=this,i=!1;if(["defn","prefs","typeInfo","ui","reset"].indexOf(t.from)<0)throw new Error("Call Error: `opts.from` must be one of: [defn, prefs, typeInfo, ui, reset]");t=Qe(t,{sendEvent:!0,dontSendEventTo:[],redraw:!0,savePrefs:!0}),n.colConfigLock.isLocked()&&n.renderer&&t.dontSendEventTo.push(n.renderer);var r=function(){n.debug("COLCONFIG","Setting from %s: %O",t.from||"[unknown]",e),n.colConfig=e,n.colConfigSource=t.from,n.renderer!=null&&(n.renderer.colConfig=n.colConfig),n.debug("COLCONFIG","Setting shadow from %s: %O",t.from||"[unknown]",e),n.shadowColConfig=e.clone(),i=!0},s=function(){n.debug("COLCONFIG","Setting initial from %s: %O",t.from||"[unknown]",e),n.initColConfig=e.clone()},a=function(c,u,f,m){var g=f.mergeWith(c);return n.debug("COLCONFIG","Merged %d fields from %s into %s",g,u,m),g},l=function(c,u,f,m){var g=[];return f.each(function(h,v){c.isSet(v)||g.push(v)}),g.length>0?(n.debug("COLCONFIG","Removing %d fields from %s which are absent from %s: %O",g.length,m,u,g),k.each(g,function(h){f.unset(h)}),!0):!1};switch(typeof me(n.defn,"advice","setColConfig","before")=="function"&&n.defn.advice.setColConfig.before(e,t.from,n),t.from){case"defn":r(),s(),n.colConfigRestricted=!0;break;case"prefs":n.colConfigRestricted&&(n.colConfig.each(function(c,u){e.isSet(u)&&k.defaults(e.get(u),c)}),l(n.colConfig,"defn",e,"prefs"),a(n.colConfig,"defn",e,"prefs")),r();break;case"reset":case"ui":r();break;case"typeInfo":n.colConfig==null?r():(n.colConfig=n.shadowColConfig.clone(),n.renderer!=null&&(n.renderer.colConfig=n.colConfig),l(e,"source",n.colConfig,"existing")&&(i=!0),n.colConfigRestricted||a(e,"source",n.colConfig,"existing")&&(i=!0)),n.initColConfig==null&&s();break}i&&(t.savePrefs&&n.prefs.save(),t.sendEvent&&n.fire("colConfigUpdate",{notTo:t.dontSendEventTo},n.colConfig,n.initColConfig),t.redraw)};rt.prototype.getColConfig=function(e){var t=this;return t.colConfig};rt.prototype.resetColConfig=function(e){var t=this;t.debug("COLCONFIG","Resetting to: %O",t.initColConfig),e=Qe(e,{from:"reset",savePrefs:!1}),t.setColConfig(t.initColConfig.clone(),e)};rt.prototype.isIdle=function(){var e=this;return e._isIdle};rt.prototype.colConfigFromTypeInfo=function(e,t){var n=this;if(t=Qe(t,{from:"typeInfo",savePrefs:!1}),!(e instanceof Ae))throw new Error("Call Error: `typeInfo` must be an OrdMap");var i=new Ae;e.each(function(r,s){i.set(s,{field:s})}),n.debug(null,"Creating colConfig from typeInfo: %O -> %O",e.asMap(),i.asMap()),n.setColConfig(i,t)};rt.prototype.setOperations=function(e){var t=this;t.operationsPalette!=null&&(t.operationsPalette.setOperations(e),t.operationsPalette.draw(t.ui.operationsPalette)),t.defn.operations=e,t.redraw()};var tt=Ee("Prefs",Object,function(e,t,n){var i=this;if(typeof e!="string")throw new Error("Call Error: `name` must be a string");if(t!=null&&typeof t!="object")throw new Error("Call Error: `moduleBindings` must be null or an object");if(n!=null&&typeof n!="object")throw new Error("Call Error: `opts` must be null or an object");if(i.setName(e),i.modules={},i.bardo={},i.primeLock=new qt("Prefs Prime"),i.opts=Qe(n,{autoSave:!0,saveCurrent:!0,savePerspectives:!0,backend:{type:tt.DEFAULT_BACKEND_TYPE}}),i.init(),!Eo.isSet(i.opts.backend.type))throw new Error("PREFS BACKEND IS NOT REGISTERED");var r=Eo.get(i.opts.backend.type),s=i.opts.backend[i.opts.backend.type];i.debug(null,'Creating new preferences backend: name = "%s" ; type = %s ; opts = %O',i.name,i.opts.backend.type,s),i.backend=new r(i.name,i,s),t!=null&&k.each(t,function(a,l){i.bind(l,a)})});tt.MAIN_PERSPECTIVE_NAME="Main Perspective";tt.DEFAULT_BACKEND_TYPE="localStorage";vi(tt,["perspectiveAdded","perspectiveDeleted","perspectiveRenamed","perspectiveChanged","prefsHistoryStatus","prefsReset","prefsChanged","prefsSaved","moduleBound","primed"]);Ui(tt);ji(tt);Cs(tt);tt.prototype.toString=function(){var e=this;return"Prefs("+e.name+", "+e.opts.backend.type+")"};tt.prototype.init=function(){var e=this;e.isInitialized||(e.debug(null,"Initializing prefs system"),e.isInitialized=!0,e.perspectives={},e.availablePerspectives=[],e.currentPerspective=null,e.history=[],e.historyIndex=0)};tt.prototype.prime=function(e){var t=this,n=Array.prototype.slice.call(arguments);if(e!=null&&typeof e!="function")throw new Error("Call Error: `cont` must be null or a function");if(e=e||Ct,t.isPrimed)return e(!1);if(t.primeLock.isLocked())return t.primeLock.onUnlock(function(){t.prime.apply(t,n)});t.primeLock.lock();var i=function(r){return function(){return t.debug("PRIMING","End"),t.isPrimed=!0,t.primeLock.unlock(),e(r)}};return t.init(),t.debug("PRIMING","Begin"),t.backend.getPerspectives(function(r){t.availablePerspectives=k.union(t.availablePerspectives,r),t.backend.loadAll(function(s){sd(k.values(s),function(a,l,c){t.addPerspective(a.id,a.name,a.config,null,c,{switch:!1})},function(){return t.debug("PRIMING","Finished adding all perspectives"),t.fire("primed"),t.currentPerspective!=null?i(!0)():t.availablePerspectives.length===0?(t.debug("PRIMING","No perspectives exist, creating one"),t.addMainPerspective(i(!0))):t.backend.getCurrent(function(a){if(a==null)return t.debug("PRIMING","No current perspective set, creating one"),t.addMainPerspective(i(!0));t.setCurrentPerspective(a,i(!0))})})})})};tt.prototype._firePrefsHistoryStatus=function(){var e=this;e.fire("prefsHistoryStatus",null,e.historyIndex<e.history.length-1,e.historyIndex>0)};tt.prototype.back=function(){var e=this;e.historyIndex!==e.history.length-1&&(e.historyIndex+=1,e._firePrefsHistoryStatus(),e.setCurrentPerspective(e.history[e.historyIndex].id,null,{resetHistory:!1}))};tt.prototype.forward=function(){var e=this;e.historyIndex!==0&&(e.historyIndex-=1,e._firePrefsHistoryStatus(),e.setCurrentPerspective(e.history[e.historyIndex].id,null,{resetHistory:!1}))};tt.prototype._resetHistory=function(e){var t=this;t.history.splice(0,t.historyIndex),e!=null&&t.history.unshift(e),t.historyIndex=0,t._firePrefsHistoryStatus()};tt.prototype._historyDebug=function(){var e=this;console.log("### HISTORY ### [%d] %O",e.historyIndex,e.history.map(function(t){return t.name}))};tt.prototype.bind=function(e,t,n){var i=this;if(typeof e!="string")throw new Error("Call Error: `moduleName` must be a string");if(t==null)throw new Error("Call Error: `target` is required");if(!ar.isSet(e))throw new Error("Module is not registered: "+e);var r=ar.get(e);i.modules[e]=new r(i,t),i.debug("BIND","Binding module %s to target %s",e,t.toString()),i.fire("moduleBound",null,e,i.modules[e],t,n),i.currentPerspective!=null&&i.currentPerspective.load([e])};tt.prototype.getPerspectives=function(e){var t=this;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");return e(t.availablePerspectives)};tt.prototype.getPerspective=function(e){var t=this;if(!k.isObject(e))throw new Error("Call Error: `qry` must be an object");return e.id!=null?t.perspectives[e.id]:e.name!=null?k.findWhere(t.perspectives,{name:e.name}):null};tt.prototype.addPerspective=function(e,t,n,i,r,s){var a=this;if(e!=null&&typeof e!="string")throw new Error("Call Error: `id` must be null or a string");if(t!=null&&typeof t!="string")throw new Error("Call Error: `name` must be null or a string");if(n!=null&&typeof n!="object")throw new Error("Call Error: `config` must be null or an object");if(r!=null&&typeof r!="function")throw new Error("Call Error: `cont` must be null or a function");if(s!=null&&typeof s!="object")throw new Error("Call Error: `opts` must be null or an object");t==null&&(t=e),r=r||Ct,s=Qe(s,{switch:!0,loadAfterSwitch:!0,sendEvent:!0,onDuplicate:"nothing"});var l=s.loadAfterSwitch;if(["error","nothing","replace"].indexOf(s.onDuplicate)<0)throw new Error("Call Error: `opts.onDuplicate` must be one of: error, nothing, replace");var c=function(){return s.switch?a.setCurrentPerspective(e,r,{loadPerspective:l,sendEvent:s.sendEvent}):r(!0)};if(a.perspectives[e]!=null)switch(s.onDuplicate){case"error":throw new Error("Perspective already exists: "+e);case"nothing":return c()}var u=function(){var f=new si(e,t,n,a.modules,i);return e==null&&(e=f.id),a.debug(null,'Adding new perspective: id = "%s" ; name = "%s" ; config = %O',e,t,n),a.availablePerspectives.indexOf(e)<0&&a.availablePerspectives.push(e),a.perspectives[e]=f,s.sendEvent&&a.fire("perspectiveAdded",{notTo:s.dontSendEventTo},e),c()};return a.currentPerspective?(a.debug("ADD",'Saving current perspective "%s" before adding new one "%s"',a.currentPerspective.name,t),a.save(),n==null&&(n=it(a.currentPerspective.config)),u()):(n==null&&(n={}),u())};tt.prototype.addMainPerspective=function(e){for(var t=this,n=0;n<t.availablePerspectives.length;n+=1){var i=t.availablePerspectives[n];if(t.perspectives[i].name===tt.MAIN_PERSPECTIVE_NAME)return t.setCurrentPerspective(i,e)}t.addPerspective(null,tt.MAIN_PERSPECTIVE_NAME,{},null,e)};tt.prototype.deletePerspective=function(e,t,n){var i=this;if(e!=null&&typeof e!="string")throw new Error("Call Error: `id` must be null or a string");if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");if(t=t||Ct,n=Qe(n,{sendEvent:!0}),e==null&&(e=i.currentPerspective.id),i.perspectives[e].opts.isEssential)return i.logError("DELETE PERSPECTIVE",'Not allowed to delete essential perspective: id = "%s" ; name = "%s"',e,i.perspectives[e].name),t(!1);i.backend.deletePerspective(e,function(r){var s,a;if(!r)return t(!1);if(delete i.perspectives[e],i.availablePerspectives=k.without(i.availablePerspectives,e),n.sendEvent&&i.fire("perspectiveDeleted",{notTo:n.dontSendEventTo},e,s),i.availablePerspectives.length===0)return i.historyIndex=i.history.length,i._resetHistory(),i.currentPerspective=null,i.addMainPerspective(t);if(i.currentPerspective.id===e){for(;i.historyIndex>0&&i.history[i.historyIndex].id===e;)i.historyIndex-=1;if(i.history=k.reject(i.history,function(c){return c.id===e}),i.history.length===0)return i.currentPerspective=null,i.addMainPerspective(t);for(var l=i.history[i.historyIndex].id,a=i.historyIndex+1;a<i.history.length&&i.history[a].id!==l;a+=1)i.history[a]=null;i.history=k.without(i.history,null),i._firePrefsHistoryStatus(),i.history.length>0?i.setCurrentPerspective(i.history[0].id,null,{resetHistory:!1}):i.setCurrentPerspective(i.availablePerspectives[0])}})};tt.prototype.renamePerspective=function(e,t,n,i){var r=this;if(i=Qe(i,{sendEvent:!0}),e!=null&&typeof e!="string")throw new Error("Call Error: `id` must be null or a string");if(typeof t!="string")throw new Error("Call Error: `newName` must be a string");if(n!=null&&typeof n!="function")throw new Error("Call Error: `cont` must be null or a function");if(e==null&&(e=r.currentPerspective.id),n=n||Ct,r.currentPerspective.id,r.perspectives[e]==null)throw new Error($t.sprintf('Perspective does not exist: id = "%s"',e));k.each(r.perspectives,function(s){s.name===t&&de.warn($t.sprintf('Renaming perspective (id = "%s") now shares the name "%s" with a different perspective (id = "%s")',e,t,s.id))}),r.perspectives[e].name=t,r.perspectives[e].save(function(){r.backend.save(r.currentPerspective,function(){return i.sendEvent&&r.fire("perspectiveRenamed",{notTo:i.dontSendEventTo},e,t),n(!0)})})};tt.prototype.setCurrentPerspective=function(e,t,n){var i=this;if(Array.prototype.slice.call(arguments),typeof e!="string")throw new Error("Call Error: `id` must be a string");if(t!=null&&typeof t!="function")throw new Error("Call Error: `cont` must be null or a function");if(t=t||Ct,n=Qe(n,{loadPerspective:!0,sendEvent:!0,resetHistory:!0}),i.perspectives[e]==null){if(i.availablePerspectives.indexOf(e)<0){if(i.logWarning("SET CURRENT PERSPECTIVE",'Perspective does not exist: id = "%s"',e),i.availablePerspectives.length===0)return i.addMainPerspective(t);e=i.availablePerspectives[0]}return i.backend.load(e,function(s){return i.addPerspective(e,null,s,null,t)})}i.debug(null,'Switching to perspective: id = "%s"',e),i.currentPerspective=i.perspectives[e],n.resetHistory&&i._resetHistory(i.currentPerspective);var r=function(){n.sendEvent&&i.fire("perspectiveChanged",{notTo:n.dontSendEventTo},e,i.currentPerspective),i.backend.setCurrent(e,function(s){return t(s)})};return n.loadPerspective?i.currentPerspective.load(null,r):r()};tt.prototype.setCurrentPerspectiveByName=function(e,t,n){var i=this,r=k.findWhere(i.perspectives,{name:e});if(r!=null)return i.setCurrentPerspective(r.id,t,n);throw new Error('No such perspective: "'+e+'"')};tt.prototype.clonePerspective=function(e,t,n,i,r,s){var a=this,l;if(t!=null&&!k.isString(t))throw new Error("Call Error: `name` must be null or a string");if(n!=null&&typeof n!="function")throw new Error("Call Error: `configMutator` must be null or a function");if(s=it(s),e==null)l=a.currentPerspective;else if(l=a.getPerspective(e),l==null)return r('Perspective "'+JSON.stringify(e)+'" does not exist');var c=(n||Ct)(it(l.config)),u=t||prompt(s.message,l.name);if(u!=null)a.debug("CLONE",'Creating new perspective "%s" with config = %O',u,c),a.addPerspective(null,u,c,null,function(f){return f?a.save(i):r("Error cloning perspective")},{switch:s.switch,loadAfterSwitch:!1,sendEvent:s.sendEvent});else return r("Operation cancelled")};tt.prototype.save=function(e){var t=this;if(e!=null&&typeof e!="function")throw new Error("Call Error: `cont` must be null or a function");if(e=e||Ct,t.currentPerspective.opts.isTemporary)return e(!1);t.opts.autoSave?t.reallySave(e):(t.currentPerspective.isUnsaved=!0,t.fire("prefsChanged"))};tt.prototype.reallySave=function(e){var t=this;if(e!=null&&typeof e!="function")throw new Error("Call Error: `cont` must be null or a function");if(e=e||Ct,t.currentPerspective.opts.isTemporary)return e(!1);t.currentPerspective.save(function(){t.backend.save(t.currentPerspective,function(n){return n&&(t.currentPerspective.isUnsaved=!1,t.fire("prefsSaved")),e(n)})})};tt.prototype.reset=function(e){var t=this;if(e!=null&&typeof e!="function")throw new Error("Call Error: `cont` must be null or a function");e=e||Ct,k.each(t.perspectives,function(i){i.opts.isTemporary&&i.opts.isEssential&&(t.debug(null,"Saving temporary essential perspective: %s",i.id),t.bardo[i.id]={id:i.id,name:i.name,config:i.config,opts:i.opts})});var n=t.currentPerspective.id;t.backend.reset(function(){t.isInitialized=!1,t.init(),t.fire("prefsReset"),k.each(t.modules,function(i,r){typeof i.reset=="function"&&(t.debug(null,"Resetting module: moduleName = %s",r),i.reset())}),t.debug(null,"Restoring temporary essential perspectives: %s",JSON.stringify(k.keys(t.bardo))),k.each(t.bardo,function(i){t.addPerspective(i.id,i.name,i.config,i.opts,null,{switch:!1})}),t.perspectives[n]&&t.setCurrentPerspective(n),t.isPrimed=!1,t.prime(function(){return e(!0)})})};tt.prototype.inspect=function(){var e=this,t=Array.prototype.slice.call(arguments),n=new RegExp("^(.*)/(\\w+)$");console.group("INSPECT RESULTS"),k.each(e.perspectives,function(i,r){var s="",a=[];k.each(t,function(l){var c=l.match(n),u=c&&c[2].length>0?c[2]:"string";l=c?c[1].split("."):l.split("."),s.length>0&&(s+=", "),s+=l[l.length-1]+" = ";var f=me(i,l);typeof f=="string"||typeof f=="number"?s+=f:u==="json"?s+=JSON.stringify(f):(s+="%O",a.push(it(f)))}),console.log.apply(null,[s].concat(a))}),console.groupEnd()};var je=Ee("ComputedView",Xe,function(e,t){var n=this;if(!(e instanceof Ke)&&!(e instanceof je))throw new Error("Call Error: `source` must be an instance of MIE.WC_DataVis.Source or MIE.WC_DataVis.ComputedView");if(t=Qe(t,{prefs:null,saveViewConfig:!0,groupIsPivot:!1}),t.prefs!=null&&!(t.prefs instanceof tt))throw new Error("Call Error: `opts.prefs` must be null or an instance of MIE.WC_DataVis.Prefs");n.source=e,n.opts=t,n.source.on("dataUpdated",function(){n.clearCache(),n.fire("dataUpdated")}),n.source.on("fetchDataCancel",function(){n.lock.clear()}),n.echo(n.source,["fetchDataBegin","fetchDataEnd"]),n.setName(t.name),n.colConfig=new Ae,n.timing=new cr,n.lock=new qt(n.toString()),n.sortSpec=null,n.filterSpec=null,n.groupSpec=null,n.pivotSpec=null,n.aggregateSpec=Yn(["group","pivot","cell","all"],[[{fun:"count"}]]),t.prefs!=null&&n.setPrefs(t.prefs),n.isBoundToPrefs=!1},{prefsModule:"view"});vi(je,["fetchDataBegin","fetchDataEnd","getTypeInfo","dataUpdated","workBegin","workEnd","sortSet","filterSet","groupSet","pivotSet","aggregateSet","sortBegin","sort","sortEnd","filterBegin","filter","filterEnd","invalidFilterField","invalidGroupField","invalidPivotField","invalidSortField","invalidAggregate"]);Mo(je,"source",["getUniqueVals","decodeAll","setToolbar"]);Ui(je);ji(je);Cs(je);je.prototype.unlimit=function(){this.source.unlimit()};je.prototype.toString=function(){var e=this;return"ComputedView("+e.name+")"};je.prototype.addClient=function(e,t){var n=this;n.clients=n.clients||{},n.clients[t]=n.clients[t]||[],n.clients[t].push(e)};je.prototype.hasClientKind=function(e){var t=this;return Ze(0,t.clients,e,"length")>0};je.prototype.getRowCount=function(){var e=this;if(e.data.isPlain)return e.data.data.length;if(e.data.isGroup)return k.reduce(e.data.data,function(t,n,i){return t+n.length},0);if(e.data.isPivot)return k.reduce(e.data.data,function(t,n,i){return t+k.reduce(n,function(r,s,a){return r+s.length},0)},0);throw new Error("Unable to determine row count when data is not plain, but also not grouped.")};je.prototype.getTotalRowCount=function(){return this.source.cache.data.length};je.prototype.setSort=function(e,t){var n=this,i=Array.prototype.slice.call(arguments),r=!1;return n.lock.isLocked()?n.lock.onUnlock(function(){n.setSort.apply(n,i)},"Waiting to set sort: "+JSON.stringify(e)):(t=Qe(t,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),n.debug("SET SORT","spec = %O",e),r=!k.isEqual(n.sortSpec,e),n.super.setSort(e,t),r&&n.prefs!=null&&t.savePrefs&&n.prefs.save(),n.clearCache(),t.updateData&&n.getData(),!0)};je.prototype.getSort=function(){var e=this;return e.sortSpec};je.prototype.clearSort=function(e){return this.setSort(null,e)};je.prototype.sort=function(e){var t=this,n=['Data Source "'+t.source.name+'" : '+t.name,"Sorting"],i=me(t.data,"agg","info");if(t.sortSpec==null)return e(!1);t.debug("SORT","Beginning sort: %s",JSON.stringify(t.sortSpec));var r=function(m,g){var h;return g==null?(de.error("Unable to sort: no type information {spec = %O}",m),null):((typeof g=="string"||g instanceof String)&&(g={type:g}),g.type==null?(de.error("Unable to sort: type unknown {spec = %O, fti = %O}",m,g),null):(h=ur.byType(g.type),h==null?(de.error("Unable to sort: no comparison function for type {spec = %O, type = %s}",m,g.type),null):typeof h!="function"?(de.error("Unable to sort: invalid comparison function for type {spec = %O, type = %s}",m,g.type),null):(Ke.decodeAll(t.data.dataByRowId,g.field,t.typeInfo),h)))},s=function(m,g,h){var v,y;if(h==null)return de.error("Unable to sort: no sort source function given {spec = %O}",m),null;switch(g){case"vertical":y=t.data.isPlain?t.data.data.length:t.data.rowVals.length;break;case"horizontal":y=t.data.isPlain?t.data.data.length:t.data.colVals.length;break;default:return null}v=new Array(y);for(var E=0;E<y;E+=1)v[E]={oldIndex:E,sortSource:h(E)};return v},a=function(m){return function(g){t.debug("SORT // UNPACK","Unpacking bundle of %d sorted chunks in %s orientation",g.length,m);var h=t.data.data,v=me(t.data,"rowVals"),y=me(t.data,"colVals"),E=me(t.data,"agg","results","cell"),b=me(t.data,"agg","results","group"),w=me(t.data,"agg","results","pivot"),T,x;switch(m){case"vertical":t.data.data=[],v!=null&&(t.data.rowVals=[]),E!=null&&(t.data.agg.results.cell=[]),b!=null&&(t.data.agg.results.group=[]);var D={};if(k.each(g,function(R,I){t.data.isPlain&&t.fire("sort",{silent:!0},h[R.oldIndex].rowNum,I),t.data.data[I]=h[R.oldIndex],v!=null&&(t.data.rowVals[I]=v[R.oldIndex]),D[R.oldIndex]=I}),t.data.isGroup||t.data.isPivot){var O=function(R,I){R.children==null?(R.rowValIndex=D[R.rowValIndex],t.data.groupMetadata.lookup.byRowValIndex[R.rowValIndex]=R):(k.each(R.children,function(P){O(P,I+1)}),I>0&&(R.rowValIndex=R.children[k.keys(R.children)[0]].rowValIndex))};O(t.data.groupMetadata,0)}if(E!=null)for(T=0;T<E.length;T+=1)t.data.agg.results.cell[T]=[],k.each(g,function(R,I){t.data.agg.results.cell[T][I]=E[T][R.oldIndex]});if(b!=null)for(T=0;T<b.length;T+=1)t.data.agg.results.group[T]=[],k.each(g,function(R,I){t.data.agg.results.group[T][I]=b[T][R.oldIndex]});break;case"horizontal":if(t.data.data=[],y!=null&&(t.data.colVals=[]),E!=null&&(t.data.agg.results.cell=[]),w!=null&&(t.data.agg.results.pivot=[]),k.each(g,function(R,I){if(t.data.colVals[I]=y[R.oldIndex],y!=null)for(var P=0;P<t.data.rowVals.length;P+=1)t.data.data[P]===void 0&&(t.data.data[P]=[]),t.data.data[P][I]=h[P][R.oldIndex]}),E!=null)for(T=0;T<E.length;T+=1)for(t.data.agg.results.cell[T]=new Array(t.data.rowVals.length),x=0;x<t.data.rowVals.length;x+=1)t.data.agg.results.cell[T][x]=new Array(t.data.colVals.length),k.each(g,function(R,I){t.data.agg.results.cell[T][x][I]=E[T][x][R.oldIndex]});if(w!=null)for(T=0;T<w.length;T+=1)t.data.agg.results.pivot[T]=new Array(t.data.colVals.length),k.each(g,function(R,I){t.data.agg.results.pivot[T][I]=w[T][R.oldIndex]});break}}},l=function(m,g){return function(h){return typeof m=="function"?m(h):t.data.data=h,g(!0)}},c=function(m,g){var h,v,y=me(t,"sortSpec",m),E="mergeSort",b,w,T;if(y==null)return g(!0);if(y=it(y),t.data.isPlain){if(m==="horizontal")return de.error("Unable to sort: cannot perform horizontal sort on plain data"),g(!1);y.field&&(y.values?E="pigeonHole":h=t.typeInfo.get(y.field),v=function(P){return t.data.data[P].rowData[y.field].value})}else if(t.data.isGroup){if(m==="horizontal")return de.error("Unable to sort: cannot perform horizontal sort on grouped data"),g(!1);if(y.field!=null&&(T=t.data.groupFields.indexOf(y.field),T<0?de.error('Unable to sort: `field` property does not refer to a grouped field {field = "%s", groupFields = %s}',y.field,t.data.groupFields):y.groupFieldIndex=T),y.groupFieldIndex!=null){if(y.groupFieldIndex<0||y.groupFieldIndex>=t.data.groupFields.length)return de.error("Unable to sort: groupFieldIndex out of range {spec = %O, range = [0,%d]}",y,t.data.groupFields.length),g(!1);y.values?E="pigeonHole":t.data.groupSpec[y.groupFieldIndex].fun!=null?h={type:dt.get(t.data.groupSpec[y.groupFieldIndex].fun).sortType}:h=t.typeInfo.get(t.data.groupFields[y.groupFieldIndex]),v=function(P){return t.data.rowVals[P][y.groupFieldIndex]}}else if(y.aggType==="group"&&y.aggNum!=null){if(y.aggNum<0||y.aggNum>=i.group.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",y,i.group.length),g(!1);h=i.group[y.aggNum].instance.getType(),v=function(P){return t.data.agg.results.group[y.aggNum][P]}}}else if(t.data.isPivot){if(y.field!=null)switch(m){case"vertical":T=t.data.groupFields.indexOf(y.field),T<0?de.error('Unable to sort: `field` property does not refer to a grouped field {field = "%s", groupFields = %s}',y.field,t.data.groupFields):y.groupFieldIndex=T;break;case"horizontal":var x=t.data.pivotFields.indexOf(y.field);x<0?de.error('Unable to sort: `field` property does not refer to a pivotted field {field = "%s", pivotFields = %s}',y.field,t.data.pivotFields):y.pivotFieldIndex=x;break}if(y.groupFieldIndex!=null){if(y.groupFieldIndex<0||y.groupFieldIndex>=t.data.groupFields.length)return de.error("Unable to sort: groupFieldIndex out of range {spec = %O, range = [0,%d]}",y,t.data.groupFields.length),g(!1);y.values?E="pigeonHole":t.data.groupSpec[y.groupFieldIndex].fun!=null?h={type:dt.get(t.data.groupSpec[y.groupFieldIndex].fun).sortType}:h=t.typeInfo.get(t.data.groupFields[y.groupFieldIndex]),v=function(P){return t.data.rowVals[P][y.groupFieldIndex]}}else if((y.rowVal||y.rowValIndex!=null)&&y.aggNum!=null){if(y.rowVal){for(y.rowValIndex=-1,b=0;b<t.data.rowVals.length;b+=1)if(k.isEqual(t.data.rowVals[b],y.rowVal)){y.rowValIndex=b;break}if(y.rowValIndex===-1)return de.error("Unable to sort: invalid rowVal {spec = %O}",y),g(!1)}if(y.rowValIndex<0||y.rowValIndex>=t.data.rowVals.length)return de.error("Unable to sort: rowValIndex out of range {spec = %O, range = [0,%d]}",y,t.data.rowVals.length),g(!1);if(y.aggNum<0||y.aggNum>=i.cell.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",y,i.cell.length),g(!1);h=i.cell[y.aggNum].instance.getType(),v=function(P){return t.data.agg.results.cell[y.aggNum][y.rowValIndex][P]}}else if(y.pivotFieldIndex!=null){if(y.pivotFieldIndex<0||y.pivotFieldIndex>=t.data.pivotFields.length)return de.error("Unable to sort: pivotFieldIndex out of range {spec = %O, range = [0,%d]}",y,t.data.pivotFields.length),g(!1);y.values?E="pigeonHole":t.data.pivotSpec[y.pivotFieldIndex].fun!=null?h={type:dt.get(t.data.pivotSpec[y.pivotFieldIndex].fun).sortType}:h=t.typeInfo.get(t.data.pivotFields[y.pivotFieldIndex]),v=function(P){return t.data.colVals[P][y.pivotFieldIndex]}}else if((y.colVal||y.colValIndex!=null)&&y.aggNum!=null){if(y.colVal){for(y.colValIndex=-1,w=0;w<t.data.colVals.length;w+=1)if(k.isEqual(t.data.colVals[w],y.colVal)){y.colValIndex=w;break}if(y.colValIndex===-1)return de.error("Unable to sort: invalid colVal {spec = %O}",y),g(!1)}if(y.colValIndex<0||y.colValIndex>=t.data.colVals.length)return de.error("Unable to sort: colValIndex out of range {spec = %O, range = [0,%d]}",y,t.data.colVals.length),g(!1);if(y.aggNum<0||y.aggNum>=i.cell.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",y,i.cell.length),g(!1);h=i.cell[y.aggNum].instance.getType(),v=function(P){return t.data.agg.results.cell[y.aggNum][P][y.colValIndex]}}else if(y.aggType==="pivot"&&y.aggNum!=null){if(y.aggNum<0||y.aggNum>=i.pivot.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",y,i.pivot.length),g(!1);h=i.pivot[y.aggNum].instance.getType(),v=function(P){return t.data.agg.results.pivot[y.aggNum][P]}}else if(y.aggType==="group"&&y.aggNum!=null){if(y.aggNum<0||y.aggNum>=i.group.length)return de.error("Unable to sort: aggNum out of range {spec = %O, range = [0,%d]}",y,i.group.length),g(!1);h=i.group[y.aggNum].instance.getType(),v=function(P){return t.data.agg.results.group[y.aggNum][P]}}else return de.error("Invalid sort spec for pivotted data: "+JSON.stringify(y)),g(!1)}var D,O;if(E==="mergeSort"){if(D=r(y,h),D==null)return g(!1);O=function(P,M){if(y.dir.toUpperCase()==="ASC")return D(P.sortSource,M.sortSource)<=0;if(y.dir.toUpperCase()==="DESC")return D(P.sortSource,M.sortSource)>0;throw new Error('Invalid sort spec: `dir` must be either "ASC" or "DESC"')}}var R=s(y,m,v);if(R==null)return g(!1);var I=l(a(m),g);switch(t.debug("SORT","Performing sort using %s algorithm",E),E){case"mergeSort":return ld(R,O,I,t.sortProgress&&t.sortProgress.update);case"pigeonHole":return ud(R,y.values,I);default:throw new Error("Internal Error: Invalid sort algorithm: "+E)}},u=function(){t.fire("sortBegin"),t.timing.start(n),t.sortProgress&&typeof t.sortProgress.begin=="function"&&t.sortProgress.begin()},f=function(m){return t.sortProgress&&typeof t.sortProgress.end=="function"&&t.sortProgress.end(),t.timing.stop(n),t.fire("sortEnd"),e(m)};u(),c("horizontal",function(m){if(!m)return f(!1);c("vertical",function(g){return f(g)})})};je.prototype.setFilter=function(e,t,n){var i=this,r=Array.prototype.slice.call(arguments),s=!1;return n=it(n)||{},i.lock.isLocked()?i.lock.onUnlock(function(){i.setFilter.apply(i,r)},"Waiting to set filter: "+JSON.stringify(e)):(n=Qe(n,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),i.debug("SET FILTER","spec = %O ; options = %O",e,n),s=!k.isEqual(i.filterSpec,e),i.filterSpec!=null&&e==null&&(i.wasPreviouslyFiltered=!0),i.filterSpec=e,i.filterProgress=t,i.super.setFilter(e,n),s&&i.prefs!=null&&n.savePrefs&&i.prefs.save(),i.clearCache(),n.updateData&&i.getData(),!0)};je.prototype.getFilter=function(){var e=this;return e.filterSpec};je.prototype.clearFilter=function(e){this.setFilter(null,null,e)};je.prototype.isFiltered=function(){return this.filterSpec!=null};je.prototype.filter=function(e){var t=this,n=['Data Source "'+t.source.name+'" : '+t.name,"Filtering"],i=le(me(window,"MIE","WC_DataVis","CURRENT_DATE"));if(t.filterSpec==null)if(t.wasPreviouslyFiltered)t.wasPreviouslyFiltered=!1;else return e(!1,t.data.data);k.each(t.filterSpec,function(f,m){var g=t.typeInfo.get(m);if(g===void 0){de.error('Filter field "'+m+'" does not exist in the source'),t.fire("invalidFilterField",null,m),delete t.filterSpec[m];return}if(g.type===void 0){de.error('Unable to filter field "'+m+'", type is unknown'),t.fire("invalidFilterField",null,m),delete t.filterSpec[m];return}["date","datetime"].indexOf(g.type)>=0&&g.internalType==="moment"&&k.each(f,function(h,v){typeof h=="string"&&(f[v]=le(h))}),Ke.decodeAll(t.data.dataByRowId,g.field,t.typeInfo)});function r(f,m,g){var h=t.typeInfo.get(m),v=g[m].value;if(v===void 0)return en.warn("VIEW ("+t.name+") // FILTER","Attempted to filter by non-existent column: "+m),!1;var y=le.isMoment(v);bt.isNumeral(v);var E=typeof v=="string",b=typeof v=="number",w={},T=ur.byType(h.type);w.$eq=function(B){return T(v,B)===0},w.$ne=function(B){return!w.$eq(B)},w.$contains=function(B){return E&&v.indexOf(B.toString().toLowerCase())>=0||b&&!1},w.$notcontains=function(B){return!w.$notcontains(B)},w.$gt=function(B){return T(v,B)>0},w.$gte=function(B){return w.$gt(B)||w.$eq(B)},w.$lt=function(B){return T(v,B)<0},w.$lte=function(B){return w.$lt(B)||w.$eq(B)},w.$exists=function(B){return B?v!=null&&(E?v!=="":!0):v==null||(E?v==="":!1)},w.$notexists=function(B){return!w.$exists(B)},k.isArray(f)?f={$in:f}:k.isObject(f)||(f={$eq:f});for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var D=f[x];if(w[x]!==void 0){if(k.isArray(D)){if(k.every(D,w[x])===!1)return!1}else if(w[x](D)===!1)return!1}else switch(x){case"$in":if(!k.isArray(D))throw new Error('Invalid filter spec, operator "$in" for column "'+m+'" requires array value');if(k.map(D,function(B){return B.toString().toLowerCase()}).indexOf(v.toString().toLowerCase())<0)return!1;break;case"$nin":if(!k.isArray(D))throw new Error('Invalid filter spec, operator "$nin" for column "'+m+'" requires array value');if(k.map(D,function(B){return B.toString().toLowerCase()}).indexOf(v.toString().toLowerCase())>=0)return!1;break;case"$every":var O=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],R=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"];if(h.type!=="date"&&h.type!=="datetime")return console.error('Invalid operator "$every" for field "'+m+'" of type "'+h.type+'"'),!1;var I=O.indexOf(D),P=R.indexOf(D),M=E?le(v):y?v:null;return M==null?(console.error('Operator "$every" cannot be applied to data in field "'+m+'" of type "'+h.type+'" and internal type "'+h.internalType+'"'),!1):I>=0?M.day()===I:P>=0?M.month()===P:(console.error('Invalid "$every" operand "'+D+'" for field "'+m+'"'),!1);case"$this":if(h.type!=="date"&&h.type!=="datetime")return console.error('Invalid operator "$this" for field "'+m+'" of type "'+h.type+'"'),!1;var M=E?le(v):y?v:null;if(M==null)return console.error('Operator "$this" cannot be applied to data in field "'+m+'" of type "'+h.type+'" and internal type "'+h.internalType+'"'),!1;switch(D){case"DATE":return M.format("YYYY-MM-DD")===i.format("YYYY-MM-DD");case"WEEK":return M.format("YYYY-WW")===i.format("YYYY-WW");case"MONTH":return M.format("YYYY-MM")===i.format("YYYY-MM");case"QUARTER":return M.format("YYYY-Q")===i.format("YYYY-Q");case"YEAR":return M.format("YYYY")===i.format("YYYY");default:return console.error('Invalid "$this" operand "'+D+'" for field "'+m+'"'),!1}case"$last":if(h.type!=="date"&&h.type!=="datetime")return console.error('Invalid operator "$last" for field "'+m+'" of type "'+h.type+'"'),!1;var M=E?le(v):y?v:null;if(M==null)return console.error('Operator "$last" cannot be applied to data in field "'+m+'" of type "'+h.type+'" and internal type "'+h.internalType+'"'),!1;switch(D){case"DATE":return M.format("YYYY-MM-DD")===i.clone().subtract(1,"days").format("YYYY-MM-DD");case"WEEK":return M.format("YYYY-WW")===i.clone().subtract(1,"weeks").format("YYYY-WW");case"MONTH":return M.format("YYYY-MM")===i.clone().subtract(1,"months").format("YYYY-MM");case"QUARTER":return M.format("YYYY-Q")===i.clone().subtract(1,"quarters").format("YYYY-Q");case"YEAR":return M.format("YYYY")===i.clone().subtract(1,"years").format("YYYY");default:return console.error('Invalid "$last" operand "'+D+'" for field "'+m+'"'),!1}default:throw new Error('Invalid operator "'+x+'" for column "'+m+'"')}}return!0}function s(f){var m=t.filterSpec==null?!0:rd(t.filterSpec,r,!1,f.rowData);return t.fire("filter",{silent:!0},f.rowNum,!m),m}var a={val:0},l=t.filterProgress?100:t.data.data.length,c=[],u=function(){var f;for(f=a.val;f<t.data.data.length&&f<a.val+l;f+=1)s(t.data.data[f])&&c.push(t.data.data[f]);return f<t.data.data.length?(a.val=f,t.filterProgress&&typeof t.filterProgress.update=="function"&&t.filterProgress.update(f,t.data.data.length),Ul("ComputedView#filter"),window.setTimeout(u)):(t.filterProgress&&typeof t.filterProgress.end=="function"&&t.filterProgress.end(),t.fire("filterEnd"),t.timing.stop(n),e(!0,c))};return t.timing.start(n),t.filterProgress&&typeof t.filterProgress.begin=="function"&&t.filterProgress.begin(),t.fire("filterBegin"),u()};je.prototype.setGroup=function(e,t,n){var i=this,r=Array.prototype.slice.call(arguments),s=!1;if(i.lock.isLocked())return i.lock.onUnlock(function(){i.setGroup.apply(i,r)},"Waiting to set group: "+JSON.stringify(e));if(t=Qe(t,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),i.debug("SET GROUP","spec = %O",e),e==null&&i.pivotSpec!=null&&(de.warn("VIEW ("+i.name+") // SET GROUP","Having a pivot without a group is not allowed"),i.clearPivot(t)),e!=null){k.isArray(e.fieldNames)||(de.warn("VIEW ("+i.name+") // SET GROUP","`spec.fieldNames` is not an array"),e.fieldNames=[]);for(var a=0;a<e.fieldNames.length;a+=1)typeof e.fieldNames[a]=="string"&&(e.fieldNames[a]={field:e.fieldNames[a]})}return s=!k.isEqual(i.groupSpec,e),i.super.setGroup(e,t),s&&i.prefs!=null&&t.savePrefs&&i.prefs.save(),i.clearCache(),t.updateData&&i.getData(),!0};je.prototype.getGroup=function(){var e=this;return e.groupSpec};je.prototype.clearGroup=function(e){return this.setGroup(null,e)};je.prototype.group=function(){var e=this,t=[],n,i;if(e.groupSpec==null)return!1;if(e.typeInfo==null)return de.error("Source type information is missing"),!1;if(k.each(e.groupSpec.fieldNames,function(u){var f=e.typeInfo.get(u.field);f==null?(de.error("Group field does not exist in the source: "+u.field),e.fire("invalidGroupField",null,u.field)):f.type==null?de.error('Unable to group by field "%s": type is undefined'):(Ke.decodeAll(e.data.dataByRowId,f.field,e.typeInfo),t.push(u))}),t.length===0)return!1;for(var r=[],s=function(u){var f=[],m,g,h,v,y,E,b,w,T,x;for(h=0;h<e.data.data.length;h+=1){for(g=e.data.data[h],m=[],y=0;y<t.length;y+=1)v=t[y],E=g.rowData[v.field],b=E.value,v.fun==null?(w=hn(b),r[y][w]=b):(T=dt.get(v.fun),x=T.applyValueFun(b,e.typeInfo.get(v.field)),w=hn(x),r[y][w]=x),m[y]=w,st(w,E,"natRep","group",y);k.findIndex(f,function(O){return ni(m,O)})===-1&&f.push(m)}if(u!=null)for(var D=0;D<u.length;D+=1){if(m=u[D],m.length!=t.length){de.error("Unable to add rowVal %s when grouping by %s: the lengths must be the same",JSON.stringify(m),JSON.stringify(t));continue}for(y=0;y<m.length;y+=1)b=m[y],w=hn(b),r[y][w]=b,m[y]=w;k.findIndex(f,function(O){return ni(m,O)})===-1&&f.push(m)}return f.sort(function(O,R){return Ur(O,R)}),f},a=function(u,f){var m,g,h,v,y,E,b,w=new Array(f.length),T={lookup:{byRowNum:new Array(u.length),byRowValIndex:new Array(f.length),byId:[]}};for(g=0;g<f.length;g+=1)m=f[g],h={rowValIndex:g,rowValElt:m[m.length-1],parent:null,numRows:0,rows:[]},w[g]=h.rows,st(h,T,"children",fs(m,"children")),T.lookup.byRowValIndex[g]=h;for(y=0;y<u.length;y+=1){for(v=u[y],m=new Array(t.length),b=0;b<t.length;b+=1)E=t[b],m[b]=v.rowData[E.field].natRep.group[b];h=me(T,"children",fs(m,"children")),T.lookup.byRowNum[v.rowNum]=h,h.rows.push(v)}var x=0,D=function(O,R){O.id=x++,O.numRows=0,T.lookup.byId[O.id]=O,O.children==null?O.rows!=null&&(O.numRows=O.rows.length):(O.numChildren=k.keys(O.children).length,O.rows=[],k.each(O.children,function(I){I.parent=O,D(I,R+1),O.numRows+=I.numRows,O.rows=O.rows.concat(I.rows)}),R>0&&(O.rowValIndex=O.children[k.keys(O.children)[0]].rowValIndex,O.rowValElt=f[O.rowValIndex][R-1])),R>0&&(O.groupFieldIndex=R-1,O.groupField=t[O.groupFieldIndex].field,O.groupSpec=t[O.groupFieldIndex],O.rows!=null&&O.rows.length>0&&(O.rowValCell=O.rows[0].rowData[O.groupField]))};return D(T,0),{data:w,metadata:T}},l=function(u){for(var f=[],m=0;m<u.length;m+=1){var g=u[m];f[m]=[];for(var h=0;h<t.length;h+=1)f[m][h]=r[h][g[h]]}return f},c=0;c<t.length;c+=1)r[c]={};return i=s(e.groupSpec.addRowVals),n=a(e.data.data,i),i=l(i),e.debug("GROUP","Group Spec: %O",t),e.debug("GROUP","Row Vals: %O",i),e.debug("GROUP","New Data: %O",n.data),e.data.isPlain=!1,e.data.isGroup=!0,e.data.groupFields=k.pluck(t,"field"),e.data.groupSpec=t,e.data.rowVals=i,e.data.data=n.data,e.data.groupMetadata=n.metadata,e.debug("GROUP","Final Data: %O",e.data),!0};je.prototype.setPivot=function(e,t){var n=this,i=Array.prototype.slice.call(arguments),r=!1;if(n.lock.isLocked())return n.lock.onUnlock(function(){n.setPivot.apply(n,i)},"Waiting to set pivot: "+JSON.stringify(e));if(t=Qe(t,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),n.debug("SET PIVOT","spec = %O",e),n.groupSpec==null&&e!=null)return de.warn("VIEW ("+n.name+") // SET PIVOT","Having a pivot without a group is not allowed"),n.clearPivot(t),!1;if(e!=null){k.isArray(e.fieldNames)||(de.warn("VIEW ("+n.name+") // SET PIVOT","`spec.fieldNames` is not an array"),e.fieldNames=[]);for(var s=0;s<e.fieldNames.length;s+=1)typeof e.fieldNames[s]=="string"&&(e.fieldNames[s]={field:e.fieldNames[s]})}if(r=!k.isEqual(n.pivotSpec,e),n.super.setPivot(e,t),r){if(n.pivotSpec==null||n.pivotSpec.fieldNames.length===0){var a=n.getSort();a!=null&&a.horizontal!=null&&(delete a.horizontal,de.warn("VIEW ("+n.name+") // SET PIVOT","Removing horizontal sort configuration since pivot was cleared"),n.setSort(a,{updateData:!1}))}n.prefs!=null&&t.savePrefs&&n.prefs.save()}return n.clearCache(),t.updateData&&n.getData(),!0};je.prototype.getPivot=function(){var e=this;return e.pivotSpec};je.prototype.clearPivot=function(e){return this.setPivot(null,e)};je.prototype.pivot_orig=function(){var e=this,t=[],n,i;if(!e.data.isGroup||e.pivotSpec==null)return!1;if(e.typeInfo==null)return de.error("Source type information is missing"),!1;if(k.each(e.pivotSpec.fieldNames,function(l,c){e.typeInfo.isSet(l)?t.push(l):(de.error("Pivot field does not exist in the source: "+l),e.fire("invalidPivotField",null,l))}),t.length===0)return!1;var r=function(l){var c={};return k.each(e.data.data,function(u){(function f(m,g,h){var v=nd(m),y={};k.each(g,function(E){var b=E.rowData[v].orig||E.rowData[v].value;h[b]===void 0&&(h[b]=m.length>1?{}:!0),y[b]===void 0&&(y[b]=[]),y[b].push(E)}),m.length>1&&k.each(y,function(E,b){f(id(m),E,h[b])})})(l,u,c)}),c},s=function(l){var c=[];return function u(f,m,g){m===e.pivotSpec.fieldNames.length?k.each(k.keys(f).sort(),function(h){c.push(g.concat([h]))}):k.each(f,function(h,v){u(h,m+1,g.concat([v]))})}(l,1,[]),c},a=function(l){var c=[];return k.each(l,function(u,f){var m=[];k.each(i,function(g){var h=[];k.each(u,function(v){k.every(g,function(y,E){var b=t[E],w=v.rowData[b].value,T=hn(w);return y===T})&&h.push(v)}),m.push(h)}),c.push(m)}),c};return n=r(t),i=s(n),e.data.data=a(e.data.data),e.debug("PIVOT","Pivot Fields: %O",t),e.debug("PIVOT","Col Vals Tree: %O",n),e.debug("PIVOT","Col Vals: %O",i),e.debug("PIVOT","New Data: %O",e.data),e.data.isPlain=!1,e.data.isGroup=!1,e.data.isPivot=!0,e.data.pivotFields=t,e.data.colVals=i,!0};je.prototype.pivot=function(){var e=this,t=[],n,i;if(!e.data.isGroup||e.pivotSpec==null)return!1;if(e.typeInfo==null)return de.error("Source type information is missing"),!1;if(k.each(e.pivotSpec.fieldNames,function(u){var f=e.typeInfo.get(u.field);f==null?(de.error("Pivot field does not exist in the source: "+u.field),e.fire("invalidPivotField",null,u.field)):f.type==null?de.error('Unable to pivot by field "%s": type is undefined'):(Ke.decodeAll(e.data.dataByRowId,f.field,e.typeInfo),t.push(u))}),t.length===0)return!1;for(var r=[],s=function(u){var f,m,g,h,v,y,E,b,w,T,x,D=[];for(E=0;E<e.data.data.length;E+=1)for(b=e.data.data[E],T=0;T<b.length;T+=1){for(w=b[T],f=[],m=0;m<t.length;m+=1)g=t[m],h=w.rowData[g.field].value,g.fun==null?(v=hn(h),r[m][v]=h):(y=dt.get(g.fun),v=y.applyValueFun(h,e.typeInfo.get(g.field)),r[m][v]=v),st(v,w.rowData[g.field],"natRep","pivot",m),f[m]=v;k.findIndex(D,function(O){return ni(f,O)})===-1&&D.push(f)}if(u!=null)for(x=0;x<u.length;x+=1){if(f=u[x],f.length!=t.length){de.error("Unable to add colVal %s when pivotting by %s: the lengths must be the same",JSON.stringify(f),JSON.stringify(t));continue}for(m=0;m<f.length;m+=1)h=f[m],v=hn(h),r[m][v]=h,f[m]=v;k.findIndex(D,function(O){return ni(f,O)})===-1&&D.push(f)}return D.sort(function(O,R){return Ur(O,R)}),D},a=function(u){var f=[];return k.each(u,function(m,g){var h=[];k.each(n,function(v){var y=[];k.each(m,function(E){k.every(v,function(b,w){var T=t[w];return b===E.rowData[T.field].natRep.pivot[w]})&&y.push(E)}),h.push(y)}),f.push(h)}),f},l=function(u){for(var f=[],m=0;m<u.length;m+=1){var g=u[m];f[m]=[];for(var h=0;h<t.length;h+=1)f[m][h]=r[h][g[h]]}return f},c=0;c<t.length;c+=1)r[c]={};return n=s(e.pivotSpec.addColVals),i=a(e.data.data),n=l(n),e.debug("PIVOT","Pivot Spec: %O",t),e.debug("PIVOT","Orig Keys: %O",r),e.debug("PIVOT","Col Vals: %O",n),e.debug("PIVOT","New Data: %O",i),e.data.isPlain=!1,e.data.isGroup=!1,e.data.isPivot=!0,e.data.pivotFields=k.pluck(t,"field"),e.data.pivotSpec=t,e.data.colVals=n,e.data.data=i,e.debug("GROUP","Final Data: %O",e.data),!0};je.prototype.setAggregate=function(e,t){var n=this,i=Array.prototype.slice.call(arguments),r=!1,s={group:[],pivot:[]};return n.lock.isLocked()?n.lock.onUnlock(function(){n.setAggregate.apply(n,i)},"Waiting to set aggregate: "+JSON.stringify(e)):(t=Qe(t,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0}),n.debug("SET AGGREGATE","spec = %O ; options = %O",e,t),r=!k.isEqual(n.aggregateSpec,e),e==null?n.super.setAggregate(null,t):(k.each(e,function(a,l){a=k.filter(a,function(c){var u=Ut.get(c.fun);return u==null?(de.error('Ignoring aggregate "'+c.fun+'" because no such aggregate function exists'),!1):((l==="group"||l==="pivot")&&c.shouldGraph&&s[l].push(c),!0)}),e[l]=a}),n.super.setAggregate(it(e),t)),r&&n.prefs!=null&&t.savePrefs&&n.prefs.save(),n.clearCache(),t.updateData&&n.getData(),!0)};je.prototype.getAggregate=function(){var e=this;return e.aggregateSpec};je.prototype.clearAggregate=function(e){var t=this;return t.setAggregate(Yn(["group","pivot","cell","all"],[[{fun:"count"}]]),e)};je.prototype.aggregate=function(e){var t=this;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");if(!(t.aggregateSpec&&(t.data.isGroup||t.data.isPivot)))return e(!1);k.each(["group","pivot","cell","all"],function(l){t.debug("AGGREGATE","Computing %s aggregate functions: %s",l,k.pluck(me(t,"aggregateSpec",l),"fun").join(", "))});var n=[],i=[],r=[],s=[],a={group:[],pivot:[],cell:[],all:[]};k.each(["group","pivot","cell","all"],function(l){k.each(t.aggregateSpec[l],function(c,u){try{a[l][u]=new Yi(l,c,u,t.colConfig,t.typeInfo,function(f){Ke.decodeAll(t.data.dataByRowId,f,t.typeInfo)})}catch(f){de.error("Invalid Aggregate: "+l+"["+u+"] - "+f.message),a[l][u]=null,t.fire("invalidAggregate",null,u,f.message)}}),a[l]=k.without(a[l],null)}),k.each(t.data.rowVals,function(l,c){k.each(a.group,function(u,f){n[f]===void 0&&(n[f]=[]);var m=u.instance.calculate(k.flatten(t.data.data[c]));n[f][c]=m,u.debug&&t.debug("AGGREGATE","Group aggregate [%d] (%s) : Group [%s] = %s",f,a.group[f].instance.name+(a.group[f].name?" -> "+a.group[f].name:""),l.join(", "),Xt(m)?fi(m).innerText:JSON.stringify(m))}),t.data.isPivot&&k.each(a.cell,function(u,f){r[f]===void 0&&(r[f]=[]),r[f][c]=[],k.each(t.data.colVals,function(m,g){var h=u.instance.calculate(t.data.data[c][g]);r[f][c][g]=h,u.debug&&t.debug("AGGREGATE","Cell aggregate [%d] (%s) : Cell [%s ; %s] = %s",f,a.cell[f].instance.name+(a.cell[f].name?" -> "+a.cell[f].name:""),l.join(", "),m.join(", "),Xt(h)?fi(h).innerText:JSON.stringify(h))})})}),t.data.isPivot&&a.pivot&&k.each(a.pivot,function(l,c){i[c]=[],k.each(t.data.colVals,function(u,f){var m=l.instance.calculate(k.flatten(k.pluck(t.data.data,f)));i[c][f]=m,l.debug&&t.debug("AGGREGATE","Pivot aggregate [%d] (%s) : Col Val [%s] = %s",c,a.pivot[c].instance.name+(a.pivot[c].name?" -> "+a.pivot[c].name:""),u.join(", "),Xt(m)?fi(m).innerText:JSON.stringify(m))})}),a.all&&(t.data.isGroup||t.data.isPivot)&&k.each(a.all,function(l,c){var u=l.instance.calculate(k.flatten(t.data.data));s[c]=u,l.debug&&t.debug("AGGREGATE","All aggregate [%d] (%s) = %s",c,a.all[c].instance.name+(a.all[c].name?" -> "+a.all[c].name:""),JSON.stringify(u))}),t.data.agg={info:a,results:{group:n,pivot:i,cell:r,all:s}},e(!0)};je.prototype.getData=function(e,t){var n=this;if(e!=null&&typeof e!="function")throw new Error("Call Error: `cont` must be null or a function");e=e||Ct;var i;if(n.lock.isLocked())return i="Waiting to get data",t!=null&&(i+=": "+t),n.lock.onUnlock(function(){n.getData(e)},i);if(i="Getting data",t!=null&&(i+=": "+t),n.debug(i),n.data!==void 0&&(n.debug(null,"Got cached data: %O",n.data),typeof e=="function"))return e(!0,n.data);var r=function(){return n.lock.unlock(),e(!1)};return n.lock.lock(),n.source.getData(function(s,a){return s?n.getTypeInfo(function(l,c){if(!l)return r();n.fire("workBegin");var u={filter:!1,group:!1,pivot:!1,sort:!1};return n.data={isPlain:!0,isGroup:!1,isPivot:!1,data:[],dataByRowId:[]},k.each(a,function(f,m){n.data.data.push({rowNum:m,rowData:f}),n.data.dataByRowId[m]=f}),n.filter(function(f,m){return u.filter=f,f&&(n.data.data=m),u.group=n.group(),u.pivot=n.pivot(),n.aggregate(function(){return n.sort(function(g){u.sort=g;var h={isPlain:n.data.isPlain,isGroup:n.data.isGroup,isPivot:n.data.isPivot};if(h.numRows=n.getRowCount(),n.isFiltered()&&(h.totalRows=n.getTotalRowCount()),n.data.isGroup&&(h.numGroups=n.data.rowVals.length),n.data.isPivot&&(h.numGroups=n.data.rowVals.length,h.numPivots=n.data.colVals.length),n.lastOps=u,n.fire("workEnd",null,h,u),n.lock.unlock(),n.debug(null,"Got new data: %O",n.data),typeof e=="function")return e(!0,n.data)})})})}):r()})};je.prototype.getTypeInfo=function(e){var t=this;if(typeof e!="function")throw new Error("Call Error: `cont` must be a function");return t.typeInfo!=null?e(!0,t.typeInfo):t.source.getTypeInfo(function(n,i){return n?(t.typeInfo=i,t.fire("getTypeInfo",null,t.typeInfo,t.colConfig),e(!0,t.typeInfo)):e(!1)})};je.prototype.clearCache=function(){var e=this;e.data=void 0,e.typeInfo=void 0,e.debug(null,"Cleared cache")};je.prototype.clearSourceData=function(){var e=this;e.source instanceof Ke?e.source.clearCachedData():e.source instanceof je&&e.source.clearSourceData(),e.debug(null,"Cleared source data")};je.prototype.refresh=function(){var e=this;e.debug(null,"Refreshing..."),e.source.refresh()};je.prototype.reset=function(e){var t=this;e=Qe(e,{sendEvent:!0,dontSendEventTo:[],updateData:!0,savePrefs:!0});var n=jQuery.extend({},e,{updateData:!1});if(t.debug(null,"RESET!"),t.clearSort(n),t.clearFilter(n),t.clearAggregate(n),t.clearPivot(n),t.clearGroup(n),!e.updateData){delete t.lastOps;return}t.getData()};je.prototype.getUniqueVals=function(e){var t=this;return t.source.getUniqueVals(e)};je.prototype.getLastOps=function(){var e=this;return e.lastOps};je.prototype.setColConfig=function(e){var t=this;if(!(e instanceof Ae))throw new Error("Call Error: `colConfig` must be an instance of OrdMap");t.debug(null,"Setting column configuration"),t.colConfig=e};window.MIE=window.MIE||{};window.MIE.log=de;window.MIE.debug=en;window.MIE.OrdMap=Ae;window.MIE.Lock=qt;window.MIE.trans=ae;window.MIE.makeSubclass=Ee;window.MIE.WC_DataVis=window.MIE.WC_DataVis||{};window.MIE.WC_DataVis.Aggregate=Gt;window.MIE.WC_DataVis.ParamInput=nv;window.MIE.WC_DataVis.Source=Ke;window.MIE.WC_DataVis.GroupFunction=mn;window.MIE.WC_DataVis.ComputedView=je;window.MIE.WC_DataVis.MirageView=gn;window.MIE.WC_DataVis.Grid=rt;window.MIE.WC_DataVis.grids={};window.MIE.WC_DataVis.Graph=Mt;window.MIE.WC_DataVis.graphs={};window.MIE.WC_DataVis.Perspective=si;window.MIE.WC_DataVis.Prefs=tt;window.MIE.WC_DataVis.PrefsBackend=qn;window.MIE.WC_DataVis.PrefsModule=gr;window.MIE.WC_DataVis.PrefsModuleGrid=jo;window.MIE.WC_DataVis.EXPORT_URL="export.php";window.MIE.WC_DataVis.AGGREGATE_REGISTRY=Ut;window.MIE.WC_DataVis.GROUP_FUNCTION_REGISTRY=dt;window.MIE.WC_DataVis.PREFS_BACKEND_REGISTRY=Eo;window.MIE.WC_DataVis.PREFS_MODULE_REGISTRY=ar;window.MIE.WC_DataVis.Util=sE});export default rO();
